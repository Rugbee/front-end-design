/*

 Sizzle CSS Selector Engine
 Copyright 2011, The Dojo Foundation
 Released under the MIT, BSD, and GPL Licenses.
 More information: http://sizzlejs.com/

 jQuery JavaScript Library v1.7.2
 http://jquery.com/

 Copyright 2011, John Resig
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license

 Includes Sizzle.js
 http://sizzlejs.com/
 Copyright 2011, The Dojo Foundation
 Released under the MIT, BSD, and GPL Licenses.

 Date: Wed Mar 21 12:46:34 2012 -0700

 jQuery UI 1.8.14

 Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license

 http://docs.jquery.com/UI

 jQuery UI Widget 1.8.14

 Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license

 http://docs.jquery.com/UI/Widget

 jQuery UI Mouse 1.8.14

 Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license

 http://docs.jquery.com/UI/Mouse

 Depends:
 jquery.ui.widget.js
: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 @website: http://www.datejs.com/

 This application uses other third-party javascript components
 distributed under appropriate licenses. For more information,
 see the following files at http://trello.com/js/lib/
 backbone.js
 highcharts.js
 json2.js
 markdown.js
 socket.io.js
 underscore.js
 Socket.IO.js build:0.8.6, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed 
 ! CHANGES FOR TRELLO: Remove all transports other than built-in browser Websockets, try/catch around errors, fix transport merge, fix heartbeat
 ! Diff with published v0.8.6 for the details.
*/
(function(x){function B(c,b){return!b&&!x.load||x.load&&-1!=x.load.indexOf(c)}if(!x.preloading){x.Api={methodMap:{App:["login","search"],BoardSubDoc:["create","update"],Organization:"create,delete,update,removeMember,addAdmin,removeAdmin,addBoard,removeBoard".split(","),OrganizationSubDoc:["create","update"],Board:"create,update,get,actions,setOrganization,removeMember,addAdmin,removeAdmin,clone,getShortLink".split(","),OrganizationInvitation:["create","update","delete"],Card:"create,update,get,delete,actions,getVoterDisplayData,addComment,deleteAction,setDueDate,setChecklistTaskState,attachFile,deleteAttachment,moveToBoard,getShortLink".split(","),
List:["create","update","get"],Checklist:["create","update","addTask"],BoardPreference:["create","update"],CheckItem:["create","update","delete","changeName","convertToCard"],SubDoc:["create","update"],Member:"create,update,get,actions,updatePassword,markNotificationRead,notifications,checkValidators,addToBoard,respondToInvitation,deleteAccount,uploadAvatar,useGravatar,useUploadedAvatar,clearAvatar".split(","),Doc:["create","update"],Api:[],BoardInvitation:["create","update","delete"]}};var s={popover_auto_mentioner:'{{#button}} <input type="text" class="js-filter-mentionables js-autofocus" placeholder="Search members..."> {{/button}} <ul class="pop-over-member-list js-available-members"></ul> {{#button}} <div class="js-select-multiple-options" style="display: none;"> <hr> <ul class="pop-over-list"> <li> <a href="#" class="js-select-all-card-members" style="display: none;"> Mention All Card Members <span class="quiet mem-count"></span> </a> </li> <li> <a href="#" class="js-select-all-board-members" style="display: none;"> Mention All Board Members <span class="quiet mem-count"></span> </a> </li> <li> <a href="#" class="js-select-all-commenters" style="display: none;"> Mention All Commenters <span class="quiet mem-count"></span> </a> </li> </ul> </div> {{/button}} ',
checkitem_inline:' checklist item "{{name}}" ',popover_member_searcher:'{{#showSearch}} <input type="text" class="js-filter-members js-autofocus" placeholder="Search members..."> {{/showSearch}} <ul class="pop-over-member-list checkable js-members-list"></ul> ',header_boards_menu:'<input type="text" class="js-search-boards js-autofocus js-no-touch-autofocus" placeholder="Search your boards..."> <ul class="navigable pop-over-list js-fill-boards" /> <hr> <ul class="pop-over-list"> <li> <a class="js-see-all-boards" href="{{allBoardsUrl}}"> See All Boards </a> </li> <li> <a class="js-add-board" href="#"> New Board </a> </li> <li> <a class="js-view-archive" href="#"> View Closed Boards </a> </li> </ul> ',
entity:'{{#textType}} {{#isContext}} {{^hideIfContext}} {{text}} {{/hideIfContext}} {{/isContext}} {{^isContext}} {{text}} {{/isContext}} {{/textType}} {{#cardType}} {{#isContext}} {{^hideIfContext}} this card {{/hideIfContext}} {{/isContext}} {{^isContext}} <a href="{{url}}" class="inline-object action-card">{{name}}</a> {{/isContext}} {{/cardType}} {{#boardType}} {{#isContext}} this board {{/isContext}} {{^isContext}} <a href="{{url}}" class="inline-object">{{name}}</a> {{/isContext}} {{/boardType}} {{#organizationType}} {{#isContext}} this organization {{/isContext}} {{^isContext}} <a href="{{url}}" class="inline-object">{{name}}</a> {{/isContext}} {{/organizationType}} {{#listType}} {{name}} {{/listType}} {{#checklistType}} {{name}} {{/checklistType}} {{#checkItemType}} {{name}} {{/checkItemType}} {{#commentType}} <div class="action-comment">{{{html}}}</div> {{/commentType}} {{#labelType}} <span class="card-label {{color}}-label" title="{{#text}}{{text}}{{/text}}{{^text}}{{color}} label (default){{/text}}"> {{#text}}{{text}}{{/text}} {{^text}}&nbsp;{{/text}} </span> {{/labelType}} {{#attachmentType}} {{#link}} <a href="{{url}}" target="_blank">{{name}}</a> {{/link}} {{^link}} <span class="attachment-deleted">{{name}}</span> {{/link}} {{/attachmentType}} {{#attachmentPreviewType}} {{#showAttachmentPreview}} {{#canPreview}} {{#isImage}}<img class="attachment-image-preview" src="{{url}}" />{{/isImage}} {{^isImage}}<iframe class="attachment-non-image-preview" src="{{url}}" ></iframe>{{/isImage}} {{/canPreview}} {{/showAttachmentPreview}} {{/attachmentPreviewType}} {{#memberType}} {{#avatarHash}} <img class="inline-member-av" src="{{__avatarDomain}}/{{avatarHash}}/30.png" alt="{{fullName}} ({{username}})" title="{{fullName}} ({{username}})" /> {{/avatarHash}} <span class="bold">{{fullName}}</span> {{/memberType}} ',
popover_switch_archive_section:'<ul class="pop-over-list"> <li> <a class="highlight-icon js-archive-cards" href="#"> Cards {{#section_cards}} <span class="app-icon small-icon check-icon"></span> {{/section_cards}} </a> </li> <li> <a class="highlight-icon js-archive-lists" href="#"> Lists {{#section_lists}} <span class="app-icon small-icon check-icon"></span> {{/section_lists}} </a> </li> </ul> ',popover_confirm_action_delete:'<p> Deleting a comment is <em>forever</em>. There is no undo. </p> <input type="submit" class="primary js-delete-action" value="Yes, Delete"> <input type="submit" class="js-cancel-delete" value="Cancel"> ',
member_invitation:'{{#displayName}}<p class="item-name float-link"><a href="{{url}}">{{displayName}} ({{name}})</a></p>{{/displayName}} {{^displayName}}<p class="item-name float-link"><a href="{{url}}">{{name}}</a></p>{{/displayName}} <div class="options"> <a class="button-link js-accept-invitation" href="#"> Accept </a> <a class="button-link js-reject-invitation" href="#"> Reject </a> </div> ',popover_change_roles:'<ul class="pop-over-list"> <li><a class="js-make-admin highlight-icon">Admin {{#memberIsAdmin}}<span class="app-icon small-icon check-icon"></span>{{/memberIsAdmin}}</a></li> <li><a class="{{#canMakeMember}}highlight-icon js-make-member {{/canMakeMember}}{{^canMakeMember}} disabled{{/canMakeMember}}">Member {{^memberIsAdmin}}<span class="app-icon small-icon check-icon"></span>{{/memberIsAdmin}}</a></li> </ul> {{^isMoreThanOneAdmin}} {{#memberIsAdmin}} <hr> <p class="helper"> There must be at least one admin. </p> {{/memberIsAdmin}} {{/isMoreThanOneAdmin}} ',
manual_shortcuts:'<div class="markeddown"> <div class="shortcut"> <div class="key-modifier"> <a class="key"> @ </a> </div> <h3> Autocomplete Members </h3> <p> When writing a comment, you can type \'@\' plus a member\'s name, username, or intials and get a list of matching members. You can navigate that list with the up and down arrows. Pressing enter or tab with a member selected will mention that user in the comment. The mentioned user will get a notification once submitted. </p> <p> When adding a new card, you can use the same method to assign members to cards before submitting them. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> # </a> </div> <h3> Autocomplete Labels </h3> <p> When adding a new card, you can type \'#\' plus the label\'s color or title and get a list of matching labels. You can use the up and down arrows to navigate the resulting list. Pressing enter or tab will add the label to the composed card. The labels will be added to the card when you submit. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> ^ </a> </div> <h3> Autocomplete Position </h3> <p> When adding a new card, you can type \'^\' plus a list name or position in a list. You can also type \'top\' or \'bottom\' to add to the top or bottom of the current list. You can use the up and down arrows to navigate the resulting list. Pressing enter or tab will automatically change the position of the composed card. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> A </a> </div> <h3> Assign Members </h3> <p> Pressing \'a\' opens a pop-over menu with a list of assigned and unassigned members. Clicking a member\'s avatar will assign or unassign that person. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> &larr; </a> <a class="key"> &uarr; </a> <a class="key"> &darr; </a> <a class="key"> &rarr; </a> </div> <h3> Navigate Cards </h3> <p> Pressing the arrow keys will select adjacent cards on a board. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> B </a> </div> <h3> Open Header Boards Menu </h3> <p> Pressing \'b\' opens the boards menu in the header. You can search for boards and navigate boards with the up and down arrows. Pressing enter with a board selected will open it. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> C </a> </div> <h3> Archive Card </h3> <p> Pressing \'c\' will archive a card. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> D </a> </div> <h3> Due Date </h3> <p> Pressing \'d\' will open the due date picker for a card. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> ESC </a> </div> <h3> Close Menu / Cancel Editing </h3> <p> Pressing \'esc\' will close an open dialog window or pop-over or cancel edits and comments you are composing. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> ENTER </a> </div> <h3> Open Card / Edit Title </h3> <p> Pressing \'enter\' will open the currently selected card. If the card is open, pressing enter will edit the title. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> F </a> </div> <h3> Open Card Filter Menu </h3> <p> Use \'f\' to open the card filter menu. The search by title input is automatically focused. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> X </a> </div> <h3> Clear All Filters </h3> <p> Use \'x\' to clear all active card filters. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> L </a> </div> <h3> Label </h3> <p> Pressing \'l\' opens a pop-over of the available labels. Clicking a label will add or remove it from the card. </p> <p> Pressing one of the following number keys, will apply or remove that label. </p> <table> <thead> <tr> <th>Key</th> <th>Label Color</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Green</td> </tr> <tr> <td>2</td> <td>Yellow</td> </tr> <tr> <td>3</td> <td>Orange</td> </tr> <tr> <td>4</td> <td>Red</td> </tr> <tr> <td>5</td> <td>Purple</td> </tr> <tr> <td>6</td> <td>Blue</td> </tr> </tbody> </table> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> N </a> </div> <h3> Insert New Card </h3> <p> Pressing \'n\' opens a pop-over that allows you to add a card after the currently selected card. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> &lt; </a> <a class="key"> &gt; </a> </div> <h3> Move Card to Adjacent List </h3> <p> Pressing the left or right angle brackets (&lt; and &gt;) will move a card to the adjacent left or right list. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> SPACE </a> </div> <h3> Assign Self </h3> <p> Pressing \'space\' will assign (or unassign) yourself to a card. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> Q </a> </div> <h3> My Cards Filter </h3> <p> Pressing the \'q\' key toggles the \'self assigned cards\' filter. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> V </a> </div> <h3> Vote </h3> <p> Pressing \'v\' will add (or remove) your vote on a card. </p> </div> <div class="shortcut"> <div class="key-modifier"> <a class="key"> ? </a> </div> <h3> Open Shortcuts Page </h3> <p> Pressing \'?\' will open the shortcuts page. </p> </div> </div> ',
login_popover:'<form action="/authenticate" method="post"> {{#badLogin}} <p class="error">The username or password was incorrect.</p> {{/badLogin}} {{#unconfirmed}} <p class="error">You can\'t sign in until you <a href="/resendValidate">verify your email address</a>.</p> {{/unconfirmed}} <label for="email-login"> Email or username </label> <input type="email" name="user" id="email-login" value="{{email}}" class="js-autofocus" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> <label for="password-login"> Password </label> <input type="password" name="password" id="password-login"> <input type="submit" class="primary wide js-password-login" value="Log In"> <p class="quiet" style="margin-top: 16px;"> <a href="/forgot"><strong>Forgot password?</strong></a> </p> <p class="quiet"> New? <a href="/signup{{#returnUrl}}?returnUrl={{returnUrl}}{{/returnUrl}}"><strong>Create an Account.</strong></a> </p> <input type="hidden" name="returnUrl" value="{{returnUrl}}"> </form> <form action="/authenticate_openid" method="post" style="margin-top: 16px;"> <label> Or log in with: </label> <input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"> <input type="hidden" name="returnUrl" value="{{returnUrl}}"> <input type="hidden" name="mode" value=""> <input type="hidden" name="immediate" value=""> <a class="button with-icon primary google js-google-login" href=""> <span class="social-icon google-icon"></span> Google </a> {{#openidAccount}} <p>It looks like you haven\'t set a password yet. You can do this from the Account page after logging in with your Google Account.</p> {{/openidAccount}} </form> ',
header_info_button:'<a class="header-btn header-about" href="#" title="Information"> <span class="app-icon light manual-icon"></span> <span class="count js-unread-announcements">{{count}}</span> </a> ',error:'{{#notFound}} <div class="big-message"> <p> Not found. </p> {{^__loggedIn}} <p> This page may be private. Try logging in to see if you can view it. <a class="js-real-link" href="/login?returnUrl={{url}}">Log in</a>. </p> {{/__loggedIn}} {{#__loggedIn}} <p> This page may be private. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> {{/__loggedIn}} </div> {{/notFound}} {{#boardNotFound}} <div class="big-message"> <p> Board not found. </p> {{^__loggedIn}} <p> This board may be private. Try logging in to see if you can view it. <a class="js-real-link" href="/login?returnUrl={{url}}">Log in</a>. </p> {{/__loggedIn}} {{#__loggedIn}} <p> This page may be private. If someone gave you this link, they may need to invite you to one of their boards or organizations. </p> {{/__loggedIn}} </div> {{/boardNotFound}} ',
board_menu_item:'<a href="{{url}}" class="clearfix highlight-icon {{#current}}current{{/current}}"> <span class="item-name"> {{name}} {{#orgName}}<span class="sub-name org-name">{{orgName}}</span>{{/orgName}} </span> {{#unreadActionsCount}} <span class="counts"> <span class="count"> <span class="app-icon small-icon activity-icon"></span> <span class="number">{{unreadActionsCount}}</span> </span> </span> {{/unreadActionsCount}} </a> ',checklist_add_menu:'<form> <label for="id-checklist">Title</label> <input class="js-checklist-title js-autofocus" type="text" id="id-checklist" value="Checklist"> <input type="submit" class="primary wide confirm js-add-checklist" value="Add"> </form> ',
popover_insert_card:'<form> <textarea type="text" class="js-card-name js-autofocus" id="card-name"></textarea> <input type="submit" class="primary js-insert-card" value="Add Card"> <input type="submit" class="js-cancel" value="Cancel"> </form> ',popover_add_list:'<form style="position: relative;"> <div style="float: left; width: 180px;"> <label for="list-name">Name</label> <input type="text" class="js-list-name js-autofocus" id="list-name" value="List"> </div> <div href="#" class="button-link setting" style="width: 60px; position: absolute; top: 4px; right: 4px;"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-list-pos"></select> </div> <input type="submit" class="primary wide left clear js-add-list" value="Add"> </form> ',
menu:'<ul class="pop-over-list"> <li><ul class="dynamic-pop-over-list" /></li> {{#menu_cards}} <li><a {{#js_class}}class="{{js_class}}" {{/js_class}} href="{{#url}}{{url}}{{/url}}{{^url}}#{{/url}}">{{name}}</a></li> {{/menu_cards}} </ul> ',cardLink:'<a href="{{url}}"{{#name}} title="{{name}}"{{/name}}>#{{idShort}}</a> ',archived_card_options:'{{#__ed}} <p class="quiet" style="margin-left: 8px;"> <a href="#" class="js-reopen">{{reOpenText}}</a> {{#canDelete}} - <a href="#" class="js-delete">Delete</a> {{/canDelete}} </p> {{/__ed}} ',
archive_item:'<p class="item-name float-link"> {{#url}} <a href="{{url}}">{{name}}</a> {{/url}} {{^url}} <span>{{name}}</span> {{/url}} </p> {{#__ed}} <div class="options"> <a href="#" class="button-link js-reopen"> <span class="app-icon small-icon reopen-icon"></span> {{reOpenText}} </a> {{#canDelete}} <a href="#" class="button-link negate js-delete"> <span class="app-icon small-icon remove-icon"></span> Delete </a> {{/canDelete}} </div> {{/__ed}} ',card_composer_inline:'<div class="list-card js-composer"> <div class="card-labels clearfix"></div> <textarea class="js-card-title">{{title}}</textarea> <div class="list-card-members"></div> </div> <div class="cc-controls clearfix"> <input type="submit" class="primary confirm js-add-card" value="Add"> <a href="#" class="app-icon close-icon dark-hover cancel js-cancel"></a> <a class="cc-opt app-icon dark-hover menu-icon js-cc-menu" href="#"></a> </div> ',
member_detail:'<div class="member-detail-modal" idMember="{{id}}"> <div class="window-header clearfix"> <span class="window-header-icon app-icon member-icon"></span> <div class="member-title" attr="fullName"> <h2 class="window-title"> {{fullName}} {{#username}} <span class="quiet" style="margin-left: 3px">({{username}})</span> {{/username}} </h2> </div> </div> <div class="window-main-col clearfix"></div> <div class="window-sidebar"> <a class="profile-member {{#__ed}}ed js-change-avatar-profile{{/__ed}}" href="#"> {{#avatarHash}} <img class="profile-member-avatar" src="{{__avatarDomain}}/{{avatarHash}}/170.png" alt="{{fullName}}"> {{/avatarHash}} {{^avatarHash}} {{^avatarSource}} <img class="profile-member-avatar" src="https://secure.gravatar.com/avatar/{{gravatarHash}}.jpg?s=170&d=https%3A%2F%2Fd2k1ftgv7pobq7.cloudfront.net%2Fimages%2Fb73bef9dc51e381e27b31fcfcbc871f6%2Fgradient.png&r=PG" alt="{{fullName}}"> <span class="profile-member-initials"> {{initials}} </span> {{/avatarSource}} {{#avatarSource}} <span class="profile-member-initials"> {{initials}} </span> {{/avatarSource}} {{/avatarHash}} <span class="change-av-text"> Change Avatar </span> </a> <ul class="sidebar-nav"> <li> {{#__ed}} <a class="js-member-boards" href="/">Boards</a> {{/__ed}} {{^__ed}} <a class="js-member-boards" href="/{{username}}/boards">Boards</a> {{/__ed}} </li> <li> <a class="js-member-profile" href="/{{username}}">Profile</a> </li> {{#__ed}} <li> <a class="js-member-notifications" href="/{{username}}/notifications">Notifications</a> </li> <li> <a class="js-member-account" href="/{{username}}/account">Account</a> </li> <li> <a class="js-log-out" href="/logout">Log Out</a> </li> {{/__ed}} </ul> </div> </div> ',
popover_card_menu:'<ul class="pop-over-list"> <li> <a class="js-change-card-members" href="#">Members&hellip;</a> </li> <li> <a class="js-edit-labels" href="#">Labels&hellip;</a> </li> <li> <a class="js-move-card" href="#">Move&hellip;</a> </li> <li> <a class="js-due-date" href="#">Due Date&hellip;</a> </li> <li> <a class="js-subscribe highlight-icon" href="#">Subscribe{{#isSubscribed}}d <span class="app-icon small-icon check-icon"></span>{{/isSubscribed}}</a> </li> {{#canVote}} <li> <a class="js-vote highlight-icon" href="#">Vote{{#hasVoted}}d <span class="app-icon small-icon check-icon"></span>{{/hasVoted}}</a> </li> {{/canVote}} <li> <a class="js-close-card" href="#">Archive</a> </li> </ul> ',
card_detail_list:'<p class="inline-block bottom">in list <strong>{{listName}}</strong></p> ',board_widget_menu:'{{#visible}} <li><a class="js-hide" href="#">Hide</a></li> {{/visible}} {{^visible}} <li><a class="js-show" href="#">Show{{#isShowAll}} All{{/isShowAll}}</a></li> {{/visible}} {{^isShowAll}} <li><a class="js-hide-all" href="#">Hide All</a></li> {{/isShowAll}} ',popover_change_set_password:'<form> {{#hasPassword}} <label for="o_password"> Old Password </label> <input id="o_password" type="password" name="oldpassword" value=""> {{/hasPassword}} <label for="password1"> {{#hasPassword}} New {{/hasPassword}} Password </label> <input id="password1" type="password" name="password" value=""> <label for="password2"> {{#hasPassword}} New {{/hasPassword}} Password (again) </label> <input id="password2" type="password" name="password2" value=""> <p id="password-error" class="error"></p> <input type="submit" class="primary js-save-changes" value="Save"> </form> {{^hasPassword}} <hr> <p class="quiet bottom"> You haven\'t set a password yet. You can set a password so you can log onto Trello with just your username or email address. </p> {{/hasPassword}} ',
members_voted:' <div class="list-voters clearfix {{#fewMembers}}compact{{/fewMembers}}"> {{#members}} <div class="voter"> <div class="member no-menu"> {{>member}} </div> {{#fewMembers}} <p class="title"> {{fullName}} <span class="quiet">({{username}})</span> </p> {{/fewMembers}} </div> {{/members}} </div> {{#moreMembers}} <a href="#" class="show-more compact js-more-members-voted"> Show all voters ({{lengthDiff}} more) </a> {{/moreMembers}} {{#canVote}} <hr> <a class="js-{{#voted}}un{{/voted}}vote button vote-button {{#voted}}primary{{/voted}}">Vote{{#voted}}d{{/voted}}</a> {{/canVote}} ',
popover_move_list:'<div class="button-link setting" style="width: 255px; max-width: 255px; margin-bottom: 8px;"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-list-pos"></select> </div> <input type="submit" class="primary wide js-commit-position" value="Move"/> ',announcement:'<div class="announcement {{type}}"> <h6> {{#url}}<a target="_blank" href="{{url}}">{{title}}</a>{{/url}} {{^url}}{{title}}{{/url}} </h6> <div class="content">{{{html}}}</div> <p class="quiet bottom announce-meta"> <a href="#" class="dismiss js-dismiss">{{dismissText}}</a> - <a href="#" class="dismiss js-all">See all announcements</a> </p> </div> <hr> ',
votes:'<a class="badge vote-badge{{#__ed}} js-show-votes clickable{{/__ed}}{{#voted}} voted{{/voted}}" href="#"> <span class="app-icon small-icon vote-icon badge-image"></span>{{#nVotes}}{{nVotes}} vote{{^singleVote}}s {{/singleVote}} {{/nVotes}} {{#voted}} {{^justYourVote}} (with you){{/justYourVote}} {{#justYourVote}} (you){{/justYourVote}} {{/voted}} </a> ',popover_select_members:'<input type="text" class="js-search-mem js-autofocus" placeholder="Search members"/> <ul class="pop-over-member-list checkable js-mem-list"> {{#allMembers}} {{>select_member}} {{/allMembers}} </ul> ',
popover_helper_new_board_vis:"<p class=\"bottom\"> Choosing 'Members' will make the board visible only to those invited to the board. If you select an organization in 'Add to Organization' (if available), choosing 'Organization' will make the board visible to those in the selected organization. Choosing 'Public' will make the board visible to anyone with a link to the board. </p> ",popover_checklist_menu:'<ul class="pop-over-list"> <li><a class="js-delete-checklist" href="#">Delete</a></li> </ul> ',
card_detail_date:'<a class="badge due-date-badge {{#isDueSoon}} due-soon{{/isDueSoon}}{{#isDueNow}} due-now{{/isDueNow}}{{#isDuePast}} due-past{{/isDuePast}}{{#__ed}} clickable{{/__ed}}{{#__ed}} js-change-due-date{{/__ed}}" href="#" title="{{titleDueDate}}"> <span class="app-icon small-icon {{#isDueSoon}} light {{/isDueSoon}} {{#isDueNow}} light {{/isDueNow}} {{#isDuePast}} light {{/isDuePast}} date-icon badge-image"></span>{{dateText}} {{#isDueSoon}} (due soon){{/isDueSoon}} {{#isDueNow}} (due now!){{/isDueNow}} {{#isDuePast}} (past due){{/isDuePast}} </a> ',
org_boards_list:'<div class="window-module"> <div class="bold-list boards-list gutter js-list-boards"></div> </div> {{#isOrgMember}} <div class="window-module"> <a class="button-link gutter js-add-board" href="#"> <span class="app-icon small-icon board-icon"></span> Add Board </a> </div> {{/isOrgMember}} ',member_application:'<div class="details"> <h5> {{#identifier}}{{identifier}}{{/identifier}} {{^identifier}}Unknown Application{{/identifier}} </h5> <p class="quiet"> {{permissions}} </p> <p class="quiet"> Approved: {{dateApproved}}<br> {{#neverExpires}} Never Expires {{/neverExpires}} {{^neverExpires}} Expires: {{dateExpires}} {{/neverExpires}} </p> </div> <input type="button" class="js-revoke" value="Revoke"> ',
popover_filter_pos_results:'<ul class="pop-over-list navigable normal-weight js-pos-results"> {{#keywordList}} <li> <a class="js-select-pos-keyword" name="{{value}}" href="#"><strong>{{natural}}</strong> of list <strong>{{currentListName}}</strong></a> </li> {{/keywordList}} {{#posList}} <li> <a class="js-select-pos-pos" name="{{value}}" href="#"><strong>{{natural}}</strong> in list <strong>{{currentListName}}</strong></a> </li> {{/posList}} {{#listList}} <li> <a class="js-select-pos-list" name="{{id}}" href="#"><strong>{{currentPos}}</strong> {{currentPosPrep}} list <strong>{{name}}</strong></a> </li> {{/listList}} </ul> ',
checklist_inline:' checklist "{{name}}" ',board_menu:'{{#__loggedIn}}<li><a class="js-settings" href="#">Settings</a></li>{{/__loggedIn}} <li><a class="js-members" href="#">Members</a></li> {{#showBoardDetailFunctions}} <li><a class="js-archived-items" href="#">Archived Items</a></li> <li><a class="js-labels" href="#">Labels</a></li> <li><a class="js-activity" href="#">Recent Activity</a></li> {{/showBoardDetailFunctions}} {{#__loggedIn}} {{#__ed}} {{#showBoardDetailFunctions}} <hr> <li><a class="js-add-list" href="#">Add List</a></li> <li><a class="js-board-menu-filter-cards" href="#">Search and Filter Cards</a></li> {{/showBoardDetailFunctions}} {{/__ed}} <hr> <li><a class="js-copy-board" href="#">Copy Board</a></li> {{#pinned}}<li><a class="js-unpin-board" href="#">Unpin from Header Menu</a></li>{{/pinned}} {{^pinned}}<li><a class="js-pin-board" href="#">Pin to Header Menu</a></li>{{/pinned}} <li><a class="js-share" href="#">Share, Print, and Export</a></li> {{#__own}} <li><a class="js-close-board" href="#">Close Board</a></li> {{/__own}} {{/__loggedIn}} ',
manage_members:'{{#canInvite}} <div class="manage-member-search js-search-section"> <input type="text" class="js-search-input js-autofocus" placeholder="{{placeholder}}" style="margin-bottom: 0;"> <div class="spinner small hide js-loading"></div> </div> {{/canInvite}} <div class="manage-member-section hide js-board-members"> <ul class="js-list pop-over-member-list"></ul> </div> {{#canInvite}} <div class="manage-member-section hide js-search-results"> <h4>Results</h4> <ul class="js-list pop-over-member-list"></ul> </div> <div class="manage-member-section hide js-no-results"> <p class="quiet center" style="padding: 16px 4px;">No results</p> </div> <div class="manage-member-section hide js-org-members"> <h4>{{orgName}} Members</h4> <ul class="pop-over-member-list clearfix js-list{{#orgMemsView}} collapsed{{/orgMemsView}}" {{#orgMemsView}}style="margin-bottom: 8px;"{{/orgMemsView}}></ul> <a href="#" class="quiet-button js-add-all-org-members">Add All Organization Members (<span class="js-num-org-mem"></span>)</a> <a href="#" class="quiet-button js-more-org-members hide">View All Members</a> {{^permissionLevel_private}} {{#selfJoin_false}}<a href="#" class="quiet-button js-enable-self-join">Allow Members to Join</a>{{/selfJoin_false}} {{/permissionLevel_private}} </div> <div class="manage-member-section hide js-pending-invites"> <h4>Pending Invites</h4> <div class="js-list"></div> </div> {{/canInvite}} ',
upgrade:'Update available!<br /> {{^stopped}}Trello will automatically update itself by reloading in {{timeInMinutes}} minute{{#plural}}s{{/plural}}.<br />{{/stopped}} {{#stopped}}When you\'re ready&hellip;<br />{{/stopped}} <a class="js-upgrade" href="#">{{^stopped}}Reload now{{/stopped}}{{#stopped}}Okay, NOW reload.{{/stopped}}</a> {{^stopped}}<a class="js-stop-upgrade" href="#">Wait!</a>{{/stopped}} ',manual_about:"<div class=\"markeddown\"> <p> Trello is a collaboration tool that organizes your projects into boards. In one glance, Trello tells you what's being worked on, who's working on what, and where something is in a process. </p> <h2>How it works.</h2> <p> A Trello board is some product or project that is under continuous development, though a board can have a variety of uses and mean different things. Boards are made up of multiple lists. Generally, lists on the left are the start of a workflow and lists on right are the end. Lists contain cards. Cards represent the basic unit of a board, for instance: a new feature, a bug, a story lead, a legal case, a client, research for a paper, a potential employee, or a customer support issue. Cards move from list to list to indicate progression. Board members can add themselves to cards, start conversations on cards, create checklists on cards, and so on. </p> <p> To give you an example, our board consists of five lists ordered left to right: <em>Ideas</em>, <em>Design</em>, <em>Development</em>, <em>Implemented</em>, and <em>Deployed</em>. For us, a card is usually a bug or a feature. A feature card that has finished being designed will be moved from the <em>Design</em> list to the <em>Development</em> list, and so on down the line. When we push bad code, we move cards from <em>Deployed</em> to <em>Development</em>. We sort cards vertically in a list to designate priority, the top being the highest priority. The cards with bad code are usually at the top. One look at the board will tell you where a feature or bug is in the development cycle. </p> <p> That's how we use a board. You'll likely have your own lists, your own concept of a card, and your own workflow. </p> </div> ",
header_account_menu:'<ul class="pop-over-list"> <li> <a class="js-change-name-and-bio" href="#"> Change Name, Initials, or Bio </a> </li> <li> <a class="js-change-avatar" href="#"> Change Avatar </a> </li> <li> <a class="js-change-password" href="#"> {{#hasPassword}}Change Password{{/hasPassword}}{{^hasPassword}}Set Password{{/hasPassword}} </a> </li> <li> <a class="js-change-email-freq" href="#"> Change Notification Email Frequency </a> </li> </ul> <hr> <p class="bottom"> <a class="quiet-button" href="{{memberAccountUrl}}">See all options</a> </p> ',
popover_rename_board:'<form> <label>Name</label> <input type="text" class="js-board-name js-autofocus" value="{{boardName}}"> <input type="submit" class="primary wide js-rename-board" value="Rename"> </form> ',check_item:'<div class="checkbox {{#__ed}}enabled{{/__ed}}">&#x2713;</div> <div class="check_item_text {{#__ed}}editable{{/__ed}}" attr="name"> <p class="current hide-on-edit">{{name}}</p> {{#__ed}} <div class="edit delete convert"> <input type="text" class="field full single-line"></input> </div> <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> {{/__ed}} </div> ',
member_invitation_list:'<div class="window-module invitations"> <div class="window-module-title"> <span class="app-icon invitation-icon window-module-title-icon"></span> <h3>Pending {{model}} Invitations</h3> </div> <div class="bold-list gutter js-list-invitations"> </div> </div> ',board_new:'<form> <div style="margin-bottom: 16px;"> <label>Title</label> <input type="text" name="name" class="non-empty js-autofocus" placeholder="Untitled Board"> </div> <div style="margin-bottom: 12px;"> <div class="clearfix"> <label class="left" style="margin-right: 8px;">Organization</label> {{#canAddToOrgs}} <a href="#" class="app-icon small-icon manual-icon dark-hover js-helper-add-org"></a> {{/canAddToOrgs}} </div> {{^canAddToOrgs}} <p style="margin-bottom: 16px;" class="quiet"> Organizations make sharing and working within a group even easier. It doesn\'t look like you are a member of any organizations. <a href="/org/create">Create an organization?</a> </p> {{/canAddToOrgs}} {{#canAddToOrgs}} <select name="org-id"> <option value="">(none)</option> {{#orgs}} <option value="{{id}}"{{#selectOrg}} selected{{/selectOrg}}>{{displayName}}</option> {{/orgs}} </select> {{/canAddToOrgs}} </div> <div style="margin-bottom: 8px;"> <div class="clearfix"> <label class="left" style="margin-right: 8px;">Visibility</label> <a href="#" class="app-icon small-icon manual-icon dark-hover js-helper-vis"></a> </div> <select name="permissionLevel"> <option value="private"{{#permissionLevel_private}} selected{{/permissionLevel_private}}>Members</option> {{#canAddToOrgs}} <option value="org"{{^hasOrg}} disabled{{/hasOrg}}{{#permissionLevel_org}} selected{{/permissionLevel_org}}>Organization</option> {{/canAddToOrgs}} <option value="public"{{#permissionLevel_public}} selected{{/permissionLevel_public}}>Public</option> </select> </div> {{#isCopyBoard}} <div style="margin-bottom: 16px;"> <input class="left" style="height: 30px; line-height: 30px; margin: 0 8px 0 0;" type="checkbox" id="idKeepCards" name="cards" checked> <label class="left" style="height: 30px; line-height: 30px; font-weight: normal;" for="idKeepCards">Keep Cards</label> </div> {{/isCopyBoard}} <div class="clear"> <input type="submit" class="primary wide js-submit" value="Create Board"> </div> </form> ',
board_activity:'<div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#" title="Close this dialog window.">Close</a> </div> <div class="window-header clearfix"> <span class="window-header-icon app-icon activity-icon" href="#"></span> <div class="window-title"> <h2 class="window-title-text"> Board Activity </h2> </div> </div> <div class="window-main-col"> <div class="list-activity"></div> <a class="show-more js-more-actions" href="#">Load More Activity</a> </div> ',
desktop_notification:'<div class="phenom"> <div class="member"> {{#member}} {{#avatarHash}} <img class="member-avatar" src="{{__avatarDomain}}/{{avatarHash}}/30.png" alt="{{fullName}}" title="{{fullName}}" /> {{/avatarHash}} {{^avatarHash}} {{^avatarSource}} <img class="member-avatar" src="https://secure.gravatar.com/avatar/{{gravatarHash}}.jpg?s=30&d=https%3A%2F%2Fd2k1ftgv7pobq7.cloudfront.net%2Fimages%2Fb73bef9dc51e381e27b31fcfcbc871f6%2Fgradient.png&r=PG" alt="{{fullName}}"> <span class="member-initials">{{initials}}</span> {{/avatarSource}} {{#avatarSource}} <span class="member-initials">{{initials}}</span> {{/avatarSource}} {{/avatarHash}} {{/member}} </div> <div class="phenom-desc"> {{#entities}} {{>entity}} {{/entities}} </div> </div> ',
popover_helper_add_member:"<p class=\"bottom\"> Search for existing users or add email addresses for new users, separating entries with a comma. Clicking one or more users to add them to the invite list, then click the green 'Invite' button to send the invitations. </p> ",board_closed:'<div class="big-message"> <p> {{name}} is closed. </p> </div> ',"menu-base":'<ul class="pop-over-list"> <li><ul class="boards-pop-over-list" /></li> {{{content}}} </ul> ',popover_avatar:'{{#uploadedAvatarHash}} <a class="avatar-option js-use-uploaded-avatar {{#avatarSource_upload}}active{{/avatarSource_upload}}" href="#"> <img class="pic" src="{{__avatarDomain}}/{{uploadedAvatarHash}}/50.png"> <span class="text"> Uploaded Picture <span class="app-icon small-icon check-icon"></span> </span> </a> <hr> {{/uploadedAvatarHash}} <div class="js-grav hide"> <a class="avatar-option js-use-gravatar {{#avatarSource_gravatar}}active{{/avatarSource_gravatar}}" href="#"> <img class="pic" src="https://secure.gravatar.com/avatar/{{gravatarHash}}.jpg?s=50&r=PG&d=404"> <span class="text"> Gravatar <span class="app-icon small-icon check-icon"></span> </span> </a> <hr> </div> <a class="avatar-option js-no-avatar {{#avatarSource_none}}active{{/avatarSource_none}}" href="#"> <span class="pic member"> <span class="member-initials">{{initials}}</span> </span> <span class="text"> Initials (no avatar) <span class="app-icon small-icon check-icon"></span> </span> </a> <hr> <div class="uploader ios-hide" style="margin: 12px 4px 8px;"> <p class="error hide js-file-too-large">Images can not be larger than 10mb.</p> <form class="realfile" action="/api/member/{{id}}" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="method" value="uploadAvatar" /> <input type="hidden" name="format" value="http" /> <input type="file" name="upload" class="js-upload-avatar" style="margin-bottom: 0;" tabindex="-1" /> </form> <a class="button-link fakefile js-fakefile"> <span class="app-icon small-icon member-icon"></span> Upload a {{#uploadedAvatarHash}} new {{/uploadedAvatarHash}} picture </a> </div> ',
sync_error:'You have been disconnected from the Trello Server for too long.<br /> <a href="#" onclick="window.location.reload();">Reload now</a> ',date_picker:'<form class="dpicker-widget clearfix"> <input type="text" class="hide js-fuzzy-dt" placeholder="Fuzzy dates like \'next week\' or \'tomorrow at 7pm\'"> <div class="dt clearfix"> <div class="date"> <p style="margin-bottom: 4px;"> <strong>Date</strong> </p> <input type="text" class="js-dpicker-date-input" placeholder="Enter date"> </div> <div class="time"> <p style="margin-bottom: 4px;"> <strong>Time</strong> </p> <input type="text" class="js-dpicker-time-input" placeholder="Enter time" value="12:00pm"> <select class="js-dpicker-time-select"></select> </div> </div> <div class="pickers"> <div class="js-dpicker-cal"></div> </div> <div class="dpicker-confirm-btns clearfix"> <input type="submit" class="primary wide confirm js-save-edit" value="Save"> {{#hasDueDate}} <a href="#" class="button negate remove-date js-remove-date">Remove</a> {{/hasDueDate}} </div> </form> ',
popover_confirm_close_board:'<p> You can re-open the board by clicking the "Boards" menu from the header, selecting "View Closed Boards", finding the board and clicking "Re-open". </p> <input type="submit" class="js-close-board primary" value="Close Board"> <input type="submit" class="js-cancel" value="Keep Open"> ',member_avatar:'<div class="member"> {{#avatarHash}} <img class="member-avatar" src="{{__avatarDomain}}/{{avatarHash}}/30.png" alt="{{fullName}}"> {{/avatarHash}} {{^avatarHash}} <p class="member-initials">{{initials}}</p> {{/avatarHash}} </div> ',
board_labels_static:'{{#labelNames}} <div class="labels-static"> <p class="card-label green-label"> {{green}} </p> <p class="card-label yellow-label"> {{yellow}} </p> <p class="card-label orange-label"> {{orange}} </p> <p class="card-label red-label"> {{red}} </p> <p class="card-label purple-label"> {{purple}} </p> <p class="card-label blue-label"> {{blue}} </p> </div> {{/labelNames}} ',popover_change_board_org:'<form> <label>Organization</label> <select class="js-org"> <option value="" {{^orgs}}selected{{/orgs}}>(none)</option> {{#orgs}} <option value="{{id}}"{{#select}}selected{{/select}}>{{displayName}}</option> {{/orgs}} </select> <input type="submit" class="js-submit wide primary" value="Change"> </form> ',
member_boards_list:'<div class="window-module"> <div class="window-module-title"> <span class="app-icon window-module-title-icon{{^url}} board-icon{{/url}}{{#url}} org-icon{{/url}}"></span> <h3> {{displayName}} </h3> {{#permissionLevel_public}}<span class="app-icon small-icon public-icon"></span>{{/permissionLevel_public}} {{#permissionLevel_private}}<span class="app-icon small-icon private-icon"></span>{{/permissionLevel_private}} {{#url}}<a style="margin-left: 4px;" class="inline-block quiet js-view-org-profile" href="{{url}}">View Organization Profile</a>{{/url}} </div> {{#empty}}<p class="empty-list">No boards</p>{{/empty}} <ul class="boards-list bold-list gutter js-list-boards"></ul> {{#hasMore}} <a href="#" style="display: block; padding: 8px; margin: 4px 0 8px 40px;" class="quiet gutter js-show-all-org-boards">Show all organization boards</a> {{/hasMore}} </div> {{#showAll}} <div class="window-module"> <div class="window-module-title"> <h3>More boards from {{displayName}}</h3> </div> <ul class="boards-list bold-list gutter js-list-more-boards"></ul> </div> {{/showAll}} {{#isMe}} <div class="window-module"> <a class="button-link gutter js-add-board" href="#"> <span class="app-icon small-icon board-icon"></span> Add Board </a> </div> {{/isMe}} ',
attachment:'<li> <a href="{{url}}" target="_blank">{{name}}</a> {{#size}}<span class="quiet size">{{size}}</span>{{/size}} <p class="meta quiet"> {{#date}}<span class="date" dt="{{date}}"></span>{{/date}} <span> - </span> {{#__ed}}<a href="#" class="js-delete-attachment">Delete</a>{{/__ed}} </p> </li> ',board_labels:'{{#labelNames}} <div class="relative"> <div class="card-label green-label"></div> <input type="text" class="js-label-title" name="green" value="{{green}}" placeholder="No name"> </div> <div class="relative"> <div class="card-label yellow-label"></div> <input type="text" class="js-label-title" name="yellow" value="{{yellow}}" placeholder="No name"> </div> <div class="relative"> <div class="card-label orange-label"></div> <input type="text" class="js-label-title" name="orange" value="{{orange}}" placeholder="No name"> </div> <div class="relative"> <div class="card-label red-label"></div> <input type="text" class="js-label-title" name="red" value="{{red}}" placeholder="No name"> </div> <div class="relative"> <div class="card-label purple-label"></div> <input type="text" class="js-label-title" name="purple" value="{{purple}}" placeholder="No name"> </div> <div class="relative"> <div class="card-label blue-label"></div> <input type="text" class="js-label-title" name="blue" value="{{blue}}" placeholder="No name"> </div> {{/labelNames}} <input type="submit" class="primary wide js-save" value="Save"> ',
member_on_card_menu:'<li><a class="js-show-detail" href="/{{username}}">Profile</a></li> {{#__ed}} <li><a class="js-remove-member">Remove from Card</a></li> {{/__ed}} ',edit_controls:'<div class="edit-controls clearfix"> <input type="submit" class="primary confirm js-save-edit" value="Save"> <a href="#" class="app-icon close-icon dark-hover cancel js-cancel-edit"></a> <a href="#" class="option delete js-delete-item">Delete</a> <a href="#" class="option convert js-convert-item-to-card">Convert to Card</a> </div> ',
popover_signup:'<form action="/authenticate_openid" method="post" class="clearfix" style="margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #bfbfbf;"> <label> Sign up with: </label> <input type="hidden" name="openid_identifier" value="https://www.google.com/accounts/o8/id"> <input type="submit" class="primary js-google-confirm-account" style="margin-top: 4px; width: 100%;" value="Google Account"> <input type="hidden" name="returnUrl" value="{{returnUrl}}"> </form> <form action="/signup" method="post" class="clearfix" style="margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #bfbfbf;"> <h3>Or use email and password</h3> <label for="display-name-create"> Full Name </label> <input type="text" name="fullName" id="display-name-create" value="{{fullName}}"> <div class="js-use-diff-email"> <label for="email-create"> Email </label> <input type="email" name="email" id="email-create" value="{{email}}" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <label for="password-create"> Password </label> <input type="password" name="password" id="password-create"> <input type="hidden" name="returnUrl" value="{{returnUrl}}"> <input type="submit" class="primary js-confirm-email-account" style="width: 100%;" value="Create New Account"> </form> <form> <p class="clear" style="margin-bottom: 0;"> Already have an account? <a href="/login{{#returnUrl}}?returnUrl={{returnUrl}}{{/returnUrl}}"><strong>Log In</strong></a> to accept this invitation. </p> <input type="hidden" name="returnUrl" value="{{returnUrl}}"> </form> ',
board_inline:'<span>the board</span> <a href="{{boardUrl}}" class="inline-object"> {{name}} </a> ',card_detail_subscribe:'<a class="button-link {{#subscribed}}is-on {{/subscribed}} js-{{#subscribed}}un{{/subscribed}}subscribe"> <span class="app-icon small-icon follow-icon"></span> Subscribe <span class="on"><span class="app-icon small-icon light check-icon"></span></span> </a> ',member_account:'<div class="window-module clearfix"> <a class="big-link js-change-name-and-bio" href="#"> <span class="text">Change Name, Initials, or Bio</span> </a> <a class="big-link js-change-email" href="#"> <span class="text">Change Email Address</span> </a> <a class="big-link js-change-avatar" href="#"> <span class="text">Change Avatar</span> </a> <a class="big-link js-change-password" href="#"> <span class="text">{{#hasPassword}}Change {{/hasPassword}}{{^hasPassword}}Set {{/hasPassword}}Password</span> </a> <a class="big-link js-change-email-freq" href="#"> <span class="text">Change Notification Email Frequency</span> </a> </div> <div class="window-module"> <div class="window-module-title"> <h3>Applications</h3> </div> <div class="member-applications"> <div class="spinner loading"></div> </div> </div> <a class="quiet-button gutter js-confirm-delete-member" href="#" style="margin-top: 32px;">Delete your account?</a> ',
list_guide_link:'<p class="list-link"> <strong>{{listName}}</strong><br> <span class="list-link-sub">{{countStr}}</span> </p> ',action:'{{#member}} <div class="member js-show-mem-menu"> {{>member}} </div> {{/member}} {{^member}} <div class="member no-menu"><span class="member-initials quiet">?</span></div> {{/member}} <div class="phenom-desc" {{#type}}actionType="{{type}}"{{/type}}> {{#member}}<a class="inline-object js-show-mem-menu" href="#">{{fullName}}</a>{{/member}} {{^member}}<span class="quiet">[deleted account]</span>{{/member}} {{#entities}} {{>entity}} {{/entities}} {{^hasMoreThanOneChild}} {{#children}} {{#entities}}{{>entity}}{{/entities}} {{/children}} {{/hasMoreThanOneChild}} {{#hasMoreThanOneChild}} <ul> {{#children}} <li>{{#entities}}{{>entity}}{{/entities}}</li> {{/children}} </ul> {{/hasMoreThanOneChild}} </div> <p class="phenom-meta quiet"> {{#date}}<span class="date" dt="{{date}}"></span>{{/date}} {{^date}}<span class="spinner small left" style="margin-right: 4px;"></span> Sending... {{/date}} {{#board}} - on board <a class="bold" href="{{url}}">{{name}}</a> {{#permissionLevel_private}} <span title="This board is private. The board (and board actions) are only visible to members of this board." class="app-icon small-icon private-icon"></span> {{/permissionLevel_private}} {{#permissionLevel_org}} <span title="This board visible to an organization. The board (and board actions) are only visible to members of the organization" class="app-icon small-icon org-private-icon"></span> {{/permissionLevel_org}} {{#permissionLevel_public}} <span title="This board is public. The board (and board actions) are visible to the whole Internet." class="app-icon small-icon public-icon"></span> {{/permissionLevel_public}} {{/board}} {{#organization}} - on organization <a class="bold" href="{{url}}">{{name}}</a> {{#permissionLevel_private}} <span title="This organization is private. The organization (and organization actions) are only visible to members of this organization." class="app-icon small-icon private-icon"></span> {{/permissionLevel_private}} {{#permissionLevel_public}} <span title="This organization is public. The organization (and organization actions) are visible to the whole Internet." class="app-icon small-icon public-icon"></span> {{/permissionLevel_public}} {{/organization}} {{#canDelete}} - <a href="#" class="js-confirm-delete-action">Delete</a> {{/canDelete}} </p> ',
select_member:'<li class="item {{className}}{{#isActive}} active{{/isActive}}{{#isInvitable}} invitable{{/isInvitable}}"> <a href="#" class="name js-select-member" idMember="{{id}}"> <span class="member">{{> member}}</span> <span class="full-name"> {{fullName}} (<span class="username">{{username}}</span>) {{#extraText}}<span class="quiet">({{extraText}})</span>{{/extraText}} </span> <span class="app-icon small-icon check-icon checked-icon"></span> </a> </li> ',invitation:'<div class="phenom invitation"> {{#MemberInviter}} <div class="member no-menu"> {{>member}} </div> {{/MemberInviter}} <div class="phenom-desc"> <p> {{#MemberInviter}} <span class="phenom-author"> {{fullName}} </span> created an invitation to {{/MemberInviter}} <span class="invitee"> {{#MemberInvited}}{{>member_inline}}{{/MemberInvited}} {{^MemberInvited}}{{email}}{{^email}}someone new{{/email}}{{/MemberInvited}} </span> </p> </div> <p class="phenom-meta quiet"> {{#dateExpires}} <span class="expiration-date">Expires <span class="date" dt="{{dateExpires}}"></span></span> {{/dateExpires}} {{#canRemove}} - <a href="#" class="inline-block js-remove-invitation">Delete Invite</a> {{/canRemove}} </p> </div> ',
popover_change_position:'<div class="button-link setting" style="width: 163px; margin-right: 8px;"> <span class="label">List</span> <span class="value js-list-value"></span> <label>List</label> <select class="js-select-list"></select> </div> <div class="button-link setting" style="width: 70px;"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-position"></select> </div> ',member_notifications:'<div class="window-module"> <div class="window-module-title"> <span class="app-icon notification-icon window-module-title-icon"></span> <h3>Notifications</h3> <a class="inline-block js-change-email-freq" href="#"></a> </div> {{#empty}}<div class="empty-list">No Notifications</div>{{/empty}} <div class="list-notifications"></div> <a class="show-more js-more-notifications" href="#">Load More Notifications</a> </div> ',
member_boards:'<div class="js-boards-list"></div> {{#__own}} <a class="quiet-button gutter" href="/org/create" style="margin-top: 32px;" title="Organizations make sharing and working within a group even easier.">Create an Organization</a> {{/__own}} ',list_inline:' list "{{name}}" ',popover_selector_menu:'<ul class="pop-over-list"> <li> <a href="#" class="js-mem-selector">Members&hellip;</a> </li> <li> <a href="#" class="js-label-selector">Labels&hellip;</a> </li> <li> <a href="#" class="js-pos-selector">Position&hellip;</a> </li> </ul> ',
popover_change_user_info:'<form> <p id="account-error" class="error"></p> <div class="field"> <label for="fullName">Full Name</label> <input id="fullName" type="text" name="fullName" value="{{fullName}}"> </div> <div class="field"> <label for="initials">Initials</label> <input id="initials" type="text" name="initials" value="{{initials}}"> </div> <div class="field"> <label for="username">Username</label> <input id="username" type="text" name="username" value="{{username}}" required autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off"> </div> <div class="field"> <label for="bio">Bio</label> <textarea id="bio" type="text" name="bio">{{bio}}</textarea> </div> <input type="submit" class="primary js-save-changes" value="Save"> </form> <hr> <p class="quiet bottom"> Your initials are used in place of your avatar if your avatar is not set. Usernames require a minimum of 3 characters, alphanumeric only. </p> ',
member_organization:'<a class="clearfix link-item highlight-icon" href="{{url}}"> <span class="item-name">{{displayName}}</span> {{#permissionLevel_public}}<span class="app-icon small-icon public-icon"></span>{{/permissionLevel_public}} {{#permissionLevel_private}}<span class="app-icon small-icon private-icon"></span>{{/permissionLevel_private}} </a> ',list:'<div class="list-header clearfix"> <span class="app-icon small-icon list-icon"></span> <div class="list-title non-empty clearfix {{#__ed}} editable{{/__ed}}" attr="name"> <h2 class="hide-on-edit{{#__ed}} current {{/__ed}}">{{name}}</h2> <p class="num-cards"></p> {{#__ed}} <div class="edit edit-heavy clearfix"> <textarea type="text" class="field single-line"></textarea> </div> {{/__ed}} {{#__ed}} <a href="#" class="app-icon small-icon dark-hover menu-icon js-open-list-menu"></a> {{/__ed}} </div> </div> <div class="list-card-area"> <div class="list-gradient-top"></div> <div class="list-gradient-bottom"></div> <div class="list-cards fancy-scrollbar clearfix {{#__ed}}js-sortable{{/__ed}}"></div> </div> {{#__ed}} <a class="open-card-composer js-open-card-composer" href="#">Add a card...</a> {{/__ed}} ',
connect_failed:'{{msg}}<br /> <a href="#" onclick="window.location.reload()">Reload now</a> ',member_on_board_menu:'<li> <a class="{{#canChangeRole}}js-change-role{{/canChangeRole}}{{^canChangeRole}}disabled{{/canChangeRole}}" href="#"> Role:{{#memberIsAdmin}} Admin {{/memberIsAdmin}}{{^memberIsAdmin}} Member{{/memberIsAdmin}} {{#canChangeRole}} <span class="quiet">(change)</span>{{/canChangeRole}} </a> </li> <li><a class="js-show-detail" href="/{{username}}">Member Profile</a></li> <li><a href="{{boardProfileUrl}}">View Member\'s Board Activity</a></li> {{#canRemove}} <li> <a class="js-remove-member"> {{#isMe}} Leave Board {{/isMe}} {{^isMe}} Remove from Board {{/isMe}} </a> </li> {{/canRemove}} {{^canRemove}} {{#isMe}} {{#isMoreThanOneMember}} {{#memberIsAdmin}} <li> <hr> <p class="quiet bottom"> You can\'t leave this board because you are the only admin. To make another another user an admin, click their avatar, select "Role: Member (change)", and select "Admin". </p> </li> {{/memberIsAdmin}} {{/isMoreThanOneMember}} {{/isMe}} {{/canRemove}} ',
search_highlights:'{{#results}}{{#isHit}}<span class="search-hit">{{text}}</span>{{/isHit}}{{^isHit}}{{text}}{{/isHit}}{{/results}} ',org_inline:'<span>the organization</span> <a href="{{organizationUrl}}" class="inline-object"> {{name}} </a> ',popover_confirm_org_delete:'<p> Deleting an organization is permanent. Are you sure you want to delete this organization? There is no undo. Boards with this organization won\'t be deleted. Your boards in this organization will appear in your personal boards list. </p> <input type="submit" class="js-delete-org" value="Delete"> <input type="submit" class="js-cancel-delete" value="Never Mind"> ',
member_email_freq:'{{#minutesBetweenSummaries_-1}} Don\'t send emails. {{/minutesBetweenSummaries_-1}} {{#minutesBetweenSummaries_60}} Send emails periodically. {{/minutesBetweenSummaries_60}} {{#minutesBetweenSummaries_1}} Send emails instantly. {{/minutesBetweenSummaries_1}} <span class="quiet">(change)</span> ',search:"<b>Search</b> ",atMention:'<span class="atMention{{#isMe}} me{{/isMe}}" title="{{fullName}}">{{atMention}}</span> ',member_application_list:'{{^hasTokens}} <p class="big-link none"> No applications are using your Trello account. </p> {{/hasTokens}} {{#hasTokens}} <div class="applications gutter"></div> {{/hasTokens}} ',
"list-menu":'{{#__ed}} <li><a class="js-add-card" href="#">Add Card...</a></li> <li><a class="js-move-list" href="#">Move List...</a></li> <li><a class="js-close-list" href="#">Archive This List</a></li> {{/__ed}} ',announcements_list:'<div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#" title="Close this dialog window.">Close</a> </div> <div class="window-header clearfix"> <span class="window-header-icon app-icon board-icon" href="#"></span> <div class="window-title"> <h2 class="window-title-text inline-block"> Announcements </h2> </div> </div> <div class="window-main-col"> <div class="window-module"> <hr style="margin-top: 0;"> {{#announcements}} {{>announcement}} {{/announcements}} </div> <p class="quiet bottom" style="margin: 0 8px 4px;"> For more feature announcements and updates, check out the <a target="_blank" class="js-real-link js-blog" href="http://blog.trello.com/">Trello Blog</a> and follow us on <a target="_blank" class="js-real-link js-t" href="https://www.twitter.com/trello" title="@trello on Twitter">Twitter</a> and <a target="_blank" class="js-real-link js-fb" href="https://www.facebook.com/TrelloApp" title="Trello on Facebook">Facebook</a>. </p> </div> ',
manual_privacy:"<div class=\"gutter markeddown\"> <p> We don't want you to get a surprise that you've shared something you intended to keep private. You have full control over the visibility of your data, and all defaults favor privacy. </p> <p> You have the ability to make boards and organizations private, in which case only added members will be able to view the board or organization. Actions on private boards and organizations will not show up in profiles. Private organizations and boards are not visible in search. </p> <p> Your member profile is public. That includes your full name, username and bio, not your email. (If you set your full name to be your email, people will see that.) </p> <p> Other users will only see actions on your public boards (unless they are part of one of your private boards or organizations). Boards pages will list only public boards and organizations. </p> <p> Access to your data is tightly controlled internally. Unless we hear different from you, we will only be able to access and view the information you make public. We do run anonymous usage profiling over our database, but no one can inspect your data without your say-so. </p> <h3>Security</h3> <p> All traffic on Trello runs over SSL/HTTPS. This is the same secure protocol used by banks. Data is backed up hourly and copies are stored at an off-site location for disaster recovery. </p> <h3>Portability</h3> <p> Your data is yours. If you ever want to stop using Trello, you should be able to download your data. All Fog Creek products feature data portability where applicable. We strongly believe in it. To export your data, simply open a card or click the board title, then Profile. click the 'Share, Print, and Export' button, and you'll find export options. Currently, we allow export to JSON which is a format that lends itself well to technical usages and cannot be loaded into programs like Microsoft Excel. It is, however, complete, and so does suffice as a backup. </p> <h3>Free... for how long?</h3> <p> Trello is free forever. We may add pay-only features in the future, but everything that's free today will be free tomorrow and forever. Also, we'll not make a for-pay feature that forces you to compromise on privacy, security, or portability. Those are built-in. The maker of Trello, Fog Creek Software, has been profitable for years on the strength of its other products. We can afford to foot the bill. We have no outside investors pushing us to make a quick buck on Trello by selling out our users or getting you hooked before jacking up the price. Trello is free. </p> </div> ",
org_account:'<form class="account-form" method="POST"> <p class="error" style="display:none"></p> <div class="field"> <label for="displayName">Display Name</label> <input type="text" id="displayName" name="displayName" value="{{displayName}}"> </div> <div class="field"> <label for="name">Orgname</label> <input type="text" id="name" name="name" value="{{name}}" required> <p class="helper"> Your orgname is used in various URLs. Minimum of 3 characters, alphanumeric only. </p> </div> <div class="field"> <label for="website">Website</label> <input id="website" type="text" name="website" value="{{website}}"> </div> <div class="field"> <label for="desc">Description</label> <textarea type="text" name="desc" id="desc">{{desc}}</textarea> </div> <div class="field"> <label for="permissionLevel">Visibility</label> <select name="permissionLevel"> <option value="private"{{#permissionLevel_private}} selected{{/permissionLevel_private}}> Members </option> <option value="public" {{#permissionLevel_public}} selected{{/permissionLevel_public}}> Public </option> </select> </div> <div> <input type="submit" name="save" class="primary js-save-changes" value="Update Organization"> </div> </form> <a class="quiet-button gutter js-confirm-delete-org" href="#" style="margin-top: 32px;">Delete this organization?</a> ',
board_menu_layout:'<div class="button-link setting" style="width: 256px; max-width: 256px; float: none; margin-bottom: 6px;"> <span class="label">Sidebar Widgets</span> <span class="value"></span> <label>Sidebar Widgets</label> <select name="showSidebar"> <option value="false"{{#showSidebar_false}} selected{{/showSidebar_false}}> Hide All </option> <option value="true"{{#showSidebar_true}} selected{{/showSidebar_true}}> Show Sidebar </option> </select> </div> <div class="button-link setting {{#showSidebar_false}} disabled{{/showSidebar_false}}" style="width: 236px; max-width: 256px; float: none; margin-left: 20px; margin-bottom: 6px;"> <span class="label">Members Widget</span> <span class="value"></span> <label>Members Widget</label> <select name="showSidebarMembers"> <option value="false"{{#showSidebarMembers_false}} selected{{/showSidebarMembers_false}}{{#showSidebar_false}} disabled{{/showSidebar_false}}> Hide </option> <option value="true"{{#showSidebarMembers_true}} selected{{/showSidebarMembers_true}}{{#showSidebar_false}} disabled{{/showSidebar_false}}> Show </option> </select> </div> {{#__ed}} <div class="button-link setting {{#showSidebar_false}} disabled{{/showSidebar_false}}" style="width: 236px; max-width: 256px; float: none; margin-left: 20px; margin-bottom: 6px;"> <span class="label">Board Actions Widget</span> <span class="value"></span> <label>Board Actions Widget</label> <select name="showSidebarBoardActions"> <option value="false"{{#showSidebarBoardActions_false}} selected{{/showSidebarBoardActions_false}}{{#showSidebar_false}} disabled{{/showSidebar_false}}> Hide </option> <option value="true"{{#showSidebarBoardActions_true}} selected{{/showSidebarBoardActions_true}}{{#showSidebar_false}} disabled{{/showSidebar_false}}> Show </option> </select> </div> {{/__ed}} <div class="button-link setting {{#showSidebar_false}} disabled{{/showSidebar_false}}" style="width: 236px; max-width: 256px; float: none; margin-left: 20px; margin-bottom: 6px;"> <span class="label">Activity Widget</span> <span class="value"></span> <label>Activity Widget</label> <select name="showSidebarActivity"> <option value="false"{{#showSidebarActivity_false}} selected{{/showSidebarActivity_false}}{{#showSidebar_false}} disabled{{/showSidebar_false}}> Hide </option> <option value="true"{{#showSidebarActivity_true}} selected{{/showSidebarActivity_true}}{{#showSidebar_false}} disabled{{/showSidebar_false}}> Show </option> </select> </div> <hr> <div class="button-link setting" style="width: 256px; max-width: 256px; float: none; margin-bottom: 6px;"> <span class="label">List Guide</span> <span class="value"></span> <label>List Guide</label> <select name="showListGuide"> <option value="false"{{#showListGuide_false}} selected{{/showListGuide_false}}> Hide List Guide </option> <option value="true"{{#showListGuide_true}} selected{{/showListGuide_true}}> Show List Guide </option> </select> </div> <p class="helper"> The List Guide is a collection of list titles that appears on the left side of the board when the total size of the lists is greater than the board size. It is intended to aid in navigation by visualizing all available lists when some lists on the board are hidden. Board layout preferences are per-user and per-board. </p> ',
board_archive:'<div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#" title="Close this dialog window.">Close</a> </div> <div class="window-header clearfix"> <span class="window-header-icon app-icon archive-icon" href="#"></span> <div class="window-title"> <h2 class="window-title-text"> Archived <span class="js-current-section"></span> </h2> <a class="inline-block js-switch-section" href="#">Switch to <span class="js-new-section"></span></a> </div> </div> <div class="window-main-col"> {{{content}}} </div> ',
archive_items:'{{^empty}} <div class="window-module clearfix"> {{#section_lists}} <ul class="archive-items bold-list"></ul> {{/section_lists}} {{#section_cards}} <div class="archive-items"></div> {{/section_cards}} </div> {{/empty}} {{#loading}} <div class="spinner loading"></div> {{/loading}} {{#empty}} <p class="empty-list">{{emptyMessage}}</p> {{/empty}} {{#hasMoreCards}} <a class="show-more js-more-archive-cards" href="#">Load More Cards</a> {{/hasMoreCards}} ',board_member_profile:'<div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#">Close</a> </div> <div class="window-header clearfix"> <span class="window-header-icon app-icon member-icon" href="#"></span> <h2 class="window-title"> {{fullName}} {{#username}} <span class="quiet" style="margin-left: 3px">({{username}})</span> {{/username}} </h2> </div> <div class="window-main-col"> <div class="window-main-col-content clearfix"> <div class="list-actions"></div> <a class="show-more js-more-actions" href="#">Load More Activity</a> </div> </div> <div class="window-sidebar"> <div class="profile-member"> {{#avatarHash}} <img class="profile-member-avatar" src="{{__avatarDomain}}/{{avatarHash}}/170.png" alt="{{fullName}}"> {{/avatarHash}} {{^avatarHash}} {{^avatarSource}} <img class="profile-member-avatar" src="https://secure.gravatar.com/avatar/{{gravatarHash}}.jpg?s=170&d=https%3A%2F%2Fd2k1ftgv7pobq7.cloudfront.net%2Fimages%2Fb73bef9dc51e381e27b31fcfcbc871f6%2Fgradient.png&r=PG" alt="{{fullName}}"> <p class="profile-member-initials"> {{initials}} </p> {{/avatarSource}} {{#avatarSource}} <p class="profile-member-initials"> {{initials}} </p> {{/avatarSource}} {{/avatarHash}} </div> <div class="window-module"> <h3>Actions</h3> <a href="/{{username}}" class="button-link"> <span class="app-icon small-icon member-icon"></span> View Profile </a> {{#canMakeAdmin}} <a class="button-link js-make-admin"> <span class="app-icon small-icon board-icon"></span> Make admin </a> {{/canMakeAdmin}} </div> <div class="window-module"> {{#canRemove}} <a href="#" class="quiet-button js-remove-member"> Remove from Board </a> {{/canRemove}} {{#canRemoveAdmin}} <a href="#" class="quiet-button js-remove-admin"> Give up admin privileges </a> {{/canRemoveAdmin}} </div> </div> ',
popover_confirm_delete_card:'<p> All actions will be removed from the activity feed and you won\'t be able to re-open the card. There is no undo. You can archive a card to remove it from the board and preserve the activity. </p> <input type="submit" class="js-delete-card primary" value="Yes, delete it."> <input type="submit" class="js-cancel" value="Cancel"> ',org_detail:'<div idOrganization="{{id}}"> <div class="window-header clearfix"> <span class="window-header-icon app-icon org-icon"></span> <div class="member-title" attr="displayName"> <h2 class="window-title"> {{displayName}} <span class="quiet" style="margin-left: 3px">({{name}})</span> {{#permissionLevel_public}}<span class="app-icon small-icon public-icon"></span>{{/permissionLevel_public}} {{#permissionLevel_private}}<span class="app-icon small-icon private-icon"></span>{{/permissionLevel_private}} </h2> </div> </div> <div class="window-main-col clearfix"></div> <div class="window-sidebar"> <div class="window-module"> <ul class="sidebar-nav"> <li> <a class="js-org-profile" href="/{{name}}">Profile</a> </li> {{#__ed}} <li> <a class="js-org-account" href="/{{name}}/account">Account</a> </li> {{/__ed}} </ul> </div> </div> </div> ',
member_search_result_email:'<li class="email-invite {{className}}{{#isInvitable}} invitable{{/isInvitable}}"> <a href="#"> <span class="email">{{email}}</span> {{#extraText}}<span class="quiet">({{extraText}})</span>{{/extraText}} </a> </li> ',manual_base:'<div class="manual {{#about}}about{{/about}} {{#guide}}guide{{/guide}} {{#shortcuts}}shortcuts{{/shortcuts}} {{#requirements}}requirements{{/requirements}}"> {{#is_board}} <div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#">Close</a> </div> {{/is_board}} <div class="window-header clearfix"> <span class="window-header-icon app-icon manual-icon"></span> <h2 class="window-title"> {{title}} </h2> </div> <div class="window-main-col clearfix"> {{{manual_content}}} </div> <div class="window-sidebar"> <div class="sidebar-nav mini window-module"> <h3>Trello</h3> <ul> <li> <a class="js-info-about {{#about}}active{{/about}}" href="/about">About</a> </li> <li> <a class="js-info-guide {{#guide}}active{{/guide}}" href="/guide">Guide</a> </li> <li> <a class="js-info-help {{#help}}active{{/help}}" href="/help">Help!</a> </li> <li> <a class="js-info-shortcuts {{#shortcuts}}active{{/shortcuts}}" href="/shortcuts">Shortcuts</a> </li> <li> <a class="js-info-trello-dev" href="https://trello.com/board/4d5ea62fd76aa1136000000c">Trello Development</a> </li> <li> <a class="js-info-api js-real-link" href="/docs/">API</a> </li> <li> <a class="js-info-privacy {{#privacy}}active{{/privacy}}" href="/privacy">Privacy, Security, Data</a> </li> <li> <a target="_blank" class="js-info-tos js-real-link" href="/legal">Terms of Service</a> </li> </ul> </div> <div class="elsewhere-links window-module clearfix" style="margin-left: 8px;"> <h3>Elsewhere</h3> <a target="_blank" class="elsewhere-icon blog js-real-link js-info-blog" href="http://blog.trello.com" title="Trello Blog"> <span class="social-icon blog-icon"></span> </a> <a target="_blank" class="elsewhere-icon twitter js-real-link js-info-twitter" href="https://www.twitter.com/trello" title="@trello on Twitter"> <span class="social-icon twitter-icon"></span> </a> <a target="_blank" class="elsewhere-icon facebook js-real-link js-info-facebook" href="https://www.facebook.com/TrelloApp" title="Trello on Facebook"> <span class="social-icon facebook-icon"></span> </a> </div> <div class="window-module" style="margin: 24px 0 0 8px;"> <h3>Made by</h3> <a style="display: block;" class="js-real-link js-info-fogcreek" href="http://www.fogcreek.com/?fccmp=trello_about" target="_blank"> <img src="https://d2k1ftgv7pobq7.cloudfront.net/images/17a0f12ca7961ef879477c2f9c40ed02/fog_creek_logo.png" style="max-width: 150px;"> </a> </div> </div> </div> ',
board:' <div id="board-header" class="clearfix"> <a class="app-icon dark-hover board-icon js-open-board-menu-icon"></a> <div class="board-title"> <h2><a href="#" class="js-board-title js-open-board-menu-title">{{name}}</a></h2> <h4 class="quiet org-name"></h4> <div id="permission-level"></div> <div class="desc-btn js-open-desc"><span class="app-icon small-icon edit-icon dark-hover"></span></div> </div> </div> <div class="board-widgets{{#showSidebar_false}} disabled{{/showSidebar_false}}"> <div class="master-board-widget-menu"> <span class="app-icon small-icon dark-hover menu-icon js-show-all-widgets" name="showSidebar"></span> </div> {{#__invited}} <div class="board-widget clearfix{{#showSidebarMembers_false}} disabled{{/showSidebarMembers_false}}"> {{#__loggedIn}} <div class="clearfix"> <a class="button primary left js-accept-invite" style="margin-top: 0; padding: 6px 10px;" href="">Accept Invite</a> <a class="button left js-reject-invite" style="margin-top: 0; padding: 6px 10px;" href="">Reject</a> </div> {{/__loggedIn}} {{^__loggedIn}} <div class="clearfix"> <a class="button primary left js-signup-and-join" style="margin-top: 0; padding: 6px 10px;" href="#">Accept the invite and sign up!</a> </div> {{/__loggedIn}} <p class="helper clear" style="margin-top: 8px;"> {{#permissionLevel_private}} This is a private board. You can see it because you\'ve been invited. {{/permissionLevel_private}} {{#permissionLevel_org}} This board is private to an organization. You can see it because you\'ve been invited. {{/permissionLevel_org}} {{#permissionLevel_public}} This board is publicly viewable. {{/permissionLevel_public}} Accept the invite to make changes. </p> </div> {{/__invited}} {{#canJoin}} <div class="board-widget clearfix{{#showSidebarMembers_false}} disabled{{/showSidebarMembers_false}}"> <a href="#" class="button js-join-board" style="margin: 0"> Join Board </a> <p class="helper" style="margin-top: 8px;">Org members can join this board.</p> </div> {{/canJoin}} <div class="board-widget clearfix{{#showSidebarMembers_false}} disabled{{/showSidebarMembers_false}}"> <div class="board-widget-title"> <h3>Members</h3> <span class="app-icon small-icon dark-hover menu-icon board-widget-menu-btn js-board-widget-vis" name="showSidebarMembers"></span> </div> <div class="board-widget-content"> <div class="board-widget-members js-list-board-members {{#__ed}} assignable-members {{/__ed}} clearfix"></div> {{#canInviteMembers}} <a href="#" class="button-link js-open-manage-board-members"> <span class="app-icon small-icon member-icon"></span> Add Members&hellip; </a> {{/canInviteMembers}} </div> </div> <div class="board-widget clearfix{{#showSidebarBoardActions_false}} disabled{{/showSidebarBoardActions_false}}"> <div class="board-widget-title"> <h3>Board</h3> <span class="app-icon small-icon dark-hover menu-icon board-widget-menu-btn js-board-widget-vis" name="showSidebarBoardActions"></span> </div> <div class="board-widget-content"> <a class="button-link js-open-board-menu-sidebar" href="#"> <span class="app-icon small-icon board-icon"></span> Options <span class="app-icon small-icon menu-icon" style="position: absolute; top: 6px; right: 6px;"></span> </a> {{#__ed}} <a class="button-link js-add-list-popover"> <span class="app-icon small-icon list-icon"></span> Add List </a> {{/__ed}} <a class="button-link js-filter-cards"> <span class="app-icon small-icon card-icon"></span> Search and Filter Cards <span class="on">ON</span> </a> </div> </div> <div class="board-widget board-widget-actions bottom clearfix{{#showSidebarActivity_false}} disabled{{/showSidebarActivity_false}}"> <div class="board-widget-title"> <h3 class="inline-block">Activity</h3> <a style="margin-left: 3px;" class="quiet js-view-all-activity-header" href="#"> View all&hellip; </a> <span class="app-icon small-icon dark-hover menu-icon board-widget-menu-btn js-board-widget-vis" name="showSidebarActivity"></span> </div> <div class="board-widget-content"> <div class="activity-gradient-t"></div> <div class="activity-gradient-b"></div> <div class="board-actions-list fancy-scrollbar"> <div class="js-sidebar-list-actions"></div> <a class="show-more js-view-all-activity-list" href="#"> View all&hellip; </a> {{#__ed}} <a href="#" style="padding: 0 0 0 40px; font-weight: bold;" class="js-allow-notifications quiet"> Allow Notifications </a> {{/__ed}} </div> </div> </div> </div> <div class="list-guide{{#showListGuide_false}} disabled{{/showListGuide_false}}"> <div class="list-guide-wrapper fancy-scrollbar"></div> </div> <div id="board" class="clearfix{{^__ed}} permission-public{{/__ed}}{{#showSidebar_false}} disabled-board-widgets{{/showSidebar_false}}{{#showListGuide_false}} disabled-list-guide{{/showListGuide_false}}"> <div class="list-area-wrapper fancy-scrollbar"> <div class="list-area {{#__ed}} js-list-sortable {{/__ed}} no-edits"> </div> </div> </div> ',
org_profile:'{{#__ed}}{{^desc}} <div class="window-module gutter"> <a href="/{{name}}/account">No description specified (click to edit)</a> </div> {{/desc}}{{/__ed}} {{#desc}} <div class="window-module gutter"> {{{descriptionHtml}}} </div> {{/desc}} {{#websiteHref}} <div class="window-module gutter"> <p> <a href="{{websiteHref}}">{{website}}</a> </p> </div> {{/websiteHref}} {{#__invited}} <div class="window-module gutter clearfix"> {{#__loggedIn}} <a class="button primary left js-accept-invite" href="">Accept Invite</a> <a class="button left js-reject-invite" href="">Reject</a> {{/__loggedIn}} {{^__loggedIn}} <a class="button primary left js-signup-and-join" href="#">Accept the invite and sign up!</a> {{/__loggedIn}} </div> {{/__invited}} <div class="window-module"> <div class="window-module-title"> <span class="app-icon member-icon window-module-title-icon"></span> <h3 class="inline-block">Members</h3> </div> <div class="list-org-members gutter clearfix"></div> {{#__ed}} <a class="button-link gutter js-manage-members" href="#"> <span class="app-icon small-icon member-icon"></span> Add Members </a> {{/__ed}} </div> <div class="window-module"> <div class="window-module-title"> <span class="app-icon board-icon window-module-title-icon"></span> <h3>Boards</h3> </div> {{#empty}}<p class="empty-list">No boards</p>{{/empty}} <div class="js-boards-list"></div> </div> ',
org_create:'{{#is_board}} <div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#">Close</a> </div> {{/is_board}} <div class="window-header clearfix"> <span class="window-header-icon app-icon org-icon"></span> <h2 class="window-title"> Create an Organization </h2> </div> <div class="window-main-col"> <form class="account-form" method="POST"> <p class="error" style="display:none"></p> <div class="field"> <label for="displayName">Display Name</label> <input type="text" name="displayName" value="{{displayName}}"> </div> <div class="field"> <label for="orgname">Orgname</label> <input type="text" name="orgname" value="{{orgname}}" required> <p class="helper"> Your orgname is used in various URLs. Minimum of 3 characters, alphanumeric only. </p> </div> <div class="field"> <label for="website">Website</label> <input type="text" name="website" value="{{website}}"> </div> <div class="field"> <label for="desc">Description</label> <textarea type="text" name="desc" value="{{desc}}"></textarea> </div> <div class="field"> <label for="permissionLevel">Visibility</label> <select name="permissionLevel"> <option value="private" selected> Members </option> <option value="public"> Public </option> </select> </div> <div> <input type="submit" name="save" class="primary js-create-org" value="Create Organization"> </div> </form> </div> ',
popover_share:'<form> <label> Link to this {{object}} <span class="app-icon small-icon {{#public}}public{{/public}}{{#org}}org-private{{/org}}{{#private}}private{{/private}}-icon"></span> </label> <input type="text" class="js-url js-autofocus" readonly="readonly"/> {{#org}} <p class="quiet"> This {{object}} is only visible to members of <em>{{orgName}}</em>. Outside users won\'t be able to view it. </p> {{/org}} {{#private}} <p class="quiet"> This {{object}} is only visible to its members. Outside users won\'t be able to view it. </p> {{/private}} <hr> <label style="margin: 8px 0 4px 0;"> Print {{object}} </label> <input style="margin: 0 4px 4px 0;" class="js-print" type="button" value="Print"> <hr> <label style="margin: 8px 0 4px 0;"> Export data </label> <a style="margin: 0 4px 4px 0;" class="button js-export-json js-real-link" href="{{jsonURL}}" target="_blank">JSON</a> </form> ',
manual_guide:'<div class="markeddown guide"> <div class="term"> <span class="term-icon app-icon attachment-icon"></span> <h3>Attachments</h3> <p> Card attachments are files uploaded to cards. Attachments appear in the "Attachments" section of the card detail. </p> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> Click the "Upload" button in the Attachments section of the card detail to upload. On newer versions of Chrome and Safari, you can simply drag the file from your desktop to the upload button. </p> </dd> <dt> <p> <strong>Deleting</strong> </p> </dt> <dd> <p> Delete attachments by clicking "delete" beneath the attachment in the card detail sidebar. </p> </dd> <dt> <p> <strong>Limitations</strong> </p> </dt> <dd> <p> There is a 10mb file upload limit per attachment. It\'s not possible to upload attachments via the mobile site. </p> <p> There is no limit on the number of attachments you can have on a card or board. Neither is there an account data storage limit. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon board-icon"></span> <h3>Boards</h3> <p> A board is a product, project, resource, or organizational structure that is under continuous development, though a board can represent anything and have a variety of uses. Boards have a collections of lists, and lists contain cards. </p> <dl> <dt> <p> <strong> Adding </strong> </p> </dt> <dd> <p> Create a new board by clicking the "Boards" menu in the header and selecting "New Board" or by clicking "Add Board" in your boards page or an organization\'s profile page. </p> <p> To add members to a board, select "Add Members..." from the board sidebar. Search for a user by name or enter an email address to invite them to the board, click their name and click "Invite". They people must accept the invite before being able to interact with the board (move, edit, add cards, etc.). </p> </dd> <dt> <p> <strong> Editing </strong> </p> </dt> <dd> <p> Edit a board title by clicking the \'Board Menu\' button or the board title, and selecting \'Settings\', and selecting \'Rename Board\'. You can also click the edit button (<span class="app-icon small-icon edit-icon"></span>) next to the board title. It will bring up the board description dialog where you can change the title or description by clicking on them. Only board admins are able to edit the board title. </p> </dd> <dt> <p> <strong>Closing / Removing</strong> </p> </dt> <dd> <p> Close a board by selecting "Close Board" from the board menu (the <span class="app-icon small-icon board-icon"></span> icon by the board title). </p> <p> To remove a member from a board, click the avatar in the members section in the sidebar, and select "Remove from Board". You must be an admin to remove a member from a board. </p> </dd> <dt> <p> <strong>Reopening</strong> </p> </dt> <dd> <p> Re-open a board by clicking the "Boards" menu in the header and selecting "View Closed Boards". Find the board and click "Re-open". You need to have been a board admin to reopen a board. </p> </dd> <dt> <p> <strong>Preferences / Permissions</strong> </p> </dt> <dd> <p> Set the visibility and permissions of features by clicking \'Board Menu\' in the sidebar or clicking the board title, then clicking \'Settings\'. As a board admin, you\'ll see options for \'Rename Board\', \'Change Organization\', \'Permissions\', \'Board Description\', and \'Layout Options\'. Permissions and options will vary per user. </p> <p> You can set the visibility of boards to public, an organization, or private through the \'Permissions\' menu. Setting a board to public allows all members of Trello to view your board and optionally vote or comment. You can turn other features (like comments and voting) on and off for public members via the \'Permissions\' menu. </p> <p> Board admins have a different set of permissions on a board. Only admin can remove users and change the board title, for instance. To make a board member an admin, click their avatar in the member\'s sidebar, select "Change role...", then select "Admin". </p> </dd> <dt> <p> <strong>Bonus</strong> </p> </dt> <dd> <p> Trello tells you who is online right now via a status icon on a member\'s avatar. The green indicates "online now", the yellow indicates "idle" (haven\'t touched the mouse on their Trello tab in over five minutes), and gray for "offline". The blue icon means a member is an admin of the board. Admins have special privileges like the ability to remove members from a board. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon card-icon"></span> <h3>Cards</h3> <p> Cards are the basic unit of a board. They might represent new software features, story leads, legal cases, things to buy at the store, freelance clients, potential employees, or customer support issues. Drag cards from list to list to indicate progression, status, or what-have-you. You can add people to cards, label them, vote, attach files, start conversations, create task checklists, and so on. </p> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> Add cards via the "Add Card" input at the bottom of lists. </p> </dd> <dt> <p> <strong>Editing</strong> </p> </dt> <dd> <p> Edit a card title by clicking the title on the card detail view. A card has an optional description field. You can edit the description on card detail. <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> is used for formatting. </p> </dd> <dt> <p> <strong>Archiving / Deleting</strong> </p> </dt> <dd> <p> Archive cards by clicking "Archive Card" in the Actions menu in card detail (enter the card detail by clicking on the card). You can also select "Archive" from the card menu (the menu that appears on hover). You can also archive with the "c" keyboard shortcut. </p> <p> You can delete a card from the back of the card. There is a \'Delete this card\' link at the bottom of the sidebar. You can also delete from the archive. Click "View Archived Items", find the card and select "Delete". There is no way to get a deleted card back. It will not show up in any search results and actions associated with it will by removed from the activity stream. </p> </dd> <dt> <p> <strong>Unarchiving</strong> </p> </dt> <dd> <p> Click "View Archived Items" from the board sidebar, find the card and click "Send to Board". </p> </dd> <dt> <p> <strong>Shortcuts / Quick Menus</strong> </p> </dt> <dd> <p> Select a card and click the menu icon (<span class="app-icon small-icon menu-icon"></span>) that appears. The card menu allows you to perform actions on a card without from the board view. </p> <p> There are keyboard shortcuts for assigning members (a), archiving (c), labels (l), due dates (d), moving cards (&lt; and &gt;), and voting (v). A complete list can be seen on the <a href="/shortcuts">shortcuts page</a>. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon card-icon"></span> <h3>Card Filters</h3> <p> Card filters allow you to focus on specific labels, members, and keywords. Filters are applied per member then by selected labels. For example, if you select "Bobby" and "Daniel" and the "Red" and "Yellow" labels, the filter highlights cards assigned to either Daniel or Bobby (or both) that have at least one of the red or yellow labels. If you select one or more labels, but no members, the filter highlights cards with any of the selected labels, i.e. all red-labeled, yellow-labeled, or red-and-yellow-labeled cards. If you select one or more members, but no labels, the filter highlights cards with any of the selected members, i.e. all cards assigned to "Daniel", "Bobby", or both. </p> <p> You can also search by title using comma-separated terms. Items are filtered using the subset of cards with matching terms, then filtered as above. </p> <p> There is a "Display Type" that allows for "Hidden" or "Translucent" mode. </p> <dl> <dt> <p> <strong>Applying</strong> </p> </dt> <dd> <p> Apply filters using the "Filter Cards..." button on the board sidebar, then selecting a combination of labels and members. </p> </dd> <dt> <p> <strong>Removing</strong> </p> </dt> <dd> <p> Clear all filters using the the "clear all" button in the pop-over menu or by using the "x" keyboard shortcut. </p> </dd> <dt> <p> <strong>Shortcuts</strong> </p> </dt> <dd> <p> To open the card filter menu, use the "f" keyboard shortcut. To filter only your cards, using the "q" keyboard shortcut. To remove all filters, use the "x" keyboard shortcut. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon checklist-icon"></span> <h3>Checklists</h3> <p> A checklist is a way of keeping track of subtasks within a card. You can add multiple checklists to a single card. </p> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> Add Checklists via the "Add Checklist" button in the "Actions" section of the card detail. Enter a title (or use the default "Checklist"), then click \'Add\'. Add new checklist items via the "Add checklist item" input in a checklist. </p> </dd> <dt> <p> <strong>Editing</strong> </p> </dt> <dd> <p> Mark an item as complete or incomplete by clicking the checkbox to the left of the title. Rename a checklist or checklist item by clicking the title, changing the text, and clicking save. You can reorder a checklist item by dragging. </p> </dd> <dt> <p> <strong>Deleting</strong> </p> </dt> <dd> <p> Delete a checklist or checklist item by clicking the menu button that appears when hovering, and selecting delete. </p> </dd> <dt> <p> <strong>Bonus</strong> </p> </dt> <dd> <p> You can also turn a checklist item into a card by clicking the item and selecting "Convert to Card". It removes the item and creates a card with the title of the item beneath the current card. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon comment-icon"></span> <h3>Comments</h3> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> You can add comments to a card via the "Add Comment" textbox in the "Activity" section of the card detail. </p> </dd> <dt> <p> <strong>Deleting</strong> </p> </dt> <dd> <p> Delete comments by clicking the "delete" link beneath the comment. You can delete any comment you make on any board. Board admins can delete public comments made on their boards. Deleting is permanent. </p> </dd> <dt> <p> <strong>Preferences / Permissions</strong> </p> </dt> <dd> <p> You can disable comments via the board preferences page in the board menu (the <span class="app-icon small-icon board-icon"></span> icon by the board title). On public boards, you can enable or disable public comments via the board preferences page. </p> </dd> <dt> <p> <strong>Bonus</strong> </p> </dt> <dd> <p> You can mention people in comments by using "@" followed by the user\'s name. The mentioned user will get a notification. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon date-icon"></span> <h3>Due Dates</h3> <p> You can set a date and time for when a card is "due". A badge with the due date will appear on cards. A yellow badge means it\'s within 24 hours of being due A red badge means it\'s past due. </p> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> You can add a due date via the card detail under "Action" in the sidebar. You can also add dates via the card menu and with the "d" shortcut. </p> </dd> <dt> <p> <strong>Editing</strong> </p> </dt> <dd> <p> You can edit a due date by clicking the due date in the card detail and selecting a new date or time. </p> </dd> <dt> <p> <strong>Removing</strong> </p> </dt> <dd> <p> Remove a due date by clicking the due date in the card detail and selecting "Remove" from the lower right corner. </p> </dd> <dt> <p> <strong>Shortcuts</strong> </p> </dt> <dd> <p> You can use "d" to open the date picker and add, edit, or remove a date and time via the board view. </p> </dd> <dt> <p> <strong>Bonus</strong> </p> </dt> <dd> <p> You can add or change a due date for a card by entering "due mm/dd/[yy]yy" as a comment. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon label-icon"></span> <h3>Labels</h3> <p> A label is a way of categorizing a card by type, represented by a color. A single card can have multiple labels. </p> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> Add labels via the card detail "Labels&hellip;" button. Active labels are represented with a checkmark on the right. </p> </dd> <dt> <p> <strong>Editing</strong> </p> </dt> <dd> <p> Labels names can be edited by opening the board menu (in the sidebar or clicking the board title) and selecting "Labels". </p> </dd> <dt> <p> <strong>Removing</strong> </p> </dt> <dd> <p> Remove a label from a card via the card detail "Labels&hellip;" button. Active labels are represented with a white label icon to the right. </p> </dd> <dt> <p> <strong>Shortcuts</strong> </p> </dt> <dd> <p> You can also add and remove labels pressing "l" to bring up a pop-over menu of labels. Toggle an individual label by pressing numbers between 1 and 6. Individual label shortcuts are mapped below. </p> <table> <thead> <tr> <th>Key</th> <th>Label Color</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Green</td> </tr> <tr> <td>2</td> <td>Yellow</td> </tr> <tr> <td>3</td> <td>Orange</td> </tr> <tr> <td>4</td> <td>Red</td> </tr> <tr> <td>5</td> <td>Purple</td> </tr> <tr> <td>6</td> <td>Blue</td> </tr> </tbody> </table> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon list-icon"></span> <h3>Lists</h3> <p> A list is collection of vertically-arranged cards. They may represent different stages of a workflow. </p> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> Add a list to a board by clicking the "Add List" button in the board sidebar. You can also add a list by selecting "Add List" from the board menu (clicking the board title or the "Board Menu" button in the sidebar). </p> </dd> <dt> <p> <strong>Editing</strong> </p> </dt> <dd> <p> You can also move lists by dragging them left and right. Change a list name by clicking the name. </p> </dd> <dt> <p> <strong>Archiving</strong> </p> </dt> <dd> <p> Archive a list by selecting the "Archive this List" from the list menu that appears to the right of title on hover. (It\'s not currently possible to permanently delete a list.) </p> </dd> <dt> <p> <strong>Unarchiving</strong> </p> </dt> <dd> <p> Reopen a list by selecting "View Archived Items" from the board sidebar, clicking "List" in the sidebar, choosing a list and clicking "Send to Board". </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon notification-icon"></span> <h3>Notifications</h3> <p> You get a notification when you are added to a card, you were invited to a board or organization, you were mentioned in a comment, or when somebody does an action on a card you are on. Notifications are represented on the Trello site with a red icon and number in the top right corner. </p> <p> You are emailed a collection of unread notifications. Email summaries won\'t include any notifications you\'ve already read on the site. </p> <p> You can also subscribe to any visible card. When subscribed, you\'ll get notifcations about that card. To subscribe, open the card and click the subscribe button in the sidebar. </p> <dl> <dt> <p> <strong>Preferences</strong> </p> </dt> <dd> <p> You can change how often you get emails in your <a href="/me/account">"Account"</a> page. Options are "Never", "Periodically", and "Instantly". "Periodically" is the default and checks for unread notifications and sends them about every hour. "Instantly" checks as soon as possible. </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon org-icon"></span> <h3>Organizations</h3> <p> An organization is a way of grouping people and boards. You can make an organization board visible only to organization members, and allow for organization members to use certain features such as comments and voting for only organization members. </p> <dl> <dt> <p> <strong>Adding</strong> </p> </dt> <dd> <p> You can create a new organization through your Boards page, with the "Create an Organization" link at the bottom. </p> <p> To add members to an organization, first go to the organization profile. You can get to the organization profile from the link in your board page or the link next to the title of a board. Then click "Members" in the sidebar. In the input field, enter an email address to invite or search for a current member. NOTE: You must be an admin of an organization to add members. </p> </dd> <dt> <p> <strong>Removing</strong> </p> </dt> <dd> <p> To remove a member from an organization, click their avatar on the organization profile and select "Remove from Organization". You must be an admin to remove organization members. </p> </dd> <dt> <p> <strong>Permissions</strong> </p> </dt> <dd> <p> Organization admins can make the organizations visibility public or private. You can change the setting in the "Account" page. Private organizations will not show up on your profile when other people view it. They will also not show up in search results. </p> <p> Organizations also have admins which have the ability to add / remove members, and edit the name and description. To add a member as an admin, click on their avatar in the member list on the profile, and select "Make Admin of Organization". </p> </dd> </dl> </div> <div class="term"> <span class="term-icon app-icon vote-icon"></span> <h3>Voting</h3> <p> Trello allows up voting on cards. To view a list of voters, click the number beneath the vote button on card detail. </p> <dl> <dt> <p> <strong>Adding / Removing a Vote</strong> </p> </dt> <dd> <p> People can vote on cards by clicking the "Vote" button on card detail. The button will appear green if you have voted for the card. Clicking again will remove your vote. Hovering over a card and clicking "v" will also add or remove a vote. </p> </dd> <dt> <p> <strong>Permissions</strong> </p> </dt> <dd> <p> You can control who can vote (nobody, board members, members of the board\'s organization, or the public) via the board preferences page in the board menu (the <span class="app-icon small-icon board-icon"></span> icon by the board title). </p> </dd> </dl> </div> </div> ',
user_header:'{{#__loggedIn}} <a class="header-btn hide upgrade" href="#", onclick="window.location.reload();"><span class="app-icon small-icon light reopen-icon"></span><span class="header-btn-text">Update Available</span></a> <a class="header-btn header-notifications js-open-header-notifications-menu" title="View your notifications" href="#"> <span class="app-icon light notification-icon"></span> <span class="header-btn-text">Notifications</span> <span class="count js-unread-note-count"></span> </a> <a class="header-btn header-boards js-open-header-boards-menu" title="View list of boards" href="#"> <span class="app-icon light board-icon"></span> <span class="header-btn-text">Boards</span> </a> <a class="header-auth member js-open-header-member-menu" href="#"></a> {{/__loggedIn}} {{^__loggedIn}} <a class="header-btn header-login js-toggle-login-popover" href="#">Log In</a> <a class="header-btn header-signup" href="/signup">Sign Up</a> {{/__loggedIn}} ',
filter_cards:'<ul class="card-filter"> <li> <input type="text" class="js-filter-by-title js-autofocus" attr="title" placeholder="Search with space-separated terms" value="{{searchTerms}}"> </li> {{#labelNames}} <li> <a href="#" class="js-filter-toggle filter-label-toggle clearfix {{#activeGreen}}active{{/activeGreen}}" attr="green"> <span class="card-label green-label"></span> <span class="title"> {{#green}} {{green}} {{/green}} {{^green}} <span class="quiet">Green label (default)</span> {{/green}} </span> <span class="app-icon small-icon light close-icon"></span> </a> </li> <li> <a href="#" class="js-filter-toggle filter-label-toggle clearfix {{#activeYellow}}active{{/activeYellow}}" attr="yellow"> <span class="card-label yellow-label"></span> <span class="title"> {{#yellow}} {{yellow}} {{/yellow}} {{^yellow}} <span class="quiet">Yellow label (default)</span> {{/yellow}} </span> <span class="app-icon small-icon light close-icon"></span> </a> </li> <li> <a href="#" class="js-filter-toggle filter-label-toggle clearfix {{#activeOrange}}active{{/activeOrange}}" attr="orange"> <span class="card-label orange-label"></span> <span class="title"> {{#orange}} {{orange}} {{/orange}} {{^orange}} <span class="quiet">Orange label (default)</span> {{/orange}} </span> <span class="app-icon small-icon light close-icon"></span> </a> </li> <li> <a href="#" class="js-filter-toggle filter-label-toggle clearfix {{#activeRed}}active{{/activeRed}}" attr="red"> <span class="card-label red-label"></span> <span class="title"> {{#red}} {{red}} {{/red}} {{^red}} <span class="quiet">Red label (default)</span> {{/red}} </span> <span class="app-icon small-icon light close-icon"></span> </a> </li> <li> <a href="#" class="js-filter-toggle filter-label-toggle clearfix {{#activePurple}}active{{/activePurple}}" attr="purple"> <span class="card-label purple-label"></span> <span class="title"> {{#purple}} {{purple}} {{/purple}} {{^purple}} <span class="quiet">Purple label (default)</span> {{/purple}} </span> <span class="app-icon small-icon light close-icon"></span> </a> </li> <li> <a href="#" class="js-filter-toggle filter-label-toggle clearfix {{#activeBlue}}active{{/activeBlue}}" attr="blue"> <span class="card-label blue-label"></span> <span class="title"> {{#blue}} {{blue}} {{/blue}} {{^blue}} <span class="quiet">Blue label (default)</span> {{/blue}} </span> <span class="app-icon small-icon light close-icon"></span> </a> </li> {{/labelNames}} {{#boardMems}} <li> <a href="#" class="js-filter-toggle filter-member-toggle clearfix {{#activeFilter}}active{{/activeFilter}}" attr="{{username}}"> <div class="member"> {{>member}} </div> <p class="title"> {{fullName}} <span class="quiet">({{username}})</span> <span class="app-icon small-icon light close-icon"></span> </p> </a> </li> {{/boardMems}} <li class="card-filter-title" style="margin-top: 8px;"> <p style="margin-bottom: 4px;"> <strong>Display Type</strong> </p> </li> <li class="display-options clearfix"> <ul> <li> <a href="#" class="js-use-hidden {{#hiddenfilter}} active{{/hiddenfilter}}">Hidden</a> </li> <li> <a href="#" class="js-use-translucent last{{#translucentfilter}} active{{/translucentfilter}}">Translucent</a> </li> </ul> </li> <li style="margin-top: 8px;"> <a href="#" class="js-filter-toggle js-clear-all clearfix"> <span class="title quiet">Clear All</span> </a> </li> </ul> ',
card_in_list:'<div class="card-labels clearfix">{{#labels}}{{#isActive}} <div class="card-label {{color}}-label"> </div> {{/isActive}}{{/labels}}</div> {{#__ed}} <span class="card-operation app-icon dark-hover small-icon menu-icon js-card-menu"></span> {{/__ed}} <a href="{{url}}" class="list-card-title clear"><span class="card-short-id hide">#{{idShort}} </span>{{name}}</a> <div class="badges"></div> <div class="list-card-members"></div> ',landing:'<script type="text/javascript"> if(!window.unsupported && $){ $.getScript(\'https://use.typekit.com/abf0ews.js\', function(){ try{Typekit.load();}catch(e){}; }); } <\/script> <div class="markeddown landing-section landing-header"> <div class="landing-section-wrapper pitch-section clearfix"> <div class="landing-block pitch-block clearfix"> <img title="Trello logo" src="https://d2k1ftgv7pobq7.cloudfront.net/images/landing/05a76001c51b56f750b03de332e6c5c0/logo-tag.png"> <h1>Trello</h1> <h2>Organize anything, together.</h2> <p class="pitch"> Trello is a collaboration tool that organizes your projects into boards. In one glance, Trello tells you what\'s being worked on, who\'s working on what, and where something is in a process. </p> <a class="button primary" href="/signup"> {{#AB_create_a_free_account}} Create a Free Account {{/AB_create_a_free_account}} {{^AB_create_a_free_account}} Create an Account {{/AB_create_a_free_account}} </a> <p> Creating an account is free and easy. </p> </div> <div class="landing-block video-block clearfix"> <div class="video-block-wrapper"> <iframe width="100%" height="100%" src="https://www.youtube.com/embed/aaDf1RqeLfo?rel=0&hd=1&wmode=transparent&modestbranding=1&autohide=1&showinfo=0&fs=1" frameborder="0" allowfullscreen wmode="Opaque"></iframe> </div> </div> </div> </div> <div class="markeddown landing-section"> <div class="landing-section-wrapper clearfix"> <div class="landing-headline"> <h2>The Good Stuff</h2> <p> What will Trello do for you? </p> </div> <div class="landing-block"> <h3>Overview</h3> <p> All your projects, all your tasks, all of your team--organized, accounted for, and easily visible at a glance. New users instantly understand the list and card metaphor, and can be working on Trello within minutes. </p> </div> <div class="landing-block"> <img alt="Board example" src="https://d2k1ftgv7pobq7.cloudfront.net/images/landing/a91fb43f4a4f191fbb116bd729c1a040/board.png"> </div> <div class="landing-block"> <h3>Boards</h3> <p> A board is a just a collection of lists (and lists hold the cards). You\u2019ll probably want a board for each project you\u2019re working on. You can add and start using a new board in seconds. You can glance at a board and get a handle on the status of any project. </p> </div> <div class="landing-block"> <h3>Lists</h3> <p> Lists can be just simple lists, but they are most powerful when they represent a stage in a process. Simply drag your lists into place to represent your workflow. Move a card from one list to the next to show your progress. </p> </div> <div class="landing-block"> <h3>Cards</h3> <p> Cards are tasks. You make a card to track something you or your team needs to get done. You can add attachments, embed video, assign users, add due dates, make checklists, or you can just add your card to a board with no fuss and no overhead, and know exactly what work needs to get done. </p> </div> <div class="landing-block"> <img alt="Card example" src="https://d2k1ftgv7pobq7.cloudfront.net/images/landing/46834978dc1086d1b3683a2fa26728c0/card.png"> </div> <div class="landing-block"> <h3>Real Time Updates</h3> <p> Trello instantly updates. No refreshing is ever required, and everyone on the team sees all updates and actions immediately. Try it! </p> </div> <div class="landing-block"> <h3>Members and Organizations</h3> <p> You have control over board permissions. You can make a board that your company and team can see, or you can restrict it to specific people. You can invite your whole company with one invite, or you can supply a list of emails. Either way, adding lots of people to your or your organization\u2019s boards is simple. </p> </div> <div class="landing-block"> <h3>Works on just about any device.</h3> <p> Trello works on smartphones, tablets, laptops... just about anything. Just point your browser to trello.com and you\'re using it on the go. There\'s nothing to install or update. </p> </div> <div class="landing-block"> <h3>Notifications</h3> <p> You won\u2019t miss a thing. Trello lets you know when you receive lavish praise in the comments, when someone does something to a card you\u2019re assigned to, or sends you a board invite. With the updates column you can see exactly what\u2019s happening on the board as it is happening. </p> </div> <div class="landing-block"> <h3>Public Boards</h3> <p> Make a public board and let your customers see your roadmap or your current priorities. Allow public commenting and voting, making it perfect for new feature requests, or to decide amongst your friends where to take your next vacation. </p> </div> <div class="landing-block"> <h3>Solid Security</h3> <p> Everything in Trello is secure. All traffic runs over SSL which encrypts all of your traffic. Trello is backed up hourly, so you\u2019re in no danger of losing important lists or tasks. </p> </div> <div class="landing-block"> <h3>Embed it all!</h3> <p> Upload attachments, embed video, add images, Twitter previews, and so on. </p> </div> <div class="landing-block"> <h3>Hey, pay attention!</h3> <p> If you need to get someone else\u2019s attention, just address them like \u201c@bob\u201d and they will get a notification. </p> </div> </div> </div> <div class="markeddown landing-section"> <div class="landing-section-wrapper clearfix"> <div class="landing-headline"> <h2>Suggested Uses</h2> <p> You\'ll likely customize your board to your workflow, but here are some potential starting points. </p> </div> <div class="landing-block"> <h3>Event Planning</h3> <p> Use Trello to organize a wedding, hiking trip, or tropical vacation. Keep track of supplies, florists, hotels, photographers, venues, rental cars, or DJs. See what\'s been booked and what\'s been confirmed. Invite fellow organizers and participants and keep them in the loop. </p> <p> <strong> Lists: </strong> Researching, Booked, Confirmed </p> </div> <div class="landing-block"> <h3>Software Development</h3> <p> Get the big picture. See whether a feature is just starting to be designed or about to be shipped. Work privately on your stealth start-up, or make a board public and let users vote and comment on features. </p> <p> <strong> Lists: </strong> Ideas, Design, Development, Implemented, Live </p> </div> <div class="landing-block"> <h3>Personal To-Dos</h3> <p> Ditch your scattered notebooks, sticky notes, and text files. Use Trello for keeping track of grocery items, errands, or house work. </p> <p> <strong> Lists: </strong> To Do, Doing, Done </p> </div> <div class="landing-block"> <h3>Publishing</h3> <p> Assign writers to story leads. Keep track of research files like press releases. Comment and discuss writing. See what\'s ready to be published and what\'s breaking. </p> <p> <strong> Lists: </strong> Lead, Research, Writing, Editing, Published </p> </div> <div class="landing-block"> <h3>Recruiting</h3> <p> The hiring process can be long and difficult to manage. Keep track of whether candidates have received a phone screen or an interview, assign team members to do an interview, and discuss potential employees. </p> <p> <strong> Lists: </strong> Resume, Phone Screen, Interview, Decision </p> </div> <div class="landing-block"> <h3>Freelance and Consulting</h3> <p> Manage clients and engagements. Upload wireframes, reports, and reviews. </p> <p> <strong> Lists: </strong> Leads, Communicated, In Progress, Review, Complete </p> </div> <div class="landing-block"> <h3>Sales</h3> <p> Quickly visualize every section of your sales pipeline. See who is managing what accounts and how far along they are. </p> </div> <div class="landing-block"> <h3>Customer Support</h3> <p> Respond to customer inquiries by referring to your organization\'s boards. Organize customer inquiries and calls. Schedule engagements, assign team members, and keep everybody up to date on progress. </p> </div> </div> </div> <div class="markeddown landing-section landing-elsewhere"> <div class="landing-section-wrapper clearfix"> <div class="landing-headline"> <h2>Stay Up to Date</h2> </div> <div class="landing-block"> <div class="elsewhere-icon blog"> <a target="_blank" class="social-icon blog-icon" href="http://blog.trello.com"></a> </div> <div class="detail"> <h3>Trello Blog</h3> <p>Read the <a href="http://blog.trello.com">Trello Blog</a>.</p> </div> </div> <div class="landing-block"> <div class="elsewhere-icon twitter"> <a target="_blank" class="social-icon twitter-icon" href="https://www.twitter.com/trello"></a> </div> <div class="detail"> <h3>Twitter</h3> <p>Follow @trello on Twitter <a href="https://twitter.com/intent/follow?user_id=360831528">here</a>.</p> </div> </div> <div class="landing-block"> <div class="elsewhere-icon facebook"> <a target="_blank" class="social-icon facebook-icon" href="https://www.facebook.com/TrelloApp"></a> </div> <div class="detail"> <h3>Facebook</h3> <p>Like us on Facebook <a href="https://www.facebook.com/trelloapp">here</a>.</p> </div> </div> </div> </div> <div class="markeddown landing-section landing-footer"> <div class="landing-section-wrapper clearfix"> <p>Made in New York City by Fog Creek Software</p> <a href="http://www.fogcreek.com/?fccmp=trello_landing" title="Fog Creek Software"> <img src="https://d2k1ftgv7pobq7.cloudfront.net/images/17a0f12ca7961ef879477c2f9c40ed02/fog_creek_logo.png"> </a> </div> </div> ',
badges:'{{#hasUnreadNotifications}} <span class="app-icon small-icon notification-icon light"></span>{{count}} {{/hasUnreadNotifications}} {{#hasVotes}} <span class="app-icon small-icon vote-icon"></span>{{count}} {{/hasVotes}} {{#hasDesc}} <span class="app-icon small-icon edit-icon"></span> {{/hasDesc}} {{#hasComments}} <span class="app-icon small-icon comment-icon"></span>{{count}} {{/hasComments}} {{#hasAttachments}} <span class="app-icon small-icon attachment-icon"></span>{{count}} {{/hasAttachments}} {{#hasTasks}} <span class="app-icon small-icon checklist-icon {{#complete}}light {{/complete}}"></span>{{count}}{{#hasTotal}}/{{total}}{{/hasTotal}} {{/hasTasks}} {{#hasDueDate}} <span class="app-icon small-icon {{#isDueSoon}} light {{/isDueSoon}} {{#isDueNow}} light {{/isDueNow}} {{#isDuePast}} light {{/isDuePast}} date-icon"></span>{{shortDueDate}} {{/hasDueDate}} {{#hasFogBugzLink}} <span class="app-icon small-icon kiwi-icon"></span> {{/hasFogBugzLink}} {{#isSubscribed}} <span class="app-icon small-icon follow-icon"></span> {{/isSubscribed}} {{#isArchived}} <span class="app-icon small-icon archive-icon"></span>Archived {{/isArchived}} ',
search_input:'<label for="search-text">Global Search</label> <input id="search-text" type="text" autocomplete="off" autocorrect="off" spellcheck="false"> <input id="search-submit" type="submit" value="Search"> <a class="header-btn header-search js-search-submit" href="#"> <span class="app-icon light search-icon"></span> </a> ',board_desc:'<div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#" title="Close this dialog window.">Close</a> </div> <div class="window-header clearfix"> <span class="window-header-icon app-icon board-icon" href="#"></span> <div class="window-title non-empty inline {{#__own}} editable {{/__own}} " attr="name"> <h2 class="window-title-text current hide-on-edit"> {{name}} </h2> {{#__own}} <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <div class="edit edit-heavy"> <textarea type="text" class="field single-line"></textarea> </div> {{/__own}} </div> </div> <div class="window-main-col"> <div class="board-description clearfix{{#__ed}} editable{{/__ed}}" attr="desc"> <div class="current markeddown hide-on-edit bottom"> {{^hasDesc}} <p class="bottom"> {{#__ed}}<a class=\'quiet empty\' style="padding: 100px 0;" href="#">No description. Click to edit.</a>{{/__ed}} {{^__ed}}<span class=\'quiet empty\' style="padding: 100px 0;">No description.</span>{{/__ed}} </p> {{/hasDesc}} </div> {{#__ed}} {{#hasDesc}} <p class="bottom js-edit-desc"> <a class="quiet-button hide-on-edit w-img" href="#"><span class="app-icon small-icon edit-icon"></span>Edit the board description.</a> </p> {{/hasDesc}} <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <div class="board-description-edit edit"> <p class="helper"><a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> accepted</p> <textarea class="field" /> </div> {{/__ed}} </div> </div> ',
board_watchers:"{{#showWatchers}} {{nWatchers}} people watching. {{/showWatchers}} ",board_permissions:'<span title="{{altText}}" class="app-icon small-icon public-status {{permissionLevel}}-icon"></span> ',popover_change_email:'<p> Your email address is currently <b>{{email}}</b>. </p> <form> <p id="account-error" class="error"></p> <div class="field"> <label for="email">New Email Address</label> <input id="email" type="email" name="email" value=""> </div> <input type="submit" class="primary js-save-changes" value="Send Confirmation Email"> </form> <hr> <p class="quiet bottom"> This change will take effect after you click on the link in the confirmation email sent to the new email address. </p> ',
member:'{{#avatarHash}} <img class="member-avatar" height="30" width="30" src="{{__avatarDomain}}/{{avatarHash}}/30.png" alt="{{#deleted}}This member has deleted their account{{/deleted}}{{^deleted}}{{fullName}} ({{username}}){{/deleted}}" title="{{#deleted}}This member has deleted their account{{/deleted}}{{^deleted}}{{fullName}} ({{username}}){{/deleted}}" /> {{/avatarHash}} {{^avatarHash}} <span class="member-initials" title="{{#deleted}}This member has deleted their account{{/deleted}}{{^deleted}}{{fullName}} ({{username}}){{/deleted}}"> {{^deleted}}{{initials}}{{/deleted}} {{#deleted}}?{{/deleted}} </span> {{/avatarHash}} {{#showStatus}}<span class="status {{status}}" title="{{#status_active}}This member is online and viewing Trello.{{/status_active}}{{#status_idle}}This member is idle. They have Trello open but are not looking at it.{{/status_idle}}{{#status_disconnected}}This member is offline.{{/status_disconnected}}"></span>{{/showStatus}} {{#isBoardAdmin}}<span class="admin" title="This member is an admin of this board."></span>{{/isBoardAdmin}} {{#isOrganizationAdmin}}<span class="admin" title="This member is an admin of this organization."></span>{{/isOrganizationAdmin}} ',
ref_menu:'<div class="js-announce"></div> <ul class="pop-over-list"> <li> <a class="js-info-menu-about" href="/about">About</a> </li> <li> <a class="js-info-menu-guide" href="/guide">Guide</a> </li> <li> <a class="js-info-menu-help" href="/help">Help!</a> </li> <li> <a class="js-info-menu-shortcuts" href="/shortcuts">Shortcuts</a> </li> <li> <a class="js-info-menu-trello-dev" href="https://trello.com/board/4d5ea62fd76aa1136000000c">Trello Development Board</a> </li> <li> <a class="js-info-menu-api js-real-link" href="/docs/">API</a> </li> <li> <a class="js-info-menu-privacy" href="/privacy">Privacy, Security, Data</a> </li> <li> <a target="_blank" class="js-info-menu-tos js-real-link" href="/legal">Terms of Service</a> </li> </ul> <hr> <ul class="pop-over-list"> {{#showAnnouncements}} <li> <a target="_blank" class="js-announcements" href="#" title="Announcements"> Announcements </a> </li> {{/showAnnouncements}} <li> <a target="_blank" class="js-real-link js-info-menu-blog" href="http://blog.trello.com" title="Trello Blog"> Trello Blog </a> </li> <li> <a target="_blank" class="js-real-link js-info-menu-twitter" href="https://www.twitter.com/trello" title="@trello on Twitter"> @trello on Twitter </a> </li> <li> <a target="_blank" class="js-real-link js-info-menu-facebook" href="https://www.facebook.com/TrelloApp" title="Trello on Facebook"> Trello on Facebook </a> </li> </ul> ',
member_profile:'<div class="window-module gutter clearfix"> <div class="bio {{#__ed}} editable {{/__ed}}{{^bio}} unspecified{{/bio}}" attr="bio"> <div class="js-text-as-html{{#__ed}} current hide-on-edit{{/__ed}}"> {{{bioHtml}}} {{#__ed}}{{^bio}}<p><a href="#">No bio specified (click to edit)</a></p>{{/bio}}{{/__ed}} </div> {{#__ed}} <div class="edit"> <textarea class="field"></textarea> </div> {{/__ed}} </div> {{#email}} <p class="email quiet"> {{email}} </p> {{/email}} </div> <div class="window-module"> <div class="window-module-title"> <span class="app-icon org-icon window-module-title-icon"></span> <h3>Organizations</h3> </div> <div class="bold-list list-orgs gutter"> </div> </div> <div class="window-module"> <div class="window-module-title"> <span class="app-icon activity-icon window-module-title-icon"></span> <h3>Activity</h3> </div> {{#emptyActions}}<p class="empty-list">No Actions</p>{{/emptyActions}} <div class="list-actions"></div> <p class="bottom"> <a class="show-more js-more-actions" href="#">Load More Activity</a> </p> </div> ',
popover_move_card:'<div class="button-link setting" style="width: 255px; max-width: 255px; margin-bottom: 8px;"> <span class="label">Board</span> <span class="value js-board-value"></span> <label>Board</label> <select class="js-select-board"> {{#boards}} <option value="{{id}}"{{#selected}} selected="selected"{{/selected}}>{{name}}{{#selected}} (current){{/selected}}</option> {{/boards}} </select> </div> <div class="button-link setting" style="width: 163px; margin: 0 8px 8px 0;"> <span class="label">List</span> <span class="value js-list-value"></span> <label>List</label> <select class="js-select-list"></select> </div> <div class="button-link setting" style="width: 70px; margin-bottom: 8px;"> <span class="label">Position</span> <span class="value js-pos-value"></span> <label>Position</label> <select class="js-select-position"></select> </div> <input type="submit" class="primary wide js-commit-position" value="Move"/> ',
member_board_stats:'<a class="clearfix link-item highlight-icon js-open-board {{#canJoin}}block left{{/canJoin}}" {{#canJoin}}style="margin-top: 2px;"{{/canJoin}} href="{{url}}"> <span class="item-name">{{name}}</span> <span {{#permissionLevel_private}} title="This board is private. It\'s only viewable to members of this board." {{/permissionLevel_private}} {{#permissionLevel_org}} title="This board is only viewable to members of the organization." {{/permissionLevel_org}} {{#permissionLevel_public}} title="This board is public. It\'s viewable to the entire Internet." {{/permissionLevel_public}} class="app-icon small-icon permission-icon {{#permissionLevel_public}} public-icon {{/permissionLevel_public}} {{#permissionLevel_private}} private-icon {{/permissionLevel_private}} {{#permissionLevel_org}} org-private-icon {{/permissionLevel_org}}"></span> {{#__loggedIn}} {{#pinned}} <span title="This board is pinned to your header menu." class="app-icon small-icon pin-icon"> </span> {{/pinned}} <span class="counts"> {{#actionCount}} <span class="count"> <span class="app-icon small-icon activity-icon"></span> {{actionCount}}{{#plus}}+{{/plus}} </span> {{/actionCount}} </span> <span class="board-list-menu app-icon small-icon menu-icon js-boards-list-menu"></span> {{/__loggedIn}} </a> {{#__loggedIn}} {{#canJoin}} <div class="options"> <a class="button-link js-join-board" href="#">Join</a> </div> {{/canJoin}} {{/__loggedIn}} ',
embedly:'\ufeff<div class="embed embed-{{type}} embed-provider-{{provider_name}}"> {{^type_photo}} {{#requireHttps}}{{{htmlHttps}}}{{/requireHttps}}{{^requireHttps}}{{{html}}}{{/requireHttps}} {{/type_photo}} {{#type_photo}} <a href="{{originalUrl}}" target="_blank"><img src="{{url}}" /></a> {{/type_photo}} </div> ',checklist:'<div class="window-module-title no-divider"> <span class="app-icon checklist-icon window-module-title-icon"></span> {{#__ed}} <div class="editable non-empty checklist-title" attr="name"> <h3 class="current hide-on-edit" style="margin-right: 20px;">{{name}}</h3> <div class="edit edit-heavy"> <input type="text" class="field full single-line"></input> </div> <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <span class="app-icon small-icon menu-icon dark-hover hide-on-edit js-open-checklist-menu"></span> </div> {{/__ed}} {{^__ed}} <h3>{{name}}</h3> {{/__ed}} </div> <div class="tasks no-edits"> <div class="task-progress-total gutter"> <div class="progress-current" style="width: 0%"> <span class="progress-percentage">0%</span> </div> </div> <div class="task-list"></div> {{#__ed}} <div class="new-task gutter"> <input type="text" class="new-task-text full" placeholder="Add item"> <div class="add-controls clearfix"> <input type="submit" class="primary confirm js-add-checklist-item" value="Add"> <a href="#" class="app-icon close-icon dark-hover cancel js-cancel-checklist-item"></a> </div> </div> {{/__ed}} </div> ',
popover_set_email_freq:'<ul class="pop-over-list" name="minutesBetweenSummaries"> <li> <a class="highlight-icon" value="-1"> Never {{#minutesBetweenSummaries_-1}}<span class="app-icon small-icon check-icon"></span>{{/minutesBetweenSummaries_-1}} </a> </li> <li> <a class="highlight-icon" value="60"> Periodically {{#minutesBetweenSummaries_60}}<span class="app-icon small-icon check-icon"></span>{{/minutesBetweenSummaries_60}} </a> </li> <li> <a class="highlight-icon" value="1"> Instantly {{#minutesBetweenSummaries_1}}<span class="app-icon small-icon check-icon"></span>{{/minutesBetweenSummaries_1}} </a> </li> </ul> <hr> <p class="quiet bottom"> Emails combine all notifications that you have not read in Trello. \'Periodically\' means about every hour. \'Instantly\' means every minute. </p> ',
popover_change_labels:'<ul class="edit-labels-pop-over{{#showShortcuts}} show-shortcuts{{/showShortcuts}}"> {{#labels}} <li> <a class="card-label selectable {{color}}-label {{#isActive}}active{{/isActive}}" label="{{color}}"> {{#name}}{{name}}{{/name}} {{#shortcut}}<span class="shortcut">({{shortcut}})</span>{{/shortcut}} <span class="app-icon light small-icon check-icon"></span> </a> </li> {{/labels}} </ul> {{#__ed}} <div class="{{#hideEditTitles}}hide{{/hideEditTitles}}"> <hr> <p class="bottom"> <a class="quiet-button full js-edit-label-titles" style="padding: 6px 8px;" href="#"> <span class="text">Change label titles...</span> </a> </p> <p class="bottom"> <a class="quiet-button full js-toggle-color-blind-mode" style="padding: 6px 8px;" href="#"> <span class="text">{{cbToggleText}} Color Blind Friendly Mode</span> </a> </p> </div> {{/__ed}} ',
member_on_activity_menu:'<li><a class="js-show-detail" href="/{{username}}">Profile</a></li> ',search_results:' {{^truncated}} <div class="window-header clearfix"> <span class="window-header-icon app-icon search-icon"></span> <h2 class="window-title"> Search Results </h2> </div> {{/truncated}} {{#empty}} {{#loading}}<div class="spinner loading"></div>{{/loading}} {{^loading}} {{^truncated}} <p class="empty-list"> {{/truncated}} {{#truncated}} <p class="empty"> {{/truncated}} No Results </p> {{/loading}} {{/empty}} {{^empty}} <ul class="search-results-list"> {{#list}} {{#isCategoryLabel}} <li class="category"> <span class="app-icon {{#truncated}} small-icon {{/truncated}} {{categoryClass}}-icon"></span> {{category}} </li> {{/isCategoryLabel}} {{^isCategoryLabel}} <li class="search-item"> <a class="clearfix {{#isMember}} member-result {{/isMember}}" {{#url}} href="{{url}}"{{/url}}> {{#isMember}} {{#member}} <div class="member"> {{>member}} </div> {{/member}} {{/isMember}} <span class="match-label">{{{labelHTML}}} {{#isCard}} <span class="quiet">on board {{#board}}{{name}}{{/board}}</span> {{/isCard}} </span> {{#matchText}} <span class="match-text">{{{matchTextHTML}}}</span> {{/matchText}} </a> </li> {{/isCategoryLabel}} {{/list}} {{#truncated}} <li class="show-all-results search-item"> <a class="quiet js-all-search-results">Show all results...</a> </li> {{/truncated}} </ul> {{/empty}} ',
board_menu_perms:' <div class="button-link setting{{^__own}} disabled{{/__own}}" style="width: 256px; max-width: 256px; float: none;"> <span class="label">Visibility</span> <span class="value"></span> <label>Visibility</label> <select name="permissionLevel"> <option value="private"{{#permissionLevel_private}} selected{{/permissionLevel_private}}> Members </option> {{#hasOrg}} <option value="org"{{#permissionLevel_org}} selected{{/permissionLevel_org}}> Organization </option> {{/hasOrg}} <option value="public"{{#permissionLevel_public}} selected{{/permissionLevel_public}}> Public </option> </select> </div> <hr> <div class="button-link setting{{^__own}} disabled{{/__own}}" style="width: 256px; max-width: 256px; float: none;"> <span class="label">Comments</span> <span class="value"></span> <label>Comments</label> <select name="comments"> <option value="none"{{#comments_none}} selected{{/comments_none}}> Disabled </option> <option value="members"{{#comments_members}} selected{{/comments_members}}> Members </option> {{#hasOrg}} <option value="org"{{#comments_org}} selected{{/comments_org}}{{#permissionLevel_private}} disabled{{/permissionLevel_private}}> Organization Members </option> {{/hasOrg}} <option value="public"{{#comments_public}} selected{{/comments_public}}{{#permissionLevel_private}} disabled{{/permissionLevel_private}} {{#permissionLevel_org}} disabled{{/permissionLevel_org}}> Public Members </option> </select> </div> <hr> <div class="button-link setting{{^__own}} disabled{{/__own}}" style="width: 256px; max-width: 256px; float: none;"> <span class="label">Voting</span> <span class="value"></span> <label>Voting</label> <select name="voting"> <option value="none"{{#voting_none}} selected{{/voting_none}}> Disabled </option> <option value="members"{{#voting_members}} selected{{/voting_members}}> Members </option> {{#hasOrg}} <option value="org"{{#voting_org}} selected{{/voting_org}}{{#permissionLevel_private}} disabled{{/permissionLevel_private}}> Organization Members </option> {{/hasOrg}} <option value="public"{{#voting_public}} selected{{/voting_public}}{{#permissionLevel_private}} disabled{{/permissionLevel_private}} {{#permissionLevel_org}} disabled{{/permissionLevel_org}}> Public Members </option> </select> </div> <hr> <div class="button-link setting{{^__own}} disabled{{/__own}}" style="width: 256px; max-width: 256px; float: none;"> <span class="label">Adding Members</span> <span class="value"></span> <label>Adding Members</label> <select name="invitations"> <option value="owners"{{#invitations_owners}} selected{{/invitations_owners}}> Admins </option> <option value="members"{{#invitations_members}} selected{{/invitations_members}}> Members </option> </select> </div> {{#permissionLevel_org}} <hr> <div class="button-link setting{{^__own}} disabled{{/__own}}" style="width: 256px; max-width: 256px; float: none;"> <span class="label">Allow organization members to join</span> <span class="value"></span> <label>Allow organization members to join</label> <select name="selfJoin"> <option value="true"{{#selfJoin_true}} selected{{/selfJoin_true}}{{#permissionLevel_private}} disabled{{/permissionLevel_private}}> Enabled </option> <option value="false"{{#selfJoin_false}} selected{{/selfJoin_false}}{{#permissionLevel_private}} disabled{{/permissionLevel_private}}> Disabled </option> </select> </div> {{/permissionLevel_org}} ',
card_detail:'<div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#" title="Close this dialog window.">Close</a> <a class="app-icon menu-icon dark-hover js-card-menu" href="#" title="Open card menu.">Open Card Menu</a> </div> <div class="window-header clearfix"> <span class="window-header-icon app-icon card-icon" href="#"></span> <div class="window-title card-detail-title non-empty inline {{#__ed}} editable {{/__ed}} " attr="name"> <h2 class="window-title-text current hide-on-edit"> {{name}} </h2> {{#__ed}} <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> <div class="edit edit-heavy"> <textarea type="text" class="field single-line"></textarea> </div> {{/__ed}} <div class="quiet hide-on-edit window-header-inline-content js-current-list"></div> </div> </div> <div class="window-main-col"> <div class="card-detail-metadata clearfix gutter"> <div class="badges clearfix"></div> </div> <div class="window-main-col-content clearfix"> <div class="card-detail-desc window-module gutter clearfix {{#__ed}} editable {{/__ed}}" attr="desc"> <div class="current markeddown hide-on-edit bottom"{{^desc}} style="display:none"{{/desc}}></div> {{#__ed}} <p class="bottom"><a class="hide-on-edit quiet-button w-img js-edit-desc" href="#"><span class="app-icon small-icon edit-icon"></span>Edit the card description.</a></p> <div class="card-detail-edit edit"> <p class="helper"><a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> accepted</p> <textarea class="field" /> </div> <p class="edits-warning quiet">You have unsaved edits on this field. <a href=\'#\' class=\'js-view-edits\'>View edits</a> or <a href=\'#\' class=\'js-discard-edits\'>discard</a>.</p> {{/__ed}} </div> <div class="checklists window-module clearfix no-edits"></div> <div class="window-module"> <div class="window-module-title no-divider"> <span class="app-icon activity-icon window-module-title-icon"></span> <h3>Activity</h3> </div> {{#canComment}} <div class="new-comment"> <textarea class="new-comment-input js-no-ie-placeholder" placeholder="Write a comment..." /> <div class="add-controls clearfix"> <input type="submit" class="primary confirm js-add-comment" value="Comment"> <a href="#" class="app-icon close-icon dark-hover cancel js-cancel-comment"></a> <a href="#" class="option touch-hide js-open-mention-selector"><span class="app-icon member-icon"></span></a> </div> </div> {{/canComment}} <div class="list-actions"></div> {{#loading}} <div class="spinner loading js-loading-card-actions"></div> {{/loading}} </div> </div> </div> <div class="window-sidebar"> <div class="window-module card-label-list clearfix"> <h3 class="inline">Labels</h3> <div class="card-labels clear"></div> {{#__ed}} <a class="button-link js-edit-labels"> <span class="app-icon small-icon label-icon"></span> Edit Labels&hellip; </a> {{/__ed}} </div> <div class="window-module clearfix"> <h3>Members</h3> <div class="card-detail-members clearfix"></div> <p class="no-mems empty hide">No members assigned.</p> {{#__ed}} <a class="button-link js-change-card-members"> <span class="app-icon small-icon member-icon"></span> Assign&hellip; </a> {{/__ed}} </div> <div class="window-module clearfix attachments"> <h3>Attachments</h3> <ul class="attachment-list"></ul> <p class="no-attachments empty hide">No attachments.</p> {{#__ed}} <div class="uploader ios-hide"> <form class="realfile" action="/api/card/{{id}}" method="post" enctype="multipart/form-data"> <input type="hidden" name="token" value="" /> <input type="hidden" name="method" value="attachFile" /> <input type="hidden" name="format" value="http" /> <input type="file" name="upload" class="js-attach-file" tabindex="-1"/> </form> <a class="button-link fakefile js-fakefile"> <span class="app-icon small-icon attachment-icon"></span> Upload </a> </div> <p class="error js-file-too-large" style="display:none; -moz-border-radius: 3px; -webkit-border-radius: 3px; font-weight: bold; margin: 8px 0 0; padding: 6px; background: #e3e3e3; ">File too large. 10mb limit.</p> {{/__ed}} </div> {{^__ed}} {{#showActions}} <div class="window-module clearfix"> <h3>Actions</h3> <div class="clearfix"> {{#canSubscribe}} <div class="js-subscribe-sidebar-button"></div> {{/canSubscribe}} {{#canVote}} <div class="js-vote-sidebar-button"></div> {{/canVote}} </div> </div> {{/showActions}} {{/__ed}} {{#__ed}} <div class="window-module other-actions clearfix"> <h3>Actions</h3> <div class="clearfix"> <div class="js-subscribe-sidebar-button"></div> <div class="js-vote-sidebar-button"></div> <a class="button-link js-add-checklist-menu"> <span class="app-icon small-icon checklist-icon"></span> Add checklist... </a> <a class="button-link js-add-due-date"> <span class="app-icon small-icon date-icon"></span> Due date&hellip; </a> <a class="button-link js-move-card"> <span class="app-icon small-icon move-icon"></span> Move&hellip; </a> <a class="button-link js-close-card"> <span class="app-icon small-icon archive-icon"></span> Archive </a> <a class="button-link js-reopen-card"> <span class="app-icon small-icon reopen-icon"></span> Send to board </a> </div> </div> {{/__ed}} <div class="window-module quiet-actions clearfix"> <p class="quiet" style="padding: 4px 6px; margin: 0;"> Card #{{idShort}} </p> <a class="quiet-button js-share" href="#"> <span class="text">Share, Print, and Export</span> </a> {{#__ed}} <a class="quiet-button js-delete-card-popover" href="#"> <span class="text">Delete this card</span> </a> {{/__ed}} </div> </div> ',
manual_help:'<div class="gutter"> <h3>Read the Guide</h3> <p> Not sure of the difference between a list and a checklist? We\'ve collected all the common Trello terms and described what they are and how to use them. Good for beginners or those times when you forget how that one thing works. Visit the <a href="/guide">Guide</a>. </p> <h3>Shortcuts</h3> <p> Trello is loaded with keyboard shortcuts so you can vote, move cards, archive, cancel, and assign users with fewer clicks. We\'ve collected them all <a href="/shortcuts">here</a>. </p> <h3>Features and Ideas</h3> <p> Just thought of a great idea for Trello? We might already be working on it! We use a public Trello board to develop Trello so you can see, comment, and vote on features. Visit our <a href="https://trello.com/board/4d5ea62fd76aa1136000000c">Trello Development board</a>. </p> <p> If your feature isn\'t there, tell us about it on Twitter! Follow <a href="https://twitter.com/intent/follow?user_id=360831528">@trello</a> and send a tweet to us about your idea. If your idea won\'t fit into 140 characters, you can email it to <a href="mailto:feature-ideas@trello.com">feature-ideas@trello.com</a>. We read all feature ideas but may not be able to respond to them individually. </p> <h3>How do I... ?</h3> <p> Your question may already be answered! There\'s a wealth of information on how to do stuff in Trello on the <a href="http://webapps.stackexchange.com/">Web Applications Stack Exchange</a> community. The Web Applications Stack Exchange is a free, community-driven Q&amp;A site for power users of web applications. It\'s a great place to learn how to use Trello (or Gmail or Twitter or YouTube) well. See <a href="http://webapps.stackexchange.com/questions/tagged/trello">questions tagged trello</a>. </p> <p> If you want to know how to do something, feel free to ask a question there and tag it trello. The community will be there, and the Trello team is there regularly, too. </p> <h3>Problems, Bugs, and Crashes</h3> <p> If you\'ve got a bug to report, please first check the <a href="https://trello.com/board/4d5ea62fd76aa1136000000c">Trello Development board</a> where we maintain a list of known issues and bugs. Bugs have the red label. </p> <p> If you can\'t find the bug, are having problems with your account, or are experiencing crashes please email Fog Creek at <a href="mailto:support@trello.com">support@trello.com</a>. If you could include the browser, operating system and any errors, it will help us a bunch. </p> </div> ',
board_menu_settings:'{{#__ed}} {{#__own}} <li><a class="js-rename" href="#">Rename Board</a></li> <li><a class="js-org" href="#">Change Organization</a></li> {{/__own}} <li><a class="js-permissions" href="#">Permissions</a></li> <li><a class="js-desc" href="#">Board Description</a></li> {{/__ed}} <li><a class="js-layout" href="#">Layout Options</a></li> ',notification:'<div class="member js-show-mem-menu">{{>member}}</div> <div class="phenom-desc{{#invitedToBoard}}{{#stillInvited}} invite{{/stillInvited}}{{/invitedToBoard}}{{#invitedToOrganization}}{{#stillInvited}} invite{{/stillInvited}}{{/invitedToOrganization}}"> {{#member}}<a class="inline-object js-show-mem-menu" href="#">{{fullName}}</a>{{/member}} {{#entities}} {{>entity}} {{/entities}} {{#stillInvited}} <div class="phenom-opts"> <a class="button-link js-accept-invitation" href="#">Accept</a> <a class="button-link js-reject-invitation" href="#">Reject</a> </div> {{/stillInvited}} </div> <p class="phenom-meta quiet"> {{#date}}<span class="date" dt="{{date}}"></span>{{/date}} </p> ',
label:'<span class="card-label {{color}}-label" title="{{#name}}{{name}}{{/name}}{{^name}}{{color}} label (default){{/name}}"> {{#name}}{{name}}{{/name}} {{^name}}&nbsp;{{/name}} </span> ',member_on_board_or_org_menu:'<li> <a class="{{#canChangeRole}}js-change-role{{/canChangeRole}}{{^canChangeRole}}disabled{{/canChangeRole}}" href="#"> Role:{{#memberIsAdmin}} Admin {{/memberIsAdmin}}{{^memberIsAdmin}} Member{{/memberIsAdmin}} {{#canChangeRole}} <span class="quiet">(change)</span>{{/canChangeRole}} </a> </li> <li><a class="js-show-detail" href="/{{username}}">Member Profile</a></li> {{#isBoard}} <li><a href="{{boardProfileUrl}}">View Member\'s Board Activity</a></li> {{/isBoard}} {{#canRemove}} <li> <a class="js-remove-member"> {{#isMe}} Leave {{object}} {{/isMe}} {{^isMe}} Remove from {{object}} {{/isMe}} </a> </li> {{/canRemove}} {{#isMe}} {{^isMoreThanOneAdmin}} <li> <hr> <p class="quiet bottom"> You can\'t leave because you are the only admin. To make another another user an admin, click their avatar, select "Role: Member (change)", and select "Admin". </p> </li> {{/isMoreThanOneAdmin}} {{/isMe}} ',
member_inline:'{{#avatarHash}} <img class="inline-member-av" src="{{__avatarDomain}}/{{avatarHash}}/30.png" alt="{{fullName}} ({{username}})" title="{{fullName}} ({{username}})" /> {{/avatarHash}} <span class="bold">{{fullName}}</span> ',archive:'<div class="window-header-utils"> <a class="app-icon close-icon dark-hover js-close-window" href="#">Close</a> </div> <div class="window-header"> <span class="window-header-icon app-icon archive-icon"></span> <h2 class="window-title">{{name}}</h2> </div> <div class="window-main-col"> {{^empty}} <div class="window-module clearfix"> <ul class="archive-items bold-list gutter"></ul> </div> {{/empty}} {{#empty}} <p class="empty-list">{{emptyMessage}}</p> {{/empty}} </div> <div class="window-sidebar"> <p class="helper">You have to have been a board admin to re-open a closed board.</p> </div> ',
card_inline:'<a href="{{cardUrl}}" class="inline-object"{{#nameTruncated}} title="{{name}}"{{/nameTruncated}}> {{#nameTruncated}}{{nameTruncated}}...{{/nameTruncated}} {{^nameTruncated}}{{name}}{{/nameTruncated}} </a> ',card_detail_vote_btn_sidebar:'{{#canVote}} <a class="button-link {{#voted}}is-on {{/voted}} js-{{#voted}}un{{/voted}}vote"> <span class="app-icon small-icon vote-icon"></span> Vote <span class="on"><span class="app-icon small-icon light check-icon"></span></span> </a> {{/canVote}} ',
popover_confirm_member_delete:'<p> Deleting your account is permanent. Would you like us to send an email to <b>{{email}}</b> that contains a link that you can use to delete your account? </p> <input type="submit" class="js-delete-member" value="Send the Email"> <input type="submit" class="js-cancel-delete" value="Never Mind"> ',popover_helper_new_board_add_org:'<p class="bottom"> Organizations make sharing and working within a group even easier. <a href="/org/create">Create an organization.</a> </p> '};
B("jquery")&&function(c,b){function e(b){var c=B[b]={},e,d,b=b.split(/\s+/);for(e=0,d=b.length;e<d;e++)c[b[e]]=!0;return c}function d(c,e,d){if(d===b&&1===c.nodeType)if(d="data-"+e.replace(J,"-$1").toLowerCase(),d=c.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:k.isNumeric(d)?+d:I.test(d)?k.parseJSON(d):d}catch(f){}k.data(c,e,d)}else d=b;return d}function f(b){for(var c in b)if(!("data"===c&&k.isEmptyObject(b[c]))&&"toJSON"!==c)return!1;return!0}function g(b,
c,e){var d=c+"defer",f=c+"queue",j=c+"mark",g=k._data(b,d);g&&("queue"===e||!k._data(b,f))&&("mark"===e||!k._data(b,j))&&setTimeout(function(){!k._data(b,f)&&!k._data(b,j)&&(k.removeData(b,d,!0),g.fire())},0)}function i(){return!1}function j(){return!0}function m(b,c,e){c=c||0;if(k.isFunction(c))return k.grep(b,function(b,d){return!!c.call(b,d,b)===e});if(c.nodeType)return k.grep(b,function(b){return b===c===e});if("string"===typeof c){var d=k.grep(b,function(b){return 1===b.nodeType});if(ka.test(c))return k.filter(c,
d,!e);c=k.filter(c,d)}return k.grep(b,function(b){return 0<=k.inArray(b,c)===e})}function l(b){var c=la.split("|"),b=b.createDocumentFragment();if(b.createElement)for(;c.length;)b.createElement(c.pop());return b}function h(b,c){if(1===c.nodeType&&k.hasData(b)){var e,d,f;d=k._data(b);var j=k._data(c,d),g=d.events;if(g)for(e in delete j.handle,j.events={},g)for(d=0,f=g[e].length;d<f;d++)k.event.add(c,e,g[e][d]);j.data&&(j.data=k.extend({},j.data))}}function z(b,c){var e;1===c.nodeType&&(c.clearAttributes&&
c.clearAttributes(),c.mergeAttributes&&c.mergeAttributes(b),e=c.nodeName.toLowerCase(),"object"===e?c.outerHTML=b.outerHTML:"input"===e&&("checkbox"===b.type||"radio"===b.type)?(b.checked&&(c.defaultChecked=c.checked=b.checked),c.value!==b.value&&(c.value=b.value)):"option"===e?c.selected=b.defaultSelected:"input"===e||"textarea"===e?c.defaultValue=b.defaultValue:"script"===e&&c.text!==b.text&&(c.text=b.text),c.removeAttribute(k.expando),c.removeAttribute("_submit_attached"),c.removeAttribute("_change_attached"))}
function C(b){return"undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):"undefined"!==typeof b.querySelectorAll?b.querySelectorAll("*"):[]}function w(b){if("checkbox"===b.type||"radio"===b.type)b.defaultChecked=b.checked}function A(b){var c=(b.nodeName||"").toLowerCase();"input"===c?w(b):"script"!==c&&"undefined"!==typeof b.getElementsByTagName&&k.grep(b.getElementsByTagName("input"),w)}function E(b,c,e){var d="width"===c?b.offsetWidth:b.offsetHeight,f="width"===c?1:0;if(0<d){if("border"!==
e)for(;4>f;f+=2)e||(d-=parseFloat(k.css(b,"padding"+Wa[f]))||0),d="margin"===e?d+(parseFloat(k.css(b,e+Wa[f]))||0):d-(parseFloat(k.css(b,"border"+Wa[f]+"Width"))||0);return d+"px"}d=rb(b,c);if(0>d||null==d)d=b.style[c];if(Da.test(d))return d;d=parseFloat(d)||0;if(e)for(;4>f;f+=2)d+=parseFloat(k.css(b,"padding"+Wa[f]))||0,"padding"!==e&&(d+=parseFloat(k.css(b,"border"+Wa[f]+"Width"))||0),"margin"===e&&(d+=parseFloat(k.css(b,e+Wa[f]))||0);return d+"px"}function D(b){return function(c,e){"string"!==
typeof c&&(e=c,c="*");if(k.isFunction(e))for(var d=c.toLowerCase().split(Va),f=0,j=d.length,g,i;f<j;f++)g=d[f],(i=/^\+/.test(g))&&(g=g.substr(1)||"*"),g=b[g]=b[g]||[],g[i?"unshift":"push"](e)}}function F(c,e,d,f,j,g){j=j||e.dataTypes[0];g=g||{};g[j]=!0;for(var j=c[j],i=0,m=j?j.length:0,l=c===Oa,w;i<m&&(l||!w);i++)w=j[i](e,d,f),"string"===typeof w&&(!l||g[w]?w=b:(e.dataTypes.unshift(w),w=F(c,e,d,f,w,g)));if((l||!w)&&!g["*"])w=F(c,e,d,f,"*",g);return w}function H(c,e){var d,f,j=k.ajaxSettings.flatOptions||
{};for(d in e)e[d]!==b&&((j[d]?c:f||(f={}))[d]=e[d]);f&&k.extend(!0,c,f)}function M(b,c,e,d){if(k.isArray(c))k.each(c,function(c,f){e||hb.test(b)?d(b,f):M(b+"["+("object"===typeof f?c:"")+"]",f,e,d)});else if(!e&&"object"===k.type(c))for(var f in c)M(b+"["+f+"]",c[f],e,d);else d(b,c)}function O(){try{return new c.XMLHttpRequest}catch(b){}}function v(){setTimeout(n,0);return Ia=k.now()}function n(){Ia=b}function q(b,c){var e={};k.each(Ha.concat.apply([],Ha.slice(0,c)),function(){e[this]=b});return e}
function t(b){if(!Ra[b]){var c=s.body,e=k("<"+b+">").appendTo(c),d=e.css("display");e.remove();if("none"===d||""===d){ya||(ya=s.createElement("iframe"),ya.frameBorder=ya.width=ya.height=0);c.appendChild(ya);if(!tb||!ya.createElement)tb=(ya.contentWindow||ya.contentDocument).document,tb.write((k.support.boxModel?"<!doctype html>":"")+"<html><body>"),tb.close();e=tb.createElement(b);tb.body.appendChild(e);d=k.css(e,"display");c.removeChild(ya)}Ra[b]=d}return Ra[b]}function u(b){return k.isWindow(b)?
b:9===b.nodeType?b.defaultView||b.parentWindow:!1}var s=c.document,y=c.navigator,x=c.location,k=function(){function e(){if(!d.isReady){try{s.documentElement.doScroll("left")}catch(b){setTimeout(e,1);return}d.ready()}}var d=function(b,c){return new d.fn.init(b,c,g)},f=c.jQuery,j=c.$,g,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,m=/\S/,l=/^\s+/,w=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,C=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,k=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
A=/(?:^|:|,)(?:\s*\[)+/g,E=/(webkit)[ \/]([\w.]+)/,z=/(opera)(?:.*version)?[ \/]([\w.]+)/,D=/(msie) ([\w.]+)/,F=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,M=/^-ms-/,H=function(b,c){return(c+"").toUpperCase()},K=y.userAgent,O,n,q=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,t=Array.prototype.push,u=Array.prototype.slice,ba=String.prototype.trim,Ja=Array.prototype.indexOf,U={};d.fn=d.prototype={constructor:d,init:function(c,e,f){var j;if(!c)return this;if(c.nodeType)return this.context=
this[0]=c,this.length=1,this;if("body"===c&&!e&&s.body)return this.context=s,this[0]=s.body,this.selector=c,this.length=1,this;if("string"===typeof c){if((j="<"===c.charAt(0)&&">"===c.charAt(c.length-1)&&3<=c.length?[null,c,null]:i.exec(c))&&(j[1]||!e)){if(j[1])return f=(e=e instanceof d?e[0]:e)?e.ownerDocument||e:s,(c=h.exec(c))?d.isPlainObject(e)?(c=[s.createElement(c[1])],d.fn.attr.call(c,e,!0)):c=[f.createElement(c[1])]:(c=d.buildFragment([j[1]],[f]),c=(c.cacheable?d.clone(c.fragment):c.fragment).childNodes),
d.merge(this,c);if((e=s.getElementById(j[2]))&&e.parentNode){if(e.id!==j[2])return f.find(c);this.length=1;this[0]=e}this.context=s;this.selector=c;return this}return!e||e.jquery?(e||f).find(c):this.constructor(e).find(c)}if(d.isFunction(c))return f.ready(c);c.selector!==b&&(this.selector=c.selector,this.context=c.context);return d.makeArray(c,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return u.call(this,0)},get:function(b){return null==b?this.toArray():
0>b?this[this.length+b]:this[b]},pushStack:function(b,c,e){var f=this.constructor();d.isArray(b)?t.apply(f,b):d.merge(f,b);f.prevObject=this;f.context=this.context;"find"===c?f.selector=this.selector+(this.selector?" ":"")+e:c&&(f.selector=this.selector+"."+c+"("+e+")");return f},each:function(b,c){return d.each(this,b,c)},ready:function(b){d.bindReady();O.add(b);return this},eq:function(b){b=+b;return-1===b?this.slice(b):this.slice(b,b+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
slice:function(){return this.pushStack(u.apply(this,arguments),"slice",u.call(arguments).join(","))},map:function(b){return this.pushStack(d.map(this,function(c,e){return b.call(c,e,c)}))},end:function(){return this.prevObject||this.constructor(null)},push:t,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var c,e,f,j,g,i=arguments[0]||{},m=1,W=arguments.length,l=!1;"boolean"===typeof i&&(l=i,i=arguments[1]||{},m=2);"object"!==typeof i&&!d.isFunction(i)&&(i=
{});W===m&&(i=this,--m);for(;m<W;m++)if(null!=(c=arguments[m]))for(e in c)f=i[e],j=c[e],i!==j&&(l&&j&&(d.isPlainObject(j)||(g=d.isArray(j)))?(g?(g=!1,f=f&&d.isArray(f)?f:[]):f=f&&d.isPlainObject(f)?f:{},i[e]=d.extend(l,f,j)):j!==b&&(i[e]=j));return i};d.extend({noConflict:function(b){c.$===d&&(c.$=j);b&&c.jQuery===d&&(c.jQuery=f);return d},isReady:!1,readyWait:1,holdReady:function(b){b?d.readyWait++:d.ready(!0)},ready:function(b){if(!0===b&&!--d.readyWait||!0!==b&&!d.isReady){if(!s.body)return setTimeout(d.ready,
1);d.isReady=!0;!0!==b&&0<--d.readyWait||(O.fireWith(s,[d]),d.fn.trigger&&d(s).trigger("ready").off("ready"))}},bindReady:function(){if(!O){O=d.Callbacks("once memory");if("complete"===s.readyState)return setTimeout(d.ready,1);if(s.addEventListener)s.addEventListener("DOMContentLoaded",n,!1),c.addEventListener("load",d.ready,!1);else if(s.attachEvent){s.attachEvent("onreadystatechange",n);c.attachEvent("onload",d.ready);var b=!1;try{b=null==c.frameElement}catch(f){}s.documentElement.doScroll&&b&&
e()}}},isFunction:function(b){return"function"===d.type(b)},isArray:Array.isArray||function(b){return"array"===d.type(b)},isWindow:function(b){return null!=b&&b==b.window},isNumeric:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},type:function(b){return null==b?""+b:U[q.call(b)]||"object"},isPlainObject:function(c){if(!c||"object"!==d.type(c)||c.nodeType||d.isWindow(c))return!1;try{if(c.constructor&&!Q.call(c,"constructor")&&!Q.call(c.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(var f in c);
return f===b||Q.call(c,f)},isEmptyObject:function(b){for(var c in b)return!1;return!0},error:function(b){throw Error(b);},parseJSON:function(b){if("string"!==typeof b||!b)return null;b=d.trim(b);if(c.JSON&&c.JSON.parse)return c.JSON.parse(b);if(o.test(b.replace(C,"@").replace(k,"]").replace(A,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(e){if("string"!==typeof e||!e)return null;var f,j;try{c.DOMParser?(j=new DOMParser,f=j.parseFromString(e,"text/xml")):(f=
new ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(e))}catch(g){f=b}(!f||!f.documentElement||f.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+e);return f},noop:function(){},globalEval:function(b){b&&m.test(b)&&(c.execScript||function(b){c.eval.call(c,b)})(b)},camelCase:function(b){return b.replace(M,"ms-").replace(v,H)},nodeName:function(b,c){return b.nodeName&&b.nodeName.toUpperCase()===c.toUpperCase()},each:function(c,e,f){var j,g=0,i=c.length,m=i===b||d.isFunction(c);
if(f)if(m)for(j in c){if(!1===e.apply(c[j],f))break}else for(;g<i&&!(!1===e.apply(c[g++],f)););else if(m)for(j in c){if(!1===e.call(c[j],j,c[j]))break}else for(;g<i&&!(!1===e.call(c[g],g,c[g++])););return c},trim:ba?function(b){return null==b?"":ba.call(b)}:function(b){return null==b?"":b.toString().replace(l,"").replace(w,"")},makeArray:function(b,c){var e=c||[];if(null!=b){var f=d.type(b);null==b.length||"string"===f||"function"===f||"regexp"===f||d.isWindow(b)?t.call(e,b):d.merge(e,b)}return e},
inArray:function(b,c,e){var d;if(c){if(Ja)return Ja.call(c,b,e);d=c.length;for(e=e?0>e?Math.max(0,d+e):e:0;e<d;e++)if(e in c&&c[e]===b)return e}return-1},merge:function(c,e){var d=c.length,f=0;if("number"===typeof e.length)for(var j=e.length;f<j;f++)c[d++]=e[f];else for(;e[f]!==b;)c[d++]=e[f++];c.length=d;return c},grep:function(b,c,e){for(var d=[],f,e=!!e,j=0,g=b.length;j<g;j++)f=!!c(b[j],j),e!==f&&d.push(b[j]);return d},map:function(c,e,f){var j,g,i=[],m=0,W=c.length;if(c instanceof d||W!==b&&"number"===
typeof W&&(0<W&&c[0]&&c[W-1]||0===W||d.isArray(c)))for(;m<W;m++)j=e(c[m],m,f),null!=j&&(i[i.length]=j);else for(g in c)j=e(c[g],g,f),null!=j&&(i[i.length]=j);return i.concat.apply([],i)},guid:1,proxy:function(c,e){if("string"===typeof e)var f=c[e],e=c,c=f;if(!d.isFunction(c))return b;var j=u.call(arguments,2),f=function(){return c.apply(e,j.concat(u.call(arguments)))};f.guid=c.guid=c.guid||f.guid||d.guid++;return f},access:function(c,e,f,j,g,i,m){var W,l=null==f,w=0,h=c.length;if(f&&"object"===typeof f){for(w in f)d.access(c,
e,w,f[w],1,i,j);g=1}else if(j!==b){W=m===b&&d.isFunction(j);l&&(W?(W=e,e=function(b,c,e){return W.call(d(b),e)}):(e.call(c,j),e=null));if(e)for(;w<h;w++)e(c[w],f,W?j.call(c[w],w,e(c[w],f)):j,m);g=1}return g?c:l?e.call(c):h?e(c[0],f):i},now:function(){return(new Date).getTime()},uaMatch:function(b){b=b.toLowerCase();b=E.exec(b)||z.exec(b)||D.exec(b)||0>b.indexOf("compatible")&&F.exec(b)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function b(c,e){return new b.fn.init(c,e)}d.extend(!0,
b,this);b.superclass=this;b.fn=b.prototype=this();b.fn.constructor=b;b.sub=this.sub;b.fn.init=function(e,f){f&&f instanceof d&&!(f instanceof b)&&(f=b(f));return d.fn.init.call(this,e,f,c)};b.fn.init.prototype=b.fn;var c=b(s);return b},browser:{}});d.each("Boolean,Number,String,Function,Array,Date,RegExp,Object".split(","),function(b,c){U["[object "+c+"]"]=c.toLowerCase()});K=d.uaMatch(K);K.browser&&(d.browser[K.browser]=!0,d.browser.version=K.version);d.browser.webkit&&(d.browser.safari=!0);m.test("\u00a0")&&
(l=/^[\s\xA0]+/,w=/[\s\xA0]+$/);g=d(s);s.addEventListener?n=function(){s.removeEventListener("DOMContentLoaded",n,!1);d.ready()}:s.attachEvent&&(n=function(){"complete"===s.readyState&&(s.detachEvent("onreadystatechange",n),d.ready())});return d}(),B={};k.Callbacks=function(c){var c=c?B[c]||e(c):{},d=[],f=[],j,g,i,m,l,w,h=function(b){var e,f,j,g;for(e=0,f=b.length;e<f;e++)j=b[e],g=k.type(j),"array"===g?h(j):"function"===g&&(!c.unique||!C.has(j))&&d.push(j)},o=function(b,e){e=e||[];j=!c.memory||[b,
e];i=g=!0;w=m||0;m=0;for(l=d.length;d&&w<l;w++)if(!1===d[w].apply(b,e)&&c.stopOnFalse){j=!0;break}i=!1;d&&(c.once?!0===j?C.disable():d=[]:f&&f.length&&(j=f.shift(),C.fireWith(j[0],j[1])))},C={add:function(){if(d){var b=d.length;h(arguments);i?l=d.length:j&&!0!==j&&(m=b,o(j[0],j[1]))}return this},remove:function(){if(d)for(var b=arguments,e=0,f=b.length;e<f;e++)for(var j=0;j<d.length&&!(b[e]===d[j]&&(i&&j<=l&&(l--,j<=w&&w--),d.splice(j--,1),c.unique));j++);return this},has:function(b){if(d)for(var c=
0,e=d.length;c<e;c++)if(b===d[c])return!0;return!1},empty:function(){d=[];return this},disable:function(){d=f=j=b;return this},disabled:function(){return!d},lock:function(){f=b;(!j||!0===j)&&C.disable();return this},locked:function(){return!f},fireWith:function(b,e){f&&(i?c.once||f.push([b,e]):(!c.once||!j)&&o(b,e));return this},fire:function(){C.fireWith(this,arguments);return this},fired:function(){return!!g}};return C};var G=[].slice;k.extend({Deferred:function(b){var c=k.Callbacks("once memory"),
e=k.Callbacks("once memory"),d=k.Callbacks("memory"),f="pending",j={resolve:c,reject:e,notify:d},g={done:c.add,fail:e.add,progress:d.add,state:function(){return f},isResolved:c.fired,isRejected:e.fired,then:function(b,c,e){i.done(b).fail(c).progress(e);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(b,c,e){return k.Deferred(function(d){k.each({done:[b,"resolve"],fail:[c,"reject"],progress:[e,"notify"]},function(b,c){var e=c[0],f=c[1],j;if(k.isFunction(e))i[b](function(){if((j=
e.apply(this,arguments))&&k.isFunction(j.promise))j.promise().then(d.resolve,d.reject,d.notify);else d[f+"With"](this===i?d:this,[j])});else i[b](d[f])})}).promise()},promise:function(b){if(null==b)b=g;else for(var c in g)b[c]=g[c];return b}},i=g.promise({}),m;for(m in j)i[m]=j[m].fire,i[m+"With"]=j[m].fireWith;i.done(function(){f="resolved"},e.disable,d.lock).fail(function(){f="rejected"},c.disable,d.lock);b&&b.call(i,i);return i},when:function(b){function c(b){return function(c){d[b]=1<arguments.length?
G.call(arguments,0):c;--i||m.resolveWith(m,d)}}function e(b){return function(c){g[b]=1<arguments.length?G.call(arguments,0):c;m.notifyWith(l,g)}}var d=G.call(arguments,0),f=0,j=d.length,g=Array(j),i=j,m=1>=j&&b&&k.isFunction(b.promise)?b:k.Deferred(),l=m.promise();if(1<j){for(;f<j;f++)d[f]&&d[f].promise&&k.isFunction(d[f].promise)?d[f].promise().then(c(f),m.reject,e(f)):--i;i||m.resolveWith(m,d)}else m!==b&&m.resolveWith(m,j?[b]:[]);return l}});k.support=function(){var b,e,d,f,j,g,i,m,l=s.createElement("div");
l.setAttribute("className","t");l.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";e=l.getElementsByTagName("*");d=l.getElementsByTagName("a")[0];if(!e||!e.length||!d)return{};f=s.createElement("select");j=f.appendChild(s.createElement("option"));e=l.getElementsByTagName("input")[0];b={leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,
style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===e.value,optSelected:j.selected,getSetAttribute:"t"!==l.className,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,
pixelMargin:!0};k.boxModel=b.boxModel="CSS1Compat"===s.compatMode;e.checked=!0;b.noCloneChecked=e.cloneNode(!0).checked;f.disabled=!0;b.optDisabled=!j.disabled;try{delete l.test}catch(w){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"));e=s.createElement("input");e.value="t";e.setAttribute("type","radio");b.radioValue="t"===e.value;e.setAttribute("checked","checked");e.setAttribute("name",
"t");l.appendChild(e);d=s.createDocumentFragment();d.appendChild(l.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=e.checked;d.removeChild(e);d.appendChild(l);if(l.attachEvent)for(i in{submit:1,change:1,focusin:1})e="on"+i,m=e in l,m||(l.setAttribute(e,"return;"),m="function"===typeof l[e]),b[i+"Bubbles"]=m;d.removeChild(l);d=f=j=l=e=null;k(function(){var e,d,f,j,i=s.getElementsByTagName("body")[0];i&&(e=s.createElement("div"),e.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",
i.insertBefore(e,i.firstChild),l=s.createElement("div"),e.appendChild(l),l.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",g=l.getElementsByTagName("td"),m=0===g[0].offsetHeight,g[0].style.display="",g[1].style.display="none",b.reliableHiddenOffsets=m&&0===g[0].offsetHeight,c.getComputedStyle&&(l.innerHTML="",d=s.createElement("div"),d.style.width="0",d.style.marginRight="0",l.style.width="2px",l.appendChild(d),b.reliableMarginRight=0===(parseInt((c.getComputedStyle(d,
null)||{marginRight:0}).marginRight,10)||0)),"undefined"!==typeof l.style.zoom&&(l.innerHTML="",l.style.width=l.style.padding="1px",l.style.border=0,l.style.overflow="hidden",l.style.display="inline",l.style.zoom=1,b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.style.overflow="visible",l.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=3!==l.offsetWidth),l.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",
l.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=l.firstChild,f=d.firstChild,j={doesNotAddBorder:5!==f.offsetTop,doesAddBorderForTableAndCells:5===d.nextSibling.firstChild.firstChild.offsetTop},
f.style.position="fixed",f.style.top="20px",j.fixedPosition=20===f.offsetTop||15===f.offsetTop,f.style.position=f.style.top="",d.style.overflow="hidden",d.style.position="relative",j.subtractsBorderForOverflowNotVisible=-5===f.offsetTop,j.doesNotIncludeMarginInBodyOffset=1!==i.offsetTop,c.getComputedStyle&&(l.style.marginTop="1%",b.pixelMargin="1%"!==(c.getComputedStyle(l,null)||{marginTop:0}).marginTop),"undefined"!==typeof e.style.zoom&&(e.style.zoom=1),i.removeChild(e),l=null,k.extend(b,j))});
return b}();var I=/^(?:\{.*\}|\[.*\])$/,J=/([A-Z])/g;k.extend({cache:{},uuid:0,expando:"jQuery"+(k.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(b){b=b.nodeType?k.cache[b[k.expando]]:b[k.expando];return!!b&&!f(b)},data:function(c,e,d,f){if(k.acceptData(c)){var j;j=k.expando;var g="string"===typeof e,i=c.nodeType,m=i?k.cache:c,l=i?c[j]:c[j]&&j,w="events"===e;if(l&&m[l]&&(w||f||m[l].data)||!(g&&d===b)){l||
(i?c[j]=l=++k.uuid:l=j);m[l]||(m[l]={},i||(m[l].toJSON=k.noop));if("object"===typeof e||"function"===typeof e)f?m[l]=k.extend(m[l],e):m[l].data=k.extend(m[l].data,e);j=c=m[l];f||(c.data||(c.data={}),c=c.data);d!==b&&(c[k.camelCase(e)]=d);if(w&&!c[e])return j.events;g?(d=c[e],null==d&&(d=c[k.camelCase(e)])):d=c;return d}}},removeData:function(b,c,e){if(k.acceptData(b)){var d,j,g,i=k.expando,m=b.nodeType,l=m?k.cache:b,w=m?b[i]:i;if(l[w]){if(c&&(d=e?l[w]:l[w].data)){k.isArray(c)||(c in d?c=[c]:(c=k.camelCase(c),
c=c in d?[c]:c.split(" ")));for(j=0,g=c.length;j<g;j++)delete d[c[j]];if(!(e?f:k.isEmptyObject)(d))return}if(!e&&(delete l[w].data,!f(l[w])))return;k.support.deleteExpando||!l.setInterval?delete l[w]:l[w]=null;m&&(k.support.deleteExpando?delete b[i]:b.removeAttribute?b.removeAttribute(i):b[i]=null)}}},_data:function(b,c,e){return k.data(b,c,e,!0)},acceptData:function(b){if(b.nodeName){var c=k.noData[b.nodeName.toLowerCase()];if(c)return!(!0===c||b.getAttribute("classid")!==c)}return!0}});k.fn.extend({data:function(c,
e){var f,j,g,i,m,l=this[0],w=0,h=null;if(c===b){if(this.length&&(h=k.data(l),1===l.nodeType&&!k._data(l,"parsedAttrs"))){g=l.attributes;for(m=g.length;w<m;w++)i=g[w].name,0===i.indexOf("data-")&&(i=k.camelCase(i.substring(5)),d(l,i,h[i]));k._data(l,"parsedAttrs",!0)}return h}if("object"===typeof c)return this.each(function(){k.data(this,c)});f=c.split(".",2);f[1]=f[1]?"."+f[1]:"";j=f[1]+"!";return k.access(this,function(e){if(e===b)return h=this.triggerHandler("getData"+j,[f[0]]),h===b&&l&&(h=k.data(l,
c),h=d(l,c,h)),h===b&&f[1]?this.data(f[0]):h;f[1]=e;this.each(function(){var b=k(this);b.triggerHandler("setData"+j,f);k.data(this,c,e);b.triggerHandler("changeData"+j,f)})},null,e,1<arguments.length,null,!1)},removeData:function(b){return this.each(function(){k.removeData(this,b)})}});k.extend({_mark:function(b,c){b&&(c=(c||"fx")+"mark",k._data(b,c,(k._data(b,c)||0)+1))},_unmark:function(b,c,e){!0!==b&&(e=c,c=b,b=!1);if(c){var e=e||"fx",d=e+"mark";(b=b?0:(k._data(c,d)||1)-1)?k._data(c,d,b):(k.removeData(c,
d,!0),g(c,e,"mark"))}},queue:function(b,c,e){var d;if(b)return c=(c||"fx")+"queue",d=k._data(b,c),e&&(!d||k.isArray(e)?d=k._data(b,c,k.makeArray(e)):d.push(e)),d||[]},dequeue:function(b,c){var c=c||"fx",e=k.queue(b,c),d=e.shift(),f={};"inprogress"===d&&(d=e.shift());d&&("fx"===c&&e.unshift("inprogress"),k._data(b,c+".run",f),d.call(b,function(){k.dequeue(b,c)},f));e.length||(k.removeData(b,c+"queue "+c+".run",!0),g(b,c,"queue"))}});k.fn.extend({queue:function(c,e){var d=2;"string"!==typeof c&&(e=
c,c="fx",d--);return arguments.length<d?k.queue(this[0],c):e===b?this:this.each(function(){var b=k.queue(this,c,e);"fx"===c&&"inprogress"!==b[0]&&k.dequeue(this,c)})},dequeue:function(b){return this.each(function(){k.dequeue(this,b)})},delay:function(b,c){b=k.fx?k.fx.speeds[b]||b:b;return this.queue(c||"fx",function(c,e){var d=setTimeout(c,b);e.stop=function(){clearTimeout(d)}})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(c,e){function d(){--i||f.resolveWith(j,[j])}"string"!==
typeof c&&(e=c,c=b);for(var c=c||"fx",f=k.Deferred(),j=this,g=j.length,i=1,m=c+"defer",l=c+"queue",w=c+"mark",h;g--;)if(h=k.data(j[g],m,b,!0)||(k.data(j[g],l,b,!0)||k.data(j[g],w,b,!0))&&k.data(j[g],m,k.Callbacks("once memory"),!0))i++,h.add(d);d();return f.promise(e)}});var L=/[\n\t\r]/g,K=/\s+/,Q=/\r/g,ba=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,pa=/^a(?:rea)?$/i,Ka=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
N=k.support.getSetAttribute,P,R,T;k.fn.extend({attr:function(b,c){return k.access(this,k.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){k.removeAttr(this,b)})},prop:function(b,c){return k.access(this,k.prop,b,c,1<arguments.length)},removeProp:function(c){c=k.propFix[c]||c;return this.each(function(){try{this[c]=b,delete this[c]}catch(e){}})},addClass:function(b){var c,e,d,f,j,g,i;if(k.isFunction(b))return this.each(function(c){k(this).addClass(b.call(this,c,this.className))});
if(b&&"string"===typeof b){c=b.split(K);for(e=0,d=this.length;e<d;e++)if(f=this[e],1===f.nodeType)if(!f.className&&1===c.length)f.className=b;else{j=" "+f.className+" ";for(g=0,i=c.length;g<i;g++)~j.indexOf(" "+c[g]+" ")||(j+=c[g]+" ");f.className=k.trim(j)}}return this},removeClass:function(c){var e,d,f,j,g,i,m;if(k.isFunction(c))return this.each(function(b){k(this).removeClass(c.call(this,b,this.className))});if(c&&"string"===typeof c||c===b){e=(c||"").split(K);for(d=0,f=this.length;d<f;d++)if(j=
this[d],1===j.nodeType&&j.className)if(c){g=(" "+j.className+" ").replace(L," ");for(i=0,m=e.length;i<m;i++)g=g.replace(" "+e[i]+" "," ");j.className=k.trim(g)}else j.className=""}return this},toggleClass:function(b,c){var e=typeof b,d="boolean"===typeof c;return k.isFunction(b)?this.each(function(e){k(this).toggleClass(b.call(this,e,this.className,c),c)}):this.each(function(){if("string"===e)for(var f,j=0,g=k(this),i=c,m=b.split(K);f=m[j++];)i=d?i:!g.hasClass(f),g[i?"addClass":"removeClass"](f);
else if("undefined"===e||"boolean"===e)this.className&&k._data(this,"__className__",this.className),this.className=this.className||!1===b?"":k._data(this,"__className__")||""})},hasClass:function(b){for(var b=" "+b+" ",c=0,e=this.length;c<e;c++)if(1===this[c].nodeType&&-1<(" "+this[c].className+" ").replace(L," ").indexOf(b))return!0;return!1},val:function(c){var e,d,f,j=this[0];if(arguments.length)return f=k.isFunction(c),this.each(function(d){var j=k(this);if(1===this.nodeType&&(d=f?c.call(this,
d,j.val()):c,null==d?d="":"number"===typeof d?d+="":k.isArray(d)&&(d=k.map(d,function(b){return null==b?"":b+""})),e=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()],!e||!("set"in e)||e.set(this,d,"value")===b))this.value=d});if(j){if((e=k.valHooks[j.type]||k.valHooks[j.nodeName.toLowerCase()])&&"get"in e&&(d=e.get(j,"value"))!==b)return d;d=j.value;return"string"===typeof d?d.replace(Q,""):null==d?"":d}}});k.extend({valHooks:{option:{get:function(b){var c=b.attributes.value;return!c||
c.specified?b.value:b.text}},select:{get:function(b){var c,e,d=b.selectedIndex,f=[],j=b.options,g="select-one"===b.type;if(0>d)return null;b=g?d:0;for(e=g?d+1:j.length;b<e;b++)if(c=j[b],c.selected&&(k.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!k.nodeName(c.parentNode,"optgroup"))){c=k(c).val();if(g)return c;f.push(c)}return g&&!f.length&&j.length?k(j[d]).val():f},set:function(b,c){var e=k.makeArray(c);k(b).find("option").each(function(){this.selected=
0<=k.inArray(k(this).val(),e)});e.length||(b.selectedIndex=-1);return e}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(c,e,d,f){var j,g,i=c.nodeType;if(c&&!(3===i||8===i||2===i)){if(f&&e in k.attrFn)return k(c)[e](d);if("undefined"===typeof c.getAttribute)return k.prop(c,e,d);if(f=1!==i||!k.isXMLDoc(c))e=e.toLowerCase(),g=k.attrHooks[e]||(Ka.test(e)?R:P);if(d!==b)if(null===d)k.removeAttr(c,e);else{if(g&&"set"in g&&f&&(j=g.set(c,d,e))!==b)return j;c.setAttribute(e,
""+d);return d}else{if(g&&"get"in g&&f&&null!==(j=g.get(c,e)))return j;j=c.getAttribute(e);return null===j?b:j}}},removeAttr:function(b,c){var e,d,f,j,g,i=0;if(c&&1===b.nodeType){d=c.toLowerCase().split(K);for(j=d.length;i<j;i++)if(f=d[i])e=k.propFix[f]||f,(g=Ka.test(f))||k.attr(b,f,""),b.removeAttribute(N?f:e),g&&e in b&&(b[e]=!1)}},attrHooks:{type:{set:function(b,c){if(ba.test(b.nodeName)&&b.parentNode)k.error("type property can't be changed");else if(!k.support.radioValue&&"radio"===c&&k.nodeName(b,
"input")){var e=b.value;b.setAttribute("type",c);e&&(b.value=e);return c}}},value:{get:function(b,c){return P&&k.nodeName(b,"button")?P.get(b,c):c in b?b.value:null},set:function(b,c,e){if(P&&k.nodeName(b,"button"))return P.set(b,c,e);b.value=c}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
prop:function(c,e,d){var f,j,g=c.nodeType;if(c&&!(3===g||8===g||2===g)){if(1!==g||!k.isXMLDoc(c))e=k.propFix[e]||e,j=k.propHooks[e];return d!==b?j&&"set"in j&&(f=j.set(c,d,e))!==b?f:c[e]=d:j&&"get"in j&&null!==(f=j.get(c,e))?f:c[e]}},propHooks:{tabIndex:{get:function(c){var e=c.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):U.test(c.nodeName)||pa.test(c.nodeName)&&c.href?0:b}}}});k.attrHooks.tabindex=k.propHooks.tabIndex;R={get:function(c,e){var d,f=k.prop(c,e);return!0===
f||"boolean"!==typeof f&&(d=c.getAttributeNode(e))&&!1!==d.nodeValue?e.toLowerCase():b},set:function(b,c,e){!1===c?k.removeAttr(b,e):(c=k.propFix[e]||e,c in b&&(b[c]=!0),b.setAttribute(e,e.toLowerCase()));return e}};N||(T={name:!0,id:!0,coords:!0},P=k.valHooks.button={get:function(c,e){var d;return(d=c.getAttributeNode(e))&&(T[e]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(b,c,e){var d=b.getAttributeNode(e);d||(d=s.createAttribute(e),b.setAttributeNode(d));return d.nodeValue=c+""}},
k.attrHooks.tabindex.set=P.set,k.each(["width","height"],function(b,c){k.attrHooks[c]=k.extend(k.attrHooks[c],{set:function(b,e){if(""===e)return b.setAttribute(c,"auto"),e}})}),k.attrHooks.contenteditable={get:P.get,set:function(b,c,e){""===c&&(c="false");P.set(b,c,e)}});k.support.hrefNormalized||k.each(["href","src","width","height"],function(c,e){k.attrHooks[e]=k.extend(k.attrHooks[e],{get:function(c){c=c.getAttribute(e,2);return null===c?b:c}})});k.support.style||(k.attrHooks.style={get:function(c){return c.style.cssText.toLowerCase()||
b},set:function(b,c){return b.style.cssText=""+c}});k.support.optSelected||(k.propHooks.selected=k.extend(k.propHooks.selected,{get:function(b){if(b=b.parentNode)b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex;return null}}));k.support.enctype||(k.propFix.enctype="encoding");k.support.checkOn||k.each(["radio","checkbox"],function(){k.valHooks[this]={get:function(b){return null===b.getAttribute("value")?"on":b.value}}});k.each(["radio","checkbox"],function(){k.valHooks[this]=k.extend(k.valHooks[this],
{set:function(b,c){if(k.isArray(c))return b.checked=0<=k.inArray(k(b).val(),c)}})});var S=/^(?:textarea|input|select)$/i,V=/^([^\.]*)?(?:\.(.+))?$/,X=/(?:^|\s)hover(\.\S+)?\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,aa=/^(?:focusinfocus|focusoutblur)$/,ca=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,da=function(b){if(b=ca.exec(b))b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)");return b},ea=function(b){return k.event.special.hover?b:b.replace(X,"mouseenter$1 mouseleave$1")};
k.event={add:function(c,e,d,f,j){var g,i,m,l,w,h,o,C,A;if(!(3===c.nodeType||8===c.nodeType||!e||!d||!(g=k._data(c)))){d.handler&&(o=d,d=o.handler,j=o.selector);d.guid||(d.guid=k.guid++);m=g.events;m||(g.events=m={});i=g.handle;i||(g.handle=i=function(c){return"undefined"!==typeof k&&(!c||k.event.triggered!==c.type)?k.event.dispatch.apply(i.elem,arguments):b},i.elem=c);e=k.trim(ea(e)).split(" ");for(g=0;g<e.length;g++){l=V.exec(e[g])||[];w=l[1];h=(l[2]||"").split(".").sort();A=k.event.special[w]||
{};w=(j?A.delegateType:A.bindType)||w;A=k.event.special[w]||{};l=k.extend({type:w,origType:l[1],data:f,handler:d,guid:d.guid,selector:j,quick:j&&da(j),namespace:h.join(".")},o);C=m[w];if(!C&&(C=m[w]=[],C.delegateCount=0,!A.setup||!1===A.setup.call(c,f,h,i)))c.addEventListener?c.addEventListener(w,i,!1):c.attachEvent&&c.attachEvent("on"+w,i);A.add&&(A.add.call(c,l),l.handler.guid||(l.handler.guid=d.guid));j?C.splice(C.delegateCount++,0,l):C.push(l);k.event.global[w]=!0}c=null}},global:{},remove:function(b,
c,e,d,f){var j=k.hasData(b)&&k._data(b),g,i,m,l,w,h,o,C,A,E;if(j&&(o=j.events)){c=k.trim(ea(c||"")).split(" ");for(g=0;g<c.length;g++)if(i=V.exec(c[g])||[],m=l=i[1],i=i[2],m){C=k.event.special[m]||{};m=(d?C.delegateType:C.bindType)||m;A=o[m]||[];w=A.length;i=i?RegExp("(^|\\.)"+i.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(h=0;h<A.length;h++)if(E=A[h],(f||l===E.origType)&&(!e||e.guid===E.guid)&&(!i||i.test(E.namespace))&&(!d||d===E.selector||"**"===d&&E.selector))A.splice(h--,1),E.selector&&
A.delegateCount--,C.remove&&C.remove.call(b,E);0===A.length&&w!==A.length&&((!C.teardown||!1===C.teardown.call(b,i))&&k.removeEvent(b,m,j.handle),delete o[m])}else for(m in o)k.event.remove(b,m+c[g],e,d,!0);if(k.isEmptyObject(o)){if(c=j.handle)c.elem=null;k.removeData(b,["events","handle"],!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(e,d,f,j){if(!f||!(3===f.nodeType||8===f.nodeType)){var g=e.type||e,i=[],m,l,w,h,o;if(!aa.test(g+k.event.triggered)&&(0<=g.indexOf("!")&&
(g=g.slice(0,-1),m=!0),0<=g.indexOf(".")&&(i=g.split("."),g=i.shift(),i.sort()),f&&!k.event.customEvent[g]||k.event.global[g]))if(e="object"===typeof e?e[k.expando]?e:new k.Event(g,e):new k.Event(g),e.type=g,e.isTrigger=!0,e.exclusive=m,e.namespace=i.join("."),e.namespace_re=e.namespace?RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,m=0>g.indexOf(":")?"on"+g:"",f){if(e.result=b,e.target||(e.target=f),d=null!=d?k.makeArray(d):[],d.unshift(e),w=k.event.special[g]||{},!(w.trigger&&!1===w.trigger.apply(f,
d))){o=[[f,w.bindType||g]];if(!j&&!w.noBubble&&!k.isWindow(f)){h=w.delegateType||g;i=aa.test(h+g)?f:f.parentNode;for(l=null;i;i=i.parentNode)o.push([i,h]),l=i;l&&l===f.ownerDocument&&o.push([l.defaultView||l.parentWindow||c,h])}for(l=0;l<o.length&&!e.isPropagationStopped();l++)i=o[l][0],e.type=o[l][1],(h=(k._data(i,"events")||{})[e.type]&&k._data(i,"handle"))&&h.apply(i,d),(h=m&&i[m])&&k.acceptData(i)&&!1===h.apply(i,d)&&e.preventDefault();e.type=g;if(!j&&!e.isDefaultPrevented()&&(!w._default||!1===
w._default.apply(f.ownerDocument,d))&&!("click"===g&&k.nodeName(f,"a"))&&k.acceptData(f))if(m&&f[g]&&("focus"!==g&&"blur"!==g||0!==e.target.offsetWidth)&&!k.isWindow(f))(l=f[m])&&(f[m]=null),k.event.triggered=g,f[g](),k.event.triggered=b,l&&(f[m]=l);return e.result}}else for(l in f=k.cache,f)f[l].events&&f[l].events[g]&&k.event.trigger(e,d,f[l].handle.elem,!0)}},dispatch:function(e){var e=k.event.fix(e||c.event),d=(k._data(this,"events")||{})[e.type]||[],f=d.delegateCount,j=[].slice.call(arguments,
0),g=!e.exclusive&&!e.namespace,i=k.event.special[e.type]||{},m=[],l,w,h,o,C,A,E;j[0]=e;e.delegateTarget=this;if(!(i.preDispatch&&!1===i.preDispatch.call(this,e))){if(f&&!(e.button&&"click"===e.type)){h=k(this);h.context=this.ownerDocument||this;for(w=e.target;w!=this;w=w.parentNode||this)if(!0!==w.disabled){C={};A=[];h[0]=w;for(l=0;l<f;l++){o=d[l];E=o.selector;if(C[E]===b){var z=C,D=E,F;if(o.quick){F=o.quick;var v=w.attributes||{};F=(!F[1]||w.nodeName.toLowerCase()===F[1])&&(!F[2]||(v.id||{}).value===
F[2])&&(!F[3]||F[3].test((v["class"]||{}).value))}else F=h.is(E);z[D]=F}C[E]&&A.push(o)}A.length&&m.push({elem:w,matches:A})}}d.length>f&&m.push({elem:this,matches:d.slice(f)});for(l=0;l<m.length&&!e.isPropagationStopped();l++){f=m[l];e.currentTarget=f.elem;for(d=0;d<f.matches.length&&!e.isImmediatePropagationStopped();d++)if(o=f.matches[d],g||!e.namespace&&!o.namespace||e.namespace_re&&e.namespace_re.test(o.namespace))e.data=o.data,e.handleObj=o,o=((k.event.special[o.origType]||{}).handle||o.handler).apply(f.elem,
j),o!==b&&(e.result=o,!1===o&&(e.preventDefault(),e.stopPropagation()))}i.postDispatch&&i.postDispatch.call(this,e);return e.result}},props:"attrChange,attrName,relatedNode,srcElement,altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,relatedTarget,shiftKey,target,timeStamp,view,which".split(","),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(b,c){null==b.which&&(b.which=null!=c.charCode?c.charCode:c.keyCode);return b}},mouseHooks:{props:"button,buttons,clientX,clientY,fromElement,offsetX,offsetY,pageX,pageY,screenX,screenY,toElement".split(","),
filter:function(c,e){var d,f,j=e.button,g=e.fromElement;null==c.pageX&&null!=e.clientX&&(d=c.target.ownerDocument||s,f=d.documentElement,d=d.body,c.pageX=e.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),c.pageY=e.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0));!c.relatedTarget&&g&&(c.relatedTarget=g===c.target?e.toElement:g);!c.which&&j!==b&&(c.which=j&1?1:j&2?3:j&4?2:0);return c}},fix:function(c){if(c[k.expando])return c;var e,
d,f=c,j=k.event.fixHooks[c.type]||{},g=j.props?this.props.concat(j.props):this.props,c=k.Event(f);for(e=g.length;e;)d=g[--e],c[d]=f[d];c.target||(c.target=f.srcElement||s);3===c.target.nodeType&&(c.target=c.target.parentNode);c.metaKey===b&&(c.metaKey=c.ctrlKey);return j.filter?j.filter(c,f):c},special:{ready:{setup:k.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b,c,e){k.isWindow(this)&&(this.onbeforeunload=e)},teardown:function(b,
c){this.onbeforeunload===c&&(this.onbeforeunload=null)}}},simulate:function(b,c,e,d){b=k.extend(new k.Event,e,{type:b,isSimulated:!0,originalEvent:{}});d?k.event.trigger(b,null,c):k.event.dispatch.call(c,b);b.isDefaultPrevented()&&e.preventDefault()}};k.event.handle=k.event.dispatch;k.removeEvent=s.removeEventListener?function(b,c,e){b.removeEventListener&&b.removeEventListener(c,e,!1)}:function(b,c,e){b.detachEvent&&b.detachEvent("on"+c,e)};k.Event=function(b,c){if(!(this instanceof k.Event))return new k.Event(b,
c);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||!1===b.returnValue||b.getPreventDefault&&b.getPreventDefault()?j:i):this.type=b;c&&k.extend(this,c);this.timeStamp=b&&b.timeStamp||k.now();this[k.expando]=!0};k.Event.prototype={preventDefault:function(){this.isDefaultPrevented=j;var b=this.originalEvent;b&&(b.preventDefault?b.preventDefault():b.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=j;var b=this.originalEvent;b&&(b.stopPropagation&&
b.stopPropagation(),b.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j;this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i};k.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,c){k.event.special[b]={delegateType:c,bindType:c,handle:function(b){var e=b.relatedTarget,d=b.handleObj,f;if(!e||e!==this&&!k.contains(this,e))b.type=d.origType,f=d.handler.apply(this,arguments),b.type=c;return f}}});k.support.submitBubbles||
(k.event.special.submit={setup:function(){if(k.nodeName(this,"form"))return!1;k.event.add(this,"click._submit keypress._submit",function(c){c=c.target;if((c=k.nodeName(c,"input")||k.nodeName(c,"button")?c.form:b)&&!c._submit_attached)k.event.add(c,"submit._submit",function(b){b._submit_bubble=!0}),c._submit_attached=!0})},postDispatch:function(b){b._submit_bubble&&(delete b._submit_bubble,this.parentNode&&!b.isTrigger&&k.event.simulate("submit",this.parentNode,b,!0))},teardown:function(){if(k.nodeName(this,
"form"))return!1;k.event.remove(this,"._submit")}});k.support.changeBubbles||(k.event.special.change={setup:function(){if(S.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)k.event.add(this,"propertychange._change",function(b){"checked"===b.originalEvent.propertyName&&(this._just_changed=!0)}),k.event.add(this,"click._change",function(b){this._just_changed&&!b.isTrigger&&(this._just_changed=!1,k.event.simulate("change",this,b,!0))});return!1}k.event.add(this,"beforeactivate._change",
function(b){b=b.target;S.test(b.nodeName)&&!b._change_attached&&(k.event.add(b,"change._change",function(b){this.parentNode&&!b.isSimulated&&!b.isTrigger&&k.event.simulate("change",this.parentNode,b,!0)}),b._change_attached=!0)})},handle:function(b){var c=b.target;if(this!==c||b.isSimulated||b.isTrigger||"radio"!==c.type&&"checkbox"!==c.type)return b.handleObj.handler.apply(this,arguments)},teardown:function(){k.event.remove(this,"._change");return S.test(this.nodeName)}});k.support.focusinBubbles||
k.each({focus:"focusin",blur:"focusout"},function(b,c){var e=0,d=function(b){k.event.simulate(c,b.target,k.event.fix(b),!0)};k.event.special[c]={setup:function(){0===e++&&s.addEventListener(b,d,!0)},teardown:function(){0===--e&&s.removeEventListener(b,d,!0)}}});k.fn.extend({on:function(c,e,d,f,j){var g,m;if("object"===typeof c){"string"!==typeof e&&(d=d||e,e=b);for(m in c)this.on(m,e,d,c[m],j);return this}null==d&&null==f?(f=e,d=e=b):null==f&&("string"===typeof e?(f=d,d=b):(f=d,d=e,e=b));if(!1===
f)f=i;else if(!f)return this;1===j&&(g=f,f=function(b){k().off(b);return g.apply(this,arguments)},f.guid=g.guid||(g.guid=k.guid++));return this.each(function(){k.event.add(this,c,f,d,e)})},one:function(b,c,e,d){return this.on(b,c,e,d,1)},off:function(c,e,d){if(c&&c.preventDefault&&c.handleObj){var f=c.handleObj;k(c.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler);return this}if("object"===typeof c){for(f in c)this.off(f,e,c[f]);return this}if(!1===e||"function"===
typeof e)d=e,e=b;!1===d&&(d=i);return this.each(function(){k.event.remove(this,c,d,e)})},bind:function(b,c,e){return this.on(b,null,c,e)},unbind:function(b,c){return this.off(b,null,c)},live:function(b,c,e){k(this.context).on(b,this.selector,c,e);return this},die:function(b,c){k(this.context).off(b,this.selector||"**",c);return this},delegate:function(b,c,e,d){return this.on(c,b,e,d)},undelegate:function(b,c,e){return 1==arguments.length?this.off(b,"**"):this.off(c,b,e)},trigger:function(b,c){return this.each(function(){k.event.trigger(b,
c,this)})},triggerHandler:function(b,c){if(this[0])return k.event.trigger(b,c,this[0],!0)},toggle:function(b){var c=arguments,e=b.guid||k.guid++,d=0,f=function(e){var f=(k._data(this,"lastToggle"+b.guid)||0)%d;k._data(this,"lastToggle"+b.guid,f+1);e.preventDefault();return c[f].apply(this,arguments)||!1};for(f.guid=e;d<c.length;)c[d++].guid=e;return this.click(f)},hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});k.each("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),
function(b,c){k.fn[c]=function(b,e){null==e&&(e=b,b=null);return 0<arguments.length?this.on(c,null,b,e):this.trigger(c)};k.attrFn&&(k.attrFn[c]=!0);Y.test(c)&&(k.event.fixHooks[c]=k.event.keyHooks);Z.test(c)&&(k.event.fixHooks[c]=k.event.mouseHooks)});(function(){function c(b,e,d,j,g,i){for(var g=0,m=j.length;g<m;g++){var l=j[g];if(l){for(var w=!1,l=l[b];l;){if(l[f]===d){w=j[l.sizset];break}1===l.nodeType&&!i&&(l[f]=d,l.sizset=g);if(l.nodeName.toLowerCase()===e){w=l;break}l=l[b]}j[g]=w}}}function e(b,
c,d,j,g,i){for(var g=0,m=j.length;g<m;g++){var l=j[g];if(l){for(var w=!1,l=l[b];l;){if(l[f]===d){w=j[l.sizset];break}if(1===l.nodeType)if(i||(l[f]=d,l.sizset=g),"string"!==typeof c){if(l===c){w=!0;break}}else if(0<o.filter(c,[l]).length){w=l;break}l=l[b]}j[g]=w}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,f="sizcache"+(Math.random()+"").replace(".",""),j=0,g=Object.prototype.toString,i=!1,m=!0,l=/\\/g,
w=/\r\n/g,h=/\W/;[0,0].sort(function(){m=!1;return 0});var o=function(b,c,e,f){var e=e||[],j=c=c||s;if(1!==c.nodeType&&9!==c.nodeType)return[];if(!b||"string"!==typeof b)return e;var i,m,l,w,h,C=!0,k=o.isXML(c),z=[],D=b;do if(d.exec(""),i=d.exec(D))if(D=i[3],z.push(i[1]),i[2]){w=i[3];break}while(i);if(1<z.length&&E.exec(b))if(2===z.length&&A.relative[z[0]])m=K(z[0]+z[1],c,f);else for(m=A.relative[z[0]]?[c]:o(z.shift(),c);z.length;)b=z.shift(),A.relative[b]&&(b+=z.shift()),m=K(b,m,f);else if(!f&&1<
z.length&&9===c.nodeType&&!k&&A.match.ID.test(z[0])&&!A.match.ID.test(z[z.length-1])&&(i=o.find(z.shift(),c,k),c=i.expr?o.filter(i.expr,i.set)[0]:i.set[0]),c){i=f?{expr:z.pop(),set:F(f)}:o.find(z.pop(),1===z.length&&("~"===z[0]||"+"===z[0])&&c.parentNode?c.parentNode:c,k);m=i.expr?o.filter(i.expr,i.set):i.set;for(0<z.length?l=F(m):C=!1;z.length;)i=h=z.pop(),A.relative[h]?i=z.pop():h="",null==i&&(i=c),A.relative[h](l,i,k)}else l=[];l||(l=m);l||o.error(h||b);if("[object Array]"===g.call(l))if(C)if(c&&
1===c.nodeType)for(b=0;null!=l[b];b++)l[b]&&(!0===l[b]||1===l[b].nodeType&&o.contains(c,l[b]))&&e.push(m[b]);else for(b=0;null!=l[b];b++)l[b]&&1===l[b].nodeType&&e.push(m[b]);else e.push.apply(e,l);else F(l,e);w&&(o(w,j,e,f),o.uniqueSort(e));return e};o.uniqueSort=function(b){if(M&&(i=m,b.sort(M),i))for(var c=1;c<b.length;c++)b[c]===b[c-1]&&b.splice(c--,1);return b};o.matches=function(b,c){return o(b,null,null,c)};o.matchesSelector=function(b,c){return 0<o(c,null,null,[b]).length};o.find=function(b,
c,e){var d,f,j,g,i,m;if(!b)return[];for(f=0,j=A.order.length;f<j;f++)if(i=A.order[f],g=A.leftMatch[i].exec(b))if(m=g[1],g.splice(1,1),"\\"!==m.substr(m.length-1)&&(g[1]=(g[1]||"").replace(l,""),d=A.find[i](g,c,e),null!=d)){b=b.replace(A.match[i],"");break}d||(d="undefined"!==typeof c.getElementsByTagName?c.getElementsByTagName("*"):[]);return{set:d,expr:b}};o.filter=function(c,e,d,f){for(var j,g,i,m,l,w,h,C,k=c,E=[],z=e,F=e&&e[0]&&o.isXML(e[0]);c&&e.length;){for(i in A.filter)if(null!=(j=A.leftMatch[i].exec(c))&&
j[2])if(w=A.filter[i],l=j[1],g=!1,j.splice(1,1),"\\"!==l.substr(l.length-1)){z===E&&(E=[]);if(A.preFilter[i])if(j=A.preFilter[i](j,z,d,E,f,F)){if(!0===j)continue}else g=m=!0;if(j)for(h=0;null!=(l=z[h]);h++)l&&(m=w(l,j,h,z),C=f^m,d&&null!=m?C?g=!0:z[h]=!1:C&&(E.push(l),g=!0));if(m!==b){d||(z=E);c=c.replace(A.match[i],"");if(!g)return[];break}}if(c===k)if(null==g)o.error(c);else break;k=c}return z};o.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};var C=o.getText=function(b){var c,
e;c=b.nodeType;var d="";if(c)if(1===c||9===c||11===c){if("string"===typeof b.textContent)return b.textContent;if("string"===typeof b.innerText)return b.innerText.replace(w,"");for(b=b.firstChild;b;b=b.nextSibling)d+=C(b)}else{if(3===c||4===c)return b.nodeValue}else for(c=0;e=b[c];c++)8!==e.nodeType&&(d+=C(e));return d},A=o.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(b){return b.getAttribute("href")},
type:function(b){return b.getAttribute("type")}},relative:{"+":function(b,c){var e="string"===typeof c,d=e&&!h.test(c),e=e&&!d;d&&(c=c.toLowerCase());for(var d=0,f=b.length,j;d<f;d++)if(j=b[d]){for(;(j=j.previousSibling)&&1!==j.nodeType;);b[d]=e||j&&j.nodeName.toLowerCase()===c?j||!1:j===c}e&&o.filter(c,b,!0)},">":function(b,c){var e,d="string"===typeof c,f=0,j=b.length;if(d&&!h.test(c))for(c=c.toLowerCase();f<j;f++){if(e=b[f])e=e.parentNode,b[f]=e.nodeName.toLowerCase()===c?e:!1}else{for(;f<j;f++)(e=
b[f])&&(b[f]=d?e.parentNode:e.parentNode===c);d&&o.filter(c,b,!0)}},"":function(b,d,f){var g,i=j++,m=e;"string"===typeof d&&!h.test(d)&&(g=d=d.toLowerCase(),m=c);m("parentNode",d,i,b,g,f)},"~":function(b,d,f){var g,i=j++,m=e;"string"===typeof d&&!h.test(d)&&(g=d=d.toLowerCase(),m=c);m("previousSibling",d,i,b,g,f)}},find:{ID:function(b,c,e){if("undefined"!==typeof c.getElementById&&!e)return(b=c.getElementById(b[1]))&&b.parentNode?[b]:[]},NAME:function(b,c){if("undefined"!==typeof c.getElementsByName){for(var e=
[],d=c.getElementsByName(b[1]),f=0,j=d.length;f<j;f++)d[f].getAttribute("name")===b[1]&&e.push(d[f]);return 0===e.length?null:e}},TAG:function(b,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(b[1])}},preFilter:{CLASS:function(b,c,e,d,f,j){b=" "+b[1].replace(l,"")+" ";if(j)return b;for(var j=0,g;null!=(g=c[j]);j++)g&&(f^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(b))?e||d.push(g):e&&(c[j]=!1));return!1},ID:function(b){return b[1].replace(l,
"")},TAG:function(b){return b[1].replace(l,"").toLowerCase()},CHILD:function(b){if("nth"===b[1]){b[2]||o.error(b[0]);b[2]=b[2].replace(/^\+|\s*/g,"");var c=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===b[2]&&"2n"||"odd"===b[2]&&"2n+1"||!/\D/.test(b[2])&&"0n+"+b[2]||b[2]);b[2]=c[1]+(c[2]||1)-0;b[3]=c[3]-0}else b[2]&&o.error(b[0]);b[0]=j++;return b},ATTR:function(b,c,e,d,f,j){c=b[1]=b[1].replace(l,"");!j&&A.attrMap[c]&&(b[1]=A.attrMap[c]);b[4]=(b[4]||b[5]||"").replace(l,"");"~="===b[2]&&(b[4]=" "+b[4]+
" ");return b},PSEUDO:function(b,c,e,f,j){if("not"===b[1])if(1<(d.exec(b[3])||"").length||/^\w/.test(b[3]))b[3]=o(b[3],null,null,c);else return b=o.filter(b[3],c,e,1^j),e||f.push.apply(f,b),!1;else if(A.match.POS.test(b[0])||A.match.CHILD.test(b[0]))return!0;return b},POS:function(b){b.unshift(!0);return b}},filters:{enabled:function(b){return!1===b.disabled&&"hidden"!==b.type},disabled:function(b){return!0===b.disabled},checked:function(b){return!0===b.checked},selected:function(b){b.parentNode&&
b.parentNode.selectedIndex;return!0===b.selected},parent:function(b){return!!b.firstChild},empty:function(b){return!b.firstChild},has:function(b,c,e){return!!o(e[3],b).length},header:function(b){return/h\d/i.test(b.nodeName)},text:function(b){var c=b.getAttribute("type"),e=b.type;return"input"===b.nodeName.toLowerCase()&&"text"===e&&(c===e||null===c)},radio:function(b){return"input"===b.nodeName.toLowerCase()&&"radio"===b.type},checkbox:function(b){return"input"===b.nodeName.toLowerCase()&&"checkbox"===
b.type},file:function(b){return"input"===b.nodeName.toLowerCase()&&"file"===b.type},password:function(b){return"input"===b.nodeName.toLowerCase()&&"password"===b.type},submit:function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&"submit"===b.type},image:function(b){return"input"===b.nodeName.toLowerCase()&&"image"===b.type},reset:function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&"reset"===b.type},button:function(b){var c=b.nodeName.toLowerCase();
return"input"===c&&"button"===b.type||"button"===c},input:function(b){return/input|select|textarea|button/i.test(b.nodeName)},focus:function(b){return b===b.ownerDocument.activeElement}},setFilters:{first:function(b,c){return 0===c},last:function(b,c,e,d){return c===d.length-1},even:function(b,c){return 0===c%2},odd:function(b,c){return 1===c%2},lt:function(b,c,e){return c<e[3]-0},gt:function(b,c,e){return c>e[3]-0},nth:function(b,c,e){return e[3]-0===c},eq:function(b,c,e){return e[3]-0===c}},filter:{PSEUDO:function(b,
c,e,d){var f=c[1],j=A.filters[f];if(j)return j(b,e,c,d);if("contains"===f)return 0<=(b.textContent||b.innerText||C([b])||"").indexOf(c[3]);if("not"===f){c=c[3];e=0;for(d=c.length;e<d;e++)if(c[e]===b)return!1;return!0}o.error(f)},CHILD:function(b,c){var e,d,j,g,i,m;e=c[1];m=b;switch(e){case "only":case "first":for(;m=m.previousSibling;)if(1===m.nodeType)return!1;if("first"===e)return!0;m=b;case "last":for(;m=m.nextSibling;)if(1===m.nodeType)return!1;return!0;case "nth":e=c[2];d=c[3];if(1===e&&0===
d)return!0;j=c[0];if((g=b.parentNode)&&(g[f]!==j||!b.nodeIndex)){i=0;for(m=g.firstChild;m;m=m.nextSibling)1===m.nodeType&&(m.nodeIndex=++i);g[f]=j}m=b.nodeIndex-d;return 0===e?0===m:0===m%e&&0<=m/e}},ID:function(b,c){return 1===b.nodeType&&b.getAttribute("id")===c},TAG:function(b,c){return"*"===c&&1===b.nodeType||!!b.nodeName&&b.nodeName.toLowerCase()===c},CLASS:function(b,c){return-1<(" "+(b.className||b.getAttribute("class"))+" ").indexOf(c)},ATTR:function(b,c){var e=c[1],e=o.attr?o.attr(b,e):A.attrHandle[e]?
A.attrHandle[e](b):null!=b[e]?b[e]:b.getAttribute(e),d=e+"",f=c[2],j=c[4];return null==e?"!="===f:!f&&o.attr?null!=e:"="===f?d===j:"*="===f?0<=d.indexOf(j):"~="===f?0<=(" "+d+" ").indexOf(j):!j?d&&!1!==e:"!="===f?d!==j:"^="===f?0===d.indexOf(j):"$="===f?d.substr(d.length-j.length)===j:"|="===f?d===j||d.substr(0,j.length+1)===j+"-":!1},POS:function(b,c,e,d){var f=A.setFilters[c[2]];if(f)return f(b,e,c,d)}}},E=A.match.POS,z=function(b,c){return"\\"+(c-0+1)},D;for(D in A.match)A.match[D]=RegExp(A.match[D].source+
/(?![^\[]*\])(?![^\(]*\))/.source),A.leftMatch[D]=RegExp(/(^(?:.|\r|\n)*?)/.source+A.match[D].source.replace(/\\(\d+)/g,z));A.match.globalPOS=E;var F=function(b,c){b=Array.prototype.slice.call(b,0);return c?(c.push.apply(c,b),c):b};try{Array.prototype.slice.call(s.documentElement.childNodes,0)[0].nodeType}catch(v){F=function(b,c){var e=0,d=c||[];if("[object Array]"===g.call(b))Array.prototype.push.apply(d,b);else if("number"===typeof b.length)for(var f=b.length;e<f;e++)d.push(b[e]);else for(;b[e];e++)d.push(b[e]);
return d}}var M,H;s.documentElement.compareDocumentPosition?M=function(b,c){return b===c?(i=!0,0):!b.compareDocumentPosition||!c.compareDocumentPosition?b.compareDocumentPosition?-1:1:b.compareDocumentPosition(c)&4?-1:1}:(M=function(b,c){if(b===c)return i=!0,0;if(b.sourceIndex&&c.sourceIndex)return b.sourceIndex-c.sourceIndex;var e,d,f=[],j=[];e=b.parentNode;d=c.parentNode;var g=e;if(e===d)return H(b,c);if(e){if(!d)return 1}else return-1;for(;g;)f.unshift(g),g=g.parentNode;for(g=d;g;)j.unshift(g),
g=g.parentNode;e=f.length;d=j.length;for(g=0;g<e&&g<d;g++)if(f[g]!==j[g])return H(f[g],j[g]);return g===e?H(b,j[g],-1):H(f[g],c,1)},H=function(b,c,e){if(b===c)return e;for(b=b.nextSibling;b;){if(b===c)return-1;b=b.nextSibling}return 1});(function(){var c=s.createElement("div"),e="script"+(new Date).getTime(),d=s.documentElement;c.innerHTML="<a name='"+e+"'/>";d.insertBefore(c,d.firstChild);s.getElementById(e)&&(A.find.ID=function(c,e,d){if("undefined"!==typeof e.getElementById&&!d)return(e=e.getElementById(c[1]))?
e.id===c[1]||"undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id").nodeValue===c[1]?[e]:b:[]},A.filter.ID=function(b,c){var e="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id");return 1===b.nodeType&&e&&e.nodeValue===c});d.removeChild(c);d=c=null})();(function(){var b=s.createElement("div");b.appendChild(s.createComment(""));0<b.getElementsByTagName("*").length&&(A.find.TAG=function(b,c){var e=c.getElementsByTagName(b[1]);if("*"===b[1]){for(var d=[],f=0;e[f];f++)1===e[f].nodeType&&
d.push(e[f]);e=d}return e});b.innerHTML="<a href='#'></a>";b.firstChild&&"undefined"!==typeof b.firstChild.getAttribute&&"#"!==b.firstChild.getAttribute("href")&&(A.attrHandle.href=function(b){return b.getAttribute("href",2)});b=null})();s.querySelectorAll&&function(){var b=o,c=s.createElement("div");c.innerHTML="<p class='TEST'></p>";if(!(c.querySelectorAll&&0===c.querySelectorAll(".TEST").length)){o=function(c,e,d,f){e=e||s;if(!f&&!o.isXML(e)){var j=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(c);
if(j&&(1===e.nodeType||9===e.nodeType)){if(j[1])return F(e.getElementsByTagName(c),d);if(j[2]&&A.find.CLASS&&e.getElementsByClassName)return F(e.getElementsByClassName(j[2]),d)}if(9===e.nodeType){if("body"===c&&e.body)return F([e.body],d);if(j&&j[3]){var g=e.getElementById(j[3]);if(g&&g.parentNode){if(g.id===j[3])return F([g],d)}else return F([],d)}try{return F(e.querySelectorAll(c),d)}catch(i){}}else if(1===e.nodeType&&"object"!==e.nodeName.toLowerCase()){var j=e,m=(g=e.getAttribute("id"))||"__sizzle__",
l=e.parentNode,w=/^\s*[+~]/.test(c);g?m=m.replace(/'/g,"\\$&"):e.setAttribute("id",m);w&&l&&(e=e.parentNode);try{if(!w||l)return F(e.querySelectorAll("[id='"+m+"'] "+c),d)}catch(h){}finally{g||j.removeAttribute("id")}}}return b(c,e,d,f)};for(var e in b)o[e]=b[e];c=null}}();(function(){var b=s.documentElement,c=b.matchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.msMatchesSelector;if(c){var e=!c.call(s.createElement("div"),"div"),d=!1;try{c.call(s.documentElement,"[test!='']:sizzle")}catch(f){d=
!0}o.matchesSelector=function(b,f){f=f.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!o.isXML(b))try{if(d||!A.match.PSEUDO.test(f)&&!/!=/.test(f)){var j=c.call(b,f);if(j||!e||b.document&&11!==b.document.nodeType)return j}}catch(g){}return 0<o(f,null,null,[b]).length}}})();(function(){var b=s.createElement("div");b.innerHTML="<div class='test e'></div><div class='test'></div>";b.getElementsByClassName&&0!==b.getElementsByClassName("e").length&&(b.lastChild.className="e",1!==b.getElementsByClassName("e").length&&
(A.order.splice(1,0,"CLASS"),A.find.CLASS=function(b,c,e){if("undefined"!==typeof c.getElementsByClassName&&!e)return c.getElementsByClassName(b[1])},b=null))})();o.contains=s.documentElement.contains?function(b,c){return b!==c&&(b.contains?b.contains(c):!0)}:s.documentElement.compareDocumentPosition?function(b,c){return!!(b.compareDocumentPosition(c)&16)}:function(){return!1};o.isXML=function(b){return(b=(b?b.ownerDocument||b:0).documentElement)?"HTML"!==b.nodeName:!1};var K=function(b,c,e){for(var d,
f=[],j="",c=c.nodeType?[c]:c;d=A.match.PSEUDO.exec(b);)j+=d[0],b=b.replace(A.match.PSEUDO,"");b=A.relative[b]?b+"*":b;d=0;for(var g=c.length;d<g;d++)o(b,c[d],f,e);return o.filter(j,f)};o.attr=k.attr;o.selectors.attrMap={};k.find=o;k.expr=o.selectors;k.expr[":"]=k.expr.filters;k.unique=o.uniqueSort;k.text=o.getText;k.isXMLDoc=o.isXML;k.contains=o.contains})();var fa=/Until$/,ga=/^(?:parents|prevUntil|prevAll)/,ja=/,/,ka=/^.[^:#\[\.,]*$/,ma=Array.prototype.slice,ha=k.expr.match.globalPOS,oa={children:!0,
contents:!0,next:!0,prev:!0};k.fn.extend({find:function(b){var c=this,e,d;if("string"!==typeof b)return k(b).filter(function(){for(e=0,d=c.length;e<d;e++)if(k.contains(c[e],this))return!0});var f=this.pushStack("","find",b),j,g,i;for(e=0,d=this.length;e<d;e++)if(j=f.length,k.find(b,this[e],f),0<e)for(g=j;g<f.length;g++)for(i=0;i<j;i++)if(f[i]===f[g]){f.splice(g--,1);break}return f},has:function(b){var c=k(b);return this.filter(function(){for(var b=0,e=c.length;b<e;b++)if(k.contains(this,c[b]))return!0})},
not:function(b){return this.pushStack(m(this,b,!1),"not",b)},filter:function(b){return this.pushStack(m(this,b,!0),"filter",b)},is:function(b){return!!b&&("string"===typeof b?ha.test(b)?0<=k(b,this.context).index(this[0]):0<k.filter(b,this).length:0<this.filter(b).length)},closest:function(b,c){var e=[],d,f,j=this[0];if(k.isArray(b)){for(f=1;j&&j.ownerDocument&&j!==c;){for(d=0;d<b.length;d++)k(j).is(b[d])&&e.push({selector:b[d],elem:j,level:f});j=j.parentNode;f++}return e}var g=ha.test(b)||"string"!==
typeof b?k(b,c||this.context):0;for(d=0,f=this.length;d<f;d++)for(j=this[d];j;)if(g?-1<g.index(j):k.find.matchesSelector(j,b)){e.push(j);break}else if(j=j.parentNode,!j||!j.ownerDocument||j===c||11===j.nodeType)break;e=1<e.length?k.unique(e):e;return this.pushStack(e,"closest",b)},index:function(b){return!b?this[0]&&this[0].parentNode?this.prevAll().length:-1:"string"===typeof b?k.inArray(this[0],k(b)):k.inArray(b.jquery?b[0]:b,this)},add:function(b,c){var e="string"===typeof b?k(b,c):k.makeArray(b&&
b.nodeType?[b]:b),d=k.merge(this.get(),e);return this.pushStack(!e[0]||!e[0].parentNode||11===e[0].parentNode.nodeType||!d[0]||!d[0].parentNode||11===d[0].parentNode.nodeType?d:k.unique(d))},andSelf:function(){return this.add(this.prevObject)}});k.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return k.dir(b,"parentNode")},parentsUntil:function(b,c,e){return k.dir(b,"parentNode",e)},next:function(b){return k.nth(b,2,"nextSibling")},prev:function(b){return k.nth(b,
2,"previousSibling")},nextAll:function(b){return k.dir(b,"nextSibling")},prevAll:function(b){return k.dir(b,"previousSibling")},nextUntil:function(b,c,e){return k.dir(b,"nextSibling",e)},prevUntil:function(b,c,e){return k.dir(b,"previousSibling",e)},siblings:function(b){return k.sibling((b.parentNode||{}).firstChild,b)},children:function(b){return k.sibling(b.firstChild)},contents:function(b){return k.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:k.makeArray(b.childNodes)}},function(b,
c){k.fn[b]=function(e,d){var f=k.map(this,c,e);fa.test(b)||(d=e);d&&"string"===typeof d&&(f=k.filter(d,f));f=1<this.length&&!oa[b]?k.unique(f):f;if((1<this.length||ja.test(d))&&ga.test(b))f=f.reverse();return this.pushStack(f,b,ma.call(arguments).join(","))}});k.extend({filter:function(b,c,e){e&&(b=":not("+b+")");return 1===c.length?k.find.matchesSelector(c[0],b)?[c[0]]:[]:k.find.matches(b,c)},dir:function(c,e,d){for(var f=[],c=c[e];c&&9!==c.nodeType&&(d===b||1!==c.nodeType||!k(c).is(d));)1===c.nodeType&&
f.push(c),c=c[e];return f},nth:function(b,c,e){for(var c=c||1,d=0;b&&!(1===b.nodeType&&++d===c);b=b[e]);return b},sibling:function(b,c){for(var e=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&e.push(b);return e}});var la="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",sa=/ jQuery\d+="(?:\d+|null)"/g,ia=/^\s+/,na=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,ra=/<([\w:]+)/,
ta=/<tbody/i,ua=/<|&#?\w+;/,Ba=/<(?:script|style)/i,Ca=/<(?:script|object|embed|option|style)/i,va=RegExp("<(?:"+la+")[\\s/>]","i"),wa=/checked\s*(?:[^=]|=\s*.checked.)/i,Aa=/\/(java|ecma)script/i,Ea=/^\s*<!(?:\[CDATA\[|\-\-)/,qa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
area:[1,"<map>","</map>"],_default:[0,"",""]},xa=l(s);qa.optgroup=qa.option;qa.tbody=qa.tfoot=qa.colgroup=qa.caption=qa.thead;qa.th=qa.td;k.support.htmlSerialize||(qa._default=[1,"div<div>","</div>"]);k.fn.extend({text:function(c){return k.access(this,function(c){return c===b?k.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(c))},null,c,arguments.length)},wrapAll:function(b){if(k.isFunction(b))return this.each(function(c){k(this).wrapAll(b.call(this,c))});if(this[0]){var c=
k(b,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var b=this;b.firstChild&&1===b.firstChild.nodeType;)b=b.firstChild;return b}).append(this)}return this},wrapInner:function(b){return k.isFunction(b)?this.each(function(c){k(this).wrapInner(b.call(this,c))}):this.each(function(){var c=k(this),e=c.contents();e.length?e.wrapAll(b):c.append(b)})},wrap:function(b){var c=k.isFunction(b);return this.each(function(e){k(this).wrapAll(c?b.call(this,e):
b)})},unwrap:function(){return this.parent().each(function(){k.nodeName(this,"body")||k(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(b){1===this.nodeType&&this.appendChild(b)})},prepend:function(){return this.domManip(arguments,!0,function(b){1===this.nodeType&&this.insertBefore(b,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(b){this.parentNode.insertBefore(b,this)});if(arguments.length){var b=
k.clean(arguments);b.push.apply(b,this.toArray());return this.pushStack(b,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(b){this.parentNode.insertBefore(b,this.nextSibling)});if(arguments.length){var b=this.pushStack(this,"after",arguments);b.push.apply(b,k.clean(arguments));return b}},remove:function(b,c){for(var e=0,d;null!=(d=this[e]);e++)if(!b||k.filter(b,[d]).length)!c&&1===d.nodeType&&(k.cleanData(d.getElementsByTagName("*")),
k.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var b=0,c;null!=(c=this[b]);b++)for(1===c.nodeType&&k.cleanData(c.getElementsByTagName("*"));c.firstChild;)c.removeChild(c.firstChild);return this},clone:function(b,c){b=null==b?!1:b;c=null==c?b:c;return this.map(function(){return k.clone(this,b,c)})},html:function(c){return k.access(this,function(c){var e=this[0]||{},d=0,f=this.length;if(c===b)return 1===e.nodeType?e.innerHTML.replace(sa,""):null;if("string"===
typeof c&&!Ba.test(c)&&(k.support.leadingWhitespace||!ia.test(c))&&!qa[(ra.exec(c)||["",""])[1].toLowerCase()]){c=c.replace(na,"<$1></$2>");try{for(;d<f;d++)e=this[d]||{},1===e.nodeType&&(k.cleanData(e.getElementsByTagName("*")),e.innerHTML=c);e=0}catch(j){}}e&&this.empty().append(c)},null,c,arguments.length)},replaceWith:function(b){if(this[0]&&this[0].parentNode){if(k.isFunction(b))return this.each(function(c){var e=k(this),d=e.html();e.replaceWith(b.call(this,c,d))});"string"!==typeof b&&(b=k(b).detach());
return this.each(function(){var c=this.nextSibling,e=this.parentNode;k(this).remove();c?k(c).before(b):k(e).append(b)})}return this.length?this.pushStack(k(k.isFunction(b)?b():b),"replaceWith",b):this},detach:function(b){return this.remove(b,!0)},domManip:function(c,e,d){var f,j,g,i=c[0],m=[];if(!k.support.checkClone&&3===arguments.length&&"string"===typeof i&&wa.test(i))return this.each(function(){k(this).domManip(c,e,d,!0)});if(k.isFunction(i))return this.each(function(f){var j=k(this);c[0]=i.call(this,
f,e?j.html():b);j.domManip(c,e,d)});if(this[0]){f=i&&i.parentNode;f=k.support.parentNode&&f&&11===f.nodeType&&f.childNodes.length===this.length?{fragment:f}:k.buildFragment(c,this,m);g=f.fragment;if(j=1===g.childNodes.length?g=g.firstChild:g.firstChild){e=e&&k.nodeName(j,"tr");j=0;for(var l=this.length,w=l-1;j<l;j++)d.call(e?k.nodeName(this[j],"table")?this[j].getElementsByTagName("tbody")[0]||this[j].appendChild(this[j].ownerDocument.createElement("tbody")):this[j]:this[j],f.cacheable||1<l&&j<w?
k.clone(g,!0,!0):g)}m.length&&k.each(m,function(b,c){c.src?k.ajax({type:"GET",global:!1,url:c.src,async:!1,dataType:"script"}):k.globalEval((c.text||c.textContent||c.innerHTML||"").replace(Ea,"/*$0*/"));c.parentNode&&c.parentNode.removeChild(c)})}return this}});k.buildFragment=function(b,c,e){var d,f,j,g,i=b[0];c&&c[0]&&(g=c[0].ownerDocument||c[0]);g.createDocumentFragment||(g=s);if(1===b.length&&"string"===typeof i&&512>i.length&&g===s&&"<"===i.charAt(0)&&!Ca.test(i)&&(k.support.checkClone||!wa.test(i))&&
(k.support.html5Clone||!va.test(i)))f=!0,(j=k.fragments[i])&&1!==j&&(d=j);d||(d=g.createDocumentFragment(),k.clean(b,g,d,e));f&&(k.fragments[i]=j?d:1);return{fragment:d,cacheable:f}};k.fragments={};k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){k.fn[b]=function(e){var d=[],e=k(e),f=1===this.length&&this[0].parentNode;if(f&&11===f.nodeType&&1===f.childNodes.length&&1===e.length)return e[c](this[0]),this;for(var f=0,j=
e.length;f<j;f++){var g=(0<f?this.clone(!0):this).get();k(e[f])[c](g);d=d.concat(g)}return this.pushStack(d,b,e.selector)}});k.extend({clone:function(b,c,e){var d,f,j;k.support.html5Clone||k.isXMLDoc(b)||!va.test("<"+b.nodeName+">")?d=b.cloneNode(!0):(d=s.createElement("div"),xa.appendChild(d),d.innerHTML=b.outerHTML,d=d.firstChild);var g=d;if((!k.support.noCloneEvent||!k.support.noCloneChecked)&&(1===b.nodeType||11===b.nodeType)&&!k.isXMLDoc(b)){z(b,g);d=C(b);f=C(g);for(j=0;d[j];++j)f[j]&&z(d[j],
f[j])}if(c&&(h(b,g),e)){d=C(b);f=C(g);for(j=0;d[j];++j)h(d[j],f[j])}return g},clean:function(b,c,e,d){var f,j=[],c=c||s;"undefined"===typeof c.createElement&&(c=c.ownerDocument||c[0]&&c[0].ownerDocument||s);for(var g=0,i;null!=(i=b[g]);g++)if("number"===typeof i&&(i+=""),i){if("string"===typeof i)if(ua.test(i)){i=i.replace(na,"<$1></$2>");f=(ra.exec(i)||["",""])[1].toLowerCase();var m=qa[f]||qa._default,w=m[0],h=c.createElement("div"),o=xa.childNodes;c===s?xa.appendChild(h):l(c).appendChild(h);for(h.innerHTML=
m[1]+i+m[2];w--;)h=h.lastChild;if(!k.support.tbody){w=ta.test(i);m="table"===f&&!w?h.firstChild&&h.firstChild.childNodes:"<table>"===m[1]&&!w?h.childNodes:[];for(f=m.length-1;0<=f;--f)k.nodeName(m[f],"tbody")&&!m[f].childNodes.length&&m[f].parentNode.removeChild(m[f])}!k.support.leadingWhitespace&&ia.test(i)&&h.insertBefore(c.createTextNode(ia.exec(i)[0]),h.firstChild);i=h.childNodes;h&&(h.parentNode.removeChild(h),0<o.length&&(h=o[o.length-1])&&h.parentNode&&h.parentNode.removeChild(h))}else i=c.createTextNode(i);
var C;if(!k.support.appendChecked)if(i[0]&&"number"===typeof(C=i.length))for(f=0;f<C;f++)A(i[f]);else A(i);i.nodeType?j.push(i):j=k.merge(j,i)}if(e){b=function(b){return!b.type||Aa.test(b.type)};for(g=0;j[g];g++)c=j[g],d&&k.nodeName(c,"script")&&(!c.type||Aa.test(c.type))?d.push(c.parentNode?c.parentNode.removeChild(c):c):(1===c.nodeType&&(i=k.grep(c.getElementsByTagName("script"),b),j.splice.apply(j,[g+1,0].concat(i))),e.appendChild(c))}return j},cleanData:function(b){for(var c,e,d=k.cache,f=k.event.special,
j=k.support.deleteExpando,g=0,i;null!=(i=b[g]);g++)if(!i.nodeName||!k.noData[i.nodeName.toLowerCase()])if(e=i[k.expando]){if((c=d[e])&&c.events){for(var m in c.events)f[m]?k.event.remove(i,m):k.removeEvent(i,m,c.handle);c.handle&&(c.handle.elem=null)}j?delete i[k.expando]:i.removeAttribute&&i.removeAttribute(k.expando);delete d[e]}}});var za=/alpha\([^)]*\)/i,La=/opacity=([^)]*)/,Pa=/([A-Z]|^ms)/g,Ta=/^[\-+]?(?:\d*\.)?\d+$/i,Da=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,$a=/^([\-+])=([\-+.\de]+)/,bb=/^margin/,
cb={position:"absolute",visibility:"hidden",display:"block"},Wa=["Top","Right","Bottom","Left"],rb,Ma,Na;k.fn.css=function(c,e){return k.access(this,function(c,e,d){return d!==b?k.style(c,e,d):k.css(c,e)},c,e,1<arguments.length)};k.extend({cssHooks:{opacity:{get:function(b,c){if(c){var e=rb(b,"opacity");return""===e?"1":e}return b.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.support.cssFloat?"cssFloat":
"styleFloat"},style:function(c,e,d,f){if(c&&!(3===c.nodeType||8===c.nodeType||!c.style)){var j,g=k.camelCase(e),i=c.style,m=k.cssHooks[g],e=k.cssProps[g]||g;if(d!==b){f=typeof d;if("string"===f&&(j=$a.exec(d)))d=+(j[1]+1)*+j[2]+parseFloat(k.css(c,e)),f="number";if(!(null==d||"number"===f&&isNaN(d)))if("number"===f&&!k.cssNumber[g]&&(d+="px"),!m||!("set"in m)||(d=m.set(c,d))!==b)try{i[e]=d}catch(l){}}else return m&&"get"in m&&(j=m.get(c,!1,f))!==b?j:i[e]}},css:function(c,e,d){var f,j,e=k.camelCase(e);
j=k.cssHooks[e];e=k.cssProps[e]||e;"cssFloat"===e&&(e="float");if(j&&"get"in j&&(f=j.get(c,!0,d))!==b)return f;if(rb)return rb(c,e)},swap:function(b,c,e){var d={},f;for(f in c)d[f]=b.style[f],b.style[f]=c[f];e=e.call(b);for(f in c)b.style[f]=d[f];return e}});k.curCSS=k.css;s.defaultView&&s.defaultView.getComputedStyle&&(Ma=function(b,c){var e,d,f,j=b.style,c=c.replace(Pa,"-$1").toLowerCase();if((d=b.ownerDocument.defaultView)&&(f=d.getComputedStyle(b,null)))e=f.getPropertyValue(c),""===e&&!k.contains(b.ownerDocument.documentElement,
b)&&(e=k.style(b,c));!k.support.pixelMargin&&f&&bb.test(c)&&Da.test(e)&&(d=j.width,j.width=e,e=f.width,j.width=d);return e});s.documentElement.currentStyle&&(Na=function(b,c){var e,d,f=b.currentStyle&&b.currentStyle[c],j=b.style;if(null==f&&j&&(e=j[c]))f=e;if(Da.test(f)){e=j.left;if(d=b.runtimeStyle&&b.runtimeStyle.left)b.runtimeStyle.left=b.currentStyle.left;j.left="fontSize"===c?"1em":f;f=j.pixelLeft+"px";j.left=e;d&&(b.runtimeStyle.left=d)}return""===f?"auto":f});rb=Ma||Na;k.each(["height","width"],
function(b,c){k.cssHooks[c]={get:function(b,e,d){if(e)return 0!==b.offsetWidth?E(b,c,d):k.swap(b,cb,function(){return E(b,c,d)})},set:function(b,c){return Ta.test(c)?c+"px":c}}});k.support.opacity||(k.cssHooks.opacity={get:function(b,c){return La.test((c&&b.currentStyle?b.currentStyle.filter:b.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(b,c){var e=b.style,d=b.currentStyle,f=k.isNumeric(c)?"alpha(opacity="+100*c+")":"",j=d&&d.filter||e.filter||"";e.zoom=1;if(1<=c&&""===k.trim(j.replace(za,
""))&&(e.removeAttribute("filter"),d&&!d.filter))return;e.filter=za.test(j)?j.replace(za,f):j+" "+f}});k(function(){k.support.reliableMarginRight||(k.cssHooks.marginRight={get:function(b,c){return k.swap(b,{display:"inline-block"},function(){return c?rb(b,"margin-right"):b.style.marginRight})}})});k.expr&&k.expr.filters&&(k.expr.filters.hidden=function(b){var c=b.offsetHeight;return 0===b.offsetWidth&&0===c||!k.support.reliableHiddenOffsets&&"none"===(b.style&&b.style.display||k.css(b,"display"))},
k.expr.filters.visible=function(b){return!k.expr.filters.hidden(b)});k.each({margin:"",padding:"",border:"Width"},function(b,c){k.cssHooks[b+c]={expand:function(e){for(var d="string"===typeof e?e.split(" "):[e],f={},e=0;4>e;e++)f[b+Wa[e]+c]=d[e]||d[e-2]||d[0];return f}}});var gb=/%20/g,hb=/\[\]$/,Sa=/\r?\n/g,ib=/#.*$/,jb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,kb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,lb=/^(?:GET|HEAD)$/,mb=/^\/\//,
Ua=/\?/,nb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ob=/^(?:select|textarea)/i,Va=/\s+/,qb=/([?&])_=[^&]*/,ab=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,db=k.fn.load,Oa={},eb={},Ya,Za,fb=["*/"]+["*"];try{Ya=x.href}catch(Bb){Ya=s.createElement("a"),Ya.href="",Ya=Ya.href}Za=ab.exec(Ya.toLowerCase())||[];k.fn.extend({load:function(c,e,d){if("string"!==typeof c&&db)return db.apply(this,arguments);if(!this.length)return this;var f=c.indexOf(" ");if(0<=f)var j=c.slice(f,c.length),c=c.slice(0,
f);f="GET";e&&(k.isFunction(e)?(d=e,e=b):"object"===typeof e&&(e=k.param(e,k.ajaxSettings.traditional),f="POST"));var g=this;k.ajax({url:c,type:f,dataType:"html",data:e,complete:function(b,c,e){e=b.responseText;b.isResolved()&&(b.done(function(b){e=b}),g.html(j?k("<div>").append(e.replace(nb,"")).find(j):e));d&&g.each(d,[e,c,b])}});return this},serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?k.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ob.test(this.nodeName)||kb.test(this.type))}).map(function(b,c){var e=k(this).val();return null==e?null:k.isArray(e)?k.map(e,function(b){return{name:c.name,value:b.replace(Sa,"\r\n")}}):{name:c.name,value:e.replace(Sa,"\r\n")}}).get()}});k.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(b,c){k.fn[c]=function(b){return this.on(c,b)}});k.each(["get","post"],function(c,e){k[e]=function(c,
d,f,j){k.isFunction(d)&&(j=j||f,f=d,d=b);return k.ajax({type:e,url:c,data:d,success:f,dataType:j})}});k.extend({getScript:function(c,e){return k.get(c,b,e,"script")},getJSON:function(b,c,e){return k.get(b,c,e,"json")},ajaxSetup:function(b,c){c?H(b,k.ajaxSettings):(c=b,b=k.ajaxSettings);H(b,c);return b},ajaxSettings:{url:Ya,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Za[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":fb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":c.String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:D(Oa),ajaxTransport:D(eb),ajax:function(c,e){function d(c,e,h,o){if(2!==v){v=2;z&&clearTimeout(z);E=b;C=o||"";K.readyState=0<c?4:
0;var A,D,F,o=e;if(h){var H=f,O=K,n=H.contents,W=H.dataTypes,q=H.responseFields,s,Q,t,u;for(Q in q)Q in h&&(O[q[Q]]=h[Q]);for(;"*"===W[0];)W.shift(),s===b&&(s=H.mimeType||O.getResponseHeader("content-type"));if(s)for(Q in n)if(n[Q]&&n[Q].test(s)){W.unshift(Q);break}if(W[0]in h)t=W[0];else{for(Q in h){if(!W[0]||H.converters[Q+" "+W[0]]){t=Q;break}u||(u=Q)}t=t||u}t?(t!==W[0]&&W.unshift(t),h=h[t]):h=void 0}else h=b;if(200<=c&&300>c||304===c){if(f.ifModified){if(s=K.getResponseHeader("Last-Modified"))k.lastModified[w]=
s;if(s=K.getResponseHeader("Etag"))k.etag[w]=s}if(304===c)o="notmodified",A=!0;else try{s=f;s.dataFilter&&(h=s.dataFilter(h,s.dataType));var ba=s.dataTypes;Q={};var Ja,U,y=ba.length,Cb,x=ba[0],sb,Db,pa,Xa,B;for(Ja=1;Ja<y;Ja++){if(1===Ja)for(U in s.converters)"string"===typeof U&&(Q[U.toLowerCase()]=s.converters[U]);sb=x;x=ba[Ja];if("*"===x)x=sb;else if("*"!==sb&&sb!==x){Db=sb+" "+x;pa=Q[Db]||Q["* "+x];if(!pa)for(Xa in B=b,Q)if(Cb=Xa.split(" "),Cb[0]===sb||"*"===Cb[0])if(B=Q[Cb[1]+" "+x]){Xa=Q[Xa];
!0===Xa?pa=B:!0===B&&(pa=Xa);break}!pa&&!B&&k.error("No conversion from "+Db.replace(" "," to "));!0!==pa&&(h=pa?pa(h):B(Xa(h)))}}D=h;o="success";A=!0}catch(Ka){o="parsererror",F=Ka}}else if(F=o,!o||c)o="error",0>c&&(c=0);K.status=c;K.statusText=""+(e||o);A?i.resolveWith(j,[D,o,K]):i.rejectWith(j,[K,o,F]);K.statusCode(l);l=b;M&&g.trigger("ajax"+(A?"Success":"Error"),[K,f,A?D:F]);m.fireWith(j,[K,o]);M&&(g.trigger("ajaxComplete",[K,f]),--k.active||k.event.trigger("ajaxStop"))}}"object"===typeof c&&
(e=c,c=b);var e=e||{},f=k.ajaxSetup({},e),j=f.context||f,g=j!==f&&(j.nodeType||j instanceof k)?k(j):k.event,i=k.Deferred(),m=k.Callbacks("once memory"),l=f.statusCode||{},w,h={},o={},C,A,E,z,D,v=0,M,H,K={readyState:0,setRequestHeader:function(b,c){if(!v){var e=b.toLowerCase(),b=o[e]=o[e]||b;h[b]=c}return this},getAllResponseHeaders:function(){return 2===v?C:null},getResponseHeader:function(c){var e;if(2===v){if(!A)for(A={};e=jb.exec(C);)A[e[1].toLowerCase()]=e[2];e=A[c.toLowerCase()]}return e===b?
null:e},overrideMimeType:function(b){v||(f.mimeType=b);return this},abort:function(b){b=b||"abort";E&&E.abort(b);d(0,b);return this}};i.promise(K);K.success=K.done;K.error=K.fail;K.complete=m.add;K.statusCode=function(b){if(b){var c;if(2>v)for(c in b)l[c]=[l[c],b[c]];else c=b[K.status],K.then(c,c)}return this};f.url=((c||f.url)+"").replace(ib,"").replace(mb,Za[1]+"//");f.dataTypes=k.trim(f.dataType||"*").toLowerCase().split(Va);null==f.crossDomain&&(D=ab.exec(f.url.toLowerCase()),f.crossDomain=!(!D||
!(D[1]!=Za[1]||D[2]!=Za[2]||(D[3]||("http:"===D[1]?80:443))!=(Za[3]||("http:"===Za[1]?80:443)))));f.data&&f.processData&&"string"!==typeof f.data&&(f.data=k.param(f.data,f.traditional));F(Oa,f,e,K);if(2===v)return!1;M=f.global;f.type=f.type.toUpperCase();f.hasContent=!lb.test(f.type);M&&0===k.active++&&k.event.trigger("ajaxStart");if(!f.hasContent&&(f.data&&(f.url+=(Ua.test(f.url)?"&":"?")+f.data,delete f.data),w=f.url,!1===f.cache)){D=k.now();var O=f.url.replace(qb,"$1_="+D);f.url=O+(O===f.url?(Ua.test(f.url)?
"&":"?")+"_="+D:"")}(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&K.setRequestHeader("Content-Type",f.contentType);f.ifModified&&(w=w||f.url,k.lastModified[w]&&K.setRequestHeader("If-Modified-Since",k.lastModified[w]),k.etag[w]&&K.setRequestHeader("If-None-Match",k.etag[w]));K.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+fb+"; q=0.01":""):f.accepts["*"]);for(H in f.headers)K.setRequestHeader(H,f.headers[H]);if(f.beforeSend&&
(!1===f.beforeSend.call(j,K,f)||2===v))return K.abort(),!1;for(H in{success:1,error:1,complete:1})K[H](f[H]);if(E=F(eb,f,e,K)){K.readyState=1;M&&g.trigger("ajaxSend",[K,f]);f.async&&0<f.timeout&&(z=setTimeout(function(){K.abort("timeout")},f.timeout));try{v=1,E.send(h,d)}catch(n){if(2>v)d(-1,n);else throw n;}}else d(-1,"No Transport");return K},param:function(c,e){var d=[],f=function(b,c){c=k.isFunction(c)?c():c;d[d.length]=encodeURIComponent(b)+"="+encodeURIComponent(c)};e===b&&(e=k.ajaxSettings.traditional);
if(k.isArray(c)||c.jquery&&!k.isPlainObject(c))k.each(c,function(){f(this.name,this.value)});else for(var j in c)M(j,c[j],e,f);return d.join("&").replace(gb,"+")}});k.extend({active:0,lastModified:{},etag:{}});var wb=k.now(),Fa=/(\=)\?(&|$)|\?\?/i;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return k.expando+"_"+wb++}});k.ajaxPrefilter("json jsonp",function(b,e,d){e="string"===typeof b.data&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&
(Fa.test(b.url)||e&&Fa.test(b.data))){var f,j=b.jsonpCallback=k.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,g=c[j],i=b.url,m=b.data,l="$1"+j+"$2";!1!==b.jsonp&&(i=i.replace(Fa,l),b.url===i&&(e&&(m=m.replace(Fa,l)),b.data===m&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+j)));b.url=i;b.data=m;c[j]=function(b){f=[b]};d.always(function(){c[j]=g;if(f&&k.isFunction(g))c[j](f[0])});b.converters["script json"]=function(){f||k.error(j+" was not called");return f[0]};b.dataTypes[0]="json";return"script"}});
k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b){k.globalEval(b);return b}}});k.ajaxPrefilter("script",function(c){c.cache===b&&(c.cache=!1);c.crossDomain&&(c.type="GET",c.global=!1)});k.ajaxTransport("script",function(c){if(c.crossDomain){var e,d=s.head||s.getElementsByTagName("head")[0]||s.documentElement;return{send:function(f,j){e=s.createElement("script");
e.async="async";c.scriptCharset&&(e.charset=c.scriptCharset);e.src=c.url;e.onload=e.onreadystatechange=function(c,f){if(f||!e.readyState||/loaded|complete/.test(e.readyState))e.onload=e.onreadystatechange=null,d&&e.parentNode&&d.removeChild(e),e=b,f||j(200,"success")};d.insertBefore(e,d.firstChild)},abort:function(){if(e)e.onload(0,1)}}}});var Qa=c.ActiveXObject?function(){for(var b in ub)ub[b](0,1)}:!1,xb=0,ub;k.ajaxSettings.xhr=c.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&O()))a:{try{b=
new c.ActiveXObject("Microsoft.XMLHTTP");break a}catch(e){}b=void 0}return b}:O;(function(b){k.extend(k.support,{ajax:!!b,cors:!!b&&"withCredentials"in b})})(k.ajaxSettings.xhr());k.support.ajax&&k.ajaxTransport(function(e){if(!e.crossDomain||k.support.cors){var d;return{send:function(f,j){var g=e.xhr(),i,m;e.username?g.open(e.type,e.url,e.async,e.username,e.password):g.open(e.type,e.url,e.async);if(e.xhrFields)for(m in e.xhrFields)g[m]=e.xhrFields[m];e.mimeType&&g.overrideMimeType&&g.overrideMimeType(e.mimeType);
!e.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");try{for(m in f)g.setRequestHeader(m,f[m])}catch(l){}g.send(e.hasContent&&e.data||null);d=function(c,f){var m,l,w,h,o;try{if(d&&(f||4===g.readyState))if(d=b,i&&(g.onreadystatechange=k.noop,Qa&&delete ub[i]),f)4!==g.readyState&&g.abort();else{m=g.status;w=g.getAllResponseHeaders();h={};if((o=g.responseXML)&&o.documentElement)h.xml=o;try{h.text=g.responseText}catch(C){}try{l=g.statusText}catch(A){l=""}!m&&e.isLocal&&!e.crossDomain?
m=h.text?200:404:1223===m&&(m=204)}}catch(E){f||j(-1,E)}h&&j(m,l,h,w)};!e.async||4===g.readyState?d():(i=++xb,Qa&&(ub||(ub={},k(c).unload(Qa)),ub[i]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var Ra={},ya,tb,yb=/^(?:toggle|show|hide)$/,zb=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Ga,Ha=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],Ia;k.fn.extend({show:function(b,c,e){if(b||0===b)return this.animate(q("show",
3),b,c,e);for(var e=0,d=this.length;e<d;e++)b=this[e],b.style&&(c=b.style.display,!k._data(b,"olddisplay")&&"none"===c&&(c=b.style.display=""),(""===c&&"none"===k.css(b,"display")||!k.contains(b.ownerDocument.documentElement,b))&&k._data(b,"olddisplay",t(b.nodeName)));for(e=0;e<d;e++)if(b=this[e],b.style&&(c=b.style.display,""===c||"none"===c))b.style.display=k._data(b,"olddisplay")||"";return this},hide:function(b,c,e){if(b||0===b)return this.animate(q("hide",3),b,c,e);for(var e=0,d=this.length;e<
d;e++)b=this[e],b.style&&(c=k.css(b,"display"),"none"!==c&&!k._data(b,"olddisplay")&&k._data(b,"olddisplay",c));for(e=0;e<d;e++)this[e].style&&(this[e].style.display="none");return this},_toggle:k.fn.toggle,toggle:function(b,c,e){var d="boolean"===typeof b;k.isFunction(b)&&k.isFunction(c)?this._toggle.apply(this,arguments):null==b||d?this.each(function(){var c=d?b:k(this).is(":hidden");k(this)[c?"show":"hide"]()}):this.animate(q("toggle",3),b,c,e);return this},fadeTo:function(b,c,e,d){return this.filter(":hidden").css("opacity",
0).show().end().animate({opacity:c},b,e,d)},animate:function(b,c,e,d){function f(){!1===j.queue&&k._mark(this);var c=k.extend({},j),e=1===this.nodeType,d=e&&k(this).is(":hidden"),g,i,m,l,w;c.animatedProperties={};for(m in b)if(g=k.camelCase(m),m!==g&&(b[g]=b[m],delete b[m]),(i=k.cssHooks[g])&&"expand"in i)for(m in l=i.expand(b[g]),delete b[g],l)m in b||(b[m]=l[m]);for(g in b){i=b[g];k.isArray(i)?(c.animatedProperties[g]=i[1],i=b[g]=i[0]):c.animatedProperties[g]=c.specialEasing&&c.specialEasing[g]||
c.easing||"swing";if("hide"===i&&d||"show"===i&&!d)return c.complete.call(this);if(e&&("height"===g||"width"===g))c.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===k.css(this,"display")&&"none"===k.css(this,"float")&&(!k.support.inlineBlockNeedsLayout||"inline"===t(this.nodeName)?this.style.display="inline-block":this.style.zoom=1)}null!=c.overflow&&(this.style.overflow="hidden");for(m in b)if(e=new k.fx(this,c,m),i=b[m],yb.test(i))if(g=k._data(this,"toggle"+m)||
("toggle"===i?d?"show":"hide":0))k._data(this,"toggle"+m,"show"===g?"hide":"show"),e[g]();else e[i]();else g=zb.exec(i),l=e.cur(),g?(i=parseFloat(g[2]),w=g[3]||(k.cssNumber[m]?"":"px"),"px"!==w&&(k.style(this,m,(i||1)+w),l*=(i||1)/e.cur(),k.style(this,m,l+w)),g[1]&&(i=("-="===g[1]?-1:1)*i+l),e.custom(l,i,w)):e.custom(l,i,"");return!0}var j=k.speed(c,e,d);if(k.isEmptyObject(b))return this.each(j.complete,[!1]);b=k.extend({},b);return!1===j.queue?this.each(f):this.queue(j.queue,f)},stop:function(c,
e,d){"string"!==typeof c&&(d=e,e=c,c=b);e&&!1!==c&&this.queue(c||"fx",[]);return this.each(function(){var b,e=!1,f=k.timers,j=k._data(this);d||k._unmark(!0,this);if(null==c)for(b in j){if(j[b]&&j[b].stop&&b.indexOf(".run")===b.length-4){var g=j[b];k.removeData(this,b,!0);g.stop(d)}}else if(j[b=c+".run"]&&j[b].stop)j=j[b],k.removeData(this,b,!0),j.stop(d);for(b=f.length;b--;)if(f[b].elem===this&&(null==c||f[b].queue===c)){if(d)f[b](!0);else f[b].saveState();e=!0;f.splice(b,1)}(!d||!e)&&k.dequeue(this,
c)})}});k.each({slideDown:q("show",1),slideUp:q("hide",1),slideToggle:q("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){k.fn[b]=function(b,e,d){return this.animate(c,b,e,d)}});k.extend({speed:function(b,c,e){var d=b&&"object"===typeof b?k.extend({},b):{complete:e||!e&&c||k.isFunction(b)&&b,duration:b,easing:e&&c||c&&!k.isFunction(c)&&c};d.duration=k.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in k.fx.speeds?k.fx.speeds[d.duration]:
k.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(b){k.isFunction(d.old)&&d.old.call(this);d.queue?k.dequeue(this,d.queue):!1!==b&&k._unmark(this)};return d},easing:{linear:function(b){return b},swing:function(b){return-Math.cos(b*Math.PI)/2+0.5}},timers:[],fx:function(b,c,e){this.options=c;this.elem=b;this.prop=e;c.orig=c.orig||{}}});k.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(k.fx.step[this.prop]||
k.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var b,c=k.css(this.elem,this.prop);return isNaN(b=parseFloat(c))?!c||"auto"===c?0:c:b},custom:function(c,e,d){function f(b){return j.step(b)}var j=this,g=k.fx;this.startTime=Ia||v();this.end=e;this.now=this.start=c;this.pos=this.state=0;this.unit=d||this.unit||(k.cssNumber[this.prop]?"":"px");f.queue=this.options.queue;f.elem=this.elem;f.saveState=
function(){k._data(j.elem,"fxshow"+j.prop)===b&&(j.options.hide?k._data(j.elem,"fxshow"+j.prop,j.start):j.options.show&&k._data(j.elem,"fxshow"+j.prop,j.end))};f()&&k.timers.push(f)&&!Ga&&(Ga=setInterval(g.tick,g.interval))},show:function(){var c=k._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=c||k.style(this.elem,this.prop);this.options.show=!0;c!==b?this.custom(this.cur(),c):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());k(this.elem).show()},hide:function(){this.options.orig[this.prop]=
k._data(this.elem,"fxshow"+this.prop)||k.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(b){var c,e=Ia||v(),d=!0,f=this.elem,j=this.options;if(b||e>=j.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();j.animatedProperties[this.prop]=!0;for(c in j.animatedProperties)!0!==j.animatedProperties[c]&&(d=!1);if(d){null!=j.overflow&&!k.support.shrinkWrapBlocks&&k.each(["","X","Y"],function(b,c){f.style["overflow"+c]=j.overflow[b]});j.hide&&
k(f).hide();if(j.hide||j.show)for(c in j.animatedProperties)k.style(f,c,j.orig[c]),k.removeData(f,"fxshow"+c,!0),k.removeData(f,"toggle"+c,!0);if(b=j.complete)j.complete=!1,b.call(f)}return!1}Infinity==j.duration?this.now=e:(b=e-this.startTime,this.state=b/j.duration,this.pos=k.easing[j.animatedProperties[this.prop]](this.state,b,0,1,j.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};k.extend(k.fx,{tick:function(){for(var b,c=k.timers,e=0;e<c.length;e++)b=c[e],
!b()&&c[e]===b&&c.splice(e--,1);c.length||k.fx.stop()},interval:13,stop:function(){clearInterval(Ga);Ga=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(b){k.style(b.elem,"opacity",b.now)},_default:function(b){b.elem.style&&null!=b.elem.style[b.prop]?b.elem.style[b.prop]=b.now+b.unit:b.elem[b.prop]=b.now}}});k.each(Ha.concat.apply([],Ha),function(b,c){c.indexOf("margin")&&(k.fx.step[c]=function(b){k.style(b.elem,c,Math.max(0,b.now)+b.unit)})});k.expr&&k.expr.filters&&(k.expr.filters.animated=
function(b){return k.grep(k.timers,function(c){return b===c.elem}).length});var pb,Ab=/^t(?:able|d|h)$/i,vb=/^(?:body|html)$/i;pb="getBoundingClientRect"in s.documentElement?function(b,c,e,d){try{d=b.getBoundingClientRect()}catch(f){}if(!d||!k.contains(e,b))return d?{top:d.top,left:d.left}:{top:0,left:0};b=c.body;c=u(c);return{top:d.top+(c.pageYOffset||k.support.boxModel&&e.scrollTop||b.scrollTop)-(e.clientTop||b.clientTop||0),left:d.left+(c.pageXOffset||k.support.boxModel&&e.scrollLeft||b.scrollLeft)-
(e.clientLeft||b.clientLeft||0)}}:function(b,c,e){var d,f=b.offsetParent,j=c.body;d=(c=c.defaultView)?c.getComputedStyle(b,null):b.currentStyle;for(var g=b.offsetTop,i=b.offsetLeft;(b=b.parentNode)&&b!==j&&b!==e&&!(k.support.fixedPosition&&"fixed"===d.position);){d=c?c.getComputedStyle(b,null):b.currentStyle;g-=b.scrollTop;i-=b.scrollLeft;if(b===f){g+=b.offsetTop;i+=b.offsetLeft;if(k.support.doesNotAddBorder&&(!k.support.doesAddBorderForTableAndCells||!Ab.test(b.nodeName)))g+=parseFloat(d.borderTopWidth)||
0,i+=parseFloat(d.borderLeftWidth)||0;f=b.offsetParent}k.support.subtractsBorderForOverflowNotVisible&&"visible"!==d.overflow&&(g+=parseFloat(d.borderTopWidth)||0,i+=parseFloat(d.borderLeftWidth)||0)}if("relative"===d.position||"static"===d.position)g+=j.offsetTop,i+=j.offsetLeft;k.support.fixedPosition&&"fixed"===d.position&&(g+=Math.max(e.scrollTop,j.scrollTop),i+=Math.max(e.scrollLeft,j.scrollLeft));return{top:g,left:i}};k.fn.offset=function(c){if(arguments.length)return c===b?this:this.each(function(b){k.offset.setOffset(this,
c,b)});var e=this[0],d=e&&e.ownerDocument;return!d?null:e===d.body?k.offset.bodyOffset(e):pb(e,d,d.documentElement)};k.offset={bodyOffset:function(b){var c=b.offsetTop,e=b.offsetLeft;k.support.doesNotIncludeMarginInBodyOffset&&(c+=parseFloat(k.css(b,"marginTop"))||0,e+=parseFloat(k.css(b,"marginLeft"))||0);return{top:c,left:e}},setOffset:function(b,c,e){var d=k.css(b,"position");"static"===d&&(b.style.position="relative");var f=k(b),j=f.offset(),g=k.css(b,"top"),i=k.css(b,"left"),m={},l={};("absolute"===
d||"fixed"===d)&&-1<k.inArray("auto",[g,i])?(l=f.position(),d=l.top,i=l.left):(d=parseFloat(g)||0,i=parseFloat(i)||0);k.isFunction(c)&&(c=c.call(b,e,j));null!=c.top&&(m.top=c.top-j.top+d);null!=c.left&&(m.left=c.left-j.left+i);"using"in c?c.using.call(b,m):f.css(m)}};k.fn.extend({position:function(){if(!this[0])return null;var b=this[0],c=this.offsetParent(),e=this.offset(),d=vb.test(c[0].nodeName)?{top:0,left:0}:c.offset();e.top-=parseFloat(k.css(b,"marginTop"))||0;e.left-=parseFloat(k.css(b,"marginLeft"))||
0;d.top+=parseFloat(k.css(c[0],"borderTopWidth"))||0;d.left+=parseFloat(k.css(c[0],"borderLeftWidth"))||0;return{top:e.top-d.top,left:e.left-d.left}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent||s.body;b&&!vb.test(b.nodeName)&&"static"===k.css(b,"position");)b=b.offsetParent;return b})}});k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,e){var d=/Y/.test(e);k.fn[c]=function(f){return k.access(this,function(c,f,j){var g=u(c);if(j===b)return g?
e in g?g[e]:k.support.boxModel&&g.document.documentElement[f]||g.document.body[f]:c[f];g?g.scrollTo(!d?j:k(g).scrollLeft(),d?j:k(g).scrollTop()):c[f]=j},c,f,arguments.length,null)}});k.each({Height:"height",Width:"width"},function(c,e){var d="client"+c,f="scroll"+c,j="offset"+c;k.fn["inner"+c]=function(){var b=this[0];return b?b.style?parseFloat(k.css(b,e,"padding")):this[e]():null};k.fn["outer"+c]=function(b){var c=this[0];return c?c.style?parseFloat(k.css(c,e,b?"margin":"border")):this[e]():null};
k.fn[e]=function(c){return k.access(this,function(c,e,g){if(k.isWindow(c))return e=c.document,c=e.documentElement[d],k.support.boxModel&&c||e.body&&e.body[d]||c;if(9===c.nodeType)return e=c.documentElement,e[d]>=e[f]?e[d]:Math.max(c.body[f],e[f],c.body[j],e[j]);if(g===b)return c=k.css(c,e),e=parseFloat(c),k.isNumeric(e)?e:c;k(c).css(e,g)},e,c,arguments.length,null)}});c.jQuery=c.$=k;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return k})}(x);B("jquery.ui.core")&&
function(c,b){function e(b,e){var i=b.nodeName.toLowerCase();if("area"===i){var i=b.parentNode,j=i.name;if(!b.href||!j||"map"!==i.nodeName.toLowerCase())return!1;i=c("img[usemap=#"+j+"]")[0];return!!i&&d(i)}return(/input|select|textarea|button|object/.test(i)?!b.disabled:"a"==i?b.href||e:e)&&d(b)}function d(b){return!c(b).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};c.ui.version||(c.extend(c.ui,{version:"1.8.14",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({_focus:c.fn.focus,focus:function(b,e){return"number"===typeof b?this.each(function(){var d=this;setTimeout(function(){c(d).focus();
e&&e.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;b=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,
"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?c(document):b},zIndex:function(e){if(e!==b)return this.css("zIndex",e);if(this.length)for(var e=c(this[0]),d;e.length&&e[0]!==document;){d=e.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(e.css("zIndex"),10),!isNaN(d)&&0!==d)return d;e=e.parent()}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",
function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c.each(["Width","Height"],function(e,d){function i(b,e,d,f){c.each(j,function(){e-=parseFloat(c.curCSS(b,"padding"+this,!0))||0;d&&(e-=parseFloat(c.curCSS(b,"border"+this+"Width",!0))||0);f&&(e-=parseFloat(c.curCSS(b,"margin"+this,!0))||0)});return e}var j="Width"===d?["Left","Right"]:["Top","Bottom"],m=d.toLowerCase(),l={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,
outerHeight:c.fn.outerHeight};c.fn["inner"+d]=function(e){return e===b?l["inner"+d].call(this):this.each(function(){c(this).css(m,i(this,e)+"px")})};c.fn["outer"+d]=function(b,e){return"number"!==typeof b?l["outer"+d].call(this,b):this.each(function(){c(this).css(m,i(this,b,!0,e)+"px")})}}),c.extend(c.expr[":"],{data:function(b,e,d){return!!c.data(b,d[3])},focusable:function(b){return e(b,!isNaN(c.attr(b,"tabindex")))},tabbable:function(b){var d=c.attr(b,"tabindex"),i=isNaN(d);return(i||0<=d)&&e(b,
!i)}}),c(function(){var b=document.body,e=b.appendChild(e=document.createElement("div"));c.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=100===e.offsetHeight;c.support.selectstart="onselectstart"in e;b.removeChild(e).style.display="none"}),c.extend(c.ui,{plugin:{add:function(b,e,d){var b=c.ui[b].prototype,j;for(j in d)b.plugins[j]=b.plugins[j]||[],b.plugins[j].push([e,d[j]])},call:function(b,c,e){if((c=b.plugins[c])&&b.element[0].parentNode)for(var d=
0;d<c.length;d++)b.options[c[d][0]]&&c[d][1].apply(b.element,e)}},contains:function(b,c){return document.compareDocumentPosition?b.compareDocumentPosition(c)&16:b!==c&&b.contains(c)},hasScroll:function(b,e){if("hidden"===c(b).css("overflow"))return!1;var d=e&&"left"===e?"scrollLeft":"scrollTop",j=!1;if(0<b[d])return!0;b[d]=1;j=0<b[d];b[d]=0;return j},isOverAxis:function(b,c,e){return b>c&&b<c+e},isOver:function(b,e,d,j,m,l){return c.ui.isOverAxis(b,d,m)&&c.ui.isOverAxis(e,j,l)}}))}(jQuery);B("jquery.ui.widget")&&
function(c,b){if(c.cleanData){var e=c.cleanData;c.cleanData=function(b){for(var d=0,i;null!=(i=b[d]);d++)c(i).triggerHandler("remove");e(b)}}else{var d=c.fn.remove;c.fn.remove=function(b,e){return this.each(function(){e||(!b||c.filter(b,[this]).length)&&c("*",this).add([this]).each(function(){c(this).triggerHandler("remove")});return d.call(c(this),b,e)})}}c.widget=function(b,e,d){var j=b.split(".")[0],m,b=b.split(".")[1];m=j+"-"+b;d||(d=e,e=c.Widget);c.expr[":"][m]=function(e){return!!c.data(e,b)};
c[j]=c[j]||{};c[j][b]=function(b,c){arguments.length&&this._createWidget(b,c)};e=new e;e.options=c.extend(!0,{},e.options);c[j][b].prototype=c.extend(!0,e,{namespace:j,widgetName:b,widgetEventPrefix:c[j][b].prototype.widgetEventPrefix||b,widgetBaseClass:m},d);c.widget.bridge(b,c[j][b])};c.widget.bridge=function(e,d){c.fn[e]=function(i){var j="string"===typeof i,m=Array.prototype.slice.call(arguments,1),l=this,i=!j&&m.length?c.extend.apply(null,[!0,i].concat(m)):i;if(j&&"_"===i.charAt(0))return l;
j?this.each(function(){var d=c.data(this,e),j=d&&c.isFunction(d[i])?d[i].apply(d,m):d;if(j!==d&&j!==b)return l=j,!1}):this.each(function(){var b=c.data(this,e);b?b.option(i||{})._init():c.data(this,e,new d(i,this))});return l}};c.Widget=function(b,c){arguments.length&&this._createWidget(b,c)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,e){c.data(e,this.widgetName,this);this.element=c(e);this.options=c.extend(!0,{},this.options,this._getCreateOptions(),
b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(e,d){var i=e;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof e){if(d===b)return this.options[e];i={};i[e]=d}this._setOptions(i);return this},_setOptions:function(b){var e=this;c.each(b,function(b,c){e._setOption(b,c)});return this},_setOption:function(b,c){this.options[b]=c;"disabled"===b&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,e,d){var j=this.options[b],e=c.Event(e);e.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d=d||{};if(e.originalEvent)for(var b=c.event.props.length,m;b;)m=c.event.props[--b],e[m]=e.originalEvent[m];this.element.trigger(e,d);return!(c.isFunction(j)&&!1===j.call(this.element[0],e,d)||e.isDefaultPrevented())}}}(jQuery);B("jquery.ui.mouse")&&function(c){c.widget("ui.mouse",{options:{cancel:":input,option",
distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(e){if(!0===c.data(e.target,b.widgetName+".preventClickEvent"))return c.removeData(e.target,b.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){b.originalEvent=b.originalEvent||{};if(!b.originalEvent.mouseHandled){this._mouseStarted&&
this._mouseUp(b);this._mouseDownEvent=b;var e=this,d=1==b.which,f="string"==typeof this.options.cancel?c(b.target).closest(this.options.cancel).length:!1;if(!d||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===c.data(b.target,
this.widgetName+".preventClickEvent")&&c.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return e._mouseMove(b)};this._mouseUpDelegate=function(b){return e._mouseUp(b)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();return b.originalEvent.mouseHandled=!0}},_mouseMove:function(b){if(c.browser.msie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);
if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&c.data(b.target,this.widgetName+
".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery);B("jquery.ui.position")&&function(c){c.ui=c.ui||{};var b=/left|center|right/,e=/top|center|bottom/,d=c.fn.position,
f=c.fn.offset;c.fn.position=function(f){if(!f||!f.of)return d.apply(this,arguments);var f=c.extend({},f),i=c(f.of),j=i[0],m=(f.collision||"flip").split(" "),l=f.offset?f.offset.split(" "):[0,0],h,z,C;9===j.nodeType?(h=i.width(),z=i.height(),C={top:0,left:0}):j.setTimeout?(h=i.width(),z=i.height(),C={top:i.scrollTop(),left:i.scrollLeft()}):j.preventDefault?(f.at="left top",h=z=0,C={top:f.of.pageY,left:f.of.pageX}):(h=i.outerWidth(),z=i.outerHeight(),C=i.offset());c.each(["my","at"],function(){var c=
(f[this]||"").split(" ");1===c.length&&(c=b.test(c[0])?c.concat(["center"]):e.test(c[0])?["center"].concat(c):["center","center"]);c[0]=b.test(c[0])?c[0]:"center";c[1]=e.test(c[1])?c[1]:"center";f[this]=c});1===m.length&&(m[1]=m[0]);l[0]=parseInt(l[0],10)||0;1===l.length&&(l[1]=l[0]);l[1]=parseInt(l[1],10)||0;"right"===f.at[0]?C.left+=h:"center"===f.at[0]&&(C.left+=h/2);"bottom"===f.at[1]?C.top+=z:"center"===f.at[1]&&(C.top+=z/2);C.left+=l[0];C.top+=l[1];return this.each(function(){var b=c(this),
e=b.outerWidth(),d=b.outerHeight(),j=parseInt(c.curCSS(this,"marginLeft",!0))||0,i=parseInt(c.curCSS(this,"marginTop",!0))||0,H=e+j+(parseInt(c.curCSS(this,"marginRight",!0))||0),M=d+i+(parseInt(c.curCSS(this,"marginBottom",!0))||0),O=c.extend({},C),v;"right"===f.my[0]?O.left-=e:"center"===f.my[0]&&(O.left-=e/2);"bottom"===f.my[1]?O.top-=d:"center"===f.my[1]&&(O.top-=d/2);O.left=Math.round(O.left);O.top=Math.round(O.top);v={left:O.left-j,top:O.top-i};c.each(["left","top"],function(b,j){if(c.ui.position[m[b]])c.ui.position[m[b]][j](O,
{targetWidth:h,targetHeight:z,elemWidth:e,elemHeight:d,collisionPosition:v,collisionWidth:H,collisionHeight:M,offset:l,my:f.my,at:f.at})});c.fn.bgiframe&&b.bgiframe();b.offset(c.extend(O,{using:f.using}))})};c.ui.position={fit:{left:function(b,e){var d=c(x),d=e.collisionPosition.left+e.collisionWidth-d.width()-d.scrollLeft();b.left=0<d?b.left-d:Math.max(b.left-e.collisionPosition.left,b.left)},top:function(b,e){var d=c(x),d=e.collisionPosition.top+e.collisionHeight-d.height()-d.scrollTop();b.top=
0<d?b.top-d:Math.max(b.top-e.collisionPosition.top,b.top)}},flip:{left:function(b,e){if("center"!==e.at[0]){var d=c(x),d=e.collisionPosition.left+e.collisionWidth-d.width()-d.scrollLeft(),f="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,l="left"===e.at[0]?e.targetWidth:-e.targetWidth,h=-2*e.offset[0];b.left+=0>e.collisionPosition.left?f+l+h:0<d?f+l+h:0}},top:function(b,e){if("center"!==e.at[1]){var d=c(x),d=e.collisionPosition.top+e.collisionHeight-d.height()-d.scrollTop(),f="top"===
e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,l="top"===e.at[1]?e.targetHeight:-e.targetHeight,h=-2*e.offset[1];b.top+=0>e.collisionPosition.top?f+l+h:0<d?f+l+h:0}}}};c.offset.setOffset||(c.offset.setOffset=function(b,e){/static/.test(c.curCSS(b,"position"))&&(b.style.position="relative");var d=c(b),f=d.offset(),l=parseInt(c.curCSS(b,"top",!0),10)||0,h=parseInt(c.curCSS(b,"left",!0),10)||0,f={top:e.top-f.top+l,left:e.left-f.left+h};"using"in e?e.using.call(b,f):d.css(f)},c.fn.offset=function(b){var e=
this[0];return!e||!e.ownerDocument?null:b?this.each(function(){c.offset.setOffset(this,b)}):f.call(this)})}(jQuery);B("jquery.ui.draggable")&&function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,
snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),
this._mouseDestroy(),this},_mouseCapture:function(b){var e=this.options;if(this.helper||e.disabled||c(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;c(!0===e.iframeFix?"iframe":e.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var e=
this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();c.ui.ddmanager&&(c.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);e.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,!0);c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,
e){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";c.ui.ddmanager&&c.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var e=!1;c.ui.ddmanager&&
!this.options.dropBehaviour&&(e=c.ui.ddmanager.drop(this,b));this.dropped&&(e=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&"original"==this.options.helper)return!1;if("invalid"==this.options.revert&&!e||"valid"==this.options.revert&&e||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var d=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==d._trigger("stop",
b)&&d._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){!0===this.options.iframeFix&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,b);return c.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var e=!this.options.handle||!c(this.options.handle,this.element).length?
!0:!1;c(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(e=!0)});return e},_createHelper:function(b){var e=this.options,b=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[b])):"clone"==e.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==
typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&
this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==
this.cssPosition){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:c(x).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:c(x).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:c(x).scrollLeft())+c("document"==
b.containment?document:x).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:c(x).scrollTop())+(c("document"==b.containment?document:x).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var b=c(b.containment),e=b[0];if(e){b.offset();var d="hidden"!=c(e).css("overflow");this.containment=[(parseInt(c(e).css("borderLeftWidth"),10)||0)+
(parseInt(c(e).css("paddingLeft"),10)||0),(parseInt(c(e).css("borderTopWidth"),10)||0)+(parseInt(c(e).css("paddingTop"),10)||0),(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(c(e).css("borderLeftWidth"),10)||0)-(parseInt(c(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(c(e).css("borderTopWidth"),10)||0)-(parseInt(c(e).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom];this.relative_container=b}}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,e){e||(e=this.position);var d="absolute"==b?1:-1,f="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:e.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&
526>c.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:e.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var e=this.options,d="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(d[0].tagName),g=b.pageX,i=b.pageY;if(this.originalPosition){var j;this.containment&&(this.relative_container?(j=this.relative_container.offset(),j=[this.containment[0]+j.left,this.containment[1]+j.top,this.containment[2]+j.left,this.containment[3]+j.top]):j=this.containment,b.pageX-this.offset.click.left<j[0]&&(g=j[0]+this.offset.click.left),b.pageY-this.offset.click.top<j[1]&&(i=j[1]+this.offset.click.top),b.pageX-this.offset.click.left>
j[2]&&(g=j[2]+this.offset.click.left),b.pageY-this.offset.click.top>j[3]&&(i=j[3]+this.offset.click.top));e.grid&&(i=e.grid[1]?this.originalPageY+Math.round((i-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY,i=j?!(i-this.offset.click.top<j[1]||i-this.offset.click.top>j[3])?i:!(i-this.offset.click.top<j[1])?i-e.grid[1]:i+e.grid[1]:i,g=e.grid[0]?this.originalPageX+Math.round((g-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX,g=j?!(g-this.offset.click.left<j[0]||g-this.offset.click.left>
j[2])?g:!(g-this.offset.click.left<j[0])?g-e.grid[0]:g+e.grid[0]:g)}return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:d.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():
f?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,e,d){d=d||this._uiHash();c.ui.plugin.call(this,b,[e,d]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return c.Widget.prototype._trigger.call(this,b,e,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,
offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.14"});c.ui.plugin.add("draggable","connectToSortable",{start:function(b,e){var d=c(this).data("draggable"),f=d.options,g=c.extend({},e,{item:d.element});d.sortables=[];c(f.connectToSortable).each(function(){var e=c.data(this,"sortable");e&&!e.options.disabled&&(d.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",b,g))})},stop:function(b,e){var d=c(this).data("draggable"),f=c.extend({},
e,{item:d.element});c.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,f))})},drag:function(b,e){var d=c(this).data("draggable"),
f=this;c.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},
b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&
this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});c.ui.plugin.add("draggable","cursor",{start:function(){var b=
c("body"),e=c(this).data("draggable").options;b.css("cursor")&&(e._cursor=b.css("cursor"));b.css("cursor",e.cursor)},stop:function(){var b=c(this).data("draggable").options;b._cursor&&c("body").css("cursor",b._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(b,e){var d=c(e.helper),f=c(this).data("draggable").options;d.css("opacity")&&(f._opacity=d.css("opacity"));d.css("opacity",f.opacity)},stop:function(b,e){var d=c(this).data("draggable").options;d._opacity&&c(e.helper).css("opacity",
d._opacity)}});c.ui.plugin.add("draggable","scroll",{start:function(){var b=c(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var e=c(this).data("draggable"),d=e.options,f=!1;if(e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)e.overflowOffset.top+e.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?e.scrollParent[0].scrollTop=f=e.scrollParent[0].scrollTop+
d.scrollSpeed:b.pageY-e.overflowOffset.top<d.scrollSensitivity&&(e.scrollParent[0].scrollTop=f=e.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||"y"!=d.axis)e.overflowOffset.left+e.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?e.scrollParent[0].scrollLeft=f=e.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-e.overflowOffset.left<d.scrollSensitivity&&(e.scrollParent[0].scrollLeft=f=e.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||"x"!=d.axis)b.pageY-c(document).scrollTop()<
d.scrollSensitivity?f=c(document).scrollTop(c(document).scrollTop()-d.scrollSpeed):c(x).height()-(b.pageY-c(document).scrollTop())<d.scrollSensitivity&&(f=c(document).scrollTop(c(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)b.pageX-c(document).scrollLeft()<d.scrollSensitivity?f=c(document).scrollLeft(c(document).scrollLeft()-d.scrollSpeed):c(x).width()-(b.pageX-c(document).scrollLeft())<d.scrollSensitivity&&(f=c(document).scrollLeft(c(document).scrollLeft()+d.scrollSpeed))}!1!==f&&
c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(e,b)}});c.ui.plugin.add("draggable","snap",{start:function(){var b=c(this).data("draggable"),e=b.options;b.snapElements=[];c(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var e=c(this),f=e.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:f.top,left:f.left})})},drag:function(b,e){for(var d=c(this).data("draggable"),f=d.options,g=f.snapTolerance,
i=e.offset.left,j=i+d.helperProportions.width,m=e.offset.top,l=m+d.helperProportions.height,h=d.snapElements.length-1;0<=h;h--){var z=d.snapElements[h].left,C=z+d.snapElements[h].width,w=d.snapElements[h].top,A=w+d.snapElements[h].height;if(z-g<i&&i<C+g&&w-g<m&&m<A+g||z-g<i&&i<C+g&&w-g<l&&l<A+g||z-g<j&&j<C+g&&w-g<m&&m<A+g||z-g<j&&j<C+g&&w-g<l&&l<A+g){if("inner"!=f.snapMode){var E=Math.abs(w-l)<=g,D=Math.abs(A-m)<=g,F=Math.abs(z-j)<=g,H=Math.abs(C-i)<=g;E&&(e.position.top=d._convertPositionTo("relative",
{top:w-d.helperProportions.height,left:0}).top-d.margins.top);D&&(e.position.top=d._convertPositionTo("relative",{top:A,left:0}).top-d.margins.top);F&&(e.position.left=d._convertPositionTo("relative",{top:0,left:z-d.helperProportions.width}).left-d.margins.left);H&&(e.position.left=d._convertPositionTo("relative",{top:0,left:C}).left-d.margins.left)}var M=E||D||F||H;"outer"!=f.snapMode&&(E=Math.abs(w-m)<=g,D=Math.abs(A-l)<=g,F=Math.abs(z-i)<=g,H=Math.abs(C-j)<=g,E&&(e.position.top=d._convertPositionTo("relative",
{top:w,left:0}).top-d.margins.top),D&&(e.position.top=d._convertPositionTo("relative",{top:A-d.helperProportions.height,left:0}).top-d.margins.top),F&&(e.position.left=d._convertPositionTo("relative",{top:0,left:z}).left-d.margins.left),H&&(e.position.left=d._convertPositionTo("relative",{top:0,left:C-d.helperProportions.width}).left-d.margins.left));!d.snapElements[h].snapping&&(E||D||F||H||M)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,c.extend(d._uiHash(),{snapItem:d.snapElements[h].item}));
d.snapElements[h].snapping=E||D||F||H||M}else d.snapElements[h].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,c.extend(d._uiHash(),{snapItem:d.snapElements[h].item})),d.snapElements[h].snapping=!1}}});c.ui.plugin.add("draggable","stack",{start:function(){var b=c(this).data("draggable").options,b=c.makeArray(c(b.stack)).sort(function(b,e){return(parseInt(c(b).css("zIndex"),10)||0)-(parseInt(c(e).css("zIndex"),10)||0)});if(b.length){var e=parseInt(b[0].style.zIndex)||0;c(b).each(function(b){this.style.zIndex=
e+b});this[0].style.zIndex=e+b.length}}});c.ui.plugin.add("draggable","zIndex",{start:function(b,e){var d=c(e.helper),f=c(this).data("draggable").options;d.css("zIndex")&&(f._zIndex=d.css("zIndex"));d.css("zIndex",f.zIndex)},stop:function(b,e){var d=c(this).data("draggable").options;d._zIndex&&c(e.helper).css("zIndex",d._zIndex)}})}(jQuery);B("jquery.ui.droppable")&&function(c){c.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,
scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,e=b.accept;this.isover=0;this.isout=1;this.accept=c.isFunction(e)?e:function(b){return b.is(e)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};c.ui.ddmanager.droppables[b.scope]=c.ui.ddmanager.droppables[b.scope]||[];c.ui.ddmanager.droppables[b.scope].push(this);b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=c.ui.ddmanager.droppables[this.options.scope],
e=0;e<b.length;e++)b[e]==this&&b.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(b,e){"accept"==b&&(this.accept=c.isFunction(e)?e:function(b){return b.is(e)});c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var e=c.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);e&&this._trigger("activate",b,this.ui(e))},_deactivate:function(b){var e=
c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);e&&this._trigger("deactivate",b,this.ui(e))},_over:function(b){var e=c.ui.ddmanager.current;if(e&&(e.currentItem||e.element)[0]!=this.element[0])if(this.accept.call(this.element[0],e.currentItem||e.element))this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(e))},_out:function(b){var e=c.ui.ddmanager.current;if(e&&(e.currentItem||e.element)[0]!=this.element[0])if(this.accept.call(this.element[0],
e.currentItem||e.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(e))},_drop:function(b,e){var d=e||c.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=c.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&
c.ui.intersect(d,c.extend(b,{offset:b.element.offset()}),b.options.tolerance))return f=!0,!1});if(f)return!1;return this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}},_inBounds:function(b){return"function"===
typeof this.options.inBounds?this.options.inBounds(b):!1}});c.extend(c.ui.droppable,{version:"1.8.14"});c.ui.intersect=function(b,e,d){if(!e.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,g=f+b.helperProportions.width,i=(b.positionAbs||b.position.absolute).top,j=i+b.helperProportions.height,m=e.offset.left,l=m+e.proportions.width,h=e.offset.top,z=h+e.proportions.height;switch(d){case "fit":return m<=f&&g<=l&&h<=i&&j<=z;case "intersect":return m<f+b.helperProportions.width/2&&g-b.helperProportions.width/
2<l&&h<i+b.helperProportions.height/2&&j-b.helperProportions.height/2<z;case "pointer":return c.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,h,m,e.proportions.height,e.proportions.width);case "touch":return(i>=h&&i<=z||j>=h&&j<=z||i<h&&j>z)&&(f>=m&&f<=l||g>=m&&g<=l||f<m&&g>l);default:return!1}};c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,e){var d=
c.ui.ddmanager.droppables[b.options.scope]||[],f=e?e.type:null,g=(b.currentItem||b.element).find(":data(droppable)").andSelf(),i=0;a:for(;i<d.length;i++)if(!(d[i].options.disabled||b&&!d[i].accept.call(d[i].element[0],b.currentItem||b.element))){for(var j=0;j<g.length;j++)if(g[j]==d[i].element[0]){d[i].proportions.height=0;continue a}d[i].visible="none"!=d[i].element.css("display");d[i].visible&&("mousedown"==f&&d[i]._activate.call(d[i],e),d[i].offset=d[i].element.offset(),d[i].proportions={width:d[i].element[0].offsetWidth,
height:d[i].element[0].offsetHeight})}},drop:function(b,e){var d=!1;c.each(c.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options&&(!this.options.disabled&&this.visible&&this._inBounds(e)&&c.ui.intersect(b,this,this.options.tolerance)&&(d=d||this._drop.call(this,e)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)))this.isout=1,this.isover=0,this._deactivate.call(this,e)});return d},dragStart:function(b,e){b.element.parentsUntil("body").bind("scroll.droppable",
function(){b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,e)})},drag:function(b,e){b.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(b,e);c.each(c.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=this._inBounds(e)&&c.ui.intersect(b,this,this.options.tolerance);if(d=!d&&1==this.isover?"isout":d&&0==this.isover?"isover":null){var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");
g.length&&(f=c.data(g[0],"droppable"),f.greedyChild="isover"==d?1:0)}f&&"isover"==d&&(f.isover=0,f.isout=1,f._out.call(f,e));this[d]=1;this["isout"==d?"isover":"isout"]=0;this["isover"==d?"_over":"_out"].call(this,e);f&&"isout"==d&&(f.isout=0,f.isover=1,f._over.call(f,e))}}})},dragStop:function(b,e){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,e)}}}(jQuery);B("jquery.ui.sortable")&&function(c){c.widget("ui.sortable",c.ui.mouse,
{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===
b.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData("sortable-item");return this},_setOption:function(b,e){"disabled"===b?(this.options[b]=e,this.widget()[e?"addClass":
"removeClass"]("ui-sortable-disabled")):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,e){if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var d=null,f=this;c(b.target).parents().each(function(){if(c.data(this,"sortable-item")==f)return d=c(this),!1});c.data(b.target,"sortable-item")==f&&(d=c(b.target));if(!d)return!1;if(this.options.handle&&!e){var g=!1;c(this.options.handle,d).find("*").andSelf().each(function(){this==
b.target&&(g=!0)});if(!g)return!1}this.currentItem=d;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,e,d){e=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=
this.helper.css("position");c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
e.containment&&this._setContainment();e.cursor&&(c("body").css("cursor")&&(this._storedCursor=c("body").css("cursor")),c("body").css("cursor",e.cursor));e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity));e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));c.ui.ddmanager&&(c.ui.ddmanager.current=this);c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var e=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+
this.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(b.pageY-c(document).scrollTop()<e.scrollSensitivity?d=c(document).scrollTop(c(document).scrollTop()-e.scrollSpeed):c(x).height()-(b.pageY-c(document).scrollTop())<e.scrollSensitivity&&(d=c(document).scrollTop(c(document).scrollTop()+
e.scrollSpeed)),b.pageX-c(document).scrollLeft()<e.scrollSensitivity?d=c(document).scrollLeft(c(document).scrollLeft()-e.scrollSpeed):c(x).width()-(b.pageX-c(document).scrollLeft())<e.scrollSensitivity&&(d=c(document).scrollLeft(c(document).scrollLeft()+e.scrollSpeed)));!1!==d&&c.ui.ddmanager&&!e.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(e=this.items.length-1;0<=e;e--){var d=this.items[e],f=d.item[0],g=this._intersectsWithPointer(d);if(g&&f!=this.currentItem[0]&&this.placeholder[1==g?"next":"prev"]()[0]!=f&&!c.ui.contains(this.placeholder[0],f)&&("semi-dynamic"==this.options.type?!c.ui.contains(this.element[0],f):1)){this.direction=1==g?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(d))this._rearrange(b,d);else break;this._trigger("change",
b,this._uiHash());break}}this._contactContainers(b);c.ui.ddmanager&&c.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,e){if(b){c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,f=d.placeholder.offset();d.reverting=!0;c(this.helper).animate({left:f.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),
top:f.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),
this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem));
return this},serialize:function(b){var e=this._getItemsAsjQuery(b&&b.connected),d=[],b=b||{};c(e).each(function(){var e=(c(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);e&&d.push((b.key||e[1]+"[]")+"="+(b.key&&b.expression?e[1]:e[2]))});!d.length&&b.key&&d.push(b.key+"=");return d.join("&")},toArray:function(b){var e=this._getItemsAsjQuery(b&&b.connected),d=[],b=b||{};e.each(function(){d.push(c(b.item||this).attr(b.attribute||"id")||"")});return d},_intersectsWith:function(b){var c=
this.positionAbs.left,d=c+this.helperProportions.width,f=this.positionAbs.top,g=f+this.helperProportions.height,i=b.left,j=i+b.width,m=b.top,l=m+b.height,h=this.offset.click.top,z=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?f+h>m&&f+h<l&&c+z>i&&c+z<j:i<c+this.helperProportions.width/2&&d-this.helperProportions.width/
2<j&&m<f+this.helperProportions.height/2&&g-this.helperProportions.height/2<l},_intersectsWithPointer:function(b){var e=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),b=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=e&&b,b=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return!e?!1:this.floating?d&&"right"==d||"down"==b?2:1:b&&("down"==b?2:1)},_intersectsWithSides:function(b){var e=c.ui.isOverAxis(this.positionAbs.top+
this.offset.click.top,b.top+b.height/2,b.height),b=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),d=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&b||"left"==f&&!b:d&&("down"==d&&e||"up"==d&&!e)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!=b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;
return 0!=b&&(0<b?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var e=[],d=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=b;b--)for(var g=c(f[b]),i=g.length-1;0<=i;i--){var j=c.data(g[i],"sortable");j&&j!=this&&!j.options.disabled&&d.push([c.isFunction(j.options.items)?j.options.items.call(j.element):
c(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}d.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=d.length-1;0<=b;b--)d[b][0].each(function(){e.push(this)});return c(e)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data(sortable-item)"),c=0;c<this.items.length;c++)for(var d=
0;d<b.length;d++)b[d]==this.items[c].item[0]&&this.items.splice(c,1)},_refreshItems:function(b){this.items=[];this.containers=[this];var e=this.items,d=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):c(this.options.items,this.element),this]],f=this._connectWith();if(f)for(var g=f.length-1;0<=g;g--)for(var i=c(f[g]),j=i.length-1;0<=j;j--){var m=c.data(i[j],"sortable");m&&m!=this&&!m.options.disabled&&(d.push([c.isFunction(m.options.items)?m.options.items.call(m.element[0],
b,{item:this.currentItem}):c(m.options.items,m.element),m]),this.containers.push(m))}for(g=d.length-1;0<=g;g--){b=d[g][1];f=d[g][0];j=0;for(i=f.length;j<i;j++)m=c(f[j]),m.data("sortable-item",b),e.push({item:m,instance:b,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var e=this.items.length-1;0<=e;e--){var d=this.items[e];if(!(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])){var f=
this.options.toleranceElement?c(this.options.toleranceElement,d.item):d.item;b||(d.width=f.outerWidth(),d.height=f.outerHeight());f=f.offset();d.left=f.left;d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)f=this.containers[e].element.offset(),this.containers[e].containerCache.left=f.left,this.containers[e].containerCache.top=f.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),
this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(b){var e=b||this,d=e.options;if(!d.placeholder||d.placeholder.constructor==String){var f=d.placeholder;d.placeholder={element:function(){var b=c(document.createElement(e.currentItem[0].nodeName)).addClass(f||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];f||(b.style.visibility="hidden");return b},update:function(b,c){if(!f||d.forcePlaceholderSize)c.height()||
c.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),c.width()||c.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}e.placeholder=c(d.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);d.placeholder.update(e,e.placeholder)},_contactContainers:function(b){for(var e=null,d=null,f=this.containers.length-
1;0<=f;f--)if(!c.ui.contains(this.currentItem[0],this.containers[f].element[0]))if(this._intersectsWith(this.containers[f].containerCache)){if(!e||!c.ui.contains(this.containers[f].element[0],e.element[0]))e=this.containers[f],d=f}else this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=0);if(e)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=
1;else if(this.currentContainer!=this.containers[d]){for(var e=1E4,f=null,g=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;0<=i;i--)if(c.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.items[i][this.containers[d].floating?"left":"top"];Math.abs(j-g)<e&&(e=Math.abs(j-g),f=this.items[i])}if(f||this.options.dropOnEmpty)this.currentContainer=this.containers[d],f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[d].element,
!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var e=this.options,b=c.isFunction(e.helper)?c(e.helper.apply(this.element[0],[b,this.currentItem])):"clone"==e.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||c("parent"!=e.appendTo?
e.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==b[0].style.width||e.forceHelperSize)&&b.width(this.currentItem.width());(""==b[0].style.height||e.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"==
typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&
this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==
this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c("document"==b.containment?document:x).width()-this.helperProportions.width-this.margins.left,(c("document"==b.containment?document:x).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var e=c(b.containment)[0],b=c(b.containment).offset(),d="hidden"!=c(e).css("overflow");this.containment=[b.left+(parseInt(c(e).css("borderLeftWidth"),10)||0)+(parseInt(c(e).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(c(e).css("borderTopWidth"),10)||0)+(parseInt(c(e).css("paddingTop"),10)||0)-this.margins.top,b.left+(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(c(e).css("borderLeftWidth"),10)||
0)-(parseInt(c(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(c(e).css("borderTopWidth"),10)||0)-(parseInt(c(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,e){e||(e=this.position);var d="absolute"==b?1:-1,f="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:
this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:e.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:e.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var e=this.options,d="absolute"==
this.cssPosition&&!(this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var g=b.pageX,i=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),
b.pageY-this.offset.click.top<this.containment[1]&&(i=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(i=this.containment[3]+this.offset.click.top)),e.grid&&(i=this.originalPageY+Math.round((i-this.originalPageY)/e.grid[1])*e.grid[1],i=this.containment?!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:!(i-this.offset.click.top<
this.containment[1])?i-e.grid[1]:i+e.grid[1]:i,g=this.originalPageX+Math.round((g-this.originalPageX)/e.grid[0])*e.grid[0],g=this.containment?!(g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2])?g:!(g-this.offset.click.left<this.containment[0])?g-e.grid[0]:g+e.grid[0]:g));return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():
f?0:d.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:d.scrollLeft())}},_rearrange:function(b,c,d,f){d?d[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?c.item[0]:c.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var g=this,i=this.counter;x.setTimeout(function(){i==
g.counter&&g.refreshPositions(!f)},0)},_clear:function(b,e){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&d.push(function(b){this._trigger("receive",
b,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e&&d.push(function(b){this._trigger("update",b,this._uiHash())});if(!c.ui.contains(this.element[0],this.currentItem[0])){e||d.push(function(b){this._trigger("remove",b,this._uiHash())});for(f=this.containers.length-1;0<=f;f--)c.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!e&&(d.push(function(b){return function(c){b._trigger("receive",
c,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(b){return function(c){b._trigger("update",c,this._uiHash(this))}}.call(this,this.containers[f])))}for(f=this.containers.length-1;0<=f;f--)e||d.push(function(b){return function(c){b._trigger("deactivate",c,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(b){return function(c){b._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=
0);this._storedCursor&&c("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}e||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!e){for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===c.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var e=b||this;return{helper:e.helper,placeholder:e.placeholder||c([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:b?b.element:null}}});c.extend(c.ui.sortable,
{version:"1.8.14"})}(jQuery);B("jquery.ui.datepicker")&&function(c,b){function e(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass=
"ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),
dayNamesMin:"Su,Mo,Tu,We,Th,Fr,Sa".split(","),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};c.extend(this._defaults,this.regional[""]);this.dpDiv=d(c('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function d(b){return b.bind("mouseout",
function(b){b=c(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");b.length&&b.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(e){e=c(e.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!c.datepicker._isDisabledDatepicker(i.inline?b.parent()[0]:i.input[0])&&e.length)e.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
e.addClass("ui-state-hover"),e.hasClass("ui-datepicker-prev")&&e.addClass("ui-datepicker-prev-hover"),e.hasClass("ui-datepicker-next")&&e.addClass("ui-datepicker-next-hover")})}function f(e,d){c.extend(e,d);for(var f in d)if(null==d[f]||d[f]==b)e[f]=d[f];return e}c.extend(c.ui,{datepicker:{version:"1.8.16"}});var g=(new Date).getTime(),i;c.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(b){f(this._defaults,b||{});return this},_attachDatepicker:function(b,e){var d=null,f;for(f in this._defaults){var g=b.getAttribute("date:"+f);if(g){d=d||{};try{d[f]=eval(g)}catch(i){d[f]=g}}}f=b.nodeName.toLowerCase();g="div"==f||"span"==f;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var w=this._newInst(c(b),g);w.settings=c.extend({},e||{},d||{});"input"==f?this._connectDatepicker(b,w):g&&this._inlineDatepicker(b,w)},_newInst:function(b,e){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:!e?this.dpDiv:d(c('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(b,e){var d=c(b);e.append=c([]);e.trigger=c([]);d.hasClass(this.markerClassName)||(this._attachments(d,e),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(b,c,d){e.settings[c]=d}).bind("getData.datepicker",function(b,c){return this._get(e,c)}),this._autoSize(e),c.data(b,"datepicker",e),e.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,e){var d=this._get(e,"appendText"),f=this._get(e,"isRTL");e.append&&e.append.remove();d&&(e.append=c('<span class="'+this._appendClass+'">'+d+"</span>"),b[f?"before":"after"](e.append));b.unbind("focus",this._showDatepicker);e.trigger&&e.trigger.remove();d=this._get(e,"showOn");("focus"==
d||"both"==d)&&b.focus(this._showDatepicker);if("button"==d||"both"==d){var d=this._get(e,"buttonText"),g=this._get(e,"buttonImage");e.trigger=c(this._get(e,"buttonImageOnly")?c("<img/>").addClass(this._triggerClass).attr({src:g,alt:d,title:d}):c('<button type="button"></button>').addClass(this._triggerClass).html(""==g?d:c("<img/>").attr({src:g,alt:d,title:d})));b[f?"before":"after"](e.trigger);e.trigger.click(function(){c.datepicker._datepickerShowing&&c.datepicker._lastInput==b[0]?c.datepicker._hideDatepicker():
c.datepicker._showDatepicker(b[0]);return!1})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var c=new Date(2009,11,20),e=this._get(b,"dateFormat");if(e.match(/[DM]/)){var d=function(b){for(var c=0,e=0,d=0;d<b.length;d++)b[d].length>c&&(c=b[d].length,e=d);return e};c.setMonth(d(this._get(b,e.match(/MM/)?"monthNames":"monthNamesShort")));c.setDate(d(this._get(b,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-c.getDay())}b.input.attr("size",this._formatDate(b,c).length)}},_inlineDatepicker:function(b,
e){var d=c(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(b,c,d){e.settings[c]=d}).bind("getData.datepicker",function(b,c){return this._get(e,c)}),c.data(b,"datepicker",e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(b),e.dpDiv.css("display","block"))},_dialogDatepicker:function(b,e,d,g,i){b=this._dialogInst;b||(this.uuid+=1,this._dialogInput=
c('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),c("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},c.data(this._dialogInput[0],"datepicker",b));f(b.settings,g||{});e=e&&e.constructor==Date?this._formatDate(b,e):e;this._dialogInput.val(e);this._pos=i?i.length?i:[i.pageX,i.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/
2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=d;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);c.blockUI&&c.blockUI(this.dpDiv);c.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var e=
c(b),d=c.data(b,"datepicker");if(e.hasClass(this.markerClassName)){var f=b.nodeName.toLowerCase();c.removeData(b,"datepicker");"input"==f?(d.append.remove(),d.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==f||"span"==f)&&e.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(b){var e=c(b),d=c.data(b,"datepicker");if(e.hasClass(this.markerClassName)){var f=
b.nodeName.toLowerCase();if("input"==f)b.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==f||"span"==f)e=e.children("."+this._inlineClass),e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=c.map(this._disabledInputs,function(c){return c==b?null:c})}},_disableDatepicker:function(b){var e=c(b),d=c.data(b,"datepicker");
if(e.hasClass(this.markerClassName)){var f=b.nodeName.toLowerCase();if("input"==f)b.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==f||"span"==f)e=e.children("."+this._inlineClass),e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled");this._disabledInputs=c.map(this._disabledInputs,function(c){return c==b?null:c});this._disabledInputs[this._disabledInputs.length]=
b}},_isDisabledDatepicker:function(b){if(!b)return!1;for(var c=0;c<this._disabledInputs.length;c++)if(this._disabledInputs[c]==b)return!0;return!1},_getInst:function(b){try{return c.data(b,"datepicker")}catch(e){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(e,d,g){var i=this._getInst(e);if(2==arguments.length&&"string"==typeof d)return"defaults"==d?c.extend({},c.datepicker._defaults):i?"all"==d?c.extend({},i.settings):this._get(i,d):null;var h=d||{};"string"==typeof d&&
(h={},h[d]=g);if(i){this._curInst==i&&this._hideDatepicker();var C=this._getDateDatepicker(e,!0),w=this._getMinMaxDate(i,"min"),A=this._getMinMaxDate(i,"max");f(i.settings,h);null!==w&&h.dateFormat!==b&&h.minDate===b&&(i.settings.minDate=this._formatDate(i,w));null!==A&&h.dateFormat!==b&&h.maxDate===b&&(i.settings.maxDate=this._formatDate(i,A));this._attachments(c(e),i);this._autoSize(i);this._setDate(i,C);this._updateAlternate(i);this._updateDatepicker(i)}},_changeDatepicker:function(b,c,e){this._optionDatepicker(b,
c,e)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,c){var e=this._getInst(b);e&&(this._setDate(e,c),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(b,c){var e=this._getInst(b);e&&!e.inline&&this._setDateFromField(e,c);return e?this._getDate(e):null},_doKeyDown:function(b){var e=c.datepicker._getInst(b.target),d=!0,f=e.dpDiv.is(".ui-datepicker-rtl");e._keyEvent=!0;if(c.datepicker._datepickerShowing)switch(b.keyCode){case 9:c.datepicker._hideDatepicker();
d=!1;break;case 13:return d=c("td."+c.datepicker._dayOverClass+":not(."+c.datepicker._currentClass+")",e.dpDiv),d[0]&&c.datepicker._selectDay(b.target,e.selectedMonth,e.selectedYear,d[0]),(b=c.datepicker._get(e,"onSelect"))?(d=c.datepicker._formatDate(e),b.apply(e.input?e.input[0]:null,[d,e])):c.datepicker._hideDatepicker(),!1;case 27:c.datepicker._hideDatepicker();break;case 33:c.datepicker._adjustDate(b.target,b.ctrlKey?-c.datepicker._get(e,"stepBigMonths"):-c.datepicker._get(e,"stepMonths"),"M");
break;case 34:c.datepicker._adjustDate(b.target,b.ctrlKey?+c.datepicker._get(e,"stepBigMonths"):+c.datepicker._get(e,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&c.datepicker._clearDate(b.target);d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&c.datepicker._gotoToday(b.target);d=b.ctrlKey||b.metaKey;break;case 37:if(b.ctrlKey||b.metaKey)c.datepicker._adjustDate(b.target,f?1:-1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&c.datepicker._adjustDate(b.target,b.ctrlKey?
-c.datepicker._get(e,"stepBigMonths"):-c.datepicker._get(e,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&c.datepicker._adjustDate(b.target,-7,"D");d=b.ctrlKey||b.metaKey;break;case 39:if(b.ctrlKey||b.metaKey)c.datepicker._adjustDate(b.target,f?-1:1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&c.datepicker._adjustDate(b.target,b.ctrlKey?+c.datepicker._get(e,"stepBigMonths"):+c.datepicker._get(e,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&c.datepicker._adjustDate(b.target,
7,"D");d=b.ctrlKey||b.metaKey;break;default:d=!1}else 36==b.keyCode&&b.ctrlKey?c.datepicker._showDatepicker(this):d=!1;d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(e){var d=c.datepicker._getInst(e.target);if(c.datepicker._get(d,"constrainInput")){var d=c.datepicker._possibleChars(c.datepicker._get(d,"dateFormat")),f=String.fromCharCode(e.charCode==b?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">f||!d||-1<d.indexOf(f)}},_doKeyUp:function(b){b=c.datepicker._getInst(b.target);
if(b.input.val()!=b.lastVal)try{if(c.datepicker.parseDate(c.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,c.datepicker._getFormatConfig(b)))c.datepicker._setDateFromField(b),c.datepicker._updateAlternate(b),c.datepicker._updateDatepicker(b)}catch(e){c.datepicker.log(e)}return!0},_showDatepicker:function(b){b=b.target||b;"input"!=b.nodeName.toLowerCase()&&(b=c("input",b.parentNode)[0]);if(!(c.datepicker._isDisabledDatepicker(b)||c.datepicker._lastInput==b)){var e=c.datepicker._getInst(b);
c.datepicker._curInst&&c.datepicker._curInst!=e&&(c.datepicker._datepickerShowing&&c.datepicker._triggerOnClose(c.datepicker._curInst),c.datepicker._curInst.dpDiv.stop(!0,!0));var d=c.datepicker._get(e,"beforeShow"),d=d?d.apply(b,[b,e]):{};if(!1!==d){f(e.settings,d);e.lastVal=null;c.datepicker._lastInput=b;c.datepicker._setDateFromField(e);c.datepicker._inDialog&&(b.value="");c.datepicker._pos||(c.datepicker._pos=c.datepicker._findPos(b),c.datepicker._pos[1]+=b.offsetHeight);var g=!1;c(b).parents().each(function(){g|=
"fixed"==c(this).css("position");return!g});g&&c.browser.opera&&(c.datepicker._pos[0]-=document.documentElement.scrollLeft,c.datepicker._pos[1]-=document.documentElement.scrollTop);d={left:c.datepicker._pos[0],top:c.datepicker._pos[1]};c.datepicker._pos=null;e.dpDiv.empty();e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});c.datepicker._updateDatepicker(e);d=c.datepicker._checkOffset(e,d,g);e.dpDiv.css({position:c.datepicker._inDialog&&c.blockUI?"static":g?"fixed":"absolute",display:"none",
left:d.left+"px",top:d.top+"px"});if(!e.inline){var d=c.datepicker._get(e,"showAnim"),i=c.datepicker._get(e,"duration"),h=function(){var b=e.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var d=c.datepicker._getBorders(e.dpDiv);b.css({left:-d[0],top:-d[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex(c(b).zIndex()+1);c.datepicker._datepickerShowing=!0;if(c.effects&&c.effects[d])e.dpDiv.show(d,c.datepicker._get(e,"showOptions"),i,h);else e.dpDiv[d||"show"](d?i:null,
h);(!d||!i)&&h();e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus();c.datepicker._curInst=e}}}},_updateDatepicker:function(b){this.maxRows=4;var e=c.datepicker._getBorders(b.dpDiv);i=b;b.dpDiv.empty().append(this._generateHTML(b));var d=b.dpDiv.find("iframe.ui-datepicker-cover");d.length&&d.css({left:-e[0],top:-e[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();e=this._getNumberOfMonths(b);d=e[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
1<d&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");b.dpDiv[(1!=e[0]||1!=e[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==c.datepicker._curInst&&c.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&b.input.focus();if(b.yearshtml){var f=b.yearshtml;setTimeout(function(){f===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);
f=b.yearshtml=null},0)}},_getBorders:function(b){var c=function(b){return{thin:1,medium:2,thick:3}[b]||b};return[parseFloat(c(b.css("border-left-width"))),parseFloat(c(b.css("border-top-width")))]},_checkOffset:function(b,e,d){var f=b.dpDiv.outerWidth(),g=b.dpDiv.outerHeight(),i=b.input?b.input.outerWidth():0,w=b.input?b.input.outerHeight():0,h=document.documentElement.clientWidth+c(document).scrollLeft(),E=document.documentElement.clientHeight+c(document).scrollTop();e.left-=this._get(b,"isRTL")?
f-i:0;e.left-=d&&e.left==b.input.offset().left?c(document).scrollLeft():0;e.top-=d&&e.top==b.input.offset().top+w?c(document).scrollTop():0;e.left-=Math.min(e.left,e.left+f>h&&h>f?Math.abs(e.left+f-h):0);e.top-=Math.min(e.top,e.top+g>E&&E>g?Math.abs(g+w):0);return e},_findPos:function(b){for(var e=this._get(this._getInst(b),"isRTL");b&&("hidden"==b.type||1!=b.nodeType||c.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];b=c(b).offset();return[b.left,b.top]},_triggerOnClose:function(b){var c=
this._get(b,"onClose");c&&c.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])},_hideDatepicker:function(b){var e=this._curInst;if(e&&!(b&&e!=c.data(b,"datepicker"))&&this._datepickerShowing){var b=this._get(e,"showAnim"),d=this._get(e,"duration"),f=function(){c.datepicker._tidyDialog(e);this._curInst=null};if(c.effects&&c.effects[b])e.dpDiv.hide(b,c.datepicker._get(e,"showOptions"),d,f);else e.dpDiv["slideDown"==b?"slideUp":"fadeIn"==b?"fadeOut":"hide"](b?d:null,f);b||f();c.datepicker._triggerOnClose(e);
this._datepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),c.blockUI&&(c.unblockUI(),c("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){c.datepicker._curInst&&(b=c(b.target),b[0].id!=c.datepicker._mainDivId&&0==b.parents("#"+c.datepicker._mainDivId).length&&!b.hasClass(c.datepicker.markerClassName)&&
!b.hasClass(c.datepicker._triggerClass)&&c.datepicker._datepickerShowing&&(!c.datepicker._inDialog||!c.blockUI)&&c.datepicker._hideDatepicker())},_adjustDate:function(b,e,d){var b=c(b),f=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(f,e+("M"==d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var b=c(b),e=this._getInst(b[0]);if(this._get(e,"gotoCurrent")&&e.currentDay)e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,
e.drawYear=e.selectedYear=e.currentYear;else{var d=new Date;e.selectedDay=d.getDate();e.drawMonth=e.selectedMonth=d.getMonth();e.drawYear=e.selectedYear=d.getFullYear()}this._notifyChange(e);this._adjustDate(b)},_selectMonthYear:function(b,e,d){var b=c(b),f=this._getInst(b[0]);f["selected"+("M"==d?"Month":"Year")]=f["draw"+("M"==d?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10);this._notifyChange(f);this._adjustDate(b)},_selectDay:function(b,e,d,f){var g=c(b);!c(f).hasClass(this._unselectableClass)&&
!this._isDisabledDatepicker(g[0])&&(g=this._getInst(g[0]),g.selectedDay=g.currentDay=c("a",f).html(),g.selectedMonth=g.currentMonth=e,g.selectedYear=g.currentYear=d,this._selectDate(b,this._formatDate(g,g.currentDay,g.currentMonth,g.currentYear)))},_clearDate:function(b){b=c(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,e){var d=this._getInst(c(b)[0]),e=null!=e?e:this._formatDate(d);d.input&&d.input.val(e);this._updateAlternate(d);var f=this._get(d,"onSelect");f?f.apply(d.input?
d.input[0]:null,[e,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var e=this._get(b,"altField");if(e){var d=this._get(b,"altFormat")||this._get(b,"dateFormat"),f=this._getDate(b),g=this.formatDate(d,f,this._getFormatConfig(b));c(e).each(function(){c(this).val(g)})}},noWeekends:function(b){b=b.getDay();return[0<b&&6>b,""]},iso8601Week:function(b){b=
new Date(b.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((c-b)/864E5)/7)+1},parseDate:function(b,e,d){if(null==b||null==e)throw"Invalid arguments";e="object"==typeof e?e.toString():e+"";if(""==e)return null;for(var f=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,f="string"!=typeof f?f:(new Date).getFullYear()%100+parseInt(f,10),g=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,i=(d?d.dayNames:null)||
this._defaults.dayNames,w=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,h=(d?d.monthNames:null)||this._defaults.monthNames,E=d=-1,D=-1,F=-1,H=!1,M=function(c){(c=q+1<b.length&&b.charAt(q+1)==c)&&q++;return c},O=function(b){var c=M(b),b=e.substring(s).match(RegExp("^\\d{1,"+("@"==b?14:"!"==b?20:"y"==b&&c?4:"o"==b?3:2)+"}"));if(!b)throw"Missing number at position "+s;s+=b[0].length;return parseInt(b[0],10)},v=function(b,d,f){var b=c.map(M(b)?f:d,function(b,c){return[[c,b]]}).sort(function(b,
c){return-(b[1].length-c[1].length)}),j=-1;c.each(b,function(b,c){var d=c[1];if(e.substr(s,d.length).toLowerCase()==d.toLowerCase())return j=c[0],s+=d.length,!1});if(-1!=j)return j+1;throw"Unknown name at position "+s;},n=function(){if(e.charAt(s)!=b.charAt(q))throw"Unexpected literal at position "+s;s++},s=0,q=0;q<b.length;q++)if(H)"'"==b.charAt(q)&&!M("'")?H=!1:n();else switch(b.charAt(q)){case "d":D=O("d");break;case "D":v("D",g,i);break;case "o":F=O("o");break;case "m":E=O("m");break;case "M":E=
v("M",w,h);break;case "y":d=O("y");break;case "@":var t=new Date(O("@")),d=t.getFullYear(),E=t.getMonth()+1,D=t.getDate();break;case "!":t=new Date((O("!")-this._ticksTo1970)/1E4);d=t.getFullYear();E=t.getMonth()+1;D=t.getDate();break;case "'":M("'")?n():H=!0;break;default:n()}if(s<e.length)throw"Extra/unparsed characters found in date: "+e.substring(s);-1==d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(-1<F){E=1;D=F;do{f=this._getDaysInMonth(d,
E-1);if(D<=f)break;E++;D-=f}while(1)}t=this._daylightSavingAdjust(new Date(d,E-1,D));if(t.getFullYear()!=d||t.getMonth()+1!=E||t.getDate()!=D)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(b,c,e){if(!c)return"";
var d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,f=(e?e.dayNames:null)||this._defaults.dayNames,g=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,e=(e?e.monthNames:null)||this._defaults.monthNames,i=function(c){(c=H+1<b.length&&b.charAt(H+1)==c)&&H++;return c},h=function(b,c,e){c=""+c;if(i(b))for(;c.length<e;)c="0"+c;return c},E=function(b,c,e,d){return i(b)?d[c]:e[c]},D="",F=!1;if(c)for(var H=0;H<b.length;H++)if(F)"'"==b.charAt(H)&&!i("'")?F=!1:D+=b.charAt(H);else switch(b.charAt(H)){case "d":D+=
h("d",c.getDate(),2);break;case "D":D+=E("D",c.getDay(),d,f);break;case "o":D+=h("o",Math.round(((new Date(c.getFullYear(),c.getMonth(),c.getDate())).getTime()-(new Date(c.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":D+=h("m",c.getMonth()+1,2);break;case "M":D+=E("M",c.getMonth(),g,e);break;case "y":D+=i("y")?c.getFullYear():(10>c.getYear()%100?"0":"")+c.getYear()%100;break;case "@":D+=c.getTime();break;case "!":D+=1E4*c.getTime()+this._ticksTo1970;break;case "'":i("'")?D+="'":F=!0;break;
default:D+=b.charAt(H)}return D},_possibleChars:function(b){for(var c="",e=!1,d=function(c){(c=f+1<b.length&&b.charAt(f+1)==c)&&f++;return c},f=0;f<b.length;f++)if(e)"'"==b.charAt(f)&&!d("'")?e=!1:c+=b.charAt(f);else switch(b.charAt(f)){case "d":case "m":case "y":case "@":c+="0123456789";break;case "D":case "M":return null;case "'":d("'")?c+="'":e=!0;break;default:c+=b.charAt(f)}return c},_get:function(c,e){return c.settings[e]!==b?c.settings[e]:this._defaults[e]},_setDateFromField:function(b,c){if(b.input.val()!=
b.lastVal){var e=this._get(b,"dateFormat"),d=b.lastVal=b.input?b.input.val():null,f,g;f=g=this._getDefaultDate(b);var i=this._getFormatConfig(b);try{f=this.parseDate(e,d,i)||g}catch(h){this.log(h),d=c?"":d}b.selectedDay=f.getDate();b.drawMonth=b.selectedMonth=f.getMonth();b.drawYear=b.selectedYear=f.getFullYear();b.currentDay=d?f.getDate():0;b.currentMonth=d?f.getMonth():0;b.currentYear=d?f.getFullYear():0;this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,
this._get(b,"defaultDate"),new Date))},_determineDate:function(b,e,d){var f=function(b){var c=new Date;c.setDate(c.getDate()+b);return c};if(e=(e=null==e||""===e?d:"string"==typeof e?function(e){try{return c.datepicker.parseDate(c.datepicker._get(b,"dateFormat"),e,c.datepicker._getFormatConfig(b))}catch(d){}for(var f=(e.toLowerCase().match(/^c/)?c.datepicker._getDate(b):null)||new Date,g=f.getFullYear(),i=f.getMonth(),f=f.getDate(),m=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=m.exec(e);h;){switch(h[2]||
"d"){case "d":case "D":f+=parseInt(h[1],10);break;case "w":case "W":f+=7*parseInt(h[1],10);break;case "m":case "M":i+=parseInt(h[1],10);f=Math.min(f,c.datepicker._getDaysInMonth(g,i));break;case "y":case "Y":g+=parseInt(h[1],10),f=Math.min(f,c.datepicker._getDaysInMonth(g,i))}h=m.exec(e)}return new Date(g,i,f)}(e):"number"==typeof e?isNaN(e)?d:f(e):new Date(e.getTime()))&&"Invalid Date"==e.toString()?d:e)e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);return this._daylightSavingAdjust(e)},
_daylightSavingAdjust:function(b){if(!b)return null;b.setHours(12<b.getHours()?b.getHours()+2:0);return b},_setDate:function(b,c,e){var d=!c,f=b.selectedMonth,g=b.selectedYear,c=this._restrictMinMax(b,this._determineDate(b,c,new Date));b.selectedDay=b.currentDay=c.getDate();b.drawMonth=b.selectedMonth=b.currentMonth=c.getMonth();b.drawYear=b.selectedYear=b.currentYear=c.getFullYear();(f!=b.selectedMonth||g!=b.selectedYear)&&!e&&this._notifyChange(b);this._adjustInstDate(b);b.input&&b.input.val(d?
"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&""==b.input.val()?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_generateHTML:function(b){var e=new Date,e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate())),d=this._get(b,"isRTL"),f=this._get(b,"showButtonPanel"),i=this._get(b,"hideIfNoPrevNext"),h=this._get(b,"navigationAsDateFormat"),w=this._getNumberOfMonths(b),A=this._get(b,"showCurrentAtPos"),E=this._get(b,
"stepMonths"),D=1!=w[0]||1!=w[1],F=this._daylightSavingAdjust(!b.currentDay?new Date(9999,9,9):new Date(b.currentYear,b.currentMonth,b.currentDay)),H=this._getMinMaxDate(b,"min"),M=this._getMinMaxDate(b,"max"),A=b.drawMonth-A,O=b.drawYear;0>A&&(A+=12,O--);if(M)for(var v=this._daylightSavingAdjust(new Date(M.getFullYear(),M.getMonth()-w[0]*w[1]+1,M.getDate())),v=H&&v<H?H:v;this._daylightSavingAdjust(new Date(O,A,1))>v;)A--,0>A&&(A=11,O--);b.drawMonth=A;b.drawYear=O;var v=this._get(b,"prevText"),v=
!h?v:this.formatDate(v,this._daylightSavingAdjust(new Date(O,A-E,1)),this._getFormatConfig(b)),v=this._canAdjustMonth(b,-1,O,A)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+g+".datepicker._adjustDate('#"+b.id+"', -"+E+", 'M');\" title=\""+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+v+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+v+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+v+"</span></a>",
n=this._get(b,"nextText"),n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(O,A+E,1)),this._getFormatConfig(b)),i=this._canAdjustMonth(b,1,O,A)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+g+".datepicker._adjustDate('#"+b.id+"', +"+E+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+n+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+
(d?"w":"e")+'">'+n+"</span></a>",E=this._get(b,"currentText"),n=this._get(b,"gotoCurrent")&&b.currentDay?F:e,E=!h?E:this.formatDate(E,n,this._getFormatConfig(b)),h=!b.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+g+'.datepicker._hideDatepicker();">'+this._get(b,"closeText")+"</button>":"",f=f?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(d?h:"")+(this._isInRange(b,n)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+
g+".datepicker._gotoToday('#"+b.id+"');\">"+E+"</button>":"")+(d?"":h)+"</div>":"",h=parseInt(this._get(b,"firstDay"),10),h=isNaN(h)?0:h,E=this._get(b,"showWeek"),n=this._get(b,"dayNames");this._get(b,"dayNamesShort");var s=this._get(b,"dayNamesMin"),q=this._get(b,"monthNames"),t=this._get(b,"monthNamesShort"),u=this._get(b,"beforeShowDay"),x=this._get(b,"showOtherMonths"),y=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var k=this._getDefaultDate(b),B="",G=0;G<w[0];G++){var I=
"";this.maxRows=4;for(var J=0;J<w[1];J++){var L=this._daylightSavingAdjust(new Date(O,A,b.selectedDay)),K=" ui-corner-all",Q="";if(D){Q+='<div class="ui-datepicker-group';if(1<w[1])switch(J){case 0:Q+=" ui-datepicker-group-first";K=" ui-corner-"+(d?"right":"left");break;case w[1]-1:Q+=" ui-datepicker-group-last";K=" ui-corner-"+(d?"left":"right");break;default:Q+=" ui-datepicker-group-middle",K=""}Q+='">'}for(var Q=Q+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+K+'">'+(/all|left/.test(K)&&
0==G?d?i:v:"")+(/all|right/.test(K)&&0==G?d?v:i:"")+this._generateMonthYearHeader(b,A,O,H,M,0<G||0<J,q,t)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),ba=E?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",K=0;7>K;K++)var U=(K+h)%7,ba=ba+("<th"+(5<=(K+h+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+n[U]+'">'+s[U]+"</span></th>");Q+=ba+"</tr></thead><tbody>";ba=this._getDaysInMonth(O,A);O==b.selectedYear&&A==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,
ba));K=(this._getFirstDayOfMonth(O,A)-h+7)%7;ba=Math.ceil((K+ba)/7);this.maxRows=ba=D?this.maxRows>ba?this.maxRows:ba:ba;for(var U=this._daylightSavingAdjust(new Date(O,A,1-K)),pa=0;pa<ba;pa++){for(var Q=Q+"<tr>",Ka=!E?"":'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(U)+"</td>",K=0;7>K;K++){var N=u?u.apply(b.input?b.input[0]:null,[U]):[!0,""],P=U.getMonth()!=A,R=P&&!y||!N[0]||H&&U<H||M&&U>M,Ka=Ka+('<td class="'+(5<=(K+h+6)%7?" ui-datepicker-week-end":"")+(P?" ui-datepicker-other-month":
"")+(U.getTime()==L.getTime()&&A==b.selectedMonth&&b._keyEvent||k.getTime()==U.getTime()&&k.getTime()==L.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(P&&!x?"":" "+N[1]+(U.getTime()==F.getTime()?" "+this._currentClass:"")+(U.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+((!P||x)&&N[2]?' title="'+N[2]+'"':"")+(R?"":' onclick="DP_jQuery_'+g+".datepicker._selectDay('#"+b.id+"',"+U.getMonth()+","+U.getFullYear()+', this);return false;"')+">"+(P&&
!x?"&#xa0;":R?'<span class="ui-state-default">'+U.getDate()+"</span>":'<a class="ui-state-default'+(U.getTime()==e.getTime()?" ui-state-highlight":"")+(U.getTime()==F.getTime()?" ui-state-active":"")+(P?" ui-priority-secondary":"")+'" href="#">'+U.getDate()+"</a>")+"</td>");U.setDate(U.getDate()+1);U=this._daylightSavingAdjust(U)}Q+=Ka+"</tr>"}A++;11<A&&(A=0,O++);Q+="</tbody></table>"+(D?"</div>"+(0<w[0]&&J==w[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");I+=Q}B+=I}B+=f+(c.browser.msie&&
7>parseInt(c.browser.version,10)&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");b._keyEvent=!1;return B},_generateMonthYearHeader:function(b,c,e,d,f,i,h,A){var E=this._get(b,"changeMonth"),D=this._get(b,"changeYear"),F=this._get(b,"showMonthAfterYear"),H='<div class="ui-datepicker-title">',M="";if(i||!E)M+='<span class="ui-datepicker-month">'+h[c]+"</span>";else{for(var h=d&&d.getFullYear()==e,O=f&&f.getFullYear()==e,M=M+('<select class="ui-datepicker-month" onchange="DP_jQuery_'+
g+".datepicker._selectMonthYear('#"+b.id+"', this, 'M');\" >"),v=0;12>v;v++)if((!h||v>=d.getMonth())&&(!O||v<=f.getMonth()))M+='<option value="'+v+'"'+(v==c?' selected="selected"':"")+">"+A[v]+"</option>";M+="</select>"}F||(H+=M+(i||!E||!D?"&#xa0;":""));if(!b.yearshtml)if(b.yearshtml="",i||!D)H+='<span class="ui-datepicker-year">'+e+"</span>";else{var A=this._get(b,"yearRange").split(":"),n=(new Date).getFullYear(),h=function(b){b=b.match(/c[+-].*/)?e+parseInt(b.substring(1),10):b.match(/[+-].*/)?
n+parseInt(b,10):parseInt(b,10);return isNaN(b)?n:b},c=h(A[0]),A=Math.max(c,h(A[1]||"")),c=d?Math.max(c,d.getFullYear()):c,A=f?Math.min(A,f.getFullYear()):A;for(b.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+g+".datepicker._selectMonthYear('#"+b.id+"', this, 'Y');\" >";c<=A;c++)b.yearshtml+='<option value="'+c+'"'+(c==e?' selected="selected"':"")+">"+c+"</option>";b.yearshtml+="</select>";H+=b.yearshtml;b.yearshtml=null}H+=this._get(b,"yearSuffix");F&&(H+=(i||!E||!D?"&#xa0;":
"")+M);return H+"</div>"},_adjustInstDate:function(b,c,e){var d=b.drawYear+("Y"==e?c:0),f=b.drawMonth+("M"==e?c:0),c=Math.min(b.selectedDay,this._getDaysInMonth(d,f))+("D"==e?c:0),d=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(d,f,c)));b.selectedDay=d.getDate();b.drawMonth=b.selectedMonth=d.getMonth();b.drawYear=b.selectedYear=d.getFullYear();("M"==e||"Y"==e)&&this._notifyChange(b)},_restrictMinMax:function(b,c){var e=this._getMinMaxDate(b,"min"),d=this._getMinMaxDate(b,"max"),e=e&&
c<e?e:c;return d&&e>d?d:e},_notifyChange:function(b){var c=this._get(b,"onChangeMonthYear");c&&c.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){b=this._get(b,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(b,c){return this._determineDate(b,this._get(b,c+"Date"),null)},_getDaysInMonth:function(b,c){return 32-this._daylightSavingAdjust(new Date(b,c,32)).getDate()},_getFirstDayOfMonth:function(b,c){return(new Date(b,
c,1)).getDay()},_canAdjustMonth:function(b,c,e,d){var f=this._getNumberOfMonths(b),e=this._daylightSavingAdjust(new Date(e,d+(0>c?c:f[0]*f[1]),1));0>c&&e.setDate(this._getDaysInMonth(e.getFullYear(),e.getMonth()));return this._isInRange(b,e)},_isInRange:function(b,c){var e=this._getMinMaxDate(b,"min"),d=this._getMinMaxDate(b,"max");return(!e||c.getTime()>=e.getTime())&&(!d||c.getTime()<=d.getTime())},_getFormatConfig:function(b){var c=this._get(b,"shortYearCutoff"),c="string"!=typeof c?c:(new Date).getFullYear()%
100+parseInt(c,10);return{shortYearCutoff:c,dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,c,e,d){c||(b.currentDay=b.selectedDay,b.currentMonth=b.selectedMonth,b.currentYear=b.selectedYear);c=c?"object"==typeof c?c:this._daylightSavingAdjust(new Date(d,e,c)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,
"dateFormat"),c,this._getFormatConfig(b))}});c.fn.datepicker=function(b){if(!this.length)return this;c.datepicker.initialized||(c(document).mousedown(c.datepicker._checkExternalClick).find("body").append(c.datepicker.dpDiv),c.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&("isDisabled"==b||"getDate"==b||"widget"==b)||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?c.datepicker["_"+b+"Datepicker"].apply(c.datepicker,[this[0]].concat(e)):
this.each(function(){"string"==typeof b?c.datepicker["_"+b+"Datepicker"].apply(c.datepicker,[this].concat(e)):c.datepicker._attachDatepicker(this,b)})};c.datepicker=new e;c.datepicker.initialized=!1;c.datepicker.uuid=(new Date).getTime();c.datepicker.version="1.8.16";x["DP_jQuery_"+g]=c}(jQuery);B("jquery.cookie")&&(jQuery.cookie=function(c,b,e){if("undefined"!=typeof b){e=e||{};null===b&&(b="",e.expires=-1);var d="";if(e.expires&&("number"==typeof e.expires||e.expires.toUTCString))"number"==typeof e.expires?
(d=new Date,d.setTime(d.getTime()+864E5*e.expires)):d=e.expires,d="; expires="+d.toUTCString();var f=e.path?"; path="+e.path:"",g=e.domain?"; domain="+e.domain:"",e=e.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(b),d,f,g,e].join("")}else{b=null;if(document.cookie&&""!=document.cookie){e=document.cookie.split(";");for(d=0;d<e.length;d++)if(f=jQuery.trim(e[d]),f.substring(0,c.length+1)==c+"="){b=decodeURIComponent(f.substring(c.length+1));break}}return b}});B("json2")&&(this.JSON||
(this.JSON={}),function(){function c(b){return 10>b?"0"+b:b}function b(b){f.lastIndex=0;return f.test(b)?'"'+b.replace(f,function(b){var c=j[b];return"string"===typeof c?c:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function e(c,d){var f,j,w,A,E=g,D,F=d[c];F&&"object"===typeof F&&"function"===typeof F.toJSON&&(F=F.toJSON(c));"function"===typeof h&&(F=h.call(d,c,F));switch(typeof F){case "string":return b(F);case "number":return isFinite(F)?""+F:"null";case "boolean":case "null":return""+
F;case "object":if(!F)return"null";g+=i;D=[];if("[object Array]"===Object.prototype.toString.apply(F)){A=F.length;for(f=0;f<A;f+=1)D[f]=e(f,F)||"null";w=0===D.length?"[]":g?"[\n"+g+D.join(",\n"+g)+"\n"+E+"]":"["+D.join(",")+"]";g=E;return w}if(h&&"object"===typeof h){A=h.length;for(f=0;f<A;f+=1)j=h[f],"string"===typeof j&&(w=e(j,F))&&D.push(b(j)+(g?": ":":")+w)}else for(j in F)Object.hasOwnProperty.call(F,j)&&(w=e(j,F))&&D.push(b(j)+(g?": ":":")+w);w=0===D.length?"{}":g?"{\n"+g+D.join(",\n"+g)+"\n"+
E+"}":"{"+D.join(",")+"}";g=E;return w}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,i,j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,d){var f;i=g="";if("number"===typeof d)for(f=0;f<d;f+=1)i+=" ";else"string"===typeof d&&(i=d);if((h=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return e("",
{"":b})});"function"!==typeof JSON.parse&&(JSON.parse=function(b,c){function e(b,d){var f,g,j=b[d];if(j&&"object"===typeof j)for(f in j)Object.hasOwnProperty.call(j,f)&&(g=e(j,f),void 0!==g?j[f]=g:delete j[f]);return c.call(b,d,j)}var f,b=""+b;d.lastIndex=0;d.test(b)&&(b=b.replace(d,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+b+")"),"function"===typeof c?e({"":f},""):f;throw new SyntaxError("JSON.parse");})}());B("date")&&(Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),abbreviatedDayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),shortestDayNames:"Su,Mo,Tu,We,Th,Fr,Sa".split(","),firstLetterDayNames:"S,M,T,W,T,F,S".split(","),
monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),abbreviatedMonthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",
rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,
add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,
timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var c=Date,b=c.prototype,e=c.CultureInfo,d=function(b,c){c||(c=2);return("000"+b).slice(-1*c)};b.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);
this.setMilliseconds(0);return this};b.setTimeToNow=function(){var b=new Date;this.setHours(b.getHours());this.setMinutes(b.getMinutes());this.setSeconds(b.getSeconds());this.setMilliseconds(b.getMilliseconds());return this};c.today=function(){return(new Date).clearTime()};c.compare=function(b,c){if(isNaN(b)||isNaN(c))throw Error(b+" - "+c);if(b instanceof Date&&c instanceof Date)return b<c?-1:b>c?1:0;throw new TypeError(b+" - "+c);};c.equals=function(b,c){return 0===b.compareTo(c)};c.getDayNumberFromName=
function(b){for(var c=e.dayNames,d=e.abbreviatedDayNames,f=e.shortestDayNames,b=b.toLowerCase(),g=0;g<c.length;g++)if(c[g].toLowerCase()==b||d[g].toLowerCase()==b||f[g].toLowerCase()==b)return g;return-1};c.getMonthNumberFromName=function(b){for(var c=e.monthNames,d=e.abbreviatedMonthNames,b=b.toLowerCase(),f=0;f<c.length;f++)if(c[f].toLowerCase()==b||d[f].toLowerCase()==b)return f;return-1};c.isLeapYear=function(b){return 0===b%4&&0!==b%100||0===b%400};c.getDaysInMonth=function(b,e){return[31,c.isLeapYear(b)?
29:28,31,30,31,30,31,31,30,31,30,31][e]};c.getTimezoneAbbreviation=function(b){for(var c=e.timezones,d=0;d<c.length;d++)if(c[d].offset===b)return c[d].name;return null};c.getTimezoneOffset=function(b){for(var c=e.timezones,d=0;d<c.length;d++)if(c[d].name===b.toUpperCase())return c[d].offset;return null};b.clone=function(){return new Date(this.getTime())};b.compareTo=function(b){return Date.compare(this,b)};b.equals=function(b){return Date.equals(this,b||new Date)};b.between=function(b,c){return this.getTime()>=
b.getTime()&&this.getTime()<=c.getTime()};b.isAfter=function(b){return 1===this.compareTo(b||new Date)};b.isBefore=function(b){return-1===this.compareTo(b||new Date)};b.isToday=function(){return this.isSameDay(new Date)};b.isSameDay=function(b){return this.clone().clearTime().equals(b.clone().clearTime())};b.addMilliseconds=function(b){this.setMilliseconds(this.getMilliseconds()+b);return this};b.addSeconds=function(b){return this.addMilliseconds(1E3*b)};b.addMinutes=function(b){return this.addMilliseconds(6E4*
b)};b.addHours=function(b){return this.addMilliseconds(36E5*b)};b.addDays=function(b){this.setDate(this.getDate()+b);return this};b.addWeeks=function(b){return this.addDays(7*b)};b.addMonths=function(b){var e=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(e,c.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};b.addYears=function(b){return this.addMonths(12*b)};b.add=function(b){if("number"==typeof b)return this._orient=b,this;b.milliseconds&&this.addMilliseconds(b.milliseconds);
b.seconds&&this.addSeconds(b.seconds);b.minutes&&this.addMinutes(b.minutes);b.hours&&this.addHours(b.hours);b.weeks&&this.addWeeks(b.weeks);b.months&&this.addMonths(b.months);b.years&&this.addYears(b.years);b.days&&this.addDays(b.days);return this};var f,g,i;b.getWeek=function(){var b,c,e,d,h;f=!f?this.getFullYear():f;g=!g?this.getMonth()+1:g;i=!i?this.getDate():i;2>=g?(b=f-1,c=(b/4|0)-(b/100|0)+(b/400|0),h=c-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0)),e=0,d=i-1+31*(g-1)):(b=f,c=(b/4|0)-(b/100|0)+(b/
400|0),h=c-(((b-1)/4|0)-((b-1)/100|0)+((b-1)/400|0)),e=h+1,d=i+(153*(g-3)+2)/5+58+h);b=(b+c)%7;e=d+3-(d+b-e)%7|0;f=g=i=null;return 0>e?53-((b-h)/5|0):e>364+h?1:(e/7|0)+1};b.getISOWeek=function(){f=this.getUTCFullYear();g=this.getUTCMonth()+1;i=this.getUTCDate();return d(this.getWeek())};b.setWeek=function(b){return this.moveToDayOfWeek(1).addWeeks(b-this.getWeek())};c._validate=function(b,c,e,d){if("undefined"==typeof b)return!1;if("number"!=typeof b)throw new TypeError(b+" is not a Number.");if(b<
c||b>e)throw new RangeError(b+" is not a valid value for "+d+".");return!0};c.validateMillisecond=function(b){return c._validate(b,0,999,"millisecond")};c.validateSecond=function(b){return c._validate(b,0,59,"second")};c.validateMinute=function(b){return c._validate(b,0,59,"minute")};c.validateHour=function(b){return c._validate(b,0,23,"hour")};c.validateDay=function(b,e,d){return c._validate(b,1,c.getDaysInMonth(e,d),"day")};c.validateMonth=function(b){return c._validate(b,0,11,"month")};c.validateYear=
function(b){return c._validate(b,0,9999,"year")};b.set=function(b){c.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds());c.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds());c.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes());c.validateHour(b.hour)&&this.addHours(b.hour-this.getHours());c.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth());c.validateYear(b.year)&&this.addYears(b.year-this.getFullYear());
c.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate());b.timezone&&this.setTimezone(b.timezone);b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset);b.week&&c._validate(b.week,0,53,"week")&&this.setWeek(b.week);return this};b.moveToFirstDayOfMonth=function(){return this.set({day:1})};b.moveToLastDayOfMonth=function(){return this.set({day:c.getDaysInMonth(this.getFullYear(),this.getMonth())})};b.moveToNthOccurrence=function(b,c){var e=0;if(0<c)e=c-1;else if(-1===
c)return this.moveToLastDayOfMonth(),this.getDay()!==b&&this.moveToDayOfWeek(b,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(b,1).addWeeks(e)};b.moveToDayOfWeek=function(b,c){var e=(b-this.getDay()+7*(c||1))%7;return this.addDays(0===e?e+7*(c||1):e)};b.moveToMonth=function(b,c){var e=(b-this.getMonth()+12*(c||1))%12;return this.addMonths(0===e?e+12*(c||1):e)};b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864E5)+
1};b.getTimezone=function(){return c.getTimezoneAbbreviation(this.getUTCOffset())};b.setTimezoneOffset=function(b){var c=this.getTimezoneOffset();return this.addMinutes(-6*Number(b)/10-c)};b.setTimezone=function(b){return this.setTimezoneOffset(c.getTimezoneOffset(b))};b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===
Date.today().set({month:6,day:1}).getTimezoneOffset()};b.getUTCOffset=function(){var b=-10*this.getTimezoneOffset()/6;if(0>b)return b=(b-1E4).toString(),b.charAt(0)+b.substr(2);b=(b+1E4).toString();return"+"+b.substr(1)};b.getElapsed=function(b){return(b||new Date)-this};b.toISOString||(b.toISOString=function(){function b(c){return 10>c?"0"+c:c}return'"'+this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+
'Z"'});b._toString=b.toString;b.toString=function(b){var c=this;if(b&&1==b.length){var f=e.formatPatterns;c.t=c.toString;switch(b){case "d":return c.t(f.shortDate);case "D":return c.t(f.longDate);case "F":return c.t(f.fullDateTime);case "m":return c.t(f.monthDay);case "r":return c.t(f.rfc1123);case "s":return c.t(f.sortableDateTime);case "t":return c.t(f.shortTime);case "T":return c.t(f.longTime);case "u":return c.t(f.universalSortableDateTime);case "y":return c.t(f.yearMonth)}}var g=function(b){switch(1*
b){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return b?b.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(b){if("\\"===b.charAt(0))return b.replace("\\","");c.h=c.getHours;switch(b){case "hh":return d(13>c.h()?0===c.h()?12:c.h():c.h()-12);case "h":return 13>c.h()?0===c.h()?12:c.h():c.h()-12;case "HH":return d(c.h());case "H":return c.h();case "mm":return d(c.getMinutes());case "m":return c.getMinutes();case "ss":return d(c.getSeconds());
case "s":return c.getSeconds();case "yyyy":return d(c.getFullYear(),4);case "yy":return d(c.getFullYear());case "dddd":return e.dayNames[c.getDay()];case "ddd":return e.abbreviatedDayNames[c.getDay()];case "dd":return d(c.getDate());case "d":return c.getDate();case "MMMM":return e.monthNames[c.getMonth()];case "MMM":return e.abbreviatedMonthNames[c.getMonth()];case "MM":return d(c.getMonth()+1);case "M":return c.getMonth()+1;case "t":return 12>c.h()?e.amDesignator.substring(0,1):e.pmDesignator.substring(0,
1);case "tt":return 12>c.h()?e.amDesignator:e.pmDesignator;case "S":return g(c.getDate());default:return b}}):this._toString()}}(),function(){var c=Date,b=c.prototype,e=c.CultureInfo,d=Number.prototype;b._orient=1;b._nth=null;b._is=!1;b._same=!1;b._isSecond=!1;d._dateElement="day";b.next=function(){this._orient=1;return this};c.next=function(){return c.today().next()};b.last=b.prev=b.previous=function(){this._orient=-1;return this};c.last=c.prev=c.previous=function(){return c.today().last()};b.is=
function(){this._is=!0;return this};b.same=function(){this._same=!0;this._isSecond=!1;return this};b.today=function(){return this.same().day()};b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1};b.at=function(b){return"string"===typeof b?c.parse(this.toString("d")+" "+b):this.set(b)};d.fromNow=d.after=function(b){var c={};c[this._dateElement]=this;return(!b?new Date:b.clone()).add(c)};d.ago=d.before=function(b){var c={};c[this._dateElement]=-1*this;return(!b?
new Date:b.clone()).add(c)};var f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),i="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),j="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),h="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var b={},c=0;c<i.length;c++)b[i[c].toLowerCase()]=this["get"+j[c]]();return b};
c.fromObject=function(b){b.week=null;return Date.today().set(b)};for(var l=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient);this._isSecond=!1;var e=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,e);if(this>d)throw new RangeError(c.getDayName(b)+" does not occur "+e+" times in the month of "+c.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,
this._orient)}},o=function(b){return function(){var d=c.today(),f=b-d.getDay();0===b&&1===e.firstDayOfWeek&&0!==d.getDay()&&(f+=7);return d.addDays(f)}},z=0;z<f.length;z++)c[f[z].toUpperCase()]=c[f[z].toUpperCase().substring(0,3)]=z,c[f[z]]=c[f[z].substring(0,3)]=o(z),b[f[z]]=b[f[z].substring(0,3)]=l(z);f=function(b){return function(){return this._is?(this._is=!1,this.getMonth()===b):this.moveToMonth(b,this._orient)}};l=function(b){return function(){return c.today().set({month:b,day:1})}};for(o=0;o<
g.length;o++)c[g[o].toUpperCase()]=c[g[o].toUpperCase().substring(0,3)]=o,c[g[o]]=c[g[o].substring(0,3)]=l(o),b[g[o]]=b[g[o].substring(0,3)]=f(o);f=function(b){return function(c){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var e=this.toObject(),c=(c||new Date).toObject(),d="",f=b.toLowerCase(),g=i.length-1;-1<g;g--){d=i[g].toLowerCase();if(e[d]!=c[d])return!1;if(f==d)break}return!0}"s"!=b.substring(b.length-1)&&(b+="s");return this["add"+b](this._orient)}};
l=function(b){return function(){this._dateElement=b;return this}};for(o=0;o<i.length;o++)g=i[o].toLowerCase(),b[g]=b[g+"s"]=f(i[o]),d[g]=d[g+"s"]=l(g);b._ss=f("Second");d=function(b){return function(c){if(this._same)return this._ss(c);if(c||0===c)return this.moveToNthOccurrence(c,b);this._nth=b;return 2===b&&(void 0===c||null===c)?(this._isSecond=!0,this.addSeconds(this._orient)):this}};for(g=0;g<h.length;g++)b[h[g]]=0===g?d(-1):d(g)}(),function(){Date.Parsing={Exception:function(b){this.message=
"Parse error at '"+b.substring(0,10)+" ...'"}};for(var c=Date.Parsing,b=c.Operators={rtoken:function(b){return function(e){var d=e.match(b);if(d)return[d[0],e.substring(d[0].length)];throw new c.Exception(e);}},token:function(){return function(c){return b.rtoken(RegExp("^s*"+c+"s*"))(c)}},stoken:function(c){return b.rtoken(RegExp("^"+c))},until:function(b){return function(c){for(var e=[],d=null;c.length;){try{d=b.call(this,c)}catch(f){e.push(d[0]);c=d[1];continue}break}return[e,c]}},many:function(b){return function(c){for(var e=
[],d=null;c.length;){try{d=b.call(this,c)}catch(f){break}e.push(d[0]);c=d[1]}return[e,c]}},optional:function(b){return function(c){var e=null;try{e=b.call(this,c)}catch(d){return[null,c]}return[e[0],e[1]]}},not:function(b){return function(e){try{b.call(this,e)}catch(d){return[null,e]}throw new c.Exception(e);}},ignore:function(b){return b?function(c){var e=null,e=b.call(this,c);return[null,e[1]]}:null},product:function(){for(var c=arguments[0],e=Array.prototype.slice.call(arguments,1),d=[],f=0;f<
c.length;f++)d.push(b.each(c[f],e));return d},cache:function(b){var e={},d=null;return function(f){try{d=e[f]=e[f]||b.call(this,f)}catch(h){d=e[f]=h}if(d instanceof c.Exception)throw d;return d}},any:function(){var b=arguments;return function(e){for(var d=null,f=0;f<b.length;f++)if(null!=b[f]){try{d=b[f].call(this,e)}catch(h){d=null}if(d)return d}throw new c.Exception(e);}},each:function(){var b=arguments;return function(e){for(var d=[],f=null,h=0;h<b.length;h++)if(null!=b[h]){try{f=b[h].call(this,
e)}catch(o){throw new c.Exception(e);}d.push(f[0]);e=f[1]}return[d,e]}},all:function(){var b=b;return b.each(b.optional(arguments))},sequence:function(e,d,f){d=d||b.rtoken(/^\s*/);f=f||null;return 1==e.length?e[0]:function(b){for(var h=null,o=null,z=[],C=0;C<e.length;C++){try{h=e[C].call(this,b)}catch(w){break}z.push(h[0]);try{o=d.call(this,h[1])}catch(A){o=null;break}b=o[1]}if(!h)throw new c.Exception(b);if(o)throw new c.Exception(o[1]);if(f)try{h=f.call(this,h[1])}catch(E){throw new c.Exception(h[1]);
}return[z,h?h[1]:b]}},between:function(c,e,d){var d=d||c,f=b.each(b.ignore(c),e,b.ignore(d));return function(b){b=f.call(this,b);return[[b[0][0],r[0][2]],b[1]]}},list:function(c,e,d){e=e||b.rtoken(/^\s*/);d=d||null;return c instanceof Array?b.each(b.product(c.slice(0,-1),b.ignore(e)),c.slice(-1),b.ignore(d)):b.each(b.many(b.each(c,b.ignore(e))),px,b.ignore(d))},set:function(e,d,f){d=d||b.rtoken(/^\s*/);f=f||null;return function(h){for(var l=null,o=l=null,z=null,C=[[],h],w=!1,A=0;A<e.length;A++){l=
o=null;w=1==e.length;try{l=e[A].call(this,h)}catch(E){continue}z=[[l[0]],l[1]];if(0<l[1].length&&!w)try{o=d.call(this,l[1])}catch(D){w=!0}else w=!0;!w&&0===o[1].length&&(w=!0);if(!w){l=[];for(w=0;w<e.length;w++)A!=w&&l.push(e[w]);l=b.set(l,d).call(this,o[1]);0<l[0].length&&(z[0]=z[0].concat(l[0]),z[1]=l[1])}z[1].length<C[1].length&&(C=z);if(0===C[1].length)break}if(0===C[0].length)return C;if(f){try{o=f.call(this,C[1])}catch(F){throw new c.Exception(C[1]);}C[1]=o[1]}return C}},forward:function(b,
c){return function(e){return b[c].call(this,e)}},replace:function(b,c){return function(e){e=b.call(this,e);return[c,e[1]]}},process:function(b,c){return function(e){e=b.call(this,e);return[c.call(this,e[0]),e[1]]}},min:function(b,e){return function(d){var f=e.call(this,d);if(f[0].length<b)throw new c.Exception(d);return f}}},e=function(b){return function(){var c=null,e=[];1<arguments.length?c=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(c=arguments[0]);if(c)for(var d=c.shift();0<
d.length;)return c.unshift(d[0]),e.push(b.apply(null,c)),c.shift(),e;else return b.apply(null,arguments)}},d="optional not ignore cache".split(/\s/),f=0;f<d.length;f++)b[d[f]]=e(b[d[f]]);e=function(b){return function(){return arguments[0]instanceof Array?b.apply(null,arguments[0]):b.apply(null,arguments)}};d="each any all".split(/\s/);for(f=0;f<d.length;f++)b[d[f]]=e(b[d[f]])}(),function(){var c=Date,b=c.CultureInfo,e=function(b){for(var c=[],d=0;d<b.length;d++)b[d]instanceof Array?c=c.concat(e(b[d])):
b[d]&&c.push(b[d]);return c};c.Grammar={};c.Translator={hour:function(b){return function(){this.hour=Number(b)}},minute:function(b){return function(){this.minute=Number(b)}},second:function(b){return function(){this.second=Number(b)}},meridian:function(b){return function(){this.meridian=b.slice(0,1).toLowerCase()}},timezone:function(b){return function(){var c=b.replace(/[^\d\+\-]/g,"");c.length?this.timezoneOffset=Number(c):this.timezone=b.toLowerCase()}},day:function(b){var c=b[0];return function(){this.day=
Number(c.match(/\d+/)[0])}},month:function(b){return function(){this.month=3==b.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(b)/4:Number(b)-1}},year:function(c){return function(){var e=Number(c);this.year=2<c.length?e:e+(e+2E3<b.twoDigitYearMax?2E3:1900)}},rday:function(b){return function(){switch(b){case "yesterday":this.days=-1;break;case "tomorrow":this.days=1;break;case "today":this.days=0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(b){for(var b=b instanceof
Array?b:[b],e=0;e<b.length;e++)b[e]&&b[e].call(this);b=new Date;if((this.hour||this.minute)&&!this.month&&!this.year&&!this.day)this.day=b.getDate();this.year||(this.year=b.getFullYear());!this.month&&0!==this.month&&(this.month=b.getMonth());this.day||(this.day=1);this.hour||(this.hour=0);this.minute||(this.minute=0);this.second||(this.second=0);this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&12==this.hour&&(this.hour=0));if(this.day>c.getDaysInMonth(this.year,
this.month))throw new RangeError(this.day+" is not a valid value for days.");b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?b.set({timezone:this.timezone}):this.timezoneOffset&&b.set({timezoneOffset:this.timezoneOffset});return b},finish:function(b){b=b instanceof Array?e(b):[b];if(0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);b=c.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(b=new Date);
var d=!!(this.days&&null!==this.days||this.orient||this.operator),f,g,i;i="past"==this.orient||"subtract"==this.operator?-1:1;!this.now&&-1!="hour minute second".indexOf(this.unit)&&b.setTimeToNow();if((this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit))this.value=this.month+1,this.month=null,d=!0;!d&&this.weekday&&!this.day&&!this.days&&(f=Date[this.weekday](),this.day=f.getDate(),this.month||(this.month=f.getMonth()),this.year=f.getFullYear());d&&this.weekday&&"month"!=
this.unit&&(this.unit="day",f=c.getDayNumberFromName(this.weekday)-b.getDay(),g=7,this.days=f?(f+i*g)%g:i*g);this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null);null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value);this.month&&!this.day&&this.value&&(b.set({day:1*this.value}),d||(this.day=1*this.value));!this.month&&this.value&&"month"==this.unit&&!this.now&&(this.month=this.value,d=!0);if(d&&(this.month||0===this.month)&&"year"!=this.unit)this.unit=
"month",f=this.month-b.getMonth(),g=12,this.months=f?(f+i*g)%g:i*g,this.month=null;this.unit||(this.unit="day");if(!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"])this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*i;else if(null==this[this.unit+"s"]||null!=this.operator)this.value||(this.value=1),this[this.unit+"s"]=this.value*i;this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour+=12:"a"==this.meridian&&
12==this.hour&&(this.hour=0));this.weekday&&!this.day&&!this.days&&(f=Date[this.weekday](),this.day=f.getDate(),f.getMonth()!==b.getMonth()&&(this.month=f.getMonth()));if((this.month||0===this.month)&&!this.day)this.day=1;if(!this.orient&&!this.operator&&"week"==this.unit&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);d&&this.timezone&&this.day&&this.days&&(this.day=this.days);return d?b.add(this):b.set(this)}};var d=c.Parsing.Operators,f=c.Grammar,g=c.Translator,i;f.datePartDelimiter=
d.rtoken(/^([\s\-\.\,\/\x27]+)/);f.timePartDelimiter=d.stoken(":");f.whiteSpace=d.rtoken(/^\s*/);f.generalDelimiter=d.rtoken(/^(([\s\,]|at|@|on)+)/);var j={};f.ctoken=function(c){var e=j[c];if(!e){for(var e=b.regexPatterns,f=c.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(d.replace(d.rtoken(e[f[i]]),f[i]));e=j[c]=d.any.apply(null,g)}return e};f.ctoken2=function(c){return d.rtoken(b.regexPatterns[c])};f.h=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour));f.hh=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2])/),
g.hour));f.H=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour));f.HH=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour));f.m=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),g.minute));f.mm=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),g.minute));f.s=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),g.second));f.ss=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),g.second));f.hms=d.cache(d.sequence([f.H,f.m,f.s],f.timePartDelimiter));f.t=d.cache(d.process(f.ctoken2("shortMeridian"),g.meridian));
f.tt=d.cache(d.process(f.ctoken2("longMeridian"),g.meridian));f.z=d.cache(d.process(d.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone));f.zz=d.cache(d.process(d.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone));f.zzz=d.cache(d.process(f.ctoken2("timezone"),g.timezone));f.timeSuffix=d.each(d.ignore(f.whiteSpace),d.set([f.tt,f.zzz]));f.time=d.each(d.optional(d.ignore(d.stoken("T"))),f.hms,f.timeSuffix);f.d=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1]|\d)/),d.optional(f.ctoken2("ordinalSuffix"))),
g.day));f.dd=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1])/),d.optional(f.ctoken2("ordinalSuffix"))),g.day));f.ddd=f.dddd=d.cache(d.process(f.ctoken("sun mon tue wed thu fri sat"),function(b){return function(){this.weekday=b}}));f.M=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d|\d)/),g.month));f.MM=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d)/),g.month));f.MMM=f.MMMM=d.cache(d.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month));f.y=d.cache(d.process(d.rtoken(/^(\d\d?)/),g.year));
f.yy=d.cache(d.process(d.rtoken(/^(\d\d)/),g.year));f.yyy=d.cache(d.process(d.rtoken(/^(\d\d?\d?\d?)/),g.year));f.yyyy=d.cache(d.process(d.rtoken(/^(\d\d\d\d)/),g.year));i=function(){return d.each(d.any.apply(null,arguments),d.not(f.ctoken2("timeContext")))};f.day=i(f.d,f.dd);f.month=i(f.M,f.MMM);f.year=i(f.yyyy,f.yy);f.orientation=d.process(f.ctoken("past future"),function(b){return function(){this.orient=b}});f.operator=d.process(f.ctoken("add subtract"),function(b){return function(){this.operator=
b}});f.rday=d.process(f.ctoken("yesterday tomorrow today now"),g.rday);f.unit=d.process(f.ctoken("second minute hour day week month year"),function(b){return function(){this.unit=b}});f.value=d.process(d.rtoken(/^\d\d?(st|nd|rd|th)?/),function(b){return function(){this.value=b.replace(/\D/g,"")}});f.expression=d.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]);i=function(){return d.set(arguments,f.datePartDelimiter)};f.mdy=i(f.ddd,f.month,f.day,f.year);f.ymd=i(f.ddd,f.year,f.month,
f.day);f.dmy=i(f.ddd,f.day,f.month,f.year);f.date=function(c){return(f[b.dateElementOrder]||f.mdy).call(this,c)};f.format=d.process(d.many(d.any(d.process(d.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw c.Parsing.Exception(b);}),d.process(d.rtoken(/^[^dMyhHmstz]+/),function(b){return d.ignore(d.stoken(b))}))),function(b){return d.process(d.each.apply(null,b),g.finishExact)});var h={};f.formats=function(b){if(b instanceof Array){for(var c=[],e=
0;e<b.length;e++)c.push(h[b[e]]=h[b[e]]||f.format(b[e])[0]);return d.any.apply(null,c)}return h[b]=h[b]||f.format(b)[0]};f._formats=f.formats('"yyyy-MM-ddTHH:mm:ssZ";yyyy-MM-ddTHH:mm:ssZ;yyyy-MM-ddTHH:mm:ssz;yyyy-MM-ddTHH:mm:ss;yyyy-MM-ddTHH:mmZ;yyyy-MM-ddTHH:mmz;yyyy-MM-ddTHH:mm;ddd, MMM dd, yyyy H:mm:ss tt;ddd MMM d yyyy HH:mm:ss zzz;MMddyyyy;ddMMyyyy;Mddyyyy;ddMyyyy;Mdyyyy;dMyyyy;yyyy;Mdyy;dMyy;d'.split(";"));f._start=d.process(d.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),
g.finish);f.start=function(b){try{var c=f._formats.call({},b);if(0===c[1].length)return c}catch(e){}return f._start.call({},b)};c._parse=c.parse;c.parse=function(b){var e=null;if(!b)return null;if(b instanceof Date)return b;try{e=c.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===e[1].length?e[0]:null};c.getParseFunction=function(b){var e=c.Grammar.formats(b);return function(b){var c=null;try{c=e.call({},b)}catch(d){return null}return 0===c[1].length?
c[0]:null}};c.parseExact=function(b,e){return c.getParseFunction(e)(b)}}());B("socket.io")&&(function(c,b){c.version="0.8.6";c.protocol=1;c.transports=[];c.j=[];c.sockets={};c.connect=function(e,d){var f=c.util.parseUri(e),g,i;b&&b.location&&(f.protocol=f.protocol||b.location.protocol.slice(0,-1),f.host=f.host||(b.document?b.document.domain:b.location.hostname),f.port=f.port||b.location.port);g=c.util.uniqueUri(f);var j={host:f.host,secure:"https"==f.protocol,port:f.port||("https"==f.protocol?443:
80),query:f.query||""};c.util.merge(j,d);if(j["force new connection"]||!c.sockets[g])i=new c.Socket(j);!j["force new connection"]&&i&&(c.sockets[g]=i);i=i||c.sockets[g];return i.of(1<f.path.length?f.path:"")}}("object"===typeof module?module.exports:this.io={},this),function(c,b){var e=c.util={},d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,f="source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(",");
e.parseUri=function(b){for(var b=d.exec(b||""),c={},e=14;e--;)c[f[e]]=b[e]||"";return c};e.uniqueUri=function(c){var e=c.protocol,d=c.host,c=c.port;"document"in b?(d=d||document.domain,c=c||("https"==e&&"https:"!==document.location.protocol?443:document.location.port)):(d=d||"localhost",!c&&"https"==e&&(c=443));return(e||"http")+"://"+d+":"+(c||80)};e.query=function(b,c){var d=e.chunkQuery(b||""),f=[];e.merge(d,e.chunkQuery(c||""));for(var g in d)d.hasOwnProperty(g)&&f.push(g+"="+d[g]);return f.length?
"?"+f.join("&"):""};e.chunkQuery=function(b){for(var c={},b=b.split("&"),e=0,d=b.length,f;e<d;++e)f=b[e].split("="),f[0]&&(c[f[0]]=decodeURIComponent(f[1]));return c};var g=!1;e.load=function(c){if("document"in b&&"complete"===document.readyState||g)return c();e.on(b,"load",c,!1)};e.on=function(b,c,e,d){b.attachEvent?b.attachEvent("on"+c,e):b.addEventListener&&b.addEventListener(c,e,d)};e.request=function(b){if(b&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&
(!b||e.ua.hasCORS))return new XMLHttpRequest;if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return null};"undefined"!=typeof x&&e.load(function(){g=!0});e.defer=function(b){if(!e.ua.webkit||"undefined"!=typeof importScripts)return b();e.load(function(){setTimeout(b,100)})};e.merge=function(b,c,d,f){var f=f||[],d="undefined"==typeof d?2:d,g;for(g in c)c.hasOwnProperty(g)&&0>e.indexOf(f,g)&&("object"!==typeof b[g]||!d?(b[g]=c[g],f.push(c[g])):e.merge(b[g],c[g],d-1,f));return b};e.mixin=
function(b,c){e.merge(b.prototype,c.prototype)};e.inherit=function(b,c){function e(){}e.prototype=c.prototype;b.prototype=new e};e.isArray=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)};e.intersect=function(b,c){for(var d=[],f=b.length>c.length?b:c,g=b.length>c.length?c:b,h=0,C=g.length;h<C;h++)~e.indexOf(f,g[h])&&d.push(g[h]);return d};e.indexOf=function(b,c,e){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,c,e);for(var d=b.length,e=0>e?0>
e+d?0:e+d:e||0;e<d&&b[e]!==c;e++);return d<=e?-1:e};e.toArray=function(b){for(var c=[],e=0,d=b.length;e<d;e++)c.push(b[e]);return c};e.ua={};e.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var b=new XMLHttpRequest}catch(c){return!1}return void 0!=b.withCredentials}();e.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(c,b){function e(){}c.EventEmitter=e;e.prototype.on=function(c,e){this.$events||(this.$events=
{});this.$events[c]?b.util.isArray(this.$events[c])?this.$events[c].push(e):this.$events[c]=[this.$events[c],e]:this.$events[c]=e;return this};e.prototype.addListener=e.prototype.on;e.prototype.once=function(b,c){function e(){i.removeListener(b,e);c.apply(this,arguments)}var i=this;e.listener=c;this.on(b,e);return this};e.prototype.removeListener=function(c,e){if(this.$events&&this.$events[c]){var g=this.$events[c];if(b.util.isArray(g)){for(var i=-1,j=0,h=g.length;j<h;j++)if(g[j]===e||g[j].listener&&
g[j].listener===e){i=j;break}if(0>i)return this;g.splice(i,1);g.length||delete this.$events[c]}else(g===e||g.listener&&g.listener===e)&&delete this.$events[c]}return this};e.prototype.removeAllListeners=function(b){this.$events&&this.$events[b]&&(this.$events[b]=null);return this};e.prototype.listeners=function(c){this.$events||(this.$events={});this.$events[c]||(this.$events[c]=[]);b.util.isArray(this.$events[c])||(this.$events[c]=[this.$events[c]]);return this.$events[c]};e.prototype.emit=function(c){if(!this.$events)return!1;
var e=this.$events[c];if(!e)return!1;var g=Array.prototype.slice.call(arguments,1);if("function"==typeof e)e.apply(this,g);else if(b.util.isArray(e))for(var e=e.slice(),i=0,j=e.length;i<j;i++)e[i].apply(this,g);else return!1;return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(c,b){function e(b){return 10>b?"0"+b:b}function d(b){j.lastIndex=0;return j.test(b)?'"'+b.replace(j,function(b){var c=o[b];return"string"===typeof c?c:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+b+'"'}function f(b,c){var g,i,j,F,o=h,M,n=c[b];n instanceof Date&&(n=isFinite(b.valueOf())?b.getUTCFullYear()+"-"+e(b.getUTCMonth()+1)+"-"+e(b.getUTCDate())+"T"+e(b.getUTCHours())+":"+e(b.getUTCMinutes())+":"+e(b.getUTCSeconds())+"Z":null);"function"===typeof z&&(n=z.call(c,b,n));switch(typeof n){case "string":return d(n);case "number":return isFinite(n)?""+n:"null";case "boolean":case "null":return""+n;case "object":if(!n)return"null";h+=l;M=[];if("[object Array]"===Object.prototype.toString.apply(n)){F=
n.length;for(g=0;g<F;g+=1)M[g]=f(g,n)||"null";j=0===M.length?"[]":h?"[\n"+h+M.join(",\n"+h)+"\n"+o+"]":"["+M.join(",")+"]";h=o;return j}if(z&&"object"===typeof z){F=z.length;for(g=0;g<F;g+=1)"string"===typeof z[g]&&(i=z[g],(j=f(i,n))&&M.push(d(i)+(h?": ":":")+j))}else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=f(i,n))&&M.push(d(i)+(h?": ":":")+j);j=0===M.length?"{}":h?"{\n"+h+M.join(",\n"+h)+"\n"+o+"}":"{"+M.join(",")+"}";h=o;return j}}if(b&&b.parse)return c.JSON={parse:b.parse,stringify:b.stringify};
var g=c.JSON={},i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,l,o={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},z;g.stringify=function(b,c,e){var d;l=h="";if("number"===typeof e)for(d=0;d<e;d+=1)l+=" ";else"string"===typeof e&&(l=e);if((z=c)&&"function"!==typeof c&&("object"!==
typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return f("",{"":b})};g.parse=function(b,c){function e(b,d){var f,g,i=b[d];if(i&&"object"===typeof i)for(f in i)Object.prototype.hasOwnProperty.call(i,f)&&(g=e(i,f),void 0!==g?i[f]=g:delete i[f]);return c.call(b,d,i)}var d,b=""+b;i.lastIndex=0;i.test(b)&&(b=b.replace(i,function(b){return"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+b+")"),"function"===typeof c?e({"":d},""):d;throw new SyntaxError("JSON.parse");}}("undefined"!=typeof io?io:module.exports,"undefined"!==typeof JSON?JSON:void 0),function(c,b){var e=c.parser={},d=e.packets="disconnect,connect,heartbeat,message,json,event,ack,error,noop".split(","),f=e.reasons=["transport not supported","client not handshaken","unauthorized"],g=e.advice=["reconnect"],i=b.JSON,j=b.util.indexOf;e.encodePacket=function(b){var c=
j(d,b.type),e=b.id||"",h=b.endpoint||"",w=b.ack,m=null;switch(b.type){case "error":var E=b.reason?j(f,b.reason):"",b=b.advice?j(g,b.advice):"";if(""!==E||""!==b)m=E+(""!==b?"+"+b:"");break;case "message":""!==b.data&&(m=b.data);break;case "event":m={name:b.name};b.args&&b.args.length&&(m.args=b.args);m=i.stringify(m);break;case "json":m=i.stringify(b.data);break;case "connect":b.qs&&(m=b.qs);break;case "ack":m=b.ackId+(b.args&&b.args.length?"+"+i.stringify(b.args):"")}c=[c,e+("data"==w?"+":""),h];
null!==m&&void 0!==m&&c.push(m);return c.join(":")};e.encodePayload=function(b){var c="";if(1==b.length)return b[0];for(var e=0,d=b.length;e<d;e++)c+="\ufffd"+b[e].length+"\ufffd"+b[e];return c};var h=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;e.decodePacket=function(b){var c=b.match(h);if(!c)return{};var e=c[2]||"",b=c[5]||"",j={type:d[c[1]],endpoint:c[4]||""};e&&(j.id=e,j.ack=c[3]?"data":!0);switch(j.type){case "error":c=b.split("+");j.reason=f[c[0]]||"";j.advice=g[c[1]]||"";break;case "message":j.data=
b||"";break;case "event":try{var w=i.parse(b);j.name=w.name;j.args=w.args}catch(A){}j.args=j.args||[];break;case "json":try{j.data=i.parse(b)}catch(E){}break;case "connect":j.qs=b||"";break;case "ack":if(c=b.match(/^([0-9]+)(\+)?(.*)/))if(j.ackId=c[1],j.args=[],c[3])try{j.args=c[3]?i.parse(c[3]):[]}catch(D){}}return j};e.decodePayload=function(b){if("\ufffd"==b.charAt(0)){for(var c=[],d=1,f="";d<b.length;d++)"\ufffd"==b.charAt(d)?(c.push(e.decodePacket(b.substr(d+1).substr(0,f))),d+=Number(f)+1,f=
""):f+=b.charAt(d);return c}return[e.decodePacket(b)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(c,b){function e(b,c){this.socket=b;this.sessid=c}c.Transport=e;b.util.mixin(e,b.EventEmitter);e.prototype.onData=function(c){this.clearCloseTimeout();(this.connected||this.connecting||this.reconnecting)&&this.setCloseTimeout();if(""!==c&&(c=b.parser.decodePayload(c))&&c.length)for(var e=0,g=c.length;e<g;e++)this.onPacket(c[e]);return this};e.prototype.onPacket=
function(b){if("heartbeat"==b.type)return this.onHeartbeat();if("connect"==b.type&&""==b.endpoint)this.onConnect();this.socket.onPacket(b);return this};e.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var b=this;this.closeTimeout=setTimeout(function(){b.onDisconnect()},this.socket.closeTimeout)}};e.prototype.onDisconnect=function(){this.close&&this.open&&this.close();this.clearTimeouts();this.socket.onDisconnect();return this};e.prototype.onConnect=function(){this.socket.onConnect();
return this};e.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)};e.prototype.clearTimeouts=function(){this.clearCloseTimeout();this.reopenTimeout&&clearTimeout(this.reopenTimeout)};e.prototype.packet=function(c){this.send(b.parser.encodePacket(c))};e.prototype.onHeartbeat=function(){this.socket.resetHeartbeat();this.packet({type:"heartbeat"})};e.prototype.onOpen=function(){this.open=!0;this.clearCloseTimeout();this.socket.onOpen()};
e.prototype.onClose=function(){this.open=!1;this.socket.onClose();this.onDisconnect()};e.prototype.prepareUrl=function(){var c=this.socket.options;return this.scheme()+"://"+c.host+":"+c.port+"/"+c.resource+"/"+b.protocol+"/"+this.name+"/"+this.sessid};e.prototype.ready=function(b,c){c.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(c,b,e){function d(c){this.options={port:80,secure:!1,document:"document"in e?document:!1,resource:"socket.io",
transports:b.transports,"connect timeout":1E4,"try multiple transports":!0,reconnect:!0,"reconnection delay":100,"max reconnection delay":Infinity,"reconnection limit":Infinity,"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843};b.util.merge(this.options,c);this.options.transports=c.transports;this.reconnecting=this.connecting=this.open=this.connected=!1;this.namespaces={};this.buffer=[];this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&
(!this.isXDomain()||b.util.ua.hasCORS)){var d=this;b.util.on(e,"beforeunload",function(){d.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function f(){}c.Socket=d;b.util.mixin(d,b.EventEmitter);d.prototype.of=function(c){this.namespaces[c]||(this.namespaces[c]=new b.SocketNamespace(this,c),""!==c&&this.namespaces[c].packet({type:"connect"}));return this.namespaces[c]};d.prototype.publish=function(){this.emit.apply(this,arguments);var b,c;for(c in this.namespaces)this.namespaces.hasOwnProperty(c)&&
(b=this.of(c),b.$emit.apply(b,arguments))};d.prototype.handshake=function(c){function e(b){if(b instanceof Error)d.onError(b.message);else c.apply(null,b.split(":"))}var d=this,h=this.options,h=["http"+(h.secure?"s":"")+":/",h.host+":"+h.port,h.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!b.util.ua.hasCORS){var l=document.getElementsByTagName("script")[0],o=document.createElement("script");o.src=h+"&jsonp="+b.j.length;l.parentNode.insertBefore(o,
l);b.j.push(function(b){e(b);o.parentNode.removeChild(o)})}else{var z=b.util.request();d.ajaxWait=!0;z.open("GET",h,!0);z.onreadystatechange=function(){4==z.readyState&&(z.onreadystatechange=f,d.ajaxWait=!1,200==z.status?e(z.responseText):!d.reconnecting&&d.onError(z.responseText))};z.send(null)}};d.prototype.getTransport=function(c){for(var c=c||this.transports,e=0,d;d=c[e];e++)if(b.Transport[d]&&b.Transport[d].check(this)&&(!this.isXDomain()||b.Transport[d].xdomainCheck()))return new b.Transport[d](this,
this.sessionid);return null};d.prototype.connect=function(c){if(this.connecting||this.ajaxWait)return this;var e=this;this.resetHeartbeat=function(){clearTimeout(e.timeoutHeartbeat);e.timeoutHeartbeat=setTimeout(function(){e.connected&&e.disconnect()},1.5*e.heartbeatInterval)};this.handshake(function(d,f,h,o){function z(b){e.transport&&e.transport.clearTimeouts();e.transport=e.getTransport(b);if(!e.transport)return e.publish("connect_failed");e.transport.ready(e,function(){e.connecting=!0;e.publish("connecting",
e.transport.name);e.transport.open();e.options["connect timeout"]&&(e.connectTimeoutTimer=setTimeout(function(){if(!e.connected&&(e.connecting=!1,e.options["try multiple transports"])){e.remainingTransports||(e.remainingTransports=e.transports.slice(0));for(var b=e.remainingTransports;0<b.length&&b.splice(0,1)[0]!=e.transport.name;);b.length?z(b):e.publish("connect_failed")}},e.options["connect timeout"]))})}e.sessionid=d;e.closeTimeout=1E3*h;e.heartbeatInterval=1E3*f;e.transports=b.util.intersect(o.split(","),
e.options.transports);z();e.once("connect",function(){clearTimeout(e.connectTimeoutTimer);c&&"function"==typeof c&&c()})});return this};d.prototype.packet=function(b){this.connected&&!this.doBuffer?this.transport.packet(b):this.buffer.push(b);return this};d.prototype.setBuffer=function(b){this.doBuffer=b;!b&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])};d.prototype.disconnect=function(){this.connected&&(this.open&&this.of("").packet({type:"disconnect"}),
this.onDisconnect("booted"));return this};d.prototype.disconnectSync=function(){b.util.request().open("GET",this.resource+"/"+b.protocol+"/"+this.sessionid,!0);this.onDisconnect("booted")};d.prototype.isXDomain=function(){var b=e.location.port||("https:"==e.location.protocol?443:80);return this.options.host!==e.location.hostname||this.options.port!=b};d.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.resetHeartbeat(),this.doBuffer||this.setBuffer(!1),this.emit("connect"))};
d.prototype.onOpen=function(){this.open=!0};d.prototype.onClose=function(){this.open=!1};d.prototype.onPacket=function(b){this.of(b.endpoint).onPacket(b)};d.prototype.onError=function(b){b&&b.advice&&"reconnect"===b.advice&&this.connected&&(this.disconnect(),this.reconnect());this.publish("error",b&&b.reason?b.reason:b)};d.prototype.onDisconnect=function(b){var c=this.connected;this.open=this.ajaxWait=this.connecting=this.connected=!1;c&&(this.transport.close(),this.transport.clearTimeouts(),this.publish("disconnect",
b),"booted"!=b&&this.options.reconnect&&!this.reconnecting&&this.reconnect())};d.prototype.reconnect=function(){function b(){if(e.connected){for(var d in e.namespaces)e.namespaces.hasOwnProperty(d)&&""!==d&&e.namespaces[d].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}e.removeListener("connect_failed",c);e.removeListener("connect",c);e.reconnecting=!1;delete e.reconnectionAttempts;delete e.reconnectionDelay;delete e.reconnectionTimer;delete e.redoTransports;
e.options["try multiple transports"]=f}function c(){if(e.reconnecting){if(e.connected)return b();if((e.connecting||e.ajaxWait)&&e.reconnecting)return e.reconnectionTimer=setTimeout(c,1E3);e.reconnectionAttempts++>=d?e.redoTransports?(e.publish("reconnect_failed"),b()):(e.on("connect_failed",c),e.options["try multiple transports"]=!0,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<h&&(e.reconnectionDelay=Math.min(2*e.reconnectionDelay,e.options["max reconnection delay"])),
e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(c,e.reconnectionDelay))}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var e=this,d=this.options["max reconnection attempts"],f=this.options["try multiple transports"],h=this.options["reconnection limit"];this.options["try multiple transports"]=!1;this.reconnectionTimer=setTimeout(c,this.reconnectionDelay);this.on("connect",c)}}("undefined"!=
typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(c,b){function e(b,c){this.socket=b;this.name=c||"";this.flags={};this.json=new d(this,"json");this.ackPackets=0;this.acks={}}function d(b,c){this.namespace=b;this.name=c}c.SocketNamespace=e;b.util.mixin(e,b.EventEmitter);e.prototype.$emit=b.EventEmitter.prototype.emit;e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};e.prototype.packet=function(b){b.endpoint=this.name;this.socket.packet(b);
this.flags={};return this};e.prototype.send=function(b,c){var e={type:this.flags.json?"json":"message",data:b};"function"==typeof c&&(e.id=++this.ackPackets,e.ack=!0,this.acks[e.id]=c);return this.packet(e)};e.prototype.emit=function(b){var c=Array.prototype.slice.call(arguments,1),e=c[c.length-1],d={type:"event",name:b};"function"==typeof e&&(d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=e,c=c.slice(0,c.length-1));d.args=c;return this.packet(d)};e.prototype.disconnect=function(){""===this.name?
this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect"));return this};e.prototype.onPacket=function(c){function e(){d.packet({type:"ack",args:b.util.toArray(arguments),ackId:c.id})}var d=this;switch(c.type){case "connect":this.$emit("connect");break;case "disconnect":if(""===this.name)this.socket.onDisconnect(c.reason||"booted");else this.$emit("disconnect",c.reason);break;case "message":case "json":var j=["message",c.data];"data"==c.ack?j.push(e):c.ack&&this.packet({type:"ack",
ackId:c.id});this.$emit.apply(this,j);break;case "event":j=[c.name].concat(c.args);"data"==c.ack&&j.push(e);this.$emit.apply(this,j);break;case "ack":this.acks[c.ackId]&&(this.acks[c.ackId].apply(this,c.args),delete this.acks[c.ackId]);break;case "error":if(c.advice)this.socket.onError(c);else"unauthorized"==c.reason?this.$emit("connect_failed",c.reason):this.$emit("error",c.reason)}};d.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};
d.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(c,b,e){function d(c){b.Transport.apply(this,arguments)}c.websocket=d;b.util.inherit(d,b.Transport);d.prototype.name="websocket";d.prototype.open=function(){var c=b.util.query(this.socket.options.query),d=this,i;i||(i=e.MozWebSocket||e.WebSocket);this.websocket=new i(this.prepareUrl()+
c);this.websocket.onopen=function(){d.onOpen();d.socket.setBuffer(!1)};this.websocket.onmessage=function(b){d.onData(b.data)};this.websocket.onclose=function(){d.onClose();d.socket.setBuffer(!0)};this.websocket.onerror=function(b){d.onError(b)};return this};d.prototype.send=function(b){try{this.websocket.send(b)}catch(c){console.error(c),this.onDisconnect()}return this};d.prototype.payload=function(b){for(var c=0,e=b.length;c<e;c++)this.packet(b[c]);return this};d.prototype.close=function(){try{this.websocket.close()}catch(b){console.error(b)}return this};
d.prototype.onError=function(b){this.socket.onError(b)};d.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};d.check=function(){return"WebSocket"in e&&!("__addTask"in WebSocket)||"MozWebSocket"in e};d.xdomainCheck=function(){return!0};b.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this));B("underscore")&&function(){function c(b,e,d){if(b===e)return 0!==b||1/b==1/e;if(null==b||null==e)return b===
e;b._chain&&(b=b._wrapped);e._chain&&(e=e._wrapped);if(b.isEqual&&v.isFunction(b.isEqual))return b.isEqual(e);if(e.isEqual&&v.isFunction(e.isEqual))return e.isEqual(b);var f=h.call(b);if(f!=h.call(e))return!1;switch(f){case "[object String]":return b==""+e;case "[object Number]":return b!=+b?e!=+e:0==b?1/b==1/e:b==+e;case "[object Date]":case "[object Boolean]":return+b==+e;case "[object RegExp]":return b.source==e.source&&b.global==e.global&&b.multiline==e.multiline&&b.ignoreCase==e.ignoreCase}if("object"!=
typeof b||"object"!=typeof e)return!1;for(var g=d.length;g--;)if(d[g]==b)return!0;d.push(b);var g=0,i=!0;if("[object Array]"==f){if(g=b.length,i=g==e.length)for(;g--&&(i=g in b==g in e&&c(b[g],e[g],d)););}else{if("constructor"in b!="constructor"in e||b.constructor!=e.constructor)return!1;for(var j in b)if(v.has(b,j)&&(g++,!(i=v.has(e,j)&&c(b[j],e[j],d))))break;if(i){for(j in e)if(v.has(e,j)&&!g--)break;i=!g}}d.pop();return i}var b=this,e=b._,d={},f=Array.prototype,g=Object.prototype,i=f.slice,j=f.unshift,
h=g.toString,l=g.hasOwnProperty,o=f.forEach,z=f.map,C=f.reduce,w=f.reduceRight,A=f.filter,E=f.every,D=f.some,F=f.indexOf,H=f.lastIndexOf,g=Array.isArray,M=Object.keys,n=Function.prototype.bind,v=function(b){return new I(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=v),exports._=v):b._=v;v.VERSION="1.3.3";var s=v.each=v.forEach=function(b,c,e){if(null!=b)if(o&&b.forEach===o)b.forEach(c,e);else if(b.length===+b.length)for(var f=0,g=b.length;f<
g&&!(f in b&&c.call(e,b[f],f,b)===d);f++);else for(f in b)if(v.has(b,f)&&c.call(e,b[f],f,b)===d)break};v.map=v.collect=function(b,c,e){var d=[];if(null==b)return d;if(z&&b.map===z)return b.map(c,e);s(b,function(b,f,g){d[d.length]=c.call(e,b,f,g)});b.length===+b.length&&(d.length=b.length);return d};v.reduce=v.foldl=v.inject=function(b,c,e,d){var f=2<arguments.length;null==b&&(b=[]);if(C&&b.reduce===C)return d&&(c=v.bind(c,d)),f?b.reduce(c,e):b.reduce(c);s(b,function(b,g,i){f?e=c.call(d,e,b,g,i):(e=
b,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return e};v.reduceRight=v.foldr=function(b,c,e,d){var f=2<arguments.length;null==b&&(b=[]);if(w&&b.reduceRight===w)return d&&(c=v.bind(c,d)),f?b.reduceRight(c,e):b.reduceRight(c);var g=v.toArray(b).reverse();d&&!f&&(c=v.bind(c,d));return f?v.reduce(g,c,e,d):v.reduce(g,c)};v.find=v.detect=function(b,c,e){var d;q(b,function(b,f,g){if(c.call(e,b,f,g))return d=b,!0});return d};v.filter=v.select=function(b,c,e){var d=[];
if(null==b)return d;if(A&&b.filter===A)return b.filter(c,e);s(b,function(b,f,g){c.call(e,b,f,g)&&(d[d.length]=b)});return d};v.reject=function(b,c,e){var d=[];if(null==b)return d;s(b,function(b,f,g){c.call(e,b,f,g)||(d[d.length]=b)});return d};v.every=v.all=function(b,c,e){var f=!0;if(null==b)return f;if(E&&b.every===E)return b.every(c,e);s(b,function(b,g,i){if(!(f=f&&c.call(e,b,g,i)))return d});return!!f};var q=v.some=v.any=function(b,c,e){c||(c=v.identity);var f=!1;if(null==b)return f;if(D&&b.some===
D)return b.some(c,e);s(b,function(b,g,i){if(f||(f=c.call(e,b,g,i)))return d});return!!f};v.include=v.contains=function(b,c){var e=!1;if(null==b)return e;return F&&b.indexOf===F?-1!=b.indexOf(c):e=q(b,function(b){return b===c})};v.invoke=function(b,c){var e=i.call(arguments,2);return v.map(b,function(b){return(v.isFunction(c)?c||b:b[c]).apply(b,e)})};v.pluck=function(b,c){return v.map(b,function(b){return b[c]})};v.max=function(b,c,e){if(!c&&v.isArray(b)&&b[0]===+b[0])return Math.max.apply(Math,b);
if(!c&&v.isEmpty(b))return-Infinity;var d={computed:-Infinity};s(b,function(b,f,g){f=c?c.call(e,b,f,g):b;f>=d.computed&&(d={value:b,computed:f})});return d.value};v.min=function(b,c,e){if(!c&&v.isArray(b)&&b[0]===+b[0])return Math.min.apply(Math,b);if(!c&&v.isEmpty(b))return Infinity;var d={computed:Infinity};s(b,function(b,f,g){f=c?c.call(e,b,f,g):b;f<d.computed&&(d={value:b,computed:f})});return d.value};v.shuffle=function(b){var c=[],e;s(b,function(b,d){e=Math.floor(Math.random()*(d+1));c[d]=c[e];
c[e]=b});return c};v.sortBy=function(b,c,e){var d=v.isFunction(c)?c:function(b){return b[c]};return v.pluck(v.map(b,function(b,c,f){return{value:b,criteria:d.call(e,b,c,f)}}).sort(function(b,c){var e=b.criteria,d=c.criteria;return void 0===e?1:void 0===d?-1:e<d?-1:e>d?1:0}),"value")};v.groupBy=function(b,c){var e={},d=v.isFunction(c)?c:function(b){return b[c]};s(b,function(b,c){var f=d(b,c);(e[f]||(e[f]=[])).push(b)});return e};v.sortedIndex=function(b,c,e){e||(e=v.identity);for(var d=0,f=b.length;d<
f;){var g=d+f>>1;e(b[g])<e(c)?d=g+1:f=g}return d};v.toArray=function(b){return!b?[]:v.isArray(b)||v.isArguments(b)?i.call(b):b.toArray&&v.isFunction(b.toArray)?b.toArray():v.values(b)};v.size=function(b){return v.isArray(b)?b.length:v.keys(b).length};v.first=v.head=v.take=function(b,c,e){return null!=c&&!e?i.call(b,0,c):b[0]};v.initial=function(b,c,e){return i.call(b,0,b.length-(null==c||e?1:c))};v.last=function(b,c,e){return null!=c&&!e?i.call(b,Math.max(b.length-c,0)):b[b.length-1]};v.rest=v.tail=
function(b,c,e){return i.call(b,null==c||e?1:c)};v.compact=function(b){return v.filter(b,function(b){return!!b})};v.flatten=function(b,c){return v.reduce(b,function(b,e){if(v.isArray(e))return b.concat(c?e:v.flatten(e));b[b.length]=e;return b},[])};v.without=function(b){return v.difference(b,i.call(arguments,1))};v.uniq=v.unique=function(b,c,e){var e=e?v.map(b,e):b,d=[];3>b.length&&(c=!0);v.reduce(e,function(e,f,g){if(c?v.last(e)!==f||!e.length:!v.include(e,f))e.push(f),d.push(b[g]);return e},[]);
return d};v.union=function(){return v.uniq(v.flatten(arguments,!0))};v.intersection=v.intersect=function(b){var c=i.call(arguments,1);return v.filter(v.uniq(b),function(b){return v.every(c,function(c){return 0<=v.indexOf(c,b)})})};v.difference=function(b){var c=v.flatten(i.call(arguments,1),!0);return v.filter(b,function(b){return!v.include(c,b)})};v.zip=function(){for(var b=i.call(arguments),c=v.max(v.pluck(b,"length")),e=Array(c),d=0;d<c;d++)e[d]=v.pluck(b,""+d);return e};v.indexOf=function(b,c,
e){if(null==b)return-1;var d;if(e)return e=v.sortedIndex(b,c),b[e]===c?e:-1;if(F&&b.indexOf===F)return b.indexOf(c);for(e=0,d=b.length;e<d;e++)if(e in b&&b[e]===c)return e;return-1};v.lastIndexOf=function(b,c){if(null==b)return-1;if(H&&b.lastIndexOf===H)return b.lastIndexOf(c);for(var e=b.length;e--;)if(e in b&&b[e]===c)return e;return-1};v.range=function(b,c,e){1>=arguments.length&&(c=b||0,b=0);for(var e=arguments[2]||1,d=Math.max(Math.ceil((c-b)/e),0),f=0,g=Array(d);f<d;)g[f++]=b,b+=e;return g};
var t=function(){};v.bind=function(b,c){var e,d;if(b.bind===n&&n)return n.apply(b,i.call(arguments,1));if(!v.isFunction(b))throw new TypeError;d=i.call(arguments,2);return e=function(){if(!(this instanceof e))return b.apply(c,d.concat(i.call(arguments)));t.prototype=b.prototype;var f=new t,g=b.apply(f,d.concat(i.call(arguments)));return Object(g)===g?g:f}};v.bindAll=function(b){var c=i.call(arguments,1);0==c.length&&(c=v.functions(b));s(c,function(c){b[c]=v.bind(b[c],b)});return b};v.memoize=function(b,
c){var e={};c||(c=v.identity);return function(){var d=c.apply(this,arguments);return v.has(e,d)?e[d]:e[d]=b.apply(this,arguments)}};v.delay=function(b,c){var e=i.call(arguments,2);return setTimeout(function(){return b.apply(null,e)},c)};v.defer=function(b){return v.delay.apply(v,[b,1].concat(i.call(arguments,1)))};v.throttle=function(b,c){var e,d,f,g,i,j,h=v.debounce(function(){i=g=!1},c);return function(){e=this;d=arguments;f||(f=setTimeout(function(){f=null;i&&b.apply(e,d);h()},c));g?i=!0:j=b.apply(e,
d);h();g=!0;return j}};v.debounce=function(b,c,e){var d;return function(){var f=this,g=arguments;e&&!d&&b.apply(f,g);clearTimeout(d);d=setTimeout(function(){d=null;e||b.apply(f,g)},c)}};v.once=function(b){var c=!1,e;return function(){if(c)return e;c=!0;return e=b.apply(this,arguments)}};v.wrap=function(b,c){return function(){var e=[b].concat(i.call(arguments,0));return c.apply(this,e)}};v.compose=function(){var b=arguments;return function(){for(var c=arguments,e=b.length-1;0<=e;e--)c=[b[e].apply(this,
c)];return c[0]}};v.after=function(b,c){return 0>=b?c():function(){if(1>--b)return c.apply(this,arguments)}};v.keys=M||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var c=[],e;for(e in b)v.has(b,e)&&(c[c.length]=e);return c};v.values=function(b){return v.map(b,v.identity)};v.functions=v.methods=function(b){var c=[],e;for(e in b)v.isFunction(b[e])&&c.push(e);return c.sort()};v.extend=function(b){s(i.call(arguments,1),function(c){for(var e in c)b[e]=c[e]});return b};v.pick=function(b){var c=
{};s(v.flatten(i.call(arguments,1)),function(e){e in b&&(c[e]=b[e])});return c};v.defaults=function(b){s(i.call(arguments,1),function(c){for(var e in c)null==b[e]&&(b[e]=c[e])});return b};v.clone=function(b){return!v.isObject(b)?b:v.isArray(b)?b.slice():v.extend({},b)};v.tap=function(b,c){c(b);return b};v.isEqual=function(b,e){return c(b,e,[])};v.isEmpty=function(b){if(null==b)return!0;if(v.isArray(b)||v.isString(b))return 0===b.length;for(var c in b)if(v.has(b,c))return!1;return!0};v.isElement=function(b){return!!(b&&
1==b.nodeType)};v.isArray=g||function(b){return"[object Array]"==h.call(b)};v.isObject=function(b){return b===Object(b)};v.isArguments=function(b){return"[object Arguments]"==h.call(b)};v.isArguments(arguments)||(v.isArguments=function(b){return!(!b||!v.has(b,"callee"))});v.isFunction=function(b){return"[object Function]"==h.call(b)};v.isString=function(b){return"[object String]"==h.call(b)};v.isNumber=function(b){return"[object Number]"==h.call(b)};v.isFinite=function(b){return v.isNumber(b)&&isFinite(b)};
v.isNaN=function(b){return b!==b};v.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==h.call(b)};v.isDate=function(b){return"[object Date]"==h.call(b)};v.isRegExp=function(b){return"[object RegExp]"==h.call(b)};v.isNull=function(b){return null===b};v.isUndefined=function(b){return void 0===b};v.has=function(b,c){return l.call(b,c)};v.noConflict=function(){b._=e;return this};v.identity=function(b){return b};v.times=function(b,c,e){for(var d=0;d<b;d++)c.call(e,d)};v.escape=function(b){return(""+
b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};v.result=function(b,c){if(null==b)return null;var e=b[c];return v.isFunction(e)?e.call(b):e};v.mixin=function(b){s(v.functions(b),function(c){N(c,v[c]=b[c])})};var u=0;v.uniqueId=function(b){var c=u++;return b?b+c:c};v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x=/.^/,y={"\\":"\\","'":"'",r:"\r",n:"\n",
t:"\t",u2028:"\u2028",u2029:"\u2029"},B;for(B in y)y[y[B]]=B;var k=/\\|'|\r|\n|\t|\u2028|\u2029/g,G=/\\(\\|'|r|n|t|u2028|u2029)/g,J=function(b){return b.replace(G,function(b,c){return y[c]})};v.template=function(b,c,e){e=v.defaults(e||{},v.templateSettings);b="__p+='"+b.replace(k,function(b){return"\\"+y[b]}).replace(e.escape||x,function(b,c){return"'+\n_.escape("+J(c)+")+\n'"}).replace(e.interpolate||x,function(b,c){return"'+\n("+J(c)+")+\n'"}).replace(e.evaluate||x,function(b,c){return"';\n"+J(c)+
"\n;__p+='"})+"';\n";e.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",d=new Function(e.variable||"obj","_",b);if(c)return d(c,v);c=function(b){return d.call(this,b,v)};c.source="function("+(e.variable||"obj")+"){\n"+b+"}";return c};v.chain=function(b){return v(b).chain()};var I=function(b){this._wrapped=b};v.prototype=I.prototype;var L=function(b,c){return c?v(b).chain():b},N=function(b,c){I.prototype[b]=
function(){var b=i.call(arguments);j.call(b,this._wrapped);return L(c.apply(v,b),this._chain)}};v.mixin(v);s("pop,push,reverse,shift,sort,splice,unshift".split(","),function(b){var c=f[b];I.prototype[b]=function(){var e=this._wrapped;c.apply(e,arguments);var d=e.length;("shift"==b||"splice"==b)&&0===d&&delete e[0];return L(e,this._chain)}});s(["concat","join","slice"],function(b){var c=f[b];I.prototype[b]=function(){return L(c.apply(this._wrapped,arguments),this._chain)}});I.prototype.chain=function(){this._chain=
!0;return this};I.prototype.value=function(){return this._wrapped}}.call(this);B("backbone")&&function(){var c;c="undefined"!==typeof exports?exports:this.Backbone={};c.VERSION="0.3.3";var b=this._;!b&&"undefined"!==typeof require&&(b=require("underscore")._);var e=this.jQuery||this.Zepto;c.emulateHTTP=!1;c.emulateJSON=!1;c.Events={bind:function(c,e){this._callbacks||(this._callbacks={});var d=this._callbacks[c]||(this._callbacks[c]=[]);b.include(d,e)&&console.log(["Bound more than once to",c]);d.push(e);
return this},unbind:function(b,c){var e;if(b){if(e=this._callbacks)if(c){e=e[b];if(!e)return this;for(var d=0,f=e.length;d<f;d++)if(c===e[d]){e.splice(d,1);break}}else e[b]=[]}else this._callbacks={};return this},trigger:function(b){var c,e,d,f;if(!(e=this._callbacks))return this;if(c=e[b])for(d=0,f=c.length;d<f;d++)c[d].apply(this,Array.prototype.slice.call(arguments,1));if(c=e.all)for(d=0,f=c.length;d<f;d++)c[d].apply(this,arguments);return this}};c.Model=function(c,e){c||(c={});this.defaults&&
(c=b.extend({},this.defaults,c));this.attributes={};this._escapedAttributes={};this.cid=b.uniqueId("c");this.set(c,{silent:!0});this._previousAttributes=b.clone(this.attributes);e&&e.collection&&(this.collection=e.collection);this.initialize(c,e)};b.extend(c.Model.prototype,c.Events,{_previousAttributes:null,_changed:!1,initialize:function(){},toJSON:function(){return b.clone(this.attributes)},get:function(b){return this.attributes[b]},escape:function(b){var c;if(c=this._escapedAttributes[b])return c;
c=this.attributes[b];return this._escapedAttributes[b]=(null==c?"":c).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},set:function(c,e){e||(e={});if(!c)return this;c.attributes&&(c=c.attributes);"_id"in c&&(c.id=c._id);var d=this.attributes,f=this._escapedAttributes;if(!e.silent&&this.validate&&!this._performValidation(c,e))return!1;"id"in c&&(this.id=c.id);for(var g in c){var i=c[g];b.isEqual(d[g],i)||(d[g]=i,delete f[g],e.silent||(this._changed=!0,
this.trigger("change:"+g,this,i,e)))}!e.silent&&this._changed&&this.change(e);return this},unset:function(b,c){c||(c={});var e={};e[b]=void 0;if(!c.silent&&this.validate&&!this._performValidation(e,c))return!1;delete this.attributes[b];delete this._escapedAttributes[b];c.silent||(this._changed=!0,this.trigger("change:"+b,this,void 0,c),this.change(c));return this},clear:function(b){b||(b={});var c=this.attributes,e={};for(attr in c)e[attr]=void 0;if(!b.silent&&this.validate&&!this._performValidation(e,
b))return!1;this.attributes={};this._escapedAttributes={};if(!b.silent){this._changed=!0;for(attr in c)this.trigger("change:"+attr,this,void 0,b);this.change(b)}return this},fetch:function(b){b||(b={});var e=this,d=C(b.error,e,b);(this.sync||c.sync)("read",this,function(c){if(!e.set(e.parse(c),b))return!1;b.success&&b.success(e,c)},d);return this},save:function(b,e){e||(e={});if(b&&!this.set(b,e))return!1;var d=this,f=C(e.error,d,e),g=this.isNew()?"create":"update";(this.sync||c.sync)(g,this,function(b){if(!d.set(d.parse(b),
e))return!1;e.success&&e.success(d,b)},f);return this},destroy:function(b){b||(b={});var e=this,d=C(b.error,e,b);(this.sync||c.sync)("delete",this,function(c){e.collection&&e.collection.remove(e);b.success&&b.success(e,c)},d);return this},url:function(){var b=z(this.collection);return this.isNew()?b:b+("/"==b.charAt(b.length-1)?"":"/")+this.id},parse:function(b){return b},clone:function(){return new this.constructor(this)},isNew:function(){return!this.id},change:function(c){this.trigger("change",
this,c);this._previousAttributes=b.clone(this.attributes);this._changed=!1},hasChanged:function(b){return b?this._previousAttributes[b]!=this.attributes[b]:this._changed},changedAttributes:function(c){c||(c=this.attributes);var e=this._previousAttributes,d=!1,f;for(f in c)b.isEqual(e[f],c[f])||(d=d||{},d[f]=c[f]);return d},previous:function(b){return!b||!this._previousAttributes?null:this._previousAttributes[b]},previousAttributes:function(){return b.clone(this._previousAttributes)},_performValidation:function(b,
c){var e=this.validate(b);return e?(c.error?c.error(this,e):this.trigger("error",this,e,c),!1):!0}});c.Collection=function(c,e){e||(e={});e.comparator&&(this.comparator=e.comparator,delete e.comparator);this._boundOnModelEvent=b.bind(this._onModelEvent,this);this._reset();c&&this.refresh(c,{silent:!0});this.initialize(c,e)};b.extend(c.Collection.prototype,c.Events,{model:c.Model,initialize:function(){},toJSON:function(){return this.map(function(b){return b.toJSON()})},add:function(c,e){if(b.isArray(c))for(var d=
0,f=c.length;d<f;d++)this._add(c[d],e);else this._add(c,e);return this},remove:function(c,e){if(b.isArray(c))for(var d=0,f=c.length;d<f;d++)this._remove(c[d],e);else this._remove(c,e);return this},get:function(b){return null==b?null:this._byId[null!=b.id?b.id:b]},getByCid:function(b){return b&&this._byCid[b.cid||b]},at:function(b){return this.models[b]},sort:function(b){b||(b={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.models=this.sortBy(this.comparator);b.silent||
this.trigger("refresh",this,b);return this},pluck:function(c){return b.map(this.models,function(b){return b.get(c)})},refresh:function(b,c){b||(b=[]);c||(c={});this._reset();this.add(b,{silent:!0});c.silent||this.trigger("refresh",this,c);return this},fetch:function(b){b||(b={});var e=this,d=C(b.error,e,b);(this.sync||c.sync)("read",this,function(c){e.refresh(e.parse(c));b.success&&b.success(e,c)},d);return this},create:function(b,e){var d=this;e||(e={});b instanceof c.Model?b.collection=d:b=new this.model(b,
{collection:d});return b.save(null,{success:function(b,c){d.add(b);e.success&&e.success(b,c)},error:e.error})},parse:function(b){return b},chain:function(){return b(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId={};this._byCid={}},_add:function(b,e){e||(e={});b instanceof c.Model||(b=new this.model(b,{collection:this}));var d=this.getByCid(b);if(d)throw Error(["Can't add the same model to a set twice",d.id]);this._byId[b.id]=b;this._byCid[b.cid]=b;b.collection=this;
this.models.splice(this.comparator?this.sortedIndex(b,this.comparator):this.length,0,b);b.unbind("all",this._boundOnModelEvent);b.bind("all",this._boundOnModelEvent);this.length++;e.silent||b.trigger("add",b,this,e);return b},_remove:function(b,c){c||(c={});b=this.getByCid(b)||this.get(b);if(!b)return null;delete this._byId[b.id];delete this._byCid[b.cid];delete b.collection;this.models.splice(this.indexOf(b),1);this.length--;c.silent||b.trigger("remove",b,this,c);b.unbind("all",this._boundOnModelEvent);
return b},_onModelEvent:function(b,c){"change:id"===b&&(delete this._byId[c.previous("id")],this._byId[c.id]=c);this.trigger.apply(this,arguments)}});b.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,invoke,max,min,sortBy,sortedIndex,toArray,size,first,rest,last,without,indexOf,lastIndexOf,isEmpty".split(","),function(e){c.Collection.prototype[e]=function(){return b[e].apply(b,[this.models].concat(b.toArray(arguments)))}});c.Controller=function(b){b||
(b={});b.routes&&(this.routes=b.routes);this._bindRoutes();this.initialize(b)};var d=/:([\w\d]+)/g,f=/\*([\w\d]+)/g;b.extend(c.Controller.prototype,c.Events,{initialize:function(){},route:function(e,d,f){c.history||(c.history=new c.History);b.isRegExp(e)||(e=this._routeToRegExp(e));c.history.route(e,b.bind(function(b){b=this._extractParameters(e,b);f.apply(this,b);this.trigger.apply(this,["route:"+d].concat(b))},this))},saveLocation:function(b){c.history.saveLocation(b)},_bindRoutes:function(){if(this.routes)for(var b in this.routes){var c=
this.routes[b];this.route(b,c,this[c])}},_routeToRegExp:function(b){b=b.replace(d,"([^/]*)").replace(f,"(.*?)");return RegExp("^"+b+"$")},_extractParameters:function(b,c){return b.exec(c).slice(1)}});c.History=function(){this.handlers=[];this.fragment=this.getFragment();b.bindAll(this,"checkUrl")};var g=/^#*/;b.extend(c.History.prototype,{interval:50,getFragment:function(b){return(b||x.location).hash.replace(g,"")},start:function(){var b=document.documentMode;if(b=e.browser.msie&&(!b||7>=b))this.iframe=
e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;"onhashchange"in x&&!b?e(x).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval);return this.loadUrl()},route:function(b,c){this.handlers.push({route:b,callback:c})},checkUrl:function(){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.iframe.location));if(b==this.fragment||b==decodeURIComponent(this.fragment))return!1;this.iframe&&(x.location.hash=this.iframe.location.hash=
b);this.loadUrl()},loadUrl:function(){var c=this.fragment=this.getFragment();return b.any(this.handlers,function(b){if(b.route.test(c))return b.callback(c),!0})},saveLocation:function(b){b=(b||"").replace(g,"");this.fragment!=b&&(x.location.hash=this.fragment=b,this.iframe&&b!=this.getFragment(this.iframe.location)&&(this.iframe.document.open().close(),this.iframe.location.hash=b))}});c.View=function(b){this._configure(b||{});this._ensureElement();this.delegateEvents();this.initialize(b)};var i=/^(\w+)\s*(.*)$/;
b.extend(c.View.prototype,c.Events,{tagName:"div",$:function(b){return e(b,this.el)},initialize:function(){},render:function(){return this},remove:function(){e(this.el).remove();return this},make:function(b,c,d){b=document.createElement(b);c&&e(b).attr(c);d&&e(b).html(d);return b},delegateEvents:function(c){if(c||(c=this.events)){e(this.el).unbind();for(var d in c){var f=c[d],g=d.match(i),j=g[1],g=g[2],f=b.bind(this[f],this);""===g?e(this.el).bind(j,f):e(this.el).delegate(g,j,f)}}},_configure:function(c){this.options&&
(c=b.extend({},this.options,c));c.model&&(this.model=c.model);c.collection&&(this.collection=c.collection);c.el&&(this.el=c.el);c.id&&(this.id=c.id);c.className&&(this.className=c.className);c.tagName&&(this.tagName=c.tagName);this.options=c},_ensureElement:function(){if(!this.el){var b={};this.id&&(b.id=this.id);this.className&&(b["class"]=this.className);this.el=this.make(this.tagName,b)}}});var j=function(b,c){var e=o(this,b,c);e.extend=j;return e};c.Model.extend=c.Collection.extend=c.Controller.extend=
c.View.extend=j;var h={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};c.sync=function(b,d,f,g){var i=h[b],b="create"===b||"update"===b?JSON.stringify(d.toJSON()):null,d={url:z(d),type:i,contentType:"application/json",data:b,dataType:"json",processData:!1,success:f,error:g};c.emulateJSON&&(d.contentType="application/x-www-form-urlencoded",d.processData=!0,d.data=b?{model:b}:{});if(c.emulateHTTP&&("PUT"===i||"DELETE"===i))c.emulateJSON&&(d.data._method=i),d.type="POST",d.beforeSend=function(b){b.setRequestHeader("X-HTTP-Method-Override",
i)};e.ajax(d)};var l=function(){},o=function(c,e,d){var f;f=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return c.apply(this,arguments)};l.prototype=c.prototype;f.prototype=new l;e&&b.extend(f.prototype,e);d&&b.extend(f,d);f.prototype.constructor=f;f.__super__=c.prototype;return f},z=function(c){if(!c||!c.url)throw Error("A 'url' property or function must be specified");return b.isFunction(c.url)?c.url():c.url},C=function(b,c,e){return function(d){b?b(c,d):c.trigger("error",c,d,e)}}}();
if(B("mustache"))var xe=function(){var c=function(){};c.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(b,c,d,f){f||(this.context=c,this.buffer=[]);if(this.includes("",b)){b=this.render_pragmas(b);b=this.render_section(b,c,d);if(f)return this.render_tags(b,c,d,f);this.render_tags(b,c,d,f)}else{if(f)return b;this.send(b)}},send:function(b){""!=b&&this.buffer.push(b)},render_pragmas:function(b){if(!this.includes("%",b))return b;
var c=this;return b.replace(RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag),function(b,f,g){if(!c.pragmas_implemented[f])throw{message:"This implementation of mustache doesn't understand the '"+f+"' pragma"};c.pragmas[f]={};g&&(b=g.split("="),c.pragmas[f][b[0]]=b[1]);return""})},render_partial:function(b,c,d){b=this.trim(b);if(!d||void 0===d[b])throw{message:"unknown_partial '"+b+"'"};return"object"!=typeof c[b]?this.render(d[b],c,d,!0):this.render(d[b],c[b],d,!0)},render_section:function(b,
c,d){if(!this.includes("#",b)&&!this.includes("^",b))return b;var f=this;return b.replace(RegExp(this.otag+"(\\^|\\#)\\s*(.+?)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(b,i,j,h){b=f.find(j,c);if("^"==i)return!b||f.is_array(b)&&0===b.length?f.render(h,c,d,!0):"";if("#"==i)return f.is_array(b)?f.map(b,function(b){return f.render(h,f.create_context(b),d,!0)}).join(""):f.is_object(b)?f.render(h,f.create_context(b),d,!0):"function"===typeof b?b.call(c,
h,function(b){return f.render(b,c,d,!0)}):b?f.render(h,c,d,!0):""})},render_tags:function(b,c,d,f){for(var g=this,i=function(){return RegExp(g.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+g.ctag+"+","g")},j=i(),h=function(b,f,h){switch(f){case "!":return"";case "=":return g.set_delimiters(h),j=i(),"";case ">":return g.render_partial(h,c,d);case "{":return g.find(h,c);default:return g.escape(g.find(h,c))}},b=b.split("\n"),l=0;l<b.length;l++)b[l]=b[l].replace(j,h,this),f||this.send(b[l]);if(f)return b.join("\n")},
set_delimiters:function(b){b=b.split(" ");this.otag=this.escape_regex(b[0]);this.ctag=this.escape_regex(b[1])},escape_regex:function(b){arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g"));return b.replace(arguments.callee.sRE,"\\$1")},find:function(b,c){var b=this.trim(b),d;!1===c[b]||0===c[b]||c[b]?d=c[b]:(!1===this.context[b]||0===this.context[b]||this.context[b])&&(d=this.context[b]);return"function"===typeof d?d.apply(c):void 0!==d?
d:""},includes:function(b,c){return-1!=c.indexOf(this.otag+b)},escape:function(b){return(""+(null===b?"":b)).replace(/&(?!\w+;)?|["'<>\\]/g,function(b){switch(b){case "&":return"&amp;";case "\\":return"&#92;";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return b}})},create_context:function(b){if(this.is_object(b))return b;var c=".";this.pragmas["IMPLICIT-ITERATOR"]&&(c=this.pragmas["IMPLICIT-ITERATOR"].iterator);var d={};d[c]=b;return d},is_object:function(b){return b&&
"object"==typeof b},is_array:function(b){return"[object Array]"===Object.prototype.toString.call(b)},trim:function(b){return b.replace(/^\s*|\s*$/g,"")},map:function(b,c){if("function"==typeof b.map)return b.map(c);for(var d=[],f=b.length,g=0;g<f;g++)d.push(c(b[g]));return d}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(b,e,d,f){var g=new c;f&&(g.send=f);g.render(b,e,d);if(!f)return g.buffer.join("\n")}}}();if(B("markdown")){var Ab;"undefined"===typeof exports?(x.markdown={},Ab=
x.markdown):Ab=exports;(function(c){function b(b){for(var c=0,e=-1;-1!=(e=b.indexOf("\n",e+1));)c++;return c}function e(b,c){function e(b){this.len_after=b;this.name="close_"+c}var d=b+"_state",f="strong"==b?"em_state":"strong_state";return function(g){if(this[d][0]==c)return this[d].shift(),[g.length,new e(g.length-c.length)];var i=this[f].slice(),j=this[d].slice();this[d].unshift(c);var h=this.processInline(g.substr(c.length)),m=h[h.length-1];this[d].shift();if(m instanceof e)return h.pop(),[g.length-
m.len_after,[b].concat(h)];this[f]=i;this[d]=j;return[c.length,c]}}function d(b){return z(b)&&1<b.length&&"object"===typeof b[1]&&!z(b[1])?b[1]:void 0}function f(b){for(var c=b.split(""),b=[""],e=!1;c.length;){var d=c.shift();switch(d){case " ":e?b[b.length-1]+=d:b.push("");break;case "'":case '"':e=!e;break;case "\\":d=c.shift();default:b[b.length-1]+=d}}c={};for(e=0;e<b.length;++e)/^#/.test(b[e])?c.id=b[e].substring(1):/^\./.test(b[e])?c["class"]=c["class"]?c["class"]+b[e].replace(/./," "):b[e].substring(1):
/=/.test(b[e])&&(d=b[e].split(/=/),c[d[0]]=d[1]);return c}function g(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i(b){if("string"===typeof b)return g(b);var c=b.shift(),e={},d=[];for(b.length&&"object"===typeof b[0]&&!(b[0]instanceof Array)&&(e=b.shift());b.length;)d.push(arguments.callee(b.shift()));var f="",i;for(i in e)f+=" "+i+'="'+g(e[i])+'"';return"br"==c?"<"+c+f+" />":"<"+c+f+">"+d.join("")+"</"+c+">"}function j(b,
c,e){var e=e||{},f=b.slice(0);"function"===typeof e.preprocessTreeNode&&(f=e.preprocessTreeNode(f,c));var g=d(f);if(g){f[1]={};for(var i in g)f[1][i]=g[i];g=f[1]}if("string"===typeof f)return f;switch(f[0]){case "header":f[0]="h"+f[1].level;delete f[1].level;break;case "bulletlist":f[0]="ul";break;case "numberlist":f[0]="ol";break;case "listitem":f[0]="li";break;case "para":f[0]="p";break;case "markdown":f[0]="html";g&&delete g.references;break;case "code_block":f[0]="pre";i=g?2:1;var j=["code"];
j.push.apply(j,f.splice(i));f[i]=j;break;case "inlinecode":f[0]="code";break;case "img":f[1].src=f[1].href;delete f[1].href;break;case "linebreak":f[0]="br";break;case "link":f[0]="a";break;case "link_ref":if(f[0]="a",i=c[g.ref])delete g.ref,g.href=i.href,i.title&&(g.title=i.title),delete g.original;else return g.original}i=1;if(g){for(var h in f[1])i=2;1===i&&f.splice(i,1)}for(;i<f.length;++i)f[i]=arguments.callee(f[i],c,e);return f}function h(b){for(var c=d(b)?2:1;c<b.length;)"string"===typeof b[c]?
c+1<b.length&&"string"===typeof b[c+1]?b[c]+=b.splice(c+1,1)[0]:++c:(arguments.callee(b[c]),++c)}var l=c.Markdown=function w(b){switch(typeof b){case "undefined":this.dialect=w.dialects.Gruber;break;case "object":this.dialect=b;break;default:if(b in w.dialects)this.dialect=w.dialects[b];else throw Error("Unknown Markdown dialect '"+b+"'");}this.em_state=[];this.strong_state=[];this.debug_indent=""};c.parse=function(b,c){return(new l(c)).toTree(b)};c.toHTML=function(b,e,d){b=c.toHTMLTree(b,e,d);return c.renderJsonML(b)};
c.toHTMLTree=function(b,c,e){"string"===typeof b&&(b=this.parse(b,c));var c=d(b),f={};c&&c.references&&(f=c.references);b=j(b,f,e);h(b);return b};var o=l.mk_block=function(b,c,e){1==arguments.length&&(c="\n\n");var d=new String(b);d.trailing=c;d.toSource=function(){return"Markdown.mk_block( "+uneval(b)+", "+uneval(c)+", "+uneval(e)+" )"};void 0!=e&&(d.lineNumber=e);return d};l.prototype.split_blocks=function(c){var e=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,d=[],f,g=1;if(null!=(f=/^(\s*\n)/.exec(c)))g+=b(f[0]),
e.lastIndex=f[0].length;for(;null!=(f=e.exec(c));)d.push(o(f[1],f[2],g)),g+=b(f[0]);return d};l.prototype.processBlock=function(b,c){var e=this.dialect.block,d=e.__order__;if("__call__"in e)return e.__call__.call(this,b,c);for(var f=0;f<d.length;f++){var g=e[d[f]].call(this,b,c);if(g)return(!z(g)||0<g.length&&!z(g[0]))&&this.debug(d[f],"didn't return a proper array"),g}return[]};l.prototype.processInline=function(b){return this.dialect.inline.__call__.call(this,""+b)};l.prototype.toTree=function(b,
c){var e=b instanceof Array?b:this.split_blocks(b),d=this.tree;try{this.tree=c||this.tree||["markdown"];a:for(;e.length;){var f=this.processBlock(e.shift(),e);if(!f.length)continue a;this.tree.push.apply(this.tree,f)}return this.tree}finally{c&&(this.tree=d)}};l.prototype.debug=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this.debug_indent);"undefined"!==typeof print&&print.apply(print,b);"undefined"!==typeof console&&"undefined"!==typeof console.log&&console.log.apply(null,b)};
l.prototype.loop_re_over_block=function(b,c,e){for(var d,c=c.valueOf();c.length&&null!=(d=b.exec(c));)c=c.substr(d[0].length),e.call(this,d);return c};l.dialects={};l.dialects.Gruber={block:{atxHeader:function(b,c){var e=b.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(e){var d=["header",{level:e[1].length}];Array.prototype.push.apply(d,this.processInline(e[2]));e[0].length<b.length&&c.unshift(o(b.substr(e[0].length),b.trailing,b.lineNumber+2));return[d]}},setextHeader:function(b,c){var e=b.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);
if(e){var d=["header",{level:"="===e[2]?1:2},e[1]];e[0].length<b.length&&c.unshift(o(b.substr(e[0].length),b.trailing,b.lineNumber+2));return[d]}},code:function(b,c){var e=[],d=/^(?: {0,3}\t| {4})(.*)\n?/,f=b.match(d);if(f){a:do if(f=this.loop_re_over_block(d,b.valueOf(),function(b){e.push(b[1])}),f.length){c.unshift(o(f,b.trailing));break a}else if(c.length){f=c[0].match(d);if(!f)break a;e.push(b.trailing.replace(/[^\n]/g,"").substring(2));b=c.shift()}else break a;while(1);return[["code_block",e.join("\n")]]}},
horizRule:function(b,c){var e=b.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(e){var d=[["hr"]];e[1]&&d.unshift.apply(d,this.processBlock(e[1],[]));e[3]&&c.unshift(o(e[3]));return d}},lists:function(){function b(c,e,d,f){if(e)c.push(["para"].concat(d));else{e=c[c.length-1]instanceof Array&&"para"==c[c.length-1][0]?c[c.length-1]:c;f&&1<c.length&&d.unshift(f);for(c=0;c<d.length;c++)f=d[c],"string"==typeof f&&1<e.length&&"string"==typeof e[e.length-1]?e[e.length-
1]+=f:e.push(f)}}function c(b,e){for(var d=RegExp("^("+g+"{"+b+"}.*?\\n?)*$"),f=RegExp("^"+g+"{"+b+"}","gm"),i=[];0<e.length;){d.exec(e[0])&&(d=e.shift(),f=d.replace(f,""),i.push(o(f,d.trailing,d.lineNumber)));break}return i}function e(b,c,d){b=b.list;b=b[b.length-1];b[1]instanceof Array&&"para"==b[1][0]||(c+1==d.length?b.push(["para"].concat(b.splice(1))):(c=b.pop(),b.push(["para"].concat(b.splice(1)),c)))}var d=/[*+-]/,f=/^( {0,3})([*+-]|\d\.)[ \t]+/,g="(?: {0,3}\\t| {4})";return function(i,j){function h(b){var c=
d.exec(b[2])?["bulletlist"]:["numberlist"];l.push({list:c,indent:b[1]});return c}var m=i.match(f);if(m){var l=[],o=h(m),z,n=!1,s=[l[0].list];a:for(;;){var q=i.split(/(?=\n)/),k="",t=0;for(;t<q.length;t++){var u="",x=q[t].replace(/^\n/,function(b){u=b;return""}),m=x.match(RegExp("(?:^("+g+"{0,"+l.length+"} {0,3})([*+-]|\\d\\.)\\s+)|(^"+g+"{0,"+(l.length-1)+"}[ ]{0,4})"));if(void 0!==m[1]){k.length&&(b(z,n,this.processInline(k),u),n=!1,k="");m[1]=m[1].replace(/ {0,3}\t/g,"    ");var y=Math.floor(m[1].length/
4)+1;y>l.length?(o=h(m),z.push(o),z=o[1]=["listitem"]):(l.some(function(b,c){if(b.indent!=m[1])return!1;o=b.list;l.splice(c+1);return!0})||(y++,y<=l.length?(l.splice(y),o=l[y-1].list):(o=h(m),z.push(o))),z=["listitem"],o.push(z));u=""}x.length>m[0].length&&(k+=u+x.substr(m[0].length))}k.length&&(b(z,n,this.processInline(k),u),n=!1,k="");n=c(l.length,j);0<n.length&&(l.forEach(e,this),z.push.apply(z,this.toTree(n,[])));n=j[0]&&j[0].valueOf()||"";if(n.match(f)||n.match(/^ /)){i=j.shift();if(n=this.dialect.block.horizRule(i,
j)){s.push.apply(s,n);break}l.forEach(e,this);n=!0;continue a}break}return s}}}(),blockquote:function(b,c){if(b.match(/^>/m)){var e=[];if(">"!=b[0]){for(var d=b.split(/\n/),f=[];d.length&&">"!=d[0][0];)f.push(d.shift());b=d.join("\n");e.push.apply(e,this.processBlock(f.join("\n"),[]))}for(;c.length&&">"==c[0][0];)d=c.shift(),b+=b.trailing+d,b.trailing=d.trailing;d=b.replace(/^> ?/gm,"");e.push(this.toTree(d,["blockquote"]));return e}},referenceDefn:function(b,c){var e=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;
if(b.match(e)){d(this.tree)||this.tree.splice(1,0,{});var f=d(this.tree);void 0===f.references&&(f.references={});e=this.loop_re_over_block(e,b,function(b){b[2]&&"<"==b[2][0]&&">"==b[2][b[2].length-1]&&(b[2]=b[2].substring(1,b[2].length-1));var c=f.references[b[1].toLowerCase()]={href:b[2]};void 0!==b[4]?c.title=b[4]:void 0!==b[5]&&(c.title=b[5])});e.length&&c.unshift(o(e,b.trailing));return[]}},para:function(b){return[["para"].concat(this.processInline(b))]}}};l.dialects.Gruber.inline={__call__:function(b,
c){function e(b){"string"==typeof b&&"string"==typeof d[d.length-1]?d[d.length-1]+=b:d.push(b)}for(var d=[],f,g=RegExp("([\\s\\S]*?)("+(c.source||c)+")","g"),i=0;null!=(f=g.exec(b));){f[1]?e(f[1]):f[1]={length:0};var j;f[2]in this.dialect.inline&&(j=this.dialect.inline[f[2]].call(this,b.substr(f.index+f[1].length),f,d));j=j||[f[2].length,f[2]];i=j.shift();g.lastIndex+=i-f[2].length;j.forEach(e);i=g.lastIndex}b.length>i&&e(b.substr(i));return d},"\\":function(b){return b.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?
[2,b[1]]:[1,"\\"]},"![":function(b){var c=b.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);return c?(c[2]&&"<"==c[2][0]&&">"==c[2][c[2].length-1]&&(c[2]=c[2].substring(1,c[2].length-1)),c[2]==this.dialect.inline.__call__.call(this,c[2],/\\/)[0],b={alt:c[1],href:c[2]||""},void 0!==c[4]&&(b.title=c[4]),[c[0].length,["img",b]]):(c=b.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/))?[c[0].length,["img_ref",{alt:c[1],ref:c[2].toLowerCase(),text:c[0]}]]:[2,"!["]},"[":function(b){var c=b.match(/^\[([\s\S]*?)\][ \t]*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);
if(c)return c[2]&&"<"==c[2][0]&&">"==c[2][c[2].length-1]&&(c[2]=c[2].substring(1,c[2].length-1)),c[2]=this.dialect.inline.__call__.call(this,c[2],/\\/)[0],b={href:c[2]||""},void 0!==c[4]&&(b.title=c[4]),b=["link",b],Array.prototype.push.apply(b,this.processInline(c[1])),[c[0].length,b];if(c=b.match(/^\[([\s\S]*?)\](?: ?\[(.*?)\])?/)){if(void 0===c[2]||""===c[2])c[2]=c[1];b={ref:c[2].toLowerCase(),original:c[0]};b=["link_ref",b];Array.prototype.push.apply(b,this.processInline(c[1]));return[c[0].length,
b]}return[1,"["]},"<":function(b){var c;return null!=(c=b.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?c[3]?[c[0].length,["link",{href:"mailto:"+c[3]},c[3]]]:"mailto"==c[2]?[c[0].length,["link",{href:c[1]},c[1].substr(7)]]:[c[0].length,["link",{href:c[1]},c[1]]]:[1,"<"]},"`":function(b){return(b=b.match(/(`+)(([\s\S]*?)\1)/))&&b[2]?[b[1].length+b[2].length,["inlinecode",b[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}};l.dialects.Gruber.inline["**"]=e("strong","**");
l.dialects.Gruber.inline.__=e("strong","__");l.dialects.Gruber.inline["*"]=e("em","*");l.dialects.Gruber.inline._=e("em","_");l.buildBlockOrder=function(b){var c=[],e;for(e in b)"__order__"==e||"__call__"==e||c.push(e);b.__order__=c};l.buildInlinePatterns=function(b){var c=[],e;for(e in b)if("__call__"!=e){var d=e.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");c.push(1==e.length?d:"(?:"+d+")")}var c=c.join("|"),f=b.__call__;b.__call__=function(b,e){return void 0!=e?f.call(this,b,e):f.call(this,
b,c)}};l.subclassDialect=function(b){function c(){}function e(){}c.prototype=b.block;e.prototype=b.inline;return{block:new c,inline:new e}};l.buildBlockOrder(l.dialects.Gruber.block);l.buildInlinePatterns(l.dialects.Gruber.inline);l.dialects.Maruku=l.subclassDialect(l.dialects.Gruber);l.dialects.Maruku.block.document_meta=function(b){if(!(1<b.lineNumber)&&b.match(/^(?:\w+:.*\n)*\w+:.*$/)){d(this.tree)||this.tree.splice(1,0,{});b=b.split(/\n/);for(p in b){var c=b[p].match(/(\w+):\s*(.*)$/);this.tree[1][c[1].toLowerCase()]=
c[2]}return[]}};l.dialects.Maruku.block.block_meta=function(b){var c=b.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(c){var e=f(c[2]);if(""===c[1]){c=this.tree[this.tree.length-1];b=d(c);if("string"===typeof c)return;b||(b={},c.splice(1,0,b));for(a in e)b[a]=e[a];return[]}c=this.processBlock(b.replace(/\n.*$/,""),[]);b=d(c[0]);b||(b={},c[0].splice(1,0,b));for(a in e)b[a]=e[a];return c}};l.dialects.Maruku.block.definition_list=function(b,c){var e=/^((?:[^\s:].*\n)+):\s+((?:\s\S)+)$/,d=["dl"];
if(b.match(e)){for(var f=[b];c.length&&e.exec(c[0]);)f.push(c.shift());for(var g=0;g<f.length;++g){for(var i=f[g].match(e),j=i[1].replace(/\n$/,"").split(/\n/),i=i[2].split(/\n:\s+/),h=0;h<j.length;++h)d.push(["dt",j[h]]);for(h=0;h<i.length;++h)d.push(["dd"].concat(this.processInline(i[h].replace(/(\n)\s+/,"$1"))))}return[d]}};l.dialects.Maruku.inline["{:"]=function(b,c,e){if(!e.length)return[2,"{:"];c=e[e.length-1];if("string"===typeof c)return[2,"{:"];b=b.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);
if(!b)return[2,"{:"];var e=f(b[1]),g=d(c);g||(g={},c.splice(1,0,g));for(var i in e)g[i]=e[i];return[b[0].length,""]};l.buildBlockOrder(l.dialects.Maruku.block);l.buildInlinePatterns(l.dialects.Maruku.inline);var z=c.isArray=function(b){return b instanceof Array||"array"===typeof b||Array.isArray(b)};c.renderJsonML=function(b,c){c=c||{};c.root=c.root||!1;var e=[];if(c.root)e.push(i(b));else{b.shift();for(b.length&&"object"===typeof b[0]&&!(b[0]instanceof Array)&&b.shift();b.length;)e.push(i(b.shift()))}return e.join("\n\n")}})(Ab)}B("async")&&
function(){var c={},b=this,e=b.async;"undefined"!==typeof module&&module.exports?module.exports=c:b.async=c;c.noConflict=function(){b.async=e;return c};var d=function(b,c){if(b.forEach)return b.forEach(c);for(var e=0;e<b.length;e+=1)c(b[e],e,b)},f=function(b,c){if(b.map)return b.map(c);var e=[];d(b,function(b,d,f){e.push(c(b,d,f))});return e},g=function(b,c,e){if(b.reduce)return b.reduce(c,e);d(b,function(b,d,f){e=c(e,b,d,f)});return e},i=function(b){if(Object.keys)return Object.keys(b);var c=[],
e;for(e in b)b.hasOwnProperty(e)&&c.push(e);return c};c.nextTick="undefined"===typeof process||!process.nextTick?function(b){setTimeout(b,0)}:process.nextTick;c.forEach=function(b,c,e){if(!b.length)return e();var f=0;d(b,function(d){c(d,function(c){c?(e(c),e=function(){}):(f+=1,f===b.length&&e())})})};c.forEachSeries=function(b,c,e){if(!b.length)return e();var d=0,f=function(){c(b[d],function(c){c?(e(c),e=function(){}):(d+=1,d===b.length?e():f())})};f()};c.forEachLimit=function(b,c,e,d){if(!b.length||
0>=c)return d();var f=0,g=0,i=0;(function H(){if(f===b.length)return d();for(;i<c&&g<b.length;)e(b[g],function(c){c?(d(c),d=function(){}):(f+=1,i-=1,f===b.length?d():H())}),g+=1,i+=1})()};var j=function(b){return function(){var e=Array.prototype.slice.call(arguments);return b.apply(null,[c.forEach].concat(e))}},h=function(b){return function(){var e=Array.prototype.slice.call(arguments);return b.apply(null,[c.forEachSeries].concat(e))}},l=function(b,c,e,d){var g=[],c=f(c,function(b,c){return{index:c,
value:b}});b(c,function(b,c){e(b.value,function(e,d){g[b.index]=d;c(e)})},function(b){d(b,g)})};c.map=j(l);c.mapSeries=h(l);c.reduce=function(b,e,d,f){c.forEachSeries(b,function(b,c){d(e,b,function(b,d){e=d;c(b)})},function(b){f(b,e)})};c.inject=c.reduce;c.foldl=c.reduce;c.reduceRight=function(b,e,d,g){b=f(b,function(b){return b}).reverse();c.reduce(b,e,d,g)};c.foldr=c.reduceRight;l=function(b,c,e,d){var g=[],c=f(c,function(b,c){return{index:c,value:b}});b(c,function(b,c){e(b.value,function(e){e&&
g.push(b);c()})},function(){d(f(g.sort(function(b,c){return b.index-c.index}),function(b){return b.value}))})};c.filter=j(l);c.filterSeries=h(l);c.select=c.filter;c.selectSeries=c.filterSeries;l=function(b,c,e,d){var g=[],c=f(c,function(b,c){return{index:c,value:b}});b(c,function(b,c){e(b.value,function(e){e||g.push(b);c()})},function(){d(f(g.sort(function(b,c){return b.index-c.index}),function(b){return b.value}))})};c.reject=j(l);c.rejectSeries=h(l);l=function(b,c,e,d){b(c,function(b,c){e(b,function(e){e?
(d(b),d=function(){}):c()})},function(){d()})};c.detect=j(l);c.detectSeries=h(l);c.some=function(b,e,d){c.forEach(b,function(b,c){e(b,function(b){b&&(d(!0),d=function(){});c()})},function(){d(!1)})};c.any=c.some;c.every=function(b,e,d){c.forEach(b,function(b,c){e(b,function(b){b||(d(!1),d=function(){});c()})},function(){d(!0)})};c.all=c.every;c.sortBy=function(b,e,d){c.map(b,function(b,c){e(b,function(e,d){e?c(e):c(null,{value:b,criteria:d})})},function(b,c){if(b)return d(b);d(null,f(c.sort(function(b,
c){var e=b.criteria,d=c.criteria;return e<d?-1:e>d?1:0}),function(b){return b.value}))})};c.auto=function(b,c){var c=c||function(){},e=i(b);if(!e.length)return c(null);var f={},j=[],h=function(b){j.unshift(b)},m=function(){d(j.slice(0),function(b){b()})};h(function(){i(f).length===e.length&&(c(null,f),c=function(){})});d(e,function(e){var d=b[e]instanceof Function?[b[e]]:b[e],i=function(b){if(b)c(b),c=function(){};else{var d=Array.prototype.slice.call(arguments,1);1>=d.length&&(d=d[0]);f[e]=d;m()}},
l=d.slice(0,Math.abs(d.length-1))||[],C=function(){return g(l,function(b,c){return b&&f.hasOwnProperty(c)},!0)};if(C())d[d.length-1](i,f);else{var n=function(){if(C()){for(var b=n,c=0;c<j.length;c+=1)if(j[c]===b){j.splice(c,1);break}d[d.length-1](i,f)}};h(n)}})};c.waterfall=function(b,e){if(!b.length)return e();var e=e||function(){},d=function(b){return function(f){if(f)e(f),e=function(){};else{var g=Array.prototype.slice.call(arguments,1),i=b.next();i?g.push(d(i)):g.push(e);c.nextTick(function(){b.apply(null,
g)})}}};d(c.iterator(b))()};c.parallel=function(b,e){e=e||function(){};if(b.constructor===Array)c.map(b,function(b,c){b&&b(function(b){var e=Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);c.call(null,b,e)})},e);else{var d={};c.forEach(i(b),function(c,e){b[c](function(b){var f=Array.prototype.slice.call(arguments,1);1>=f.length&&(f=f[0]);d[c]=f;e(b)})},function(b){e(b,d)})}};c.series=function(b,e){e=e||function(){};if(b.constructor===Array)c.mapSeries(b,function(b,c){b&&b(function(b){var e=
Array.prototype.slice.call(arguments,1);1>=e.length&&(e=e[0]);c.call(null,b,e)})},e);else{var d={};c.forEachSeries(i(b),function(c,e){b[c](function(b){var f=Array.prototype.slice.call(arguments,1);1>=f.length&&(f=f[0]);d[c]=f;e(b)})},function(b){e(b,d)})}};c.iterator=function(b){var c=function(e){var d=function(){b.length&&b[e].apply(null,arguments);return d.next()};d.next=function(){return e<b.length-1?c(e+1):null};return d};return c(0)};c.apply=function(b){var c=Array.prototype.slice.call(arguments,
1);return function(){return b.apply(null,c.concat(Array.prototype.slice.call(arguments)))}};l=function(b,c,e,d){var f=[];b(c,function(b,c){e(b,function(b,e){f=f.concat(e||[]);c(b)})},function(b){d(b,f)})};c.concat=j(l);c.concatSeries=h(l);c.whilst=function(b,e,d){b()?e(function(f){if(f)return d(f);c.whilst(b,e,d)}):d()};c.until=function(b,e,d){b()?d():e(function(f){if(f)return d(f);c.until(b,e,d)})};c.queue=function(b,e){var f=0,g={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,push:function(b,
f){b.constructor!==Array&&(b=[b]);d(b,function(b){g.tasks.push({data:b,callback:"function"===typeof f?f:null});g.saturated&&g.tasks.length==e&&g.saturated();c.nextTick(g.process)})},process:function(){if(f<g.concurrency&&g.tasks.length){var c=g.tasks.shift();g.empty&&0==g.tasks.length&&g.empty();f+=1;b(c.data,function(){f-=1;c.callback&&c.callback.apply(c,arguments);g.drain&&0==g.tasks.length+f&&g.drain();g.process()})}},length:function(){return g.tasks.length},running:function(){return f}};return g};
j=function(b){return function(c){var e=Array.prototype.slice.call(arguments,1);c.apply(null,e.concat([function(c){var e=Array.prototype.slice.call(arguments,1);"undefined"!==typeof console&&(c?console.error&&console.error(c):console[b]&&d(e,function(c){console[b](c)}))}]))}};c.log=j("log");c.dir=j("dir");c.memoize=function(b,c){var e={},d={},c=c||function(b){return b},f=function(){var f=Array.prototype.slice.call(arguments),g=f.pop(),i=c.apply(null,f);i in e?g.apply(null,e[i]):i in d?d[i].push(g):
(d[i]=[g],b.apply(null,f.concat([function(){e[i]=arguments;var b=d[i];delete d[i];for(var c=0,f=b.length;c<f;c++)b[c].apply(null,arguments)}])))};f.unmemoized=b;return f};c.unmemoize=function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}}}();B("dragscrollable")&&function(c){c.fn.dragscrollable=function(b){var e,d,f,g=c.extend({acceptPropagatedEvent:!0,preventDefault:!0,fxIgnore:function(){return!1}},b||{});f=function(b){if(!b.data.fxIgnore(b)){if(1!=b.which||!b.data.acceptPropagatedEvent&&
b.target!=this)return!1;b.data.lastCoord={left:b.clientX,top:b.clientY};c.event.add(document,"mouseup",e,b.data);c.event.add(document,"mousemove",d,b.data);if(b.data.preventDefault)return b.preventDefault(),!1}};d=function(b){var c=b.clientX-b.data.lastCoord.left,e=b.clientY-b.data.lastCoord.top;b.data.scrollable.scrollLeft(b.data.scrollable.scrollLeft()-c);b.data.scrollable.scrollTop(b.data.scrollable.scrollTop()-e);b.data.lastCoord={left:b.clientX,top:b.clientY};if(b.data.preventDefault)return b.preventDefault(),
!1};e=function(b){c.event.remove(document,"mousemove",d);c.event.remove(document,"mouseup",e);if(b.data.preventDefault)return b.preventDefault(),!1};this.each(function(){var b={scrollable:c(this),acceptPropagatedEvent:g.acceptPropagatedEvent,preventDefault:g.preventDefault,fxIgnore:g.fxIgnore};c(this).bind("mousedown",b,f)})}}(jQuery);require=!1;if(B("mixin")){var $a,X=Array.prototype.slice;$a=function(){var c,b,e,d,f,g,i;d=2<=arguments.length?X.call(arguments,0,f=arguments.length-1):(f=0,[]);c=arguments[f++];
for(f=0,g=d.length;f<g;f++)for(b in e=d[f],i=e.prototype,i)e=i[b],c.prototype[b]=e;return c};"undefined"!==typeof module&&null!==module&&(module.exports.mixin=$a)}if(B("sharedUtil")){require&&(_=require("underscore"));var ab,ca=Array.prototype.indexOf||function(c){for(var b=0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1};ab={lowerCaseFirstChar:function(c){return c[0].toLowerCase()+c.substr(1)},capitalize:function(c){return _.isString(c)&&!_.isEmpty(c)?c[0].toUpperCase()+c.substr(1):c},pluralize:function(c){return""+
c+"s"},traverse:function(c,b){var e,d,f;if(_.isEmpty(b)||!c)return c;if(_.isArray(b)){for(d=0,f=b.length;d<f&&!(e=b[d],c=c[e],!c);d++);return c}return c[b]},isSimpleObject:function(c){return c&&!_.isArray(c)&&!_.isDate(c)&&!c.prototype&&"object"===typeof c},escapeForRegex:function(c){return c.replace(/[-[\]{}()*+?.,\\\/^$|#\s]/g,"\\$&")},hasProtocol:function(c){return/^[a-z]+:/i.test(c)},makeSlug:function(c){var b;c&&(b=ab.removeAccents(c.toLowerCase()).replace(/[^a-z0-9]+/ig,"-").replace(/^-|-$/g,
""));return b||"-"},removeAccents:function(c){return c.replace(/[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5\u0101\u0103\u0105]/g,"a").replace(/\u00e6/g,"ae").replace(/[\u00e7\u0107\u0109\u010b\u010d]/g,"c").replace(/[\u010f\u0111]/g,"d").replace(/[\u00e8\u00e9\u00ea\u00eb\u0113\u0115\u0117\u0119\u011b]/g,"e").replace(/[\u011d\u011f\u0121\u0123]/g,"g").replace(/[\u0125\u0127]/g,"h").replace(/[\u00ec\u00ed\u00ee\u00ef\u0129\u012b\u012d\u012f\u0131]/g,"i").replace(/[\u00f1\u0144\u0146\u0148\u0149\u014b]/g,
"n").replace(/[\u00f2\u00f3\u00f4\u00f5\u00f6\u014d\u014f\u0151]/g,"o").replace(/\u0153/g,"oe").replace(/[\u015b\u015d\u015f\u0161]/g,"s").replace(/\u00df/g,"ss").replace(/[\u00f9\u00fa\u00fb\u00fc\u0169\u016b\u016d\u016f\u0171\u0173]/g,"u").replace(/[\u00fd\u00ff]/g,"y")},isShortId:function(c){return/^[0-9]{1,8}$/.test(c)},parseDate:function(c){return Date.parse(c)},compareMemberType:function(c,b,e,d){var f;null==d&&(d={});d=d.mode;null!=d?d:d="standard";switch(d){case "members":f=[["normal","admin"]];
break;default:f=[["org"],["normal"],["admin"]]}d=function(b){var e,d,h;d=c.getMemberType(b);for(e=0,h=f.length;e<h;e++)if(b=f[e],0<=ca.call(b,d))return e;return-1};b=d(b);e=d(e);return b>e?1:b<e?-1:0},isValidSearch:function(c){return 2<=(null!=c?c.length:void 0)||this.isShortId(c)},regexCardNumber:/\#(\d{1,7})(?=$|\s|[;:,.!?\)\}\]\<\>])/,regexLink:/\b((?:https?:\/\/|ftp:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,
cleanLink:function(c){c.match(/^(https?|ftp):\/\//)||(c="http://"+c);return c}};"undefined"!==typeof module&&null!==module&&(module.exports=ab)}if(B("versions")){require&&(_=require("underscore"));var za;za={parseVersion:function(c){var b,e,d,f;b=c.split(".");if(0<b.length){f=[];for(e=0,d=b.length;e<d;e++)c=b[e],f.push(parseInt(c,10)||0);return f}return[0]},compareVersions:function(c,b){var e,d,f,g,i,j,h;e=Math.max(c.length,b.length);j=_.zip(c,b);for(g=0,i=j.length;g<i;g++){h=j[g];d=h[0];f=h[1];null!=
d?d:d=0;null!=f?f:f=0;if(d>f)return e;if(f>d)return-e;e--}return 0},differInMostMinorOnly:function(c){return-2<c&&2>c},compareStringVersions:function(c,b){var e,d,f;f=_.map([c,b],za.parseVersion);e=f[0];d=f[1];return za.compareVersions(e,d)}};"undefined"!==typeof module&&null!==module&&(module.exports=za)}if(B("entityListGenerator")){require&&(_=require("underscore"),n=require("./sharedUtil.coffee"));var La,h=function(c,b){return function(){return c.apply(b,arguments)}};La=function(){function c(b){null==
b&&(b={});this.orderEntityList=h(this.orderEntityList,this);this.attachmentPreviewEntity=h(this.attachmentPreviewEntity,this);this.attachmentEntity=h(this.attachmentEntity,this);this.labelEntity=h(this.labelEntity,this);this.commentEntity=h(this.commentEntity,this);this.checkItemEntity=h(this.checkItemEntity,this);this.checklistEntity=h(this.checklistEntity,this);this.listEntity=h(this.listEntity,this);this.organizationEntity=h(this.organizationEntity,this);this.boardEntity=h(this.boardEntity,this);
this.cardEntity=h(this.cardEntity,this);this._getNameForBoard=h(this._getNameForBoard,this);this.textEntity=h(this.textEntity,this);this.memberEntity=h(this.memberEntity,this);this.getOrganizationUrl=h(this.getOrganizationUrl,this);this.getBoardUrl=h(this.getBoardUrl,this);this.getCardUrl=h(this.getCardUrl,this);this.makeFullUrl=h(this.makeFullUrl,this);this.fullUrls=b.fullUrls;this.domain=b.domain}var b;c.prototype.getId=function(b){var c;return""+(null!=(c=b.id)?c:b._id)};c.prototype.makeFullUrl=
function(b){return this.fullUrls?""+this.domain+"/"+b:"/"+b};b=function(b){return null!=b&&b.toJSON?b.toJSON():b};c.prototype.getCardUrl=function(c,d,f){c=b(c);d=b(d);return(f=b(f))?this.makeFullUrl("card/"+f.username+"/"+n.makeSlug(d.name)+"/"+this.getId(c)+"/"+this.getId(d)):d.idShort?this.makeFullUrl("card/"+n.makeSlug(d.name)+"/"+this.getId(c)+"/"+d.idShort):this.makeFullUrl("card/board/"+n.makeSlug(d.name)+"/"+this.getId(c)+"/"+this.getId(d))};c.prototype.getBoardUrl=function(c){c=b(c);return this.makeFullUrl("board/"+
n.makeSlug(c.name)+"/"+this.getId(c))};c.prototype.getOrganizationUrl=function(b){return this.makeFullUrl("org/"+this.getId(b))};c.prototype.getMember=function(){throw"not implemented";};c.prototype.getBoard=function(){return{}};c.prototype.memberEntity=function(b){var c,f;c=null!=(f=this.getMember(b))?f.toJSON():void 0;return!c?{type:"member",_id:""+this.idAction+"_"+b}:{type:"member",_id:""+this.idAction+"_"+c._id,id:this.getId(c),avatarHash:c.avatarHash,gravatarHash:c.gravatarHash,initials:c.initials,
fullName:c.fullName,username:c.username}};c.prototype.textEntity=function(b,c,f){null==f&&(f=!1);b={type:"text",_id:""+this.idAction+"_"+b,text:b};f&&(b.hideIfContext=!0,b.idContext=c);return b};c.prototype._getNameForBoard=function(b){var c,f;if(b&&null!=b.id&&null==b.name)return _.extend(b,null!=(c=null!=(f=this.getBoard(b.id))?f.toJSON():void 0)?c:{})};c.prototype.cardEntity=function(b,c,f){null==f&&(f=!1);f=_.extend({type:"card",hideIfContext:f,_id:""+this.idAction+"_"+b.id},b);return c?(this._getNameForBoard(c),
_.extend(f,{url:this.getCardUrl(c,b)})):f};c.prototype.boardEntity=function(b){this._getNameForBoard(b);return null!=(null!=b?b.name:void 0)?_.extend({type:"board",url:this.getBoardUrl(b),_id:""+this.idAction+"_"+b.id},b):this.textEntity("another board")};c.prototype.organizationEntity=function(b){return _.extend({type:"organization",url:this.getOrganizationUrl(b),_id:""+this.idAction+"_"+b.id},b)};c.prototype.listEntity=function(b,c){var f;f=""+this.idAction+"_"+b.id;c&&(f+="_"+c);return _.extend({type:"list",
_id:f},b)};c.prototype.checklistEntity=function(b){return _.extend({type:"checklist",_id:""+this.idAction+"_"+b.id},b)};c.prototype.checkItemEntity=function(b){return _.extend({type:"checkItem",_id:""+this.idAction+"_"+b.id},b)};c.prototype.commentEntity=function(b,c){return{type:"comment",_id:""+this.idAction+"_comment",text:b,embedly:c}};c.prototype.labelEntity=function(b,c){return{type:"label",_id:""+this.idAction+"_label",color:b,text:c}};c.prototype.attachmentEntity=function(b){b=_.extend({type:"attachment",
_id:""+this.idAction+"_"+b.id},b);b.link=b.url&&!b.isDeleted;return b};c.prototype.attachmentPreviewEntity=function(b){var c,b=_.extend({type:"attachmentPreview",_id:""+this.idAction+"_"+b.id+"_preview"},b);c=b.url&&!b.isDeleted;b.isImage=c&&/\.(png|gif|jpe?g|bmp)/i.test(b.url);b.canPreview=c&&(b.isImage||/\.txt/i.test(b.url));return b};c.prototype.orderEntityList=function(b){var c,f,g,i;c=0;for(g=0,i=b.length;g<i;g++)f=b[g],f.order=c++;return b};return c}();"undefined"!==typeof module&&null!==module&&
(module.exports.EntityListGenerator=La)}if(B("sharedActionList")){require&&(_=require("underscore"),La=require("./entityListGenerator.coffee").EntityListGenerator,n=require("./sharedUtil.coffee"));var bb,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},ca=Array.prototype.indexOf||function(c){for(var b=
0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1};bb=null;(function(){var c,b,e,d;bb=function(){function c(){this.getEntityLists=h(this.getEntityLists,this);this.getEntityList=h(this.getEntityList,this);this.getSingleEntityList=h(this.getSingleEntityList,this);this._getData=h(this._getData,this);this.getBoardInvitationEntityList=h(this.getBoardInvitationEntityList,this);this.getOrganizationInvitationEntityList=h(this.getOrganizationInvitationEntityList,this);this.getOrganizationEntityList=
h(this.getOrganizationEntityList,this);this.getCheckItemEntityList=h(this.getCheckItemEntityList,this);this.getChecklistEntityList=h(this.getChecklistEntityList,this);this.getListEntityList=h(this.getListEntityList,this);this.getMemberEntityList=h(this.getMemberEntityList,this);this.getCardEntityList=h(this.getCardEntityList,this);this.getBoardEntityList=h(this.getBoardEntityList,this);this.visibleTypes=_.difference(d,b)}var e,i,j,m,l,o,z;u(c,La);m=h(function(b){return/Card$/.test(b.type)},c);j=h(function(b){return b.idMemberCreator},
c);z=function(b){return"commentCard"===b||"moveCardFromBoard"===b||"moveCardToBoard"===b};e=h(function(b,c){var e,d;e=b.toJSON();d=c.toJSON();return j(e)!==j(d)||!m(e)||!m(d)||!e.data.card||!d.data.card||e.data.card.id!==d.data.card.id||z(e.type)||z(d.type)?!1:!0},c);i=h(function(b,c){var e,d;e=b.toJSON();d=c.toJSON();return z(d.type)||3E5<Math.abs(n.parseDate(e.date)-n.parseDate(d.date))||m(e)&&m(d)&&j(e)!==j(d)?!0:!1},c);l=h(function(c){var e,d,f,c=c.toJSON();return"updateCard"===c.type&&(null!=
c.data.listBefore||null!=(null!=(e=c.data.old)?e.closed:void 0))?!1:("updateMember"===(d=c.type)||"updateOrganization"===d)&&(null==c.data.old||null!=c.data.old.prefs&&1===_.keys(c.data.old).length)?!0:(f=c.type,0<=ca.call(b,f))},c);o=h(function(b){var c,e,d,f,g,i,j,h,m,l;if(1===b.length)return b;d={};h=function(b,c){var e,d,f,g,i,j;d=["name","desc","pos","closed"];for(f=0,g=d.length;f<g;f++)if(e=d[f],null!=(null!=(i=b.old)?i[e]:void 0)&&null!=(null!=(j=c.old)?j[e]:void 0))return!0;return null!=b.listBefore&&
null!=c.listBefore};for(i=0,m=b.length;i<m;i++){c=b[i];for(j=0,l=b.length;j<l;j++)if(e=b[j],i!==j&&!d[c.id]&&!d[e.id]){f=c.toJSON();g=e.toJSON();_.extend(f,f.data);_.extend(g,g.data);if("addMemberToCard"===f.type&&"removeMemberFromCard"===g.type&&f.idMember===g.idMember||"voteOnCard"===f.type&&"voteOnCard"===g.type&&f.voted!==g.voted||"addLabelToCard"===f.type&&"removeLabelFromCard"===g.type&&f.value===g.value||"addAttachmentToCard"===f.type&&"deleteAttachmentFromCard"===g.type&&f.attachment.id===
g.attachment.id||"addChecklistToCard"===f.type&&"removeChecklistFromCard"===g.type&&f.value===g.value||"updateCheckItemStateOnCard"===f.type&&"updateCheckItemStateOnCard"===g.type&&f.checkItem.name===g.checkItem.name&&f.checkItem.state!==g.checkItem.state)d[c.id]=!0,d[e.id]=!0;i<j&&"updateCard"===f.type&&"updateCard"===g.type&&h(f,g)&&(d[e.id]=!0)}}return _.reject(b,function(b){return d[b.id]})},c);c.prototype.getBoardEntityList=function(b,c){var e,d,f,g,i,j,m,l,o,n,z,s,q,t;switch(b.type){case "createBoard":return[this.textEntity("created"),
this.boardEntity(b.board)];case "copyBoard":return[this.textEntity("copied this board from"),this.boardEntity(b.boardSource)];case "updateBoard":if(null!=(null!=(e=b.old)?e.name:void 0))return[this.textEntity("renamed"),this.boardEntity(b.board),this.textEntity("(from "+b.old.name+")")];if(null!=(null!=(m=b.old)?m.desc:void 0))return[this.textEntity("changed description of"),this.boardEntity(b.board)];if(null!=(null!=(l=b.old)?l.closed:void 0))return[this.textEntity(b.board.closed?"closed":"re-opened"),
this.boardEntity(b.board)];if(null!=(null!=(o=b.old)?o.prefs:void 0)){e=h(function(c,e,d,f){var g;g=b.board.prefs[c];if("none"===g)return[this.textEntity(d),this.boardEntity(b.board)];c=function(){switch(g){case "members":case "private":return"its members";case "org":return"members of its organization";case "public":return"the public";case "owners":return"its owners"}}();return[this.textEntity(e),this.boardEntity(b.board),this.textEntity(""+f+" to "+c)]},this);if(null!=(null!=(n=b.old)?null!=(z=n.prefs)?
z.voting:void 0:void 0))return e("voting","made voting on","disabled voting on","available");if(null!=(null!=(s=b.old)?null!=(q=s.prefs)?q.comments:void 0:void 0))return e("comments","made commenting on","disabled commenting on","available");if(null!=(null!=(t=b.old)?null!=(d=t.prefs)?d.invitations:void 0:void 0))return e("invitations","made inviting on","disabled inviting on","available");if(null!=(null!=(f=b.old)?null!=(g=f.prefs)?g.permissionLevel:void 0:void 0))return e("permissionLevel","made",
"hid","visible");if(null!=(null!=(i=b.old)?null!=(j=i.prefs)?j.selfJoin:void 0:void 0))return[this.textEntity((b.board.prefs.selfJoin?"enabled":"disabled")+" self join on"),this.boardEntity(b.board)]}break;case "addMemberToBoard":return null!=b.idMemberAdded?[this.textEntity("added"),this.memberEntity(b.idMemberAdded),this.textEntity("to"),this.boardEntity(b.board)]:[this.textEntity("joined"),this.boardEntity(b.board)];case "removeMemberFromBoard":return b.idMember===c?[this.textEntity("left"),this.boardEntity(b.board)]:
[this.textEntity("removed"),this.memberEntity(b.idMember),this.textEntity("from"),this.boardEntity(b.board)];case "addAdminToBoard":return[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("an owner of"),this.boardEntity(b.board)];case "removeAdminFromBoard":return b.idMember===c?[this.textEntity("gave up ownership of"),this.boardEntity(b.board)]:[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("a normal user on"),this.boardEntity(b.board)];case "addToOrganizationBoard":return[this.textEntity("added"),
this.boardEntity(b.board),this.textEntity("to"),this.organizationEntity(b.organization)];case "removeFromOrganizationBoard":return[this.textEntity("removed"),this.boardEntity(b.board),this.textEntity("from an organization")];case "moveCardFromBoard":return[this.textEntity("transferred"),this.cardEntity(b.card,b.boardTarget),this.textEntity("to"),this.boardEntity(b.boardTarget)];case "moveCardToBoard":return[this.textEntity("transferred"),this.cardEntity(b.card,b.board),this.textEntity("from"),this.boardEntity(b.boardSource)]}};
c.prototype.getCardEntityList=function(b,c,e){var d,f,g,i,j,h;d=null!=(f=e.grouped)?f:!1;if(e.includeBoard)return _.flatten([this.getCardEntityList(b,c,_.extend({},e,{includeBoard:!1})),this.textEntity("on"),this.boardEntity(b.board)]);switch(b.type){case "createCard":return[this.textEntity("added"),this.cardEntity(b.card,b.board),this.textEntity("to"),this.listEntity(b.list)];case "updateCard":if(null!=b.listBefore)return d?[this.textEntity("moved from"),this.listEntity(b.listBefore,"old"),this.textEntity("to"),
this.listEntity(b.listAfter)]:[this.textEntity("moved"),this.cardEntity(b.card,b.board),this.textEntity("from"),this.listEntity(b.listBefore,"old"),this.textEntity("to"),this.listEntity(b.listAfter)];if(null!=(null!=(g=b.old)?g.name:void 0))return d?[this.textEntity("changed the name (from "+b.old.name+")")]:[this.textEntity("renamed"),this.cardEntity(b.card,b.board),this.textEntity("(from "+b.old.name+")")];if(null!=(null!=(i=b.old)?i.desc:void 0))return d?[this.textEntity("changed description")]:
[this.textEntity("changed description of"),this.cardEntity(b.card,b.board)];if(null!=(null!=(j=b.old)?j.pos:void 0))return c=b.old.pos<b.card.pos,d?[this.textEntity("moved "+(c?"higher":"lower")+" in"),this.listEntity(b.list)]:[this.textEntity("moved"),this.cardEntity(b.card,b.board),this.textEntity((c?"higher":"lower")+" in"),this.listEntity(b.list)];if(null!=(null!=(h=b.old)?h.closed:void 0)){if(d)return[this.textEntity(b.card.closed?"archived":"sent to the board")];d=[this.textEntity(b.card.closed?
"archived":"sent"),this.cardEntity(b.card,b.board)];b.card.closed||d.push(this.textEntity("to the board"));return d}break;case "commentCard":return[this.textEntity("on",b.card.id,!0),this.cardEntity(b.card,b.board,!0),this.commentEntity(b.text,b.embedly)];case "addMemberToCard":return b.idMember===c?d?[this.textEntity("joined")]:[this.textEntity("joined"),this.cardEntity(b.card,b.board)]:d?[this.textEntity("added"),this.memberEntity(b.idMember)]:[this.textEntity("added"),this.memberEntity(b.idMember),
this.textEntity("to"),this.cardEntity(b.card,b.board)];case "removeMemberFromCard":return b.idMember===c?d?[this.textEntity("left")]:[this.textEntity("left"),this.cardEntity(b.card,b.board)]:d?[this.textEntity("removed"),this.memberEntity(b.idMember)]:[this.textEntity("removed"),this.memberEntity(b.idMember),this.textEntity("from"),this.cardEntity(b.card,b.board)];case "addChecklistToCard":return d?[this.textEntity("added"),this.checklistEntity(b.checklist)]:[this.textEntity("added"),this.checklistEntity(b.checklist),
this.textEntity("to"),this.cardEntity(b.card,b.board)];case "removeChecklistFromCard":return d?[this.textEntity("removed"),this.checklistEntity(b.checklist)]:[this.textEntity("removed"),this.checklistEntity(b.checklist),this.textEntity("from"),this.cardEntity(b.card,b.board)];case "voteOnCard":return[this.textEntity(b.voted?"voted for":"removed vote for"),this.cardEntity(b.card,b.board)];case "addLabelToCard":return d?[this.textEntity("added"),this.labelEntity(b.value,b.text)]:[this.textEntity("added the"),
this.labelEntity(b.value,b.text),this.textEntity("label to"),this.cardEntity(b.card,b.board)];case "removeLabelFromCard":return d?[this.textEntity("removed"),this.labelEntity(b.value,b.text)]:[this.textEntity("removed the"),this.labelEntity(b.value,b.text),this.textEntity("label from"),this.cardEntity(b.card,b.board)];case "updateCheckItemStateOnCard":c="complete"===b.checkItem.state;return d?(d=[this.textEntity(c?"completed":"marked"),this.checkItemEntity(b.checkItem)],c||d.push(this.textEntity("incomplete")),
d):[this.textEntity(c?"completed":"marked"),this.checkItemEntity(b.checkItem),this.textEntity(c?"on":"incomplete on"),this.cardEntity(b.card,b.board)];case "addAttachmentToCard":return d?[this.textEntity("attached"),this.attachmentEntity(b.attachment),this.attachmentPreviewEntity(b.attachment)]:[this.textEntity("attached"),this.attachmentEntity(b.attachment),this.textEntity("to"),this.cardEntity(b.card,b.board),this.attachmentPreviewEntity(b.attachment)];case "deleteAttachmentFromCard":return d?[this.textEntity("deleted"),
this.attachmentEntity(b.attachment)]:[this.textEntity("deleted the"),this.attachmentEntity(b.attachment),this.textEntity("attachment from"),this.cardEntity(b.card,b.board)]}};c.prototype.getMemberEntityList=function(b){var c,e,d,f;switch(b.type){case "updateMember":if(null!=(null!=(c=b.old)?c.bio:void 0))return[this.textEntity("updated their bio")];if(null!=(null!=(e=b.old)?e.username:void 0))return[this.textEntity("updated their username")];if(null!=(null!=(d=b.old)?d.initials:void 0))return[this.textEntity("updated their initials")];
if(null!=(null!=(f=b.old)?f.fullName:void 0))return[this.textEntity("updated their display name")]}};c.prototype.getListEntityList=function(b,c,e){var d,f,g,i;if(e.includeBoard)return _.flatten([this.getListEntityList(b,c,_.extend({},e,{includeBoard:!1})),this.textEntity("on"),this.boardEntity(b.board)]);switch(b.type){case "createList":return[this.textEntity("added"),this.listEntity(b.list),this.textEntity("to"),this.boardEntity(b.board)];case "updateList":if(null!=(null!=(f=b.old)?f.name:void 0))return[this.textEntity("renamed"),
this.listEntity(b.list),this.textEntity("(from "+b.old.name+")")];if(null!=(null!=(g=b.old)?g.pos:void 0))return c=(null!=(d=b.old)?d.pos:void 0)>b.list.pos,[this.textEntity("moved"),this.listEntity(b.list),this.textEntity((c?"left":"right")+" on"),this.boardEntity(b.board)];if(null!=(null!=(i=b.old)?i.closed:void 0))return d=[this.textEntity(b.list.closed?"archived":"sent"),this.listEntity(b.list)],b.list.closed||d.push(this.textEntity("to the board")),d}};c.prototype.getChecklistEntityList=function(b){var c;
switch(b.type){case "createChecklist":return[this.textEntity("created"),this.checklistEntity(b.checklist),this.textEntity("on"),this.cardEntity(b.card,b.board)];case "updateChecklist":if(null!=(null!=(c=b.old)?c.name:void 0))return[this.textEntity("renamed"),this.checklistEntity(b.checklist),this.textEntity("(from "+b.old.name+")")]}};c.prototype.getCheckItemEntityList=function(b){var c,e;switch(b.type){case "updateCheckItem":if(null!=(null!=(c=b.old)?c.name:void 0))return[this.textEntity("renamed"),
this.checkItemEntity(b.checkItem),this.textEntity("(from "+b.old.name+")")];if(null!=(null!=(e=b.old)?e.pos:void 0))return c=b.old.pos>b.checkItem.pos,[this.textEntity("moved"),this.checkItemEntity(b.checkItem),this.textEntity((c?"higher":"lower")+" in the checklist"),this.checklistEntity(b.checklist)];break;case "deleteCheckItem":return[this.textEntity("deleted task"),this.checkItemEntity(b.checkItem),this.textEntity("on"),this.checklistEntity(b.checklist)];case "convertToCardFromCheckItem":return[this.textEntity("converted"),
this.cardEntity(b.card,b.board),this.textEntity("from a checklist item on"),this.cardEntity(b.cardSource,b.board)]}};c.prototype.getOrganizationEntityList=function(b,c){var e,d,f,g;switch(b.type){case "createOrganization":return[this.textEntity("created"),this.organizationEntity(b.organization)];case "updateOrganization":if(null!=(null!=(e=b.old)?e.description:void 0))return[this.textEntity("changed description of"),this.organizationEntity(b.organization)];if(null!=(null!=(d=b.old)?d.name:void 0))return[this.textEntity("changed name of"),
this.organizationEntity(b.organization)];if(null!=(null!=(f=b.old)?f.displayName:void 0))return[this.textEntity("changed display name of"),this.organizationEntity(b.organization)];if(null!=(null!=(g=b.old)?g.website:void 0))return[this.textEntity("changed website of"),this.organizationEntity(b.organization)];break;case "addMemberToOrganization":return[this.textEntity("joined"),this.organizationEntity(b.organization)];case "removeMemberFromOrganization":return b.idMember===c?[this.textEntity("left"),
this.organizationEntity(b.organization)]:[this.textEntity("removed"),this.memberEntity(b.idMember),this.textEntity("from"),this.organizationEntity(b.organization)];case "addAdminToOrganization":return[this.textEntity("made"),this.memberEntity(b.idMember),this.textEntity("an owner of"),this.organizationEntity(b.organization)];case "removeAdminFromOrganization":return b.idMember===c?[this.textEntity("gave up ownership of"),this.organizationEntity(b.organization)]:[this.textEntity("made"),this.memberEntity(b.idMember),
this.textEntity("a normal user on"),this.organizationEntity(b.organization)]}};c.prototype.getOrganizationInvitationEntityList=function(b){switch(b.type){case "createOrganizationInvitation":return[this.textEntity("created an invitation to"),this.organizationEntity(b.organization)];case "deleteOrganizationInvitation":return[this.textEntity("deleted an invitation to"),this.organizationEntity(b.organization)]}};c.prototype.getBoardInvitationEntityList=function(b){switch(b.type){case "createBoardInvitation":return[this.textEntity("created an invitation to"),
this.boardEntity(b.board)];case "deleteBoardInvitation":return[this.textEntity("deleted an invitation to"),this.boardEntity(b.board)]}};c.prototype._getData=function(b,c){var e,d,f,g,i,j;e=c.toJSON();f=b.toJSON();e=_.extend({},e,e.data);j=["card","list","board"];for(g=0,i=j.length;g<i;g++)d=j[g],null!=f.data[d]&&(e.data[d]=f.data[d]);return e};c.prototype.getSingleEntityList=function(b,c,e){var d,f,g;d=this._getData(b,c);g=this.memberEntity(d.idMemberCreator);f={Board:"getBoardEntityList",Member:"getMemberEntityList",
Card:"getCardEntityList",List:"getListEntityList",Checklist:"getChecklistEntityList",CheckItem:"getCheckItemEntityList",Organization:"getOrganizationEntityList",OrganizationInvitation:"getOrganizationInvitationEntityList",BoardInvitation:"getBoardInvitationEntityList"};b=h(function(){var b,c;for(c in f)if(b=f[c],RegExp(c+"$").test(d.type))return this[b](d,g.id,e)},this)();null!=b?b:b=[];b.unshift(g);this.orderEntityList(b);return b};c.prototype.getEntityList=function(b,c,e){var d,f,g,i,j,h,m;this.idAction=
this.getId(c[0]);if(1===c.length)return b=this.getSingleEntityList(b,c[0],e),{entities:b,list:b};j=this.memberEntity(c[0].get("idMemberCreator"));g=_.detect(c,function(b){return"createCard"===b.get("type")});f=[];for(h=0,m=c.length;h<m;h++)if(d=c[h],"createCard"!==d.get("type")&&(i=d.toJSON(),_.extend(i,i.data),this.idAction=this.getId(d),d=this.getCardEntityList(i,j.id,_.extend({},e,{grouped:!0}))))this.orderEntityList(d),f.push({_id:this.idAction,entities:d,list:d});this.idAction=this.getId(c[0]);
d=[j];g?(d=d.concat(this.getCardEntityList(this._getData(b,g),j.id,_.extend({},e,{grouped:!0}))),d.push(this.textEntity("and"))):d.push(this.cardEntity(b.get("data").card,c[0].get("data").board,!0));this.orderEntityList(d);return{entities:d,list:d,children:f}};c.prototype.getMember=function(){throw"NotImplemented";};c.prototype.getBoard=function(){return{}};c.prototype.getEntityLists=function(b,c){var d,f,j,h,m,n,z,v,s,q,t;null==c&&(c={});c=_.extend({},{compact:!0},c);v=0;h=[];j={};for(m=0,s=b.length;m<
s;m++)if(d=b[m],!j[d.id]){if(null!=c.limit&&v>=c.limit)break;f=[d];for(z=q=m+1,t=b.length;q<=t?z<t:z>t;q<=t?z++:z--){n=b[z];if(i(d,n))break;e(d,n)&&(f.push(n),j[n.id]=!0)}_.isEmpty(f)||(z=f[0],f=o(_.reject(f,l)),_.isEmpty(f)||(n=_.pluck([z].concat(f),"id").join("_"),c.key&&(n=c.key+"_"+n),d=f[0].get("date"),h.push(_.extend(this.getEntityList(z,f,c),{db_id:this.getId(f[0]),_id:n,date:d})),v++))}return h};return c}.call(this);d="addAdminToBoard,addAdminToOrganization,addAttachmentToCard,addBoardsPinnedToMember,addChecklistToCard,addLabelToCard,addMemberToBoard,addMemberToCard,addMemberToOrganization,addToOrganizationBoard,commentCard,convertToCardFromCheckItem,copyBoard,createBoard,createBoardInvitation,createBoardPreference,createCard,createChecklist,createList,createOrganization,createOrganizationInvitation,deleteAttachmentFromCard,deleteBoardInvitation,deleteCheckItem,deleteOrganizationInvitation,moveCardFromBoard,moveCardToBoard,removeAdminFromBoard,removeAdminFromOrganization,removeBoardsPinnedFromMember,removeChecklistFromCard,removeFromOrganizationBoard,removeLabelFromCard,removeMemberFromBoard,removeMemberFromCard,removeMemberFromOrganization,updateBoard,updateCard,updateCheckItem,updateCheckItemStateOnCard,updateChecklist,updateList,updateMember,updateOrganization,voteOnCard".split(",");
e=["updateCard:idList","updateCard:closed","updateCard:desc","updateCard:name"];b="addAdminToBoard,addAdminToOrganization,addBoardsPinnedToMember,addLabelToCard,createBoardInvitation,createBoardPreference,createChecklist,createOrganizationInvitation,deleteCheckItem,removeBoardsPinnedFromMember,removeLabelFromCard,removeMemberFromBoard,removeMemberFromOrganization,updateCard,updateCheckItem,updateList,voteOnCard".split(",");c=_.difference(b,["updateCard"]);c=_.difference(_.union(d,e),c);return"undefined"!==
typeof module&&null!==module?_.extend(module.exports,{SharedActionList:bb,types:d,ignoredTypes:b,qualifiedTypes:e,allowedTypesApi:c}):bb})()}if(B("sharedNotification")){require&&(_=require("underscore"),La=require("./entityListGenerator.coffee").EntityListGenerator);var vb,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;
c.__super__=b.prototype;return c};vb=function(){function c(){this.getEntityLists=h(this.getEntityLists,this);this.getEntityList=h(this.getEntityList,this);c.__super__.constructor.apply(this,arguments)}u(c,La);c.prototype.getEntityList=function(b){var c,d,f,g,i,j,h,l,o,n;this.idAction=this.getId(b);_.isFunction(b.toJSON)&&(b=b.toJSON());c=b.data;d=[this.memberEntity(b.idMemberCreator)];if(/Card$/.test(b.type)){switch(b.type){case "addedMemberToCard":b.idMemberCreator===(null!=(f=c.member)?f.id:void 0)?
d.push(this.textEntity("joined the card")):(d.push(this.textEntity("added")),d.push(this.memberEntity(null!=(g=c.member)?g.id:void 0)),d.push(this.textEntity("to the card")));break;case "removedMemberFromCard":b.idMemberCreator===(null!=(i=c.member)?i.id:void 0)?d.push(this.textEntity("left the card")):(d.push(this.textEntity("removed")),d.push(this.memberEntity(null!=(j=c.member)?j.id:void 0)),d.push(this.textEntity("from the card")));break;case "changeCard":null!=(null!=(h=c.old)?h.name:void 0)?
d.push(this.textEntity("renamed the card")):null!=(null!=(l=c.old)?l.desc:void 0)?d.push(this.textEntity("updated the description of the card")):null!=(null!=(o=c.old)?o.closed:void 0)?c.card.closed?d.push(this.textEntity("archived the card")):d.push(this.textEntity("unarchived the card")):null!=c.listAfter?d.push(this.textEntity("moved the card")):d.push(this.textEntity("changed the card"));break;default:d.push(this.textEntity({commentCard:"commented on the card",addedToCard:"added you to the card",
removedFromCard:"removed you from the card",mentionedOnCard:"mentioned you on the card"}[b.type]))}d.push(this.cardEntity(c.card,c.board));"changeCard"===b.type&&null!=c.listAfter&&(d.push(this.textEntity("to")),d.push(this.listEntity(c.listAfter)));d.push(this.textEntity("on"));d.push(this.boardEntity(c.board));("commentCard"===(n=b.type)||"mentionedOnCard"===n)&&null!=c.text&&d.push(this.commentEntity(c.text))}else/Board$/.test(b.type)?(d.push(this.textEntity({removedFromBoard:"removed you from the board",
invitedToBoard:"invited you to the board",addedToBoard:"added you to the board",addAdminToBoard:"made you a co-owner on the board",closeBoard:"closed the board"}[b.type])),d.push(this.boardEntity(c.board))):/Organization$/.test(b.type)&&(d.push(this.textEntity({removedFromOrganization:"removed you from the organization",invitedToOrganization:"invited you to the organization",addAdminToOrganization:"made you an admin on the organization"}[b.type])),d.push(this.organizationEntity(c.organization)));
for(c=0,f=d.length;c<f;c++)b=d[c],b[b.type+"Type"]=!0;return this.orderEntityList(d)};c.prototype.getEntityLists=function(b){var c,d,f,g;g=[];for(d=0,f=b.length;d<f;d++)c=b[d],g.push(this.getEntityList(c));return g};return c}();"undefined"!==typeof module&&null!==module&&(module.exports.SharedNotification=vb)}if(B("sharedABTest")){require&&(_=require("underscore"));var Eb;Eb=function(){function c(){}c.prototype.getDefaultId=function(){return""};c.prototype.event=function(){};c.prototype.inTest=function(b,
c){null!=c?c:c=this.getDefaultId();return 0!==parseInt(this._hasher(c+b)[0],16)%2};c.prototype.templateData=function(b,c){var d,f,g,i,j,h;f=/{{[\#\^]AB_([a-z0-9_]*)}}/ig;for(d={};g=null!=(h=f.exec(b))?h[1]:void 0;)null!=(j=d[i="AB_"+g])?j:d[i]=this.inTest(g,c);return d};c.prototype._hasher=function(){var b,c,d,f,g,i,j,h,l,o,n,s,w,q;f=0;s=function(d){return b(c(o(d),8*d.length))};n=function(b){var c,e,d,g;try{f}catch(i){f=0}c=f?"0123456789ABCDEF":"0123456789abcdef";d="";for(e=0;e<b.length;)g=b.charCodeAt(e),
d+=c.charAt(g>>>4&15)+c.charAt(g&15),e++;return d};q=function(b){var c,e,d,f;e="";for(c=-1;++c<b.length;)d=b.charCodeAt(c),f=c+1<b.length?b.charCodeAt(c+1):0,55296<=d&&56319>=d&&56320<=f&&57343>=f&&(d=65536+((d&1023)<<10)+(f&1023),c++),127>=d?e+=String.fromCharCode(d):2047>=d?e+=String.fromCharCode(192|d>>>6&31,128|d&63):65535>=d?e+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|d&63):2097151>=d&&(e+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|d&63));return e};o=function(b){var c,
e;e=Array(b.length>>2);for(c=0;c<e.length;)e[c]=0,c++;for(c=0;c<8*b.length;)e[c>>5]|=(b.charCodeAt(c/8)&255)<<c%32,c+=8;return e};b=function(b){var c,e;e="";for(c=0;c<32*b.length;)e+=String.fromCharCode(b[c>>5]>>>c%32&255),c+=8;return e};c=function(b,c){var e,d,f,g,o,n,z,s,q;b[c>>5]|=128<<c%32;b[(c+64>>>9<<4)+14]=c;e=1732584193;d=-271733879;f=-1732584194;g=271733878;for(o=0;o<b.length;)n=e,z=d,s=f,q=g,e=i(e,d,f,g,b[o+0],7,-680876936),g=i(g,e,d,f,b[o+1],12,-389564586),f=i(f,g,e,d,b[o+2],17,606105819),
d=i(d,f,g,e,b[o+3],22,-1044525330),e=i(e,d,f,g,b[o+4],7,-176418897),g=i(g,e,d,f,b[o+5],12,1200080426),f=i(f,g,e,d,b[o+6],17,-1473231341),d=i(d,f,g,e,b[o+7],22,-45705983),e=i(e,d,f,g,b[o+8],7,1770035416),g=i(g,e,d,f,b[o+9],12,-1958414417),f=i(f,g,e,d,b[o+10],17,-42063),d=i(d,f,g,e,b[o+11],22,-1990404162),e=i(e,d,f,g,b[o+12],7,1804603682),g=i(g,e,d,f,b[o+13],12,-40341101),f=i(f,g,e,d,b[o+14],17,-1502002290),d=i(d,f,g,e,b[o+15],22,1236535329),e=j(e,d,f,g,b[o+1],5,-165796510),g=j(g,e,d,f,b[o+6],9,-1069501632),
f=j(f,g,e,d,b[o+11],14,643717713),d=j(d,f,g,e,b[o+0],20,-373897302),e=j(e,d,f,g,b[o+5],5,-701558691),g=j(g,e,d,f,b[o+10],9,38016083),f=j(f,g,e,d,b[o+15],14,-660478335),d=j(d,f,g,e,b[o+4],20,-405537848),e=j(e,d,f,g,b[o+9],5,568446438),g=j(g,e,d,f,b[o+14],9,-1019803690),f=j(f,g,e,d,b[o+3],14,-187363961),d=j(d,f,g,e,b[o+8],20,1163531501),e=j(e,d,f,g,b[o+13],5,-1444681467),g=j(g,e,d,f,b[o+2],9,-51403784),f=j(f,g,e,d,b[o+7],14,1735328473),d=j(d,f,g,e,b[o+12],20,-1926607734),e=h(e,d,f,g,b[o+5],4,-378558),
g=h(g,e,d,f,b[o+8],11,-2022574463),f=h(f,g,e,d,b[o+11],16,1839030562),d=h(d,f,g,e,b[o+14],23,-35309556),e=h(e,d,f,g,b[o+1],4,-1530992060),g=h(g,e,d,f,b[o+4],11,1272893353),f=h(f,g,e,d,b[o+7],16,-155497632),d=h(d,f,g,e,b[o+10],23,-1094730640),e=h(e,d,f,g,b[o+13],4,681279174),g=h(g,e,d,f,b[o+0],11,-358537222),f=h(f,g,e,d,b[o+3],16,-722521979),d=h(d,f,g,e,b[o+6],23,76029189),e=h(e,d,f,g,b[o+9],4,-640364487),g=h(g,e,d,f,b[o+12],11,-421815835),f=h(f,g,e,d,b[o+15],16,530742520),d=h(d,f,g,e,b[o+2],23,-995338651),
e=l(e,d,f,g,b[o+0],6,-198630844),g=l(g,e,d,f,b[o+7],10,1126891415),f=l(f,g,e,d,b[o+14],15,-1416354905),d=l(d,f,g,e,b[o+5],21,-57434055),e=l(e,d,f,g,b[o+12],6,1700485571),g=l(g,e,d,f,b[o+3],10,-1894986606),f=l(f,g,e,d,b[o+10],15,-1051523),d=l(d,f,g,e,b[o+1],21,-2054922799),e=l(e,d,f,g,b[o+8],6,1873313359),g=l(g,e,d,f,b[o+15],10,-30611744),f=l(f,g,e,d,b[o+6],15,-1560198380),d=l(d,f,g,e,b[o+13],21,1309151649),e=l(e,d,f,g,b[o+4],6,-145523070),g=l(g,e,d,f,b[o+11],10,-1120210379),f=l(f,g,e,d,b[o+2],15,
718787259),d=l(d,f,g,e,b[o+9],21,-343485551),e=w(e,n),d=w(d,z),f=w(f,s),g=w(g,q),o+=16;return[e,d,f,g]};g=function(b,c,e,f,g,i){return w(d(w(w(c,b),w(f,i)),g),e)};i=function(b,c,e,d,f,i,j){return g(c&e|~c&d,b,c,f,i,j)};j=function(b,c,e,d,f,i,j){return g(c&d|e&~d,b,c,f,i,j)};h=function(b,c,e,d,f,i,j){return g(c^e^d,b,c,f,i,j)};l=function(b,c,e,d,f,i,j){return g(e^(c|~d),b,c,f,i,j)};w=function(b,c){var e;e=(b&65535)+(c&65535);return(b>>16)+(c>>16)+(e>>16)<<16|e&65535};d=function(b,c){return b<<c|b>>>
32-c};return function(b){return n(s(q(b)))}}();return c}();"undefined"!==typeof module&&null!==module&&(module.exports=Eb)}if(B("payloads")){var Aa,uc,vc,wc,cb,xc,yc,Fb,zc,Ac,Bc;cb="addAttachmentToCard,addChecklistToCard,addMemberToCard,commentCard,convertToCardFromCheckItem,createCard,deleteAttachmentFromCard,moveCardFromBoard,moveCardToBoard,removeChecklistFromCard,removeMemberFromCard,updateCard:idList,updateCard:closed,updateCheckItemStateOnCard";Aa=[cb,"addMemberToBoard,addToOrganizationBoard,copyBoard,createBoard,createList,removeAdminFromBoard,removeFromOrganizationBoard,updateBoard"].join();
Fb=[Aa,"updateMember"].join();uc={cards:"visible",members:"all",member_fields:"fullName,initials,username,avatarHash,status",membersInvited:"all",membersInvited_fields:"fullName,initials,username,avatarHash",organization:!0,organization_fields:"name,displayName,desc,memberships",myPrefs:!0,fields:"name,desc,closed,idOrganization,pinned,url,prefs,invitations,memberships,labelNames,invited"};wc=function(c){return{boards:c,board_fields:"name,idOrganization",organizations:"all",organization_fields:"name,displayName"}};
vc={fields:"",idBoardsPinned:!0,boards:"pinned",board_fields:"name,closed,prefs,idOrganization",board_actions:Aa,board_actions_format:"count",board_actions_limit:101,board_actions_since:"lastView",organizations:"all",organization_fields:"name,displayName,prefs"};cb={actions:cb,members:!0,member_fields:"fullName,initials,username,avatarHash,status",actions_limit:1E3,attachments:!0};xc={lists:"all",cards:"visible",members:"all",member_fields:"fullName,initials,username,avatarHash,status",membersInvited:"all",
membersInvited_fields:"fullName,initials,username,avatarHash",checklists:"all",organization:!0,organization_fields:"name,displayName,desc,url,website,memberships",myPrefs:!0,actions:Aa,actions_limit:50,fields:"name,desc,closed,idOrganization,pinned,url,prefs,invitations,memberships,labelNames,invited"};yc={tokens:"all"};zc={boards:"open",board_fields:"name,closed,prefs,idOrganization",board_actions:Aa,board_actions_format:"count",board_actions_limit:101,board_actions_since:"lastView",boardsInvited:"all",
boardsInvited_fields:"name,closed,prefs,idOrganization",organizations:"all",organization_fields:"name,displayName,prefs",organizationsInvited:"all",organizationsInvited_fields:"name,displayName,prefs"};Ac={actions:"all",actions_limit:50,organizations:"all",organization_fields:"name,displayName,prefs",boards:"open",board_fields:"name,prefs,idOrganization"};Bc={boards:"all",board_fields:"name,closed,prefs,idOrganization",board_actions:Aa,board_actions_format:"count",board_actions_limit:101,board_actions_since:"lastView",
fields:"all",members:"all",member_fields:"fullName,initials,username,avatarHash,status"}}if(B("storage")){var T;T=new (function(){function c(){}c.prototype._storage=x.localStorage;c.prototype.enabled=function(){return null!=this._storage};c.prototype.set=function(b,c){var d;return null!=(d=this._storage)?d[b]=JSON.stringify(c):void 0};c.prototype.get=function(b){var c;if(b=null!=(c=this._storage)?c[b]:void 0)try{return JSON.parse(b)}catch(d){return null}else return null};c.prototype.unset=function(b){var c,
d;if(null!=(null!=(c=this._storage)?c[b]:void 0))return null!=(d=this._storage)?delete d[b]:void 0};return c}())}if(B("logger")){var Gb,J,h=function(c,b){return function(){return c.apply(b,arguments)}},X=Array.prototype.slice;Gb=new (function(){function c(){this.log=h(this.log,this);var b;this.enabled=null!=(b=T.get("loggers"))?b:{};this.historyMap={};this.logHistory=!1}c.prototype.log=function(){var b,c,d,f,g;d=arguments[0];b=2<=arguments.length?X.call(arguments,1):[];"undefined"!==typeof console&&
null!==console&&console.log&&(0===b.length?(c=!0,b.push(d),d="all"):c=this.enabled.all||this.enabled[d],c&&(1===b.length&&_.isArray(b[0])&&(b=b[0]),b.unshift(d),$("body").is(".chrome")?console.log(b):console.dir(b)),this.logHistory&&(null!=(g=(f=this.historyMap)[d])?g:f[d]=[],this.historyMap[d].push(b)))};c.prototype.enable=function(b){null==b&&(b="all");this.enabled[b]=!0;this.save()};c.prototype.disable=function(b){null==b&&(b="all");delete this.enabled[b];this.save()};c.prototype.disableAll=function(){this.enabled=
{};this.save()};c.prototype.enableAll=function(){this.enabled.all=!0;this.save()};c.prototype.history=function(b){var c,d,f;if(b in this.historyMap){f=this.historyMap[b];for(c=0,d=f.length;c<d;c++)b=f[c],"undefined"!==typeof console&&null!==console&&"function"===typeof console.log&&console.log(b)}};c.prototype.list=function(){"undefined"!==typeof console&&null!==console&&"function"===typeof console.log&&console.log(_.keys(this.historyMap))};c.prototype.save=function(){T.set("loggers",this.enabled)};
return c}());J=Gb.log;x.Logger=Gb}if(B("browser")){var Cc,Ma,h=function(c,b){return function(){return c.apply(b,arguments)}};Cc=function(){function c(){this.searchVersion=h(this.searchVersion,this);this.searchString=h(this.searchString,this);this.browser=this.searchString(this.dataBrowser)||"unknown-browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown-browser-version";this.OS=this.searchString(this.dataOS)||"unknown-os"}c.prototype.searchString=
function(b){var c,d,f;for(d=0,f=b.length;d<f;d++)if(c=b[d],this.versionSearchString=c.versionSearch||c.identity,c.string&&-1!==c.string.indexOf(c.subString)||c.prop)return c.identity};c.prototype.searchVersion=function(b){var c;c=b.indexOf(this.versionSearchString);return-1===c?void 0:parseFloat(b.substring(c+this.versionSearchString.length+1))};c.prototype.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",
identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:x.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",
identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];c.prototype.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,
subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];return c}();Ma=x.browserDetect=new Cc;x.Browser=new (function(){function c(){this.isTouch=h(this.isTouch,this);this.init=h(this.init,this)}c.prototype.init=function(){this.browserStr=Ma.browser.toLowerCase();this.browserVersionStr=(""+Ma.browser+"-"+Ma.version).toLowerCase();this.osStr=Ma.OS.toLowerCase();return $("body").addClass(""+
this.browserStr+" "+this.browserVersionStr+" "+this.osStr)};c.prototype.isTouch=function(){var b;return"ipad"===(b=this.osStr)||"iphone"===b||"android"===b};return c}())}if(B("auth")){var y;y=new (function(){function c(){this.check()}var b,e,d;e=b=null;d="token"+x.location.port;c.prototype.isLoggedIn=function(){return"notLoggedIn"!==b};c.prototype.myId=function(){return b};c.prototype.myUsername=function(){var b;return null!=(b=this.me())?b.get("username"):void 0};c.prototype.myToken=function(){return e};
c.prototype.me=function(){var c;c=Models.Member.get(b);null==c&&!this.isLoggedIn()&&(c=new ra({id:"notLoggedIn",notLoggedIn:!0}),Models.Member.add(c));return c};c.prototype.isMe=function(c){return null!=c&&c.id?this.isMe(c.id):c===b};c.prototype.check=function(){this.updateToken();"undefined"!==typeof rpc&&null!==rpc&&rpc.handleLogin()};c.prototype.updateToken=function(){e=$.cookie(d)||"";return b=e.split("/")[0]||"notLoggedIn"};c.prototype.consistencyCheck=function(b){var c;c=!this.isLoggedIn()||
this.isMe(this.me());c||($.cookie(d,null,{path:"/"}),b.reloadOnError&&x.location.reload());return c};return c}())}if(B("keys")){var Na,Hb,Ib,Jb,Kb,Lb,ka,la,Y,ma,ha,Z,Mb,Dc,Ec,Nb,sa,Fc,Gc,da,ta,Hc,db,Ic,Ob,Jc,Pb,Kc,Qb,Lc,ia,Mc,ua,Nc,Oc;ua=9;Ob=10;da=13;ta=27;Mc=32;Gc=46;ia=16;sa=17;la=18;Ec=20;Z=38;ha=39;Y=40;ma=37;Qb=63;Nb=188;Pb=190;db=191;ka=65;Mb=ka+1;Dc=ka+2;Fc=ka+3;Hc=ka+5;Ic=ka+11;Jc=ka+13;Kc=ka+16;Lc=ka+18;Nc=ka+21;Oc=ka+23;Na=49;Hb=50;Ib=51;Jb=52;Kb=53;Lb=54}if(B("util")){var n,h=function(c,
b){return function(){return c.apply(b,arguments)}};n=_.extend(ab,{stopPropagation:function(c){return c.stopPropagation()},preventDefault:function(c){return c.preventDefault()},stop:function(c){n.stopPropagation(c);return n.preventDefault(c)},securePage:function(){return"https:"===document.location.protocol},formatCount:function(c,b,e){if(!c&&!e)return"";1!==c&&(b+="s");return""+c+" "+b},spaces:function(c){this.longStr||(this.longStr=" ");for(;this.longStr.length<c;)this.longStr+=this.longStr;return this.longStr.substr(0,
c)},rpad:function(c,b){return c.length>b?c.substr(0,b):c+this.spaces(b-c.length)},truncate:function(c,b){var e;return!(null!=c&&c.length)||c.length<b?c:(e=c.substr(0,c.lastIndexOf(" ",b)))?e:c.substr(0,b)},scrollToTop:function(){return $(x).scrollTop(0)},isSubmitKey:function(c){return null!=c&&(c===da||c===Ob||n.isSubmitKey(c.keyCode)||n.isSubmitKey(c.which))},getProtocol:function(c){var b,e;return!c?"":null!=(b=null!=(e=/^([a-z]+):/i.exec(c))?e[1]:void 0)?b:""},makeHttp:function(c){if(!c)return"";
c=c.replace(/^[a-z]*:\/*/i,"");return"http://"+c},sanitizeWebAddress:function(c){var b;return"http"!==(b=n.getProtocol(c))&&"https"!==b?n.makeHttp(c):c},calcPos:function(c,b,e,d){var f,b=b.select(function(b){return(null!=e?e.id:void 0)!==b.id&&(!d||d(b))});f=Math.min(Math.max(c,0),b.length);c=b[f-1];f=b[f];b=(null!=e?e.get("pos"):void 0)||-1;c=(null!=c?c.get("pos"):void 0)||0;f=(null!=f?f.get("pos"):void 0)||0;return 0===f?e&&b>c?b:c+65536:e&&b>c&&b<f?b:(f+c)/2},isAndroid:function(){return/android/i.test(navigator.userAgent)},
pushSupport:function(){return!(!x.history||!x.history.pushState||n.isAndroid())},parseDate:function(c){return V.parse(c)},randomWait:function(c,b){return Math.floor(c+Math.random()*b)},toTitleCase:function(c){return c.replace(/\w\S*/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()})},navMenuList:function(c,b,e){var d,f,g,i,j;g=c.find(b);f=c.find(""+b+".selected:first")[0];j=_.indexOf(g,f);f=g[0];i=g[g.length-1];i=0>j-1?i:g[j-1];g=j+1>g.length?f:g[j+1];e===Y&&(d=g);e===Z&&(d=
i);return this.selectMenuItem(c,b,d)},selectMenuItem:h(function(c,b,e){c.find(b).removeClass("selected");c.find(""+b+":not(.active)").find(".app-icon").removeClass("light");$(e).addClass("selected");return $(e).find(".app-icon").addClass("light")},this),insertSelection:function(c,b,e,d){var f;f=$(c).val();e||d?(""===f.substring(d)?$(c).val(""+(f.substring(0,e)+b)):$(c).val(""+(f.substring(0,e)+b+f.substring(d))),this.setCaretPosition(c,e+(""+b).length)):($(c).val(""+(f+b)),this.setCaretPosition(c,
(""+(f+b)).length));return $(c).focus()},getWordFromCaret:function(c){var b,e,d;d=$(c).val();b=c.selectionStart;e=Math.max(d.lastIndexOf("\n",b),d.lastIndexOf(" ",b));e+=1;c=d.indexOf(" ",b);-1===c&&(c=d.length);" "===d.charAt(c)&&(e=d.lastIndexOf(" ",b-1)+1);b=c-e;d=""+d.slice(e,c);return{start:e,end:c,length:b,str:d}},setCaretPosition:function(c,b){var e;if(c.setSelectionRange)return c.focus(),c.setSelectionRange(b,b);if(c.createTextRange)return e=c.createTextRange(),e.collapse(!0),e.moveEnd("character",
b),e.moveStart("character",b),e.select()},setCaretAtEnd:function(c){var b;if(c)return b=$(c).val().length,this.setCaretPosition(c,b)},getLastWord:function(c){c=$(c).val().split(" ");return _.last(c)},replaceLastWord:function(c,b){var e;e=RegExp(""+this.getLastWord(c)+"$");e=$(c).val().replace(e,"");return $(c).val(""+(e+b))},getMemNameArray:function(c){c=Models.Member.get(c);return null==c?[]:(""+c.get("username").toLowerCase()+" "+c.get("fullName").toLowerCase()+" "+c.get("initials").toLowerCase()).split(" ")},
filterMembers:h(function(c,b){var e,d,f,g,i,j;g=RegExp("^"+c.toLowerCase());e=[];for(i=0,j=b.length;i<j;i++)d=b[i],f=n.getMemNameArray(d),_.detect(f,function(b){return g.test(b)})&&e.push(d);return e},this),getNaturalNumber:function(c){var b;if(c){if("1"===c.charAt(c.length-2))return""+c+"th";b=c.charAt(c.length-1);if("4"===b||"5"===b||"6"===b||"7"===b||"8"===b||"9"===b||"0"===b)return""+c+"th";if("1"===b)return""+c+"st";if("2"===b)return""+c+"nd";if("3"===b)return""+c+"rd"}},jqGetActiveElement:function(){try{return $(document.activeElement)}catch(c){return $()}}})}B("monitor")&&
(x.Monitor=function(){var c,b,e,d,f;c=0;e=x.sessionStorage;d=null!=(f=null!=e?e.status:void 0)?f:"active";return b={init:function(){setInterval(b.check,1E4);$(x).focus(function(){return b.addActivity()});$(document).bind("keydown mousedown",function(){b.addActivity()})},addActivity:function(){c=(new Date).getTime();T.set("lastActivity",c);b.setStatus("active")},check:function(){3E5<(new Date).getTime()-Math.max(c,T.enabled()?parseInt(T.get("lastActivity")):0)&&b.setStatus("idle")},setStatus:function(b){b!==
d&&(d=b,e&&(e.status=d),$(this).triggerHandler("setStatus",d))},getStatus:function(){return d}}}(),$(Monitor.init));if(B("ajaxQueue")){var ga,h=function(c,b){return function(){return c.apply(b,arguments)}},X=Array.prototype.slice;ga=new (function(){function c(){this.ajax=h(this.ajax,this);this.hideSending=h(this.hideSending,this);this.showSending=h(this.showSending,this);this.hideRetrying=h(this.hideRetrying,this);this.showRetrying=h(this.showRetrying,this);this.showOutOfRetries=h(this.showOutOfRetries,
this);this.showRealError=h(this.showRealError,this);this.retryNext=h(this.retryNext,this);this.serverAlreadySaw=h(this.serverAlreadySaw,this);this.retryableError=h(this.retryableError,this);this.success=h(this.success,this);this.addToQueue=h(this.addToQueue,this);this.removeFromQueue=h(this.removeFromQueue,this);this.inQueue=h(this.inQueue,this);this.hasQueue=h(this.hasQueue,this);this.uniqueReqId=h(this.uniqueReqId,this)}c.prototype._msBackoff=100;c.prototype._msBackoffMin=100;c.prototype._nTriesLeft=
12;c.prototype._nTriesMax=12;c.prototype._retrying=!1;c.prototype._stopped=!1;c.prototype._maxLength=10;c.prototype._queue=[];c.prototype._queueIdSeq=0;c.prototype.uniqueReqId=function(){var b;return""+(null!=(b=y.me())?b.id:void 0)+"-"+Math.random()};c.prototype.hasQueue=function(){return 0<this._queue.length};c.prototype.inQueue=function(b){return _.find(this._queue,function(c){return c.queueId===b.queueId})};c.prototype.removeFromQueue=function(b){return this._queue=_.filter(this._queue,function(c){return c.queueId!==
b.queueId})};c.prototype.addToQueue=function(b){J("AjaxQueue","addToQueue",b);if(this._queue.length+1>this._maxLength)J("AjaxQueue","maxLength exceeded");else return this._queue.push(b),this.showRetrying()};c.prototype.success=function(b){J("AjaxQueue","success",b);if(this.inQueue(b))return this.removeFromQueue(b),this._retrying=!1,this._msBackoff=this._msBackoffMin,this._nTriesLeft=this._nTriesMax,this.retryNext()};c.prototype.retryableError=function(b){J("AjaxQueue","retryableError",b);ga.inQueue(b)?
this._retrying=!1:ga.addToQueue(b);return this.retryNext()};c.prototype.serverAlreadySaw=function(b){if(this.inQueue(b))return this.removeFromQueue(b),this.retryNext()};c.prototype.retryNext=function(){var b;if(!this._stopped)if(this.hasQueue()){if(this.showRetrying(),!this._retrying){this._retrying=!0;b=this._queue[0];if(0<this._nTriesLeft)return J("AjaxQueue","retrying in "+this._msBackoff+"ms",b),setTimeout(function(){return $.ajax(b)},this._msBackoff),this._msBackoff*=2,--this._nTriesLeft;this._stopped=
!0;return this.showOutOfRetries()}}else this.hideRetrying()};c.prototype.showRealError=function(b,c,d){J("AjaxQueue","showRealError",d);this.hideRetrying();return aa.showHtml(s.fill("connect_failed",{msg:"Change not saved: failed to sync with the Trello server."}),"error","AjaxQueueFail")};c.prototype.showOutOfRetries=function(){J("AjaxQueue","showOutOfRetries");this.hideRetrying();return aa.showHtml(s.fill("connect_failed",{msg:"Timed out while trying to sync changes with the server."}),"error",
"AjaxQueueFail")};c.prototype.showRetrying=function(){return aa.show("Connection interrupted. Retrying "+n.formatCount(this._queue.length,"action",!0)+".","error","AjaxQueueRetry")};c.prototype.hideRetrying=function(){return aa.hide("AjaxQueueRetry")};c.prototype.showSending=function(){return aa.show("Sending...","warning","AjaxQueueSending")};c.prototype.hideSending=function(){return aa.hide("AjaxQueueSending")};c.prototype.ajax=function(b){var c,d;if(!this._stopped){null!=(d=b.timeout)?d:b.timeout=
2E4;b.queueId=this._queueIdSeq++;b.headers={"X-Trello-ReqId":this.uniqueReqId()};b.oldSuccess=b.success;b.oldError=b.error;c=!1;b.success=function(){var b;b=1<=arguments.length?X.call(arguments,0):[];ga.hideSending();c=!0;ga.success(this);return"function"===typeof this.oldSuccess?this.oldSuccess.apply(this,b):void 0};b.error=function(){var d,g;d=1<=arguments.length?X.call(arguments,0):[];ga.hideSending();c=!0;if(0===(g=d[0].status)||408===g||500===g)return ga.retryableError(this);g=function(){ga._stopped=
!0;return ga.showRealError.apply(ga,d)};return null!=this.oldError&&b.interceptErrors?this.oldError.apply(this,X.call(d).concat([g])):g()};if(this.hasQueue())return ga.addToQueue(b);$.ajax(b);return setTimeout(h(function(){if(!c)return ga.showSending()},this),3E3)}};return c}())}if(B("rpc")){var Rb,h=function(c,b){return function(){return c.apply(b,arguments)}},X=Array.prototype.slice;Rb=function(c,b,e){return c.invoke("getModelUpdatesSince",[c.modelIxUpdate],function(d){var f,g,i,j,h,l,o,n;try{o=
d.messages;for(h=0,l=o.length;h<l;h++)j=o[h],f=JSON.parse(j),$(c).triggerHandler(f.notify.event,f.notify);n=d.modelIxUpdate;for(g in n)i=n[g],null!=c.modelIxUpdate[g]&&(c.modelIxUpdate[g]=i)}catch(s){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error(["Model sync error on messages:",null!=d?d.messages:void 0]),"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error(s),"function"===typeof e?e():void 0}"function"===
typeof b&&b()},function(b){null!=(null!=b?b.syncError:void 0)&&"undefined"!==typeof Controller&&null!==Controller?Controller.syncError():"function"===typeof e&&e()})};x.SocketRPC=function(){var c,b,e,d,f,g;b=this;this.fxDefault=function(){};this.reqid=0;this.dictCallback={};this.dictTime={};this.connectedOnce=!1;this.modelIxUpdate={};c=this.inUse=!1;"undefined"!==typeof y&&null!==y&&"function"===typeof y.myId&&y.myId()&&(c=parseInt(y.myId().substring(0,8),16),c=c%100<x.websocketPercent);this.transports=
[];if(!_.include(["iPod","iPhone","iPad"],browserDetect.OS)&&(c||"yes"===T.get("useWebsockets")))this.transports=["websocket"];x.dropTheHammer=function(){T.set("useWebsockets","yes");return"undefined"!==typeof console&&null!==console?"function"===typeof console.log?console.log("Websockets engaged! Reload the page, please. Use pitStop() to turn sockets off."):void 0:void 0};x.pitStop=function(){T.set("useWebsockets","no");return"undefined"!==typeof console&&null!==console?"function"===typeof console.log?
console.log("Shutting Websockets down! Reload the page, please. Use dropTheHammer() to turn sockets back on."):void 0:void 0};this.reconnectDelayForStatus=function(b){return"active"===b?n.randomWait(100,1E3):n.randomWait(2E3,1E4)};this.bootedDelayForStatus=function(b){return"active"===b?n.randomWait(1E4,3E4):n.randomWait(3E4,12E4)};this.socket=io.connect(""+document.location.protocol+"//"+document.location.hostname,{transports:this.transports,"max reconnection attempts":100,"max reconnection delay":32E3,
"reconnection delay":this.reconnectDelayForStatus(Monitor.getStatus())});g="connect,reconnect,connecting,reconnecting,disconnect,connect_failed,reconnect_failed,error".split(",");e=h(function(b){return this.socket.on(b,h(function(c){return J("rpc","socket event",b,c)},this))},this);for(d=0,f=g.length;d<f;d++)c=g[d],e(c);g=["connecting","reconnecting"];e=h(function(b){return this.socket.on(b,h(function(){J("rpc","connecting");return $(this).triggerHandler("connecting")},this))},this);for(d=0,f=g.length;d<
f;d++)c=g[d],e(c);this.socket.on("connect_failed",h(function(){var b;J("rpc","connect_failed");if(null!=(b=this.socket))if(null!=(b=b.socket))b.reconnecting=!1;return $(this).triggerHandler("connect_failed")},this));this.socket.on("reconnect_failed",h(function(){J("rpc","reconnect_failed");return $(this).triggerHandler("reconnect_failed")},this));this.socket.on("connect",h(function(){J("rpc","connect");$(this).triggerHandler("connect");return this.connectedOnce=!0},this));this.socket.on("reconnect",
h(function(){J("rpc","reconnect");clearTimeout(this.timeoutInvokeResponse);delete this.timeoutInvokeResponse;return $(this).triggerHandler("reconnect")},this));this.socket.on("disconnect",h(function(b){J("rpc","disconnect",b);clearTimeout(this.timeoutInvokeResponse);delete this.timeoutInvokeResponse;if(this.inUse&&"booted"===b)return setTimeout(h(function(){return this.socket.socket.reconnect()},this),this.bootedDelayForStatus(Monitor.getStatus()))},this));this.socket.on("error",h(function(){var b,
c;if(this.connectedOnce&&!(null!=(b=this.socket)&&null!=(c=b.socket)&&c.connected))return $(this).triggerHandler("disconnect")},this));this.socket.on("message",function(c){var e,d;J("rpc","message",c);(null!=(null!=c?c.version:void 0)||null!=(null!=c?c.trellisVersion:void 0))&&"undefined"!==typeof Controller&&null!==Controller&&Controller.setServerVersion(c);if(c.result){if(clearTimeout(b.timeoutInvokeResponse),delete b.timeoutInvokeResponse,"function"===typeof(e=b.dictCallback)[d="fx"+c.reqid])e[d](c.result)}else if(null!=
(e=c.notify)&&e.event)null!=c.idModelChannel&&(b.modelIxUpdate[c.idModelChannel]=c.ixLastUpdateChannel),$(b).triggerHandler(c.notify.event,c.notify);else if(c.error){if("function"===typeof(e=b.dictCallback)[d="fxErr"+c.reqid])e[d](c.error)}else b.fxDefault(c);c.reqid&&(e=new Date-b.dictTime[c.reqid],J("timing","message",c.reqid,"time",e),delete b.dictCallback["fx"+c.reqid],delete b.dictCallback["fxErr"+c.reqid],delete b.dictTime[c.reqid])});this.subscribeTo=h(function(b,c){return this.invoke("subscribeTo"+
b,[c],h(function(b){return this.modelIxUpdate[c]=b.ixLastUpdate},this),h(function(b){return J("rpc",b)},this))},this);this.invoke=function(b,c,e,d){this.dictCallback["fx"+this.reqid]=e;this.dictCallback["fxErr"+this.reqid]=d;this.dictTime[this.reqid]=new Date;b={sFxn:b,rgarg:c,reqid:this.reqid++};b.token=y.myToken();b=JSON.stringify(b);J("rpc","invoke: "+b);this.socket.send(b);null==this.timeoutInvokeResponse&&(this.timeoutInvokeResponse=setTimeout(h(function(){var b;J("rpc","No response from the socket.io server in 10 seconds. Disconnecting.");
clearTimeout(this.timeoutInvokeResponse);delete this.timeoutInvokeResponse;return null!=(b=this.socket)?b.disconnect():void 0},this),1E4))};this.resync=h(function(){var c,e,d,f,g;e=1<=arguments.length?X.call(arguments,0):[];d={};for(f=0,g=e.length;f<g;f++)c=e[f],null!=this.modelIxUpdate[c]&&(d[c]=this.modelIxUpdate[c]);b.modelIxUpdate=d;return Rb(this)},this);this.disconnect=function(){var b;if(!this.secure||"flashsocket"!==(null!=(b=this.getTransport())?b.type:void 0))J("rpc","disconnecting"),this.socket.disconnect()};
this.sendStatusConfirm=function(){var b;b=h(function(){return this.invoke("setSessionStatus",[Monitor.getStatus()])},this);setInterval(b,3E5);return b()};this.getTransport=h(function(){var b,c;return null!=(b=this.socket)?null!=(c=b.socket)?c.getTransport(this.transports):void 0:void 0},this);$(Monitor).bind("setStatus",h(function(b,c){var e,d,f;return null!=(e=this.socket)?null!=(d=e.socket)?null!=(f=d.options)?f["reconnection delay"]=this.reconnectDelayForStatus(c):void 0:void 0:void 0},this))};
x.AJAXRPC=function(){var c;c=this;this.fxDefault=function(){};this.idBoardToPoll=null;this.modelIxUpdate={};this.msPoll=2E3;this.msPollIdle=1E4;this.ajaxSessionId=Math.random().toString().substring(2);this.failures=0;this.failuresAllowed=1E3;this.invoke=function(b,c,d,f){b=JSON.stringify({sFxn:b,rgarg:c,reqid:this.reqid++});return $.ajax({url:"/rpc",type:"POST",data:{msg:b,memberStatus:Monitor.getStatus(),idBoardPolling:this.idBoardToPoll,ajaxSessionId:this.ajaxSessionId},dataType:"json",success:function(b){null!=
(null!=b?b.result:void 0)&&(null==b.result.messages||0<b.result.messages.length)&&J("rpc","message",b.result);(null!=b.version||null!=b.trellisVersion)&&"undefined"!==typeof Controller&&null!==Controller&&Controller.setServerVersion(b);return b.error?"function"===typeof f?f(b.error):void 0:"function"===typeof d?d(b.result):void 0},error:function(b,c){return"function"===typeof f?f(c):void 0},timeout:2E4})};this.subscribeTo=h(function(b,c){var d;d="id"+b+"ToPoll";this[d]&&delete this[d];return this[d]=
c},this);this.poll=function(){var b,e,d,f,g,i,j,h,l,o,n;if(c.failures===c.failuresAllowed)$(c).triggerHandler("connect_failed");else{e;try{e=y.myId()}catch(s){}b=function(){setTimeout(function(){c.poll()},y.isLoggedIn()&&"active"===Monitor.getStatus()?c.msPoll:c.msPollIdle)};if(null!=c.idBoardToPoll||null!=e||null!=c.idOrganizationToPoll){null!=c.idBoardToPoll&&(null!=(l=(f=c.modelIxUpdate)[j=c.idBoardToPoll])?l:f[j]=-1);null!=e&&(null!=(o=(g=c.modelIxUpdate)[e])?o:g[e]=-1);c.idOrganizationToPoll&&
(null!=(n=(i=c.modelIxUpdate)[h=c.idOrganizationToPoll])?n:i[h]=-1);for(d in c.modelIxUpdate)d===c.idBoardToPoll||d===e||d===c.idOrganizationToPoll||(delete c.modelIxUpdate[d],J("rpc","Removing "+d,c.modelIxUpdate));Rb(c,function(){0<c.failures&&$(c).triggerHandler("reconnect");c.failures=0;return b()},function(){$(c).triggerHandler("connecting");++c.failures;return b()})}else b()}}};x.rpc=new function(){var c,b,e,d,f,g,i,j,m,l;g=this;l=i=j=null;d=!1;e=[];b={};m=function(){var b,c,f,g;d=!0;j===i&&
j.poll();g=[];for(c=0,f=e.length;c<f;c++)b=e[c],g.push(b());return g};c=function(){var b,c,e,d,f;d="connecting,connect,reconnect,connect_failed,reconnect_failed,updateModels,deleteModels,adminAlert".split(",");f=[];for(c=0,e=d.length;c<e;c++)b=d[c],f.push($(j).bind(b,function(b,c,e){return $(g).triggerHandler(b,c,e)}));return f};f=function(){if(!j){x.rpcSocket=l=new SocketRPC;j=i=new AJAXRPC;c();if(l.getTransport()){if(l.connectedOnce)return;setTimeout(function(){d||(J("rpc","Socket not responsive. Using AJAX."),
l.inUse=!1,l.disconnect(),m())},8E3);return l.invoke("ping",[],function(){d?l.disconnect():(J("rpc","Socket responded to ping in a timely fashion. Using sockets."),l.inUse=!0,l.sendStatusConfirm(),j=l,c(),m())})}J("rpc","No socket connect. Using AJAX.");return m()}};this.handleLogin=h(function(){if(y.isLoggedIn())return f()},this);this.invoke=h(function(b,c,e,d){f();0===(null!=b?b.indexOf("subscribeTo"):void 0)||0===(null!=b?b.indexOf("setSessionStatus"):void 0)?j.invoke(b,c,e,d):i.invoke(b,c,e,d)},
this);this.subscribeTo=h(function(c,g){if((null!=b[c]||null!=g)&&b[c]!==g)f(),d?(b[c]=g,j.subscribeTo(c,g)):(J("rpc","deferring subscribe to "+c+" "+g),e.push(h(function(){this.subscribeTo(c,g)},this)))},this);this.resync=h(function(){var b;b=1<=arguments.length?X.call(arguments,0):[];f();return"function"===typeof j.resync?j.resync.apply(j,b):void 0},this);this.isUsingSocket=function(){return null!=j&&j===l};$(Monitor).bind("setStatus",h(function(b,c){return this.invoke("setSessionStatus",[c])},this));
y.isLoggedIn()&&f()};Backbone.sync=function(c,b,e,d){var f,g,i,j;if(null!=(g=b.rest)&&g[c]){g=!0;switch(c){case "create":if("Board"===(i=b.typeName)||"Member"===i||"Organization"===i)f=function(c){b.set(c,{fromServer:!0});Models[b.typeName].add(b);return Models.finishInit(b)};break;case "update":if("Member"===(j=b.typeName)||"Organization"===j)g=!1;break;case "delete":g=!1}g?b.ready(function(){e(b.toJSON())}):f=function(c){b.set(c,{fromServer:!0});return e(b.toJSON())};f||(f=function(c){b.set(c,{fromServer:!0})});
if(null!=(i=b.rest))i[c](f,d)}else"delete"===c?"function"===typeof e&&e():"function"===typeof d&&d("rest api method not implemented")}}if(B("format")){var na;na=new (function(){function c(){}var b,e,d,f,g,i,j;b=markdown.Markdown;e=b.dialects.Trellis=b.subclassDialect(b.dialects.Gruber);d=function(b){var c;return(c=b.match(n.regexLink))?(b=/^(.*?)([\(\),:.\?]*)$/.exec(c[0]),b=b[1],[b.length,["link",{href:b,title:b,target:"_blank"},b]]):[1,b[0]]};j=["http","https","ftp"];for(g=0,i=j.length;g<i;g++)f=
j[g],e.inline[f+"://"]=d;e.inline["@"]=function(b){var c,e;if(b=/^(@[a-z0-9_]+)(?=$|\W)/i.exec(b))if(c=b[1],e=_.detect(Models.Member.all(),function(b){return b.hasAtMe(c)}))return b=e.toJSON(),b.atMention=c,b.isMe=y.isMe(e),[c.length,["span",{"class":"atMention"+(b.isMe?" me":""),title:b.fullName},c]];return[1,"@"]};e.inline["#"]=function(b){var c,e,d;if(!Controller.onAnyBoardView())return[1,"#"];return(e=RegExp("^"+n.regexCardNumber.source).exec(b))?(b=e[0],e=e[1],e=parseInt(e,10),c=Models.Card.find("idShort",
e)[0],null!=c?(d=c.get("name"),c=Controller.getCardUrl(c)):(d="Card "+e,c=Controller.getCardUrlWithoutModels(Controller.idBoardCurrent,e,d)),[b.length,["link",{href:c,title:d},"#"+e]]):[1,"#"]};b.buildBlockOrder(e.block);b.buildInlinePatterns(e.inline);c.prototype.textAsHtml=function(b,c){var e,d,f;if(!b)return b;e=_.extend({convertNewlines:!1,embedlyUrlData:null},c);f="https:"===location.protocol;d=b.replace(/^\s*|\s*$/g,"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;").replace(/'/g,"&#39;").replace(/{/g,"&#123;").replace(/}/g,"&#125;");e.convertNewlines&&(d="<p>"+d.replace(/\n/g,"</p><p>")+"</p>");d=d.replace(/(^|\W)(@[a-z0-9_]+)(?=$|\W)/gi,function(b,c,e){var d;return(d=_.detect(Models.Member.all(),function(b){return b.hasAtMe(e)}))?(b=d.toJSON(),b.atMention=e,b.isMe=y.isMe(d),c+s.fill("atMention",b)):b}).replace(RegExp("(^|[\\s>])"+n.regexCardNumber.source,"gi"),function(b,c,e){return Controller.onAnyBoardView()?(e=parseInt(e,10),e=(b=Models.Card.find("idShort",
e)[0])?b.toJSON({url:!0}):{idShort:e,url:Controller.getCardUrlWithoutModels(Controller.idBoardCurrent,e,"Card "+e)},c+s.fill("cardLink",e)):b}).replace(n.regexLink,function(b){var c,d,b=b.replace(/&amp;/g,"&"),b=n.cleanLink(b);return(c=null!=(d=e.embedlyUrlData)?d[b]:void 0)&&(!f||c.htmlIsHttps||c.htmlHttps||"photo"===c.type&&/^https:\/\//i.test(c.url))?(c.htmlIsHttps&&(c.htmlHttps=c.html),c["type_"+c.type]=!0,c.originalUrl=b,b=s.fill("embedly",_.extend(c,{requireHttps:f})),e.convertNewlines?"</p>"+
b+"<p>":b):'<a href="'+b+'" target="_blank">'+b+"</a>"});return d=d.replace(/^(<p><\/p>)*|(<p><\/p>)*$/g,"")};c.prototype.markdownAsHtml=function(b){return markdown.toHTML(b,e)};c.prototype.bytes=function(b){var c,e,d,f;if(null==b)return"Unknown Size";d=["B","KB","MB","GB"];c=b;for(e=0,f=d.length;e<f;e++){b=d[e];if(1024>c||e===d.length-1)return d=Math.round(100*c)/100,""+d+" "+b;c/=1024}return"unknown"};return c}())}if(B("viewWithId")){var L,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=
c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};L=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Backbone.View);c.prototype.uniqueId=function(){this.hasOwnProperty("_uniqueId")||(this._uniqueId=_.uniqueId("view"));return this._uniqueId};return c}()}if(B("viewWithActions")){var Oa,h=function(c,b){return function(){return c.apply(b,arguments)}};Oa=function(){function c(){}c.prototype.limit=50;c.prototype.nextPage=
1;c.prototype.shortLoad=!1;c.prototype.loading=!1;c.prototype.idModels=null;c.prototype.loadMoreActions=function(){var b;if(!this.loading)return this.loading=!0,Models.loadMoreActionData(this.model.typeName.toLowerCase(),this.model.id,this.nextPage,this.limit,this.idModels,null!=(b="function"===typeof this.getActionsFilter?this.getActionsFilter():void 0)?b:"all",h(function(b,c){this.loading=!1;if(!b)return this.shortLoad=c.length<this.limit,0===c.length&&this.renderActions(),++this.nextPage},this))};
c.prototype.hasMoreActions=function(){return!this.loading&&!this.shortLoad&&this.getActions().length>=this.limit};c.prototype.getActions=function(){return Models.Action.getListForModel(this.model)};return c}()}if(B("editable")){var P,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};P=function(){function c(){this.clickSetting=
h(this.clickSetting,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype._draftKey=function(b){return"draft_"+this.model.id+"_"+b};c.prototype._saveDraft=function(b,c){return T.set(this._draftKey(b),c)};c.prototype._recallDraft=function(b){return T.get(this._draftKey(b))};c.prototype._discardDraft=function(b){return T.unset(this._draftKey(b))};c.prototype.editField=function(b){if(!($(b.target).is("a")&&"#"!==$(b.target).attr("href")||DragSort.dragging||DragSort.sorting))return n.stop(b),
t.hide(),b=$(b.target).closest(".editable"),this.edit(b.attr("attr"))};c.prototype.edit=function(b){var c,d,f,g,i,j;c=this.$(this.el).find("[attr="+b+"]");f=this.$(this.el).find(".no-edits [attr="+b+"]");c=c.not(f);0!==c.length&&(R.cancelEdits(),f=c.find(".edit:first"),0!==f.length&&(g=c.find(".field:first"),j=g.is("textarea"),i=g.parent().is(".card-detail-edit"),d=c.find(".current"),j&&(d=i?Math.max(126,d.height()+20):Math.max(36,d.height()+20),500<d&&(d=500),g.height(d)),f.append(s.edit_controls),
f.hasClass("delete")||f.find(".delete").remove(),f.hasClass("convert")||f.find(".convert").remove(),c.addClass("editing"),""===g.val()&&g.val(this.model.get(b)),g.data("draftKey",this._draftKey(b)),J("editable",this.model),g.focus().select()))};c.prototype.recallDrafts=function(){var b,c,d;d=this;b=this.$(this.el).find("[attr]");c=this.$(this.el).find(".no-edits [attr]");return b.not(c).each(function(){var b,c;b=$(this).attr("attr");c=d._recallDraft(b);if(null!=c)return b=$(this).find(".field:first"),
b.val(c),_.defer(h(function(){return $(this).find(".edits-warning").show()},this))})};c.prototype.stopEditing=function(b){n.stop(b);R.cancelEdits();return!1};c.prototype.clearEdits=function(b){var c;n.stop(b);b=$(b.target).closest(".editable[attr]");c=b.attr("attr");null!=c&&this._discardDraft(c);b.find(".field").val("");b.find(".edits-warning").hide();R.cancelEdits();return!1};c.prototype.validate=function(){var b,c,d,f;f=$(this.el).find(".editing.non-empty .field");for(c=0,d=f.length;c<d;c++)if(b=
f[c],/^\s*$/.test($(b).val()))return!1;return!0};c.prototype.commitEdits=function(b){var c,d;if("keypress"!==b.type||n.isSubmitKey(b)&&b.ctrlKey||13===b.keyCode&&(!$(b.target).is("textarea")||$(b.currentTarget).hasClass("single-line")))if(n.stop(b),this.validate())return c=this.model,d=this,_.defer(h(function(){var f;f=$(b.target).closest(".editable.editing[attr]");f.remove("input[type=submit]");f.removeClass("editing").each(function(){var b,f,j,h;b=$(this).attr("attr");j=$(this).find(".field").val();
d._discardDraft(b);h={};f="function"===typeof d.customSet?d.customSet(b,j):void 0;f||(h[b]=j,b=$(this).find(".current"),b.hasClass("markeddown")?b.html(na.markdownAsHtml(null!=j?j:"")):b.hasClass("js-text-as-html")?b.html(na.textAsHtml(null!=j?j:"",{convertNewlines:!0})):b.text(j),J("editable","*** Set Data: "),J("editable",h),J("editable",c));return c.save(h,{silent:f})}).find(".field").val("");return f.find(".edits-warning").hide()},this)),!0};c.prototype.stopPropagation=function(b){n.stopPropagation(b)};
c.prototype.clickSetting=function(b){var c,d,f;c=$(b.target);if(!c.hasClass("disabled")&&!c.closest(".js-disabled").length&&(d=c.attr("href"),!(d&&"#"!==d)&&(d=c.closest(".pref").attr("name"))))f=c.attr("value"),f=function(){switch(f){case "true":return!0;case "false":return!1;default:return f}}(),this.model.setPref(d,f),this.model.save(),n.stop(b)};c.prototype.delegateEvents=function(b){var e;e={"click .current":"editField","click .js-cancel-edit":"clearEdits","click .js-discard-edits":"clearEdits",
"click .js-view-edits":"editField","click .js-save-edit":"commitEdits","keypress .field":"commitEdits","click input":"stopPropagation","click textarea":"stopPropagation"};null!=this.model.setPref&&(e["click a"]="clickSetting");return c.__super__.delegateEvents.call(this,_.extend(e,b||this.events))};return c}()}B("tabbed")&&(G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=
b.prototype;return c},function(){function c(){c.__super__.constructor.apply(this,arguments);this.options.section?this.currentTab=this._findTab(this.options.section):this.tabs.length&&(this.currentTab=this.tabs[0]);this.reset()}u(c,P);c.prototype.tabs=[];c.prototype.reset=function(){return this._dataIsLoaded={}};c.prototype._findTab=function(b){return _.detect(this.tabs,function(c){return c.id===b})};c.prototype._getCurrentView=function(){return this.currentTab?this.model.getView(this.currentTab.viewClass,
this.currentTab.id,this.currentTab.viewOptions):null};c.prototype.renderCurrentTab=function(){var b,c;this.currentTab&&(b=this._getCurrentView(),b.render(),"function"===typeof(c=this.currentTab).fxInitView&&c.fxInitView(b),b=b.el,$(this.el).find(".js-tabbed-content:first").empty().append(b),$(this.el).find(".js-tab").removeClass("active"),$(this.el).find(".js-tab[tabName='"+this.currentTab.id+"']").addClass("active"));return this};c.prototype.setCurrentTab=function(b){var c;this.currentTab=this._findTab(b);
this._dataIsLoaded[b]||(this._dataIsLoaded[b]=!0,null!=(c=this._getCurrentView())&&"function"===typeof c.refreshData&&c.refreshData());return this.renderCurrentTab()};c.prototype.switchTab=function(b){n.stop(b);b=$(b.target).attr("tabName");R.cancelEdits();n.scrollToTop();$(".window-overlay").scrollTop("0");R.calc_surface();return this.setCurrentTab(b)};c.prototype.delegateEvents=function(b){return c.__super__.delegateEvents.call(this,_.extend({"click .js-tab":"switchTab"},b||this.events))};return c}());
if(B("header")){var Pc,Qc,Rc,Sc,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Rc=function(){function c(){this.viewMemberMenu=h(this.viewMemberMenu,this);this.viewBoardsMenu=h(this.viewBoardsMenu,this);this.updateBoardsMenuActivityCounts=h(this.updateBoardsMenuActivityCounts,this);this.viewNotificationsMenu=
h(this.viewNotificationsMenu,this);this.renderUnreadNotifications=h(this.renderUnreadNotifications,this);this.renderAvatar=h(this.renderAvatar,this);this.renderUpgradeAvailable=h(this.renderUpgradeAvailable,this);this.initialize=h(this.initialize,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="header-user";c.prototype.initialize=function(){Models.Notification.bind("add",this.renderUnreadNotifications);Models.Notification.bind("change",this.renderUnreadNotifications);
Models.Notification.bind("remove",this.renderUnreadNotifications);this.model.bindEventsDebounced(this.renderAvatar,"change:initials","change:avatarHash","change:avatarSource","change:fullName","change:username");$(Controller).bind("change:serverVersion",this.renderUpgradeAvailable);this.updateBoardsMenuActivityCounts=_.debounce(this.updateBoardsMenuActivityCounts,1E3,!0);return c.__super__.initialize.apply(this,arguments)};c.prototype.events={"click .js-open-header-notifications-menu":"viewNotificationsMenu",
"click .js-open-header-boards-menu":"viewBoardsMenu","mouseover .js-open-header-boards-menu":"updateBoardsMenuActivityCounts","click .js-open-header-member-menu":"viewMemberMenu","click .js-toggle-login-popover":"viewLoginMenu"};c.prototype.render=function(){J("render","rendering header");$(this.el).html(s.fill("user_header"));this.renderUpgradeAvailable();this.renderUnreadNotifications();this.renderAvatar();return this};c.prototype.renderUpgradeAvailable=function(){J("render","rendering upgrade available");
if(Controller.advertiseUpgrade())return $(this.el).find(".upgrade").show()};c.prototype.renderAvatar=function(){J("render","rendering avatar");return $(this.el).find(".member").html(s.fill("member",this.model.toJSON()))};c.prototype.renderUnreadNotifications=function(){var b,c,d,f,g;f=Models.Notification.all();g=[];for(c=0,d=f.length;c<d;c++)b=f[c],b.get("unread")&&g.push(b);b=g.length;c="";0<b&&(c=b);$(this.el).find(".js-unread-note-count").html(c);Controller.setLocation({unreadCount:b})};c.prototype.viewLoginMenu=
function(b){n.stop(b);q("Header","Login Menu","Open Login Menu");return t.toggle({elem:$(b.target).closest(".js-toggle-login-popover")[0],top:37,view:y.me().getView(Sc)})};c.prototype.viewNotificationsMenu=function(b){n.stop(b);q("Header","Notifications Menu","Open Notifications Menu");b=this.model.getView(Tc);t.toggle({elem:$(this.el).find(".js-open-header-notifications-menu")[0],top:37,view:b,hidden:b.markUnread})};c.prototype.updateBoardsMenuActivityCounts=function(b){n.stop(b);return this.model.getView(Sb).getActivityCounts()};
c.prototype.viewBoardsMenu=function(b){n.stop(b);q("Header","Boards Menu","Open Boards Menu");this.updateBoardsMenuActivityCounts(b);t.toggle({elem:$(this.el).find(".js-open-header-boards-menu")[0],top:37,view:this.model.getView(Sb)})};c.prototype.viewMemberMenu=function(b){n.stop(b);q("Header","User Menu","Open User Menu");b=y.me().getView(Qc);t.toggle({elem:$(this.el).find(".js-open-header-member-menu")[0],top:37,view:b})};return c}();Sc=function(){function c(){this.loginGoogle=h(this.loginGoogle,
this);this.loginPassword=h(this.loginPassword,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Log In"};c.prototype.className="login-popover";c.prototype.initialize=function(){return this.errors={}};c.prototype.events={"click .js-password-login":"loginPassword","click .js-google-login":"loginGoogle"};c.prototype.render=function(){$(this.el).html(s.fill("login_popover",{badLogin:this.errors.badLogin}));return this};
c.prototype.loginPassword=function(b){var c,d;n.stop(b);q("Header","Log In","Email / Password");b=$(b.target).closest("form");b={user:b.find('input[name="user"]').val(),password:b.find('input[name="password"]').val()};d=h(function(b){y.check(b);x.navigate(null,{forceReload:!0})},this);c=h(function(){this.errors.badLogin=!0;this.render()},this);return Uc.api.login(b,{requireAjax:!0},d,c)};c.prototype.loginGoogle=function(b){n.stop(b);q("Header","Log In","Google");b=$(b.target).closest("form");b.find('input[name="mode"]').val("popup");
b.find('input[name="immediate"]').val(!1);b.find('input[name="returnUrl"]').val(document.location.pathname);return b.submit()};return c}();Pc=function(){function c(){this.renderUnreadAnnouncementCount=h(this.renderUnreadAnnouncementCount,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.initialize=function(){ea.onAddRemove(this.renderUnreadAnnouncementCount);ea.bind("change:unread",this.renderUnreadAnnouncementCount);Ba.onAddRemove(this.render);
this.updateAllAnnouncements=_.debounce(this.updateAllAnnouncements,6E4,!0);return setInterval(h(function(){return this.renderUnreadAnnouncementCount()},this),3E4)};c.prototype.events={click:"openMenu",mouseover:"updateAllAnnouncements"};c.prototype.render=function(){$(this.el).html(s.fill("header_info_button"));this.renderUnreadAnnouncementCount();return this};c.prototype.openMenu=function(b){var c;n.stop(b);q("Header","(i)","Open Reference Menu");c=y.me().getView(Vc);t.toggle({elem:$(b.target).closest(".header-about")[0],
top:37,view:c,hidden:h(function(){var b;return null!=(b=ea.top())?b.markRead():void 0},this)})};c.prototype.renderUnreadAnnouncementCount=function(){var b,c;c=ea.unreadCount();b=$(this.el).find(".js-unread-announcements");y.isLoggedIn()&&0<c?b.text(c).show():b.empty().hide()};c.prototype.updateAllAnnouncements=function(){return Ba.fetch()};return c}();Qc=function(){function c(){this.logout=h(this.logout,this);this.account=h(this.account,this);this.notifications=h(this.notifications,this);this.profile=
h(this.profile,this);this.boards=h(this.boards,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){var b;b=y.me().get("username");return""+y.me().get("fullName")+" ("+b+")"};c.prototype.events={"click .js-boards":"boards","click .js-profile":"profile","click .js-notifications":"notifications","click .js-account":"account","click .js-logout":"logout"};c.prototype.render=function(){J("render","rendering HeaderMemberMenuView");
$(this.el).html(s.fill("menu",{menu_cards:[{name:"Boards",js_class:"js-boards",url:Controller.getMemberBoardsUrl()},{name:"Profile",js_class:"js-profile",url:Controller.getMemberProfileUrl()},{name:"Notifications",js_class:"js-notifications",url:Controller.getMemberNotificationsUrl()},{name:"Account...",js_class:"js-account"},{name:"Log Out",js_class:"js-logout",url:"/logout"}]}));return this};c.prototype.boards=function(){return q("Header","User Menu","Boards")};c.prototype.profile=function(){return q("Header",
"User Menu","Profile")};c.prototype.notifications=function(){return q("Header","User Menu","Notifications")};c.prototype.account=function(){var b;q("Header","User Menu","Account");b=y.me().getView(Wc);return t.pushView({view:b})};c.prototype.logout=function(){return q("Header","User Menu","Log Out")};return c}()}if(B("archive")){var Xc,Yc,eb,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,
d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Xc=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.events={};c.prototype.initialize=function(){return this.getList().bind("change:closed",this.render).onAddRemove(this.render)};c.prototype.render=function(){var b,c;c=this.getList();this.sortVal&&(c=c.sortBy(this.sortVal));$(this.el).html(s.fill("archive",{name:this.getTitle(),empty:0===
c.filter(function(b){return b.get("closed")}).length,emptyMessage:this.getEmptyMessage()}));b=$(this.el).find(".archive-items");c.forEach(h(function(c){if(c.get("closed"))return c=c.getView(eb,null,{onReopen:this.onReopen}),b.append(c.render().el)},this));return this};c.prototype.close=function(){};return c}();eb=function(){function c(){this.deleteModel=h(this.deleteModel,this);this.reopen=h(this.reopen,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.tagName=
"li";c.prototype.events={"click .js-reopen":"reopen","click .js-delete":"deleteModel"};c.prototype.render=function(){var b,c,d,f,g;b=null!=this.model.owned?this.model.owned():this.model.editable();c=this.model.toJSON();c.reOpenText=null!=(f=this.options.reOpenText)?f:"Re-open";c.canDelete=null!=(g=this.options.canDelete)?g:!1;c.url="function"===typeof(d=this.model).getUrl?d.getUrl():void 0;$(this.el).html(s.fill("archive_item",c,{editable:b}));return this};c.prototype.reopen=function(b){n.preventDefault(b);
this.model.reopen();q(this.model.typeName,"Reopen");if("function"===typeof(b=this.options).onReopen)b.onReopen(this.model);return!1};c.prototype.deleteModel=function(b){n.preventDefault(b);q(this.model.typeName,"Delete");this.model.destroy();return!1};return c}();Yc=function(){function c(){this.openCard=h(this.openCard,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,eb);c.prototype.tagName="div";c.prototype.className="archived-list-card";c.prototype.events=
{"click .list-card":"openCard","click .js-reopen":"reopen","click .js-delete":"deleteModel"};c.prototype.render=function(){var b,c,d,f,g,i;b=null!=this.model.owned?this.model.owned():this.model.editable();c=this.model.toJSON();c.labels=this.model.getLabels();c.reOpenText=null!=(g=this.options.reOpenText)?g:"Re-open";c.canDelete=null!=(i=this.options.canDelete)?i:!1;c.url="function"===typeof(f=this.model).getUrl?f.getUrl():void 0;$(this.el).html("<div class='list-card clearfix'>        "+s.fill("card_in_list",
c,{editable:b})+"      </div>      "+s.fill("archived_card_options",c,{editable:b}));f=this.model.memberList.models;b=$(this.el).find(".list-card-members");for(g=0,i=f.length;g<i;g++)c=f[g],b.append("<div class='member'>          "+s.fill("member",c.toJSON())+"        </div>");d=$(this.el).find(".badges");this.model.badgeList.forEach(function(b){b.get("isArchived")||(b=b.getView(fb,"card"),d.append(b.render().el))});return this};c.prototype.openCard=function(b){n.stop(b);x.navigate(Controller.getCardUrl(this.model));
t.calcPos()};return c}()}B("templates")&&$(function(){var c;c=function(b){var c,d,f,g;c=s;g=b.split(".");for(d=0,f=g.length;d<f;d++)b=g[d],c=c[b];return _.isString(c)?c:c.index};s.fill=function(b,e,d,f){null==e&&(e={});null==d&&(d={});null==f&&(f={});b=c(b);e=_.extend({__ed:null!=d?d.editable:void 0,__own:null!=d?d.owned:void 0,__invited:null!=d?d.invited:void 0,__loggedIn:y.isLoggedIn(),__avatarDomain:"https://trello-avatars.s3.amazonaws.com"},e,ABTest.templateData(b,d.idABTest));return xe.to_html(b,
e,f)};return s.fillMenu=function(b,c,d){return s.fill("menu-base",{content:s.fill(b,c,d)})}});B("abTest")&&(G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},x.ABTest=new (function(){function c(){this._id=null}u(c,Eb);c.prototype.getDefaultId=function(){var b,c;b=this._id;y.isLoggedIn()&&this._id!==y.myId()&&(this._id=y.myId());null==this._id&&(this._id=
null!=(c=$.cookie("ab"))?c:this._hasher(""+Math.random()).substr(0,16));b!==this._id&&$.cookie("ab",this._id,{path:"/",expires:60});return this._id};c.prototype.event=function(b,c){null!=c?c:c=this.getDefaultId();return $.post("/ab",{id:c,event:b})};return c}()));if(B("api")){var Ca,Uc,h=function(c,b){return function(){return c.apply(b,arguments)}},X=Array.prototype.slice;(function(){var c;c={quickOp:function(b,c,d,f){var g;if(b&&c)return g={},n.isSimpleObject(c)?(g=c,f=d):g[c]=d,c={},c[b]=g,this.update(c,
f),this},set:function(b,c,d){return this.quickOp("set",b,c,d)},pull:function(b,c,d){return this.quickOp("pull",b,c,d)},push:function(b,c,d){return this.quickOp("push",b,c,d)},addToSet:function(b,c,d){return this.quickOp("addToSet",b,c,d)},updates:null,update:function(b,c){var d,f,g,i,j,h,l,o,s,q,w,t;if(!b)return this;d=_.clone(b);null!=c?c:c={};q=["set","push","pull","addToSet"];for(o=0,s=q.length;o<s;o++)if(h=q[o],d[h]){d[h]=_.clone(d[h]);w=d[h];for(j in w){l=w[j];f=this.get(j);g=!1;if("set"===h){if(n.isSimpleObject(l)&&
n.isSimpleObject(f)&&(l=_.extend({},f,l)),_.isEqual(f,l)||!f&&!l)g=!0}else if(i=_.contains(f,l),("push"===h||"addToSet"===h)&&i||"pull"===h&&!i)g=!0;if(g)delete d[h][j];else{g={};"set"!==h&&!_.isArray(f)&&(f=[]);g[j]=function(){switch(h){case "set":return l;case "push":return f.concat(l);case "pull":return _.without(f,l);case "addToSet":return _.uniq(f.concat(l))}}();if(!c.waitForServer&&!Backbone.Model.prototype.set.call(this,g,c))return!1;("_id"===j||"dateLastActivity"===j||"nWatchers"===j||"status"===
j||_.isArray(l))&&delete d[h][j]}}_.isEmpty(d[h])&&delete d[h]}!c.silent&&!c.fromServer&&!_.isEmpty(d)&&(null!=(t=this.updates)?t:this.updates=[],this.updates.push(d));return this}};return x.Api=_.extend(x.Api,{getFx:function(b,c){return function(d,f,g,i){_.isFunction(f)&&(i=g,g=f,f={});null!=f?f:f={};d={token:y.myToken(),method:c,data:d};f="/api/"+b.typeName.toLowerCase();b.id&&(f+="/"+b.id);ga.ajax({url:f,data:JSON.stringify(d),type:"post",contentType:"application/json",dataType:"json",success:h(function(b){x.Api.inFailure&&
(x.Api.inFailure=!1,$(x.Api).triggerHandler("reconnect"));return b.error?"function"===typeof i?i(b.error):void 0:"function"===typeof g?g(b):void 0},this),error:h(function(){var b;b=1<=arguments.length?X.call(arguments,0):[];x.Api.inFailure=!0;$(x.Api).triggerHandler("connecting");return"function"===typeof i?i.apply(null,b):void 0},this)})}},init:function(b){var e,d,f,g,i;e={};i=this.methodMap[b.typeName];for(f=0,g=i.length;f<g;f++)d=i[f],e[d]=this.getFx(b,d);b.api=e;b.rest={};e.update&&(_.extend(b,
c),b.rest.update=_.bind(function(b,c){this.updates?this.withIdParents(h(function(e){e={updates:this.updates,idParents:e};this.updates=null;return this.api.update(e,b,c)},this)):b({})},b));e.create&&(b.rest.create=_.bind(function(b,c){return this.withIdParents(h(function(e){this.api.create({attrs:this.toJSON(),idParents:e},b,c)},this))},b));e["delete"]&&(b.rest["delete"]=_.bind(function(b,c){return this.withIdParents(h(function(e){this.api["delete"]({attrs:this.toJSON(),idParents:e},b,c)},this))},
b));return b}})})();Uc=Api.init({typeName:"App"});Ca=function(c){var b;null!=(b=c.data)?b:c.data={};c.data.token=y.myToken();return ga.ajax(c)}}if(B("models")){var va,Ea,Zc,Tb,ja,ca=Array.prototype.indexOf||function(c){for(var b=0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1},h=function(c,b){return function(){return c.apply(b,arguments)}},X=Array.prototype.slice,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=
b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};x.Models=function(){var c,b,e,d,f,g,i,j,m,l,o,s,q,w,t,u;g={};f={};i="Member,Board,Organization,Notification,Action,Card".split(",");d=function(){var b,c,e,d,j;"undefined"!==typeof ea&&null!==ea&&ea.unbind();"undefined"!==typeof Ba&&null!==Ba&&Ba.unbind();for(e=0,d=i.length;e<d;e++)c=i[e],"undefined"!==typeof Models&&null!==Models&&Models[c].unbind();for(b in f){c=f[b];for(d=0,j=c.length;d<j;d++)e=c[d],J("models","deleting",e),"function"===
typeof e.destructor&&e.destructor(),delete e}g={members:{},boards:{},organizations:{},notifications:{},cards:{},actions:{}};f={members:[],boards:[],organizations:[],notifications:[],cards:[],actions:[]};return x.map=g};d();e=function(b){b.postInitialized||("function"===typeof b.postInitialize&&b.postInitialize(),b.postInitialized=!0);return b};c=function(c,e){return o(b(c,e))};o=function(b){var c,d,f,g,i;c=function(b){var c,d,f,g;g=[];for(d=0,f=b.length;d<f;d++)c=b[d],g.push(e(c));return g};d=["member",
"organization","board"];for(g=0,i=d.length;g<i;g++)f=d[g],null!=b[f]&&c(b[f]);for(f in b)_.contains(d,f)||c(b[f])};b=function(c,e,d){var f,g,i,j,h,m,l,o,s,q,k;null==d&&(d={});f=function(b){var c,e,f,g;g=[];for(c in b)e=b[c],g.push(d[c]=(null!=(f=d[c])?f:[]).concat(e));return g};if(_.isArray(e))for(s=0,i=e.length;s<i;s++)m=e[s],f(b(c,m));else{i={action:Pa,card:wa,board:Bb,member:ra,notification:Ub,organization:gb};j=["memberships","memberType"];o=_.clone(e);for(g in i){n.pluralize(g);l=[];for(h in e)m=
e[h],RegExp("^"+g).test(h)&&0>ca.call(j,h)&&(_.isNumber(m)?o[""+g+"Count"]=m:_.isArray(m)?l=l.concat(m):l.push(m),delete o[h]);for(q=0,k=l.length;q<k;q++)m=l[q],f(b(g,m))}f=Models[n.capitalize(c)];null!=f&&(e=f.get(e.id),null!=e?e.set(o,{fromServer:!0}):(e=new i[c](o),null!=(s=d[c])?s:d[c]=[],d[c].push(e),f.add(e)))}return d};j={_loadMultiApiData:function(c){return async.map(c,h(function(b,c){var e,d,f,g,i,j,h,m,l;j=b.modelType;f=b.id;m=b.query;h=b.path;e=b.next;g=[];for(i=/invite-token-[-a-f0-9]*/g;null!=
(d=null!=(l=i.exec(document.cookie))?l[0]:void 0);)g.push($.cookie(d));_.isEmpty(g)||(m.invitationTokens=g.join(","));null!=h?h:h=""+n.pluralize(j)+"/"+f;return QuickLoad("/1/"+h+"?"+$.param(m),function(b,d,f){c(null,{modelType:j,data:b,next:e});if(null!=(b=null!=f?f.getResponseHeader("X-Server-Time"):void 0))return wb.updateServerTime(parseInt(b))},function(b){return 0===b.indexOf("invalid token")?x.location="/logout":c("Api load error on "+j+", "+f+", "+m+": "+b)})},this),h(function(e,d){var f,
g,i,j;if(e)for(g=0,i=c.length;g<i;g++)f=c[g],"function"===typeof f.next&&f.next(e);else{f=_.reduce(d,h(function(c,e){var d,f;f=e.modelType;d=e.data;return b(f,d,c)},this),{});o(f);j=[];for(g=0,i=d.length;g<i;g++)f=d[g],j.push("function"===typeof f.next?f.next(null,f.data):void 0);return j}},this))},_loadApiData:function(){var b,c,e,d,f,g;c=arguments[0];b=arguments[1];d=arguments[2];f=5<=arguments.length?X.call(arguments,3,g=arguments.length-1):(g=3,[]);e=arguments[g++];return this._loadMultiApiData([{modelType:c,
id:b,query:d,path:f[0],next:e}])},_loadApiDataAndHeader:function(){var b,c,e,f,g,i,j,h;b=2<=arguments.length?X.call(arguments,0,f=arguments.length-1):(f=0,[]);i=arguments[f++];g=b[0];f=b[1];h=b[2];j=b[3];d();c=null!=h;b=[];y.isLoggedIn()&&(e={modelType:"member",id:"me",query:{notifications:"all",notifications_limit:5},next:c?null:i},b.push(e),this.reloadBoardsMenu({delay:500,reload:!0}));c&&b.push({modelType:g,id:f,query:h,path:j,next:i});0===b.length?"function"===typeof i&&i({}):this._loadMultiApiData(b)},
reloadBoardsMenu:function(b){var c,e,d,f;c=b.delay;b=b.reload;b&&(this._boardsMenuLoading=!1);if(!this._boardsMenuLoading){if(0<c)return setTimeout(h(function(){return this.reloadBoardsMenu({delay:0})},this),c);this._boardsMenuLoading=!0;d=["pinned","open"];f=[];for(b=0,e=d.length;b<e;b++)c=d[b],f.push(this._loadApiData("member","me",wc(c)));return f}},loadHeaderData:function(b){return this._loadApiDataAndHeader(b)},loadBoardData:function(b,c,e){return this._loadApiDataAndHeader("board",b,c,e)},loadBoardListData:function(b,
c,e){return this._loadApiData("board",b,c,e)},loadCardData:function(b,c,e){return this._loadApiData("card",c,{},"boards/"+b+"/cards/"+c,e)},loadCardActions:function(b,c,e){return this._loadApiData("card",c,cb,"boards/"+b+"/cards/"+c,e)},loadNotificationData:function(b,c){return this._loadApiDataAndHeader("member",b,{notifications:"all",notifications_limit:20},c)},loadMoreNotificationData:function(b,e,d){return $.get("/1/members/"+b+"/notifications",{filter:"all",limit:20,page:e}).done(function(b){c("notification",
b);return"function"===typeof d?d(null,b):void 0}).fail(function(){return"function"===typeof d?d("error"):void 0})},loadMemberBoardsData:function(b,c){return this._loadApiDataAndHeader("member",b,zc,c)},loadBoardsMenuData:function(b){return this._loadApiData("member","me",vc,b)},loadMoreActionData:function(){var b,c,e,d,f,g,i;f=arguments[0];e=arguments[1];i=arguments[2];d=arguments[3];b=6<=arguments.length?X.call(arguments,4,c=arguments.length-1):(c=4,[]);g=arguments[c++];c=b[0];b=b[1];d={filter:"all",
limit:d,page:i};null!=c&&(d.idModels=c.join(","));null!=b&&(d.filter=b);return this._loadApiData("action",e,d,""+f+"s/"+e+"/actions",g)},loadMemberData:function(b,c){return this._loadApiDataAndHeader("member",b,{},c)},loadMemberAccountData:function(b,c){return this._loadApiDataAndHeader("member",b,yc,c)},loadMemberProfileData:function(b,c){return this._loadApiDataAndHeader("member",b,Ac,c)},loadMemberPasswordData:function(b,c){return this._loadApiData("member",b,{fields:"loginTypes"},c)},loadOrganizationData:function(){var b,
c,e,d,f;c=arguments[0];d=4<=arguments.length?X.call(arguments,1,f=arguments.length-2):(f=1,[]);e=arguments[f++];b=arguments[f++];return(d[0]?this._loadApiData:this._loadApiDataAndHeader).call(this,"organization",c,Bc,function(c,d){return null!=c||null==d?b(c):e(d)})},loadOrgNameById:function(b,c,e){return this._loadApiData("organization",b,{fields:"name"},function(b,d){return null!=b||null==(null!=d?d.name:void 0)?e(b):c(d.name)})},loadCurrentBoardData:function(b,c){return this.loadBoardData(b,xc,
c)},loadBoardMenuData:function(b,c){return this.loadBoardListData(b,uc,c)},loadBoardNames:function(b,c){return async.forEach(b,h(function(b,c){return this._loadApiData("board",b,{fields:"name,closed"},c)},this),c)},finishInit:function(b){return e(b)}};_.each(i,function(b){j[b]=function(c){var e;return e={get:function(b){return g[c][b]},getList:function(b){return _.compact(_.map(b,e.get))},all:function(){return f[c]},add:function(d,g,i){var h,m,l;null==i&&(i=!1);f[c].push(d);e.updateId(d);if(!g&&(j[b].trigger("add",
d),i&&j[b].trigger("pushadd",d),"Action"===b)){l=d.idModels();for(h=0,m=l.length;h<m;h++)g=l[h],j[b].trigger("add:"+g,d),i&&j[b].trigger("pushadd:"+g,d)}},remove:function(e,d){var i,h,m,l,o;if(i=g[c][e]){f[c]=_.filter(f[c],function(b){return b.id!==e});delete g[c][e];if(!d){j[b].trigger("remove",i);if("Action"===b){l=i.idModels();for(h=0,m=l.length;h<m;h++)e=l[h],j[b].trigger("remove:"+e,i)}"Card"===b&&null!=(o=i.getList())&&o.trigger("changeCards")}"function"===typeof i.destructor&&i.destructor()}},
updateId:function(b,e){(e=e||b.id)&&(g[c][e]=b)},find:function(b,e){var d,g,i,j,h;j=f[c];h=[];for(g=0,i=j.length;g<i;g++)d=j[g],_.isEqual(d.get(b),e)&&h.push(d);return h}}}(b.toLowerCase()+"s");return _.extend(j[b],Backbone.Events)});j.Notification.sortedByDateDescending=function(){return this.all().sort(function(b,c){return new Date(c.get("date"))-new Date(b.get("date"))})};j.Action.getListForModel=function(){var b,c,e;if(2===arguments.length)e=arguments[0],b=arguments[1];else if(1===arguments.length)c=
arguments[0],e=c.typeName,b=c.id;else return;e=e.toLowerCase();return _.filter(this.all(),function(c){return c.includesModel(e,b)})};j.Action.removeActionsForModel=function(b,c,e){var d,f;f=this.getListForModel(b,c);for(c=0,d=f.length;c<d;c++)b=f[c],this.remove(b.id,e)};j.Action.update=function(b){var c,e,d,f,g,i,h,m;e=[];h=null!=b?b:[];for(d=0,g=h.length;d<g;d++){c=h[d];(b=Models.Action.get(null!=(f=c._id)?f:c.id))?b.set(c,{silent:!0}):(b=new Pa(c),Models.Action.add(b,!0));m=b.idModels();for(c=0,
i=m.length;c<i;c++)b=m[c],0>ca.call(e,b)&&e.push(b)}g=[];for(f=0,d=e.length;f<d;f++)b=e[f],g.push(j.Action.trigger("add:"+b));return g};j.Member.update=function(b){var c,e,d,f,g,i;i=[];for(d=0,f=b.length;d<f;d++)e=b[d],c=Models.Member.get(null!=(g=e._id)?g:e.id),i.push(null!=c?c.set(e,{silent:!0}):(c=new ra(e),Models.Member.add(c,!0),c.postInitialize()));return i};$(rpc).bind("updateModels",function(b,c){c.idBoard&&l(Models.Board.get(c.idBoard),c);c.idMember&&s(Models.Member.get(c.idMember),c);c.idOrganization&&
t(Models.Organization.get(c.idOrganization),c);c.idNotification&&w(Models.Notification.get(c.idNotification),c);c.idAction&&m(c)});u=function(b,c){var d,f,g,i,j,h;g={Member:ra,Organization:gb,Action:Pa,Board:Bb,Notification:Ub};if(b.typeName!==c)return!1;h=b.deltas;for(i=0,j=h.length;i<j;i++)d=h[i],(f=Models[c].get(d._id))?q(f,d):(f=new g[c](d),Models[c].add(f,!1,!0)),e(f);return!0};q=function(b,c){var e;b.set(c,{fromServer:!0});return null!=(e=Models[b.typeName])?e.trigger("change",b):void 0};l=
function(b,c){var d,f,g,i,j,h,m,l;i={Member:ra,Organization:gb,Card:wa};if(!u(c,"Board"))if(j=c.typeName,b){l=c.deltas;for(h=0,m=l.length;h<m;h++)d=l[h],null!=i[j]?((g=Models[j].get(d._id))?q(g,d):(f=i[j],g=new f(d),Models[j].add(g)),e(g),"Card"===j&&g.ready(function(){var b;return null!=(b=g.getList())?b.refreshCardList():void 0})):(f=b["get"+j],(g="function"===typeof f?f(d._id):void 0)?q(g,d):(f=b[""+n.lowerCaseFirstChar(j)+"List"],null!=f&&f.add([d])))}else console.log("UNHANDLED UPDATE MESSAGE")};
s=function(b,c){return u(c,"Member")?void 0:console.log("UNHANDLED UPDATE MESSAGE")};w=function(b,c){return u(c,"Notification")?void 0:console.log("UNHANDLED UPDATE MESSAGE")};m=function(b){return u(b,"Action")?void 0:console.log("UNHANDLED UPDATE MESSAGE")};t=function(b,c){var e,d,f,g,i,j,h,m;g={Member:ra};if(!u(c,"Organization")){i=c.typeName;if(b){m=c.deltas;for(j=0,h=m.length;j<h;j++)e=m[j],g[i]?(d=Models[i].get(e._id))?q(d,e):(f=g[i],Models[i].add(new f(e))):(d=b["get"+i],(d="function"===typeof d?
d(e._id):void 0)?q(d,e):(f=b[""+n.lowerCaseFirstChar(i)+"List"],null!=f&&f.add([e])));return d}return console.log("UNHANDLED UPDATE MESSAGE")}};$(rpc).bind("deleteModels",function(b,c){var e,d,f,g,i;if(e=Models.Board.get(c.idBoard)){i=c.deltas;for(f=0,g=i.length;f<g;f++)switch(d=i[f],c.typeName){case "BoardInvitation":e.boardInvitationList.remove(d._id);break;case "CheckItem":e.checklistList.each(function(b){b.checkItemList.remove(d._id)});break;case "Card":Models.Action.removeActionsForModel("Card",
d._id);Models.Card.remove(d._id);break;case "Action":Models.Action.remove(d._id);break;default:console.log("UNHANDLED DELETE MESSAGE")}}if(e=Models.Organization.get(c.idOrganization)){i=c.deltas;for(f=0,g=i.length;f<g;f++)switch(d=i[f],c.typeName){case "OrganizationInvitation":e.invitationList.remove(d._id)}}null!=c.idNotification?Models.Notification.remove(c.idNotification):null!=c.idAction&&Models.Action.remove(c.idAction)});return j}();Zc=function(){function c(){c.__super__.constructor.apply(this,
arguments)}u(c,Backbone.Model);c.prototype.bindEvents=function(){var b,c,d,f,g;b=arguments[0];d=2<=arguments.length?X.call(arguments,1):[];for(f=0,g=d.length;f<g;f++)c=d[f],this.bind(c,b);return this};c.prototype.bindEventsDebounced=function(){var b,c;b=arguments[0];c=2<=arguments.length?X.call(arguments,1):[];return this.bindEvents.apply(this,[_.debounce(b,20)].concat(X.call(c)))};c.prototype.bindOnce=function(b,c){return this.unbind(b,c).bind(b,c)};return c}();Tb=function(){function c(){this.withIdParents=
h(this.withIdParents,this);this.onId=h(this.onId,this);this.setReady=h(this.setReady,this);this.ready=h(this.ready,this);c.__super__.constructor.apply(this,arguments)}u(c,Zc);c.prototype.ready=function(b){b&&(this.isReady?b():(this.waitingForReady||(this.waitingForReady=[]),this.waitingForReady.push(b)))};c.prototype.setReady=function(){var b,c,d,f;this.isReady=!0;if(this.waitingForReady){c=this.waitingForReady;this.waitingForReady=null;for(d=0,f=c.length;d<f;d++)b=c[d],"function"===typeof b&&b();
delete c}};c.prototype.onId=function(b){var c,d;d=this;d.id?b(d.id):(c=function(){c=function(){};return _.defer(function(){d.unbind("change:id",c);return b(d.id)})},d.bind("change:id",c))};c.prototype.withIdParents=function(b){b([])};return c}();ja=function(){function c(){this.getView=h(this.getView,this);this.clearCache=h(this.clearCache,this);c.__super__.constructor.apply(this,arguments)}u(c,Tb);c.prototype.destructor=function(){return this.clearCache()};c.prototype.destroy=function(){this.destructor();
return c.__super__.destroy.apply(this,arguments)};c.prototype.clearCache=function(){var b,c,d;if(this.viewCache){d=this.viewCache;for(b in d)c=d[b],"function"===typeof c.destructor&&c.destructor(),delete c;return delete this.viewCache}};c.prototype.getView=function(b,c,d){var f,g;g=b.prototype.uniqueId();f=c?g+":"+c:g;this.viewCache||(this.viewCache={});c=this.viewCache;if(!c[f]){if(!b||!_.isFunction(b)){J("render","view does not exist",g);return}d=_.extend({model:this},d);c[f]=new b(d)}c[f].delegateEvents();
return c[f]};return c}();va=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Backbone.Collection);c.prototype.bindEvents=function(){var b,c,d,f,g;b=arguments[0];d=2<=arguments.length?X.call(arguments,1):[];for(f=0,g=d.length;f<g;f++)c=d[f],this.bind(c,b);return this};c.prototype.onAddRemove=function(b){this.bindEvents(b,"add","remove","refresh");return this};return c}();Ea=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,va);c.prototype.create=function(b,
e){b=c.__super__.create.apply(this,arguments);Models.finishInit(b)};c.prototype.add=function(b,e){var d;this.options&&this.options.model&&(_.isArray(b)||(b=[b]),d=this,b=_.map(b,function(b){var c;(c=!b.cid)&&(b=new d.model(b));b.collection=d;c&&Models.finishInit(b);return b}));return c.__super__.add.apply(this,arguments)};c.prototype.addPlaceholder=function(b){var c;c=_.uniqueId("placeholder");_.extend(b,{id:c});this.add(b);return h(function(){return this.remove(c,{silent:!0})},this)};return c}()}if(B("modelWithPreferences")){var $c,
Fa,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},ca=Array.prototype.indexOf||function(c){for(var b=0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1};Fa=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.prefNames=[];c.prototype.toJSON=function(b){var e,d,f,g,i;null==b&&(b={});e=c.__super__.toJSON.apply(this,
arguments);if(b.prefs){i=this.prefNames;for(f=0,g=i.length;f<g;f++)d=i[f],e[d]=this.getPref(d),e[""+d+"_"+this.getPref(d)]=!0}return e};c.prototype.getPref=function(b){var c;return null!=(c=this.get("prefs"))?c[b]:void 0};c.prototype.setPref=function(b,c){var d;d={};d[b]=c;return this.set({prefs:d})};return c}();$c=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Fa);c.prototype.myPrefNames=[];c.prototype.myPrefDefaults={};c.prototype.toJSON=function(b){var e,d,f,g,i,j;null==
b&&(b={});e=c.__super__.toJSON.apply(this,arguments);if(b.prefs){j=this.myPrefNames;for(g=0,i=j.length;g<i;g++)d=j[g],f=this.getPref(d),e[d]=f,e[""+d+"_"+f]=!0}return e};c.prototype.getPref=function(b){var e,d,f,g,i;return 0<=ca.call(this.myPrefNames,b)?null!=(e=null!=(d=null!=(f=null!=(g=this.get("myPrefs"))?g[b]:void 0)?f:null!=(i=this.get("prefs"))?i[b]:void 0)?d:this.myPrefDefaults[b])?e:!0:c.__super__.getPref.apply(this,arguments)};c.prototype.setPref=function(b,e){return 0<=ca.call(this.myPrefNames,
b)?this.setMyPref(b,e):c.__super__.setPref.apply(this,arguments)};c.prototype.setMyPref=function(b,c){var d;Ca({url:"/1/boards/"+this.id+"/myPrefs",type:"post",data:{name:b,value:c},dataType:"json",error:function(b){return"undefined"!==typeof console&&null!==console?"function"===typeof console.error?console.error(b):void 0:void 0}});d={};d[b]=c;return this.set({myPrefs:d})};return c}()}B("memberowner")&&(h=function(c,b){return function(){return c.apply(b,arguments)}},x.MemberOwner={renderMembers:function(c,
b){var e,d;d=this.model;e=$(this.el).find(c);e.html("");d.memberList.sortBy(function(b){return function(){if(y.isMe(b))return"0";switch(b.get("status")){case "active":return"1";case "idle":return"2";default:return"3"}}()+b.get("fullName")}).forEach(function(c){c=new b({model:c,parent:d});e.append(c.render().el)});DragSort.refreshDraggable();return this},getMemberType:function(c){var b,e;b=null!=c&&c.id?c.id:c;return(e=_.detect(this.get("memberships"),h(function(c){return c.idMember===b},this)))?e.memberType:
this.get("invited")||_.detect(this.get("invitations"),h(function(c){return c.idMemberInvited===b},this))?"invited":this.organization&&_.detect(this.organization.get("memberships"),h(function(c){return c.idMember===b},this))?"org":"public"}});if(B("invitations")){var ad,bd,Qa,Vb,cd,dd,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=
new e;c.__super__=b.prototype;return c};Qa=function(){function c(){this.getParent=h(this.getParent,this);this.withIdParents=h(this.withIdParents,this);c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="Invitation";c.prototype.initialize=function(b,c){Api.init(this);J("invitation",c);this.invitationList=c.collection;this.setReady()};c.prototype.withIdParents=function(b){return this.getParent().onId(function(c){return b([c])})};c.prototype.getParent=function(){return this.invitationList.options.model};
return c}();Vb=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,va);c.prototype.model=Qa;c.prototype.initialize=function(b,c){this.options=c};c.prototype.comparator=function(b){return b.get("dateExpires")?-V.parse(b.get("dateExpires")):-Infinity};return c}();ad=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Qa);c.prototype.typeName="BoardInvitation";return c}();bd=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Vb);c.prototype.model=
ad;return c}();cd=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Qa);c.prototype.typeName="OrganizationInvitation";return c}();dd=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Vb);c.prototype.model=cd;return c}();(function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Adding Members"};c.prototype.render=function(){$(this.el).html(s.fill("popover_helper_add_member"));
return this};return c})()}if(B("member")){var hb,Wb,ed,xb,Ra,fd,gd,Xb,Yb,ra,Wc,hd,id,jd,kd,ld,md,Sa,nd,od,Zb,pd,ib,$b,ac,jb,qd,rd,sd,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},h=function(c,b){return function(){return c.apply(b,arguments)}},ca=Array.prototype.indexOf||function(c){for(var b=0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1};
ra=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Fa);c.prototype.typeName="Member";c.prototype.nameAttr="fullName";c.prototype.initialize=function(){Api.init(this)};c.prototype.postInitialize=function(){var b;b=h(function(b,c){var f,g;g=new b;if(this.isLoggedIn())return f=h(function(){return g.refresh(Models[b.prototype.model.prototype.typeName].getList(this.get(c)))},this),this.bind("change:"+c,f),Models[b.prototype.model.prototype.typeName].bind("add",_.debounce(f,20)),
f()},this);this.boardList=b(kb,"idBoards");this.boardPinnedList=b(kb,"idBoardsPinned");this.boardInvitedList=b(kb,"idBoardsInvited");this.organizationList=b(OrganizationList,"idOrganizations");this.organizationInvitedList=b(OrganizationList,"idOrganizationsInvited");this.setReady()};c.prototype.isLoggedIn=function(){return!this.get("notLoggedIn")};c.prototype.hasAtMe=function(b){var c;if(!this.isLoggedIn())return!1;c=_.compact([this.get("username")].concat(this.get("fullName").split(/\s+/)));return _.detect(c,
function(c){return 2<=c.length&&RegExp("(^|\\W)@"+n.escapeForRegex(c)+"($|\\W)","i").test(b)})};c.prototype.viewBoardProfile=function(b){var c;null!=b&&b.id&&(b=b.id);c=this.getView(kd,b,{board:Models.Board.get(b)});Controller.saveMemberBoardProfileLocation(this,b);return I.show({view:c,hide:h(function(){return Controller.saveBoardLocation(b)},this)})};c.prototype.getMembershipData=function(b){var c,d,f,g,i,j,h,l,o;o=n.toTitleCase(b.typeName);d="Board"===o;h="Organization"===o;c=b.memberList.filter(function(c){return b.ownedByMember(c)});
f=y.isMe(this);j=1<=_.without(c,this).length;g=2<=c.length;i=1<b.memberList.length;l=b.ownedByMember(this);c=b.owned();return{object:o,isBoard:d,isOrg:h,canRemove:f&&j||c&&!f,isMe:f,canChangeRole:c,memberIsAdmin:l,canMakeMember:l&&g&&c,isMoreThanOneAdmin:g,isMoreThanOneMember:i}};c.prototype.owned=function(){var b;return(b=y.me())&&b===this};c.prototype.prefNames=["minutesBetweenSummaries"];c.prototype.getMemberViewTitle=function(){var b;b=this.model.get("username");return""+this.model.get("fullName")+
" ("+b+")"};c.prototype.toggleColorBlindMode=function(){null!=this.get("prefs")&&(this.get("prefs").colorBlind?this.setPref("colorBlind",!1).save():this.setPref("colorBlind",!0).save(),$("body").toggleClass("color-blind-mode-enabled",this.get("prefs").colorBlind))};c.prototype.checkColorBlindMode=function(){var b;return $("body").toggleClass("color-blind-mode-enabled",!0===(null!=(b=this.get("prefs"))?b.colorBlind:void 0))};c.prototype.toJSON=function(b){var e;null==b&&(b={});e=c.__super__.toJSON.apply(this,
arguments);b.hasPassword&&(e.hasPassword=0<=ca.call(e.loginTypes,"password"));return e};return c}();Sa=function(){function c(){this.idList=h(this.idList,this);c.__super__.constructor.apply(this,arguments)}u(c,va);c.prototype.model=ra;c.prototype.initialize=function(b,c){this.options=c};c.prototype.idList=function(){return this.pluck("_id")};return c}();qd=function(){function c(){this.unvote=h(this.unvote,this);this.vote=h(this.vote,this);this.render=h(this.render,this);this.showAll=h(this.showAll,
this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Voters"};c.prototype.events={"click .js-more-members-voted":"showAll","click .js-vote":"vote","click .js-unvote":"unvote"};c.prototype.initialize=function(){return this.model.bind("change:idMembersVoted",h(function(){return this.render()},this))};c.prototype.showAll=function(){this.render(!0);return t.calcTop()};c.prototype.render=function(b){var c,d;d=Models.Member.getList(this.model.get("idMembersVoted")||
[]);var f,g,i;i=[];for(f=0,g=d.length;f<g;f++)c=d[f],i.push(c.toJSON());c={members:i};b||(c.members=c.members.slice(0,48),c.fewMembers=14>d.length,c.moreMembers=48<d.length,c.lengthDiff=d.length-48,c.canVote=this.model.getBoard().canVote(y.me()),c.voted=_.include(this.model.get("idMembersVoted"),y.myId()));$(this.el).html(s.fill("members_voted",c,{},{member:s.member}));return this};c.prototype.vote=function(b){n.preventDefault(b);this.model.vote(!0);return!1};c.prototype.unvote=function(b){n.preventDefault(b);
this.model.vote(!1);0===this.model.get("idMembersVoted").length&&t.hide();return!1};return c}();jb=function(){function c(){this.renderFreqText=h(this.renderFreqText,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.initialize=function(){this.model.bindEventsDebounced(this.render,"change:initials","change:avatarHash","change:avatarSource","change:fullName","change:username","change:bio","change:prefs")};c.prototype.events={"click .js-change-avatar-profile":"changeAvInProfile"};
c.prototype.render=function(){var b;b=y.isMe(this.model);$(this.el).html(s.fill("member_detail",this.model.toJSON(),{editable:b}));setTimeout(h(function(){this.renderMainContent()},this),0);return this};c.prototype.renderFreqText=function(){var b,c;c=$(this.el).find(".js-change-email-freq");b=this.model.toJSON({prefs:!0});c.html(s.fill("member_email_freq",b))};c.prototype.changeAvInProfile=function(b){n.stop(b);q("Member","Avatar","Open Change Avatar Menu - From Profile Photo");t.toggle({elem:$(b.target).closest(".js-change-avatar-profile")[0],
top:180,view:this.model.getView(xb)})};c.prototype.setActiveView=function(b){$(b).addClass("active")};c.prototype.delegateEvents=function(b){return c.__super__.delegateEvents.call(this,_.extend({},c.prototype.events,b||this.events))};return c}();ac=$a(Oa,function(){function c(){this.getActionsFilter=h(this.getActionsFilter,this);this.renderActions=h(this.renderActions,this);this.renderMainContent=h(this.renderMainContent,this);c.__super__.constructor.apply(this,arguments)}u(c,jb);c.prototype.events=
{"click .js-more-actions":"loadMoreActions"};c.prototype.initialize=function(){c.__super__.initialize.apply(this,arguments);this.debouncedRenderActions=_.debounce(this.renderActions,20);return Models.Action.bind("add:"+this.model.id,this.debouncedRenderActions)};c.prototype.renderMainContent=function(){var b;b=this.model.toJSON();b.editable=y.isMe(this.model);b.bioHtml=na.textAsHtml(b.bio,{convertNewlines:!0});b.emptyActions=0===this.getActions().length;$(this.el).find(".window-main-col").html(s.fill("member_profile",
b,{editable:y.isMe(this.model)}));0<this.model.organizationList.length?(b=new td({model:this.model}),$(this.el).find(".list-orgs").html(b.render().el)):$(this.el).find(".list-orgs").closest(".window-module").hide();this.setActiveView(".js-member-profile");return this.renderActions()};c.prototype.renderActions=function(){var b;b=$(this.el).find(".list-actions");(new Ta(this.getActions())).renderTo(b,{key:this.model.id,model:this.model,showBoard:!0,showOrganization:!0});$(this.el).find(".js-more-actions").toggle(this.hasMoreActions());
return this};c.prototype.getActionsFilter=function(){return Fb};return c}());nd=function(){function c(){this.loadMoreNotifications=h(this.loadMoreNotifications,this);this.destructor=h(this.destructor,this);this.renderNotificationList=h(this.renderNotificationList,this);this.renderSingleNotification=h(this.renderSingleNotification,this);this.renderMainContent=h(this.renderMainContent,this);this.initialize=h(this.initialize,this);c.__super__.constructor.apply(this,arguments)}u(c,jb);c.prototype.events=
{"click .js-more-notifications":"loadMoreNotifications","click .js-change-email-freq":"changeEmailFreq"};c.prototype.initialize=function(){c.__super__.initialize.apply(this,arguments);this.nextPage=1;this.isMore=!0;Models.Notification.bind("add",this.renderSingleNotification);Models.Notification.bind("remove",this.renderNotificationList);Models.Notification.bind("add",h(function(){return this.notificationCount++},this));Models.Notification.bind("remove",h(function(){return this.notificationCount--},
this));return this.model.bind("change:prefs",this.renderFreqText)};c.prototype.renderMainContent=function(){var b;b=this.model.toJSON({prefs:!0});b.editable=y.isMe(this.model);b.empty=0===Models.Notification.all().length;$(this.el).find(".window-main-col").html(s.fill("member_notifications",b,{editable:y.isMe(this.model)}));this.isMore||$(this.el).find(".js-more-notifications").hide();this.renderFreqText();this.renderNotificationList();this.setActiveView(".js-member-notifications");return this};c.prototype.renderSingleNotification=
function(b){var c;$(this.el).find(".empty-list").remove();c=$(this.el).find(".list-notifications");b=b.getView(bc);return c.prepend(b.render().el)};c.prototype.renderNotificationList=function(){var b,c,d,f,g;b=$(this.el).find(".list-notifications");b.empty();g=Models.Notification.sortedByDateDescending();for(d=0,f=g.length;d<f;d++)c=g[d],c=c.getView(bc),b.append(c.render().el);this.setActiveView(".js-member-notifications");return this};c.prototype.destructor=function(){var b,c,d,f,g;f=Models.Notification.all();
g=[];for(c=0,d=f.length;c<d;c++)b=f[c],b.get("unread")&&g.push(b.markRead());return g};c.prototype.loadMoreNotifications=function(){return Models.loadMoreNotificationData(this.model.get("username"),this.nextPage,h(function(b,c){if(!b&&(this.nextPage++,this.renderNotificationList(),20>c.length))return this.isMore=!1,$(this.el).find(".js-more-notifications").hide()},this))};c.prototype.changeEmailFreq=function(b){n.stop(b);q("Member","Notifications","Open Change Frequency Menu - From Notifications Page");
return t.toggle({elem:$(b.target).closest(".js-change-email-freq")[0],top:25,view:this.model.getView(Ra,"notifications")})};return c}();ld=function(){function c(){this.renderMainContent=h(this.renderMainContent,this);c.__super__.constructor.apply(this,arguments)}u(c,jb);c.prototype.initialize=function(){c.__super__.initialize.apply(this,arguments);this.model.boardList.onAddRemove(this.renderMainContent);return this.model.bindEvents(this.renderMainContent,"change:idBoards","change:idOrganizations",
"change:idBoardsInvited","change:idOrganizationsInvited")};c.prototype.renderMainContent=function(){var b,c,d,f,g,i,j,h;$(this.el).find(".window-main-col").html(s.fill("member_boards",{},{owned:this.model.owned()}));d=$(this.el).find(".js-boards-list").html("");f=this.model.organizationList.models;g=this.model.boardList.models;for(i=0,j=g.length;i<j;i++)b=g[i],null!=b.organization&&(_.any(f,function(c){return b.get("idOrganization")===c.id})||f.push(b.organization));for(i=0,j=f.length;i<j;i++)g=f[i],
g=this.model.getView(cc,"memberBoards_"+g.id,{organization:g}),d.append(g.render().el);g=this.model.getView(cc,"memberBoards",{organization:null});d.append(g.render().el);if(y.isMe(this.model)){if(null!=(h=this.model.get("idOrganizationsInvited"))&&h.length)f=new ud({model:this.model}),d.prepend(f.render().el);if(null!=(c=this.model.get("idBoardsInvited"))&&c.length)c=new vd({model:this.model}),d.prepend(c.render().el)}this.setActiveView(".js-member-boards");return this};return c}();Wc=function(){function c(){this.render=
h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Account Settings"};c.prototype.initialize=function(){return this.model.bind("change:loginTypes",this.render)};c.prototype.events={"click .js-change-name-and-bio":"changeUserInfo","click .js-change-avatar":"changeAvatar","click .js-change-email-freq":"changeEmailFreq","click .js-change-password":"changePassword"};c.prototype.render=function(){var b;b=this.model.toJSON({hasPassword:!0});
b.memberAccountUrl=Controller.getMemberAccountUrl();$(this.el).html(s.fill("header_account_menu",b));return this};c.prototype.changeUserInfo=function(b){n.stop(b);q("Member","Account","Open Change User Info Menu - From Header");q("Header","User Menu","Open Change User Info Menu");return t.pushView({elem:$(b.target).closest(".js-change-name-and-bio")[0],top:50,view:this.model.getView(Yb)})};c.prototype.changeAvatar=function(b){n.stop(b);q("Member","Avatar","Open Change Avatar Menu - From Header");
q("Header","User Menu","Open Change Avatar Menu");return t.pushView({elem:$(b.target).closest(".js-change-avatar")[0],top:50,view:this.model.getView(xb)})};c.prototype.changePassword=function(b){n.stop(b);q("Member","Account","Open Change Password Menu - From Header");q("Header","User Menu","Open Change Password Menu");return t.pushView({elem:$(b.target).closest(".js-change-password")[0],top:50,view:this.model.getView(Xb)})};c.prototype.changeEmailFreq=function(b){n.stop(b);q("Member","Notifications",
"Open Change Frequency Menu - From Header");q("Header","User Menu","Open Change Frequency Menu");return t.pushView({elem:$(b.target).closest(".js-change-email-freq")[0],top:50,view:this.model.getView(Ra,"account")})};return c}();hd=function(){function c(){this.deleteConfirm=h(this.deleteConfirm,this);this.renderMainContent=h(this.renderMainContent,this);c.__super__.constructor.apply(this,arguments)}u(c,jb);c.prototype.initialize=function(){return this.model.bind("change:loginTypes",this.renderMainContent)};
c.prototype.events={"click .js-change-avatar":"changeAvatar","click .js-change-email-freq":"changeEmailFreq","click .js-change-name-and-bio":"changeUserInfo","click .js-change-password":"changePassword","click .js-confirm-delete-member":"deleteConfirm","click .js-change-email":"changeEmail"};c.prototype.renderMainContent=function(){var b;b=this.model.toJSON({prefs:!0,hasPassword:!0});b["avatarSource_"+b.avatarSource]=!0;$(this.el).find(".window-main-col").html(s.fill("member_account",b,{editable:y.isMe(this.model)}));
$(this.el).find(".member-applications").html(this.model.getView(id,"",{data:this.options.data}).render().el);this.setActiveView(".js-member-account");return this};c.prototype.changeUserInfo=function(b){n.stop(b);q("Member","Account","Open Change User Info Menu");return t.toggle({elem:$(b.target).closest(".js-change-name-and-bio")[0],top:50,view:this.model.getView(Yb)})};c.prototype.changeEmail=function(b){n.stop(b);q("Member","Account","Open Change Email Menu - From Account Page");return t.toggle({elem:$(b.target).closest(".js-change-email")[0],
top:50,view:this.model.getView(fd)})};c.prototype.changeAvatar=function(b){n.stop(b);q("Member","Avatar","Open Change Avatar Menu - From Account Page");return t.toggle({elem:$(b.target).closest(".js-change-avatar")[0],top:50,view:this.model.getView(xb)})};c.prototype.changePassword=function(b){n.stop(b);q("Member","Account","Open Change Password Menu - From Account Page");return t.toggle({elem:$(b.target).closest(".js-change-password")[0],top:50,view:this.model.getView(Xb)})};c.prototype.changeEmailFreq=
function(b){n.stop(b);q("Member","Notifications","Open Change Frequency Menu - From Account Page");return t.toggle({elem:$(b.target).closest(".js-change-email-freq")[0],top:50,view:this.model.getView(Ra,"account")})};c.prototype.deleteConfirm=function(b){n.stop(b);q("Member","Account","Open Delete Account Confirmation Menu");t.toggle({elem:b.target,top:35,view:this.model.getView(md)})};return c}();Yb=function(){function c(){this.saveChanges=h(this.saveChanges,this);this.showError=h(this.showError,
this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Change Name and Bio"};c.prototype.events={"click .js-save-changes":"saveChanges"};c.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});$(this.el).html(s.fill("popover_change_user_info",b));return this};c.prototype.getValue=function(b){return $(this.el).find("[name="+b+"]").val()};c.prototype.showError=function(b){return $(this.el).find("#account-error").text(null!=
b?b:"error").show()};c.prototype.saveChanges=function(b){var c,d,f,g;n.preventDefault(b);b={};$(this.el).find("#account-error").hide();g=["fullName","initials","username","bio"];for(d=0,f=g.length;d<f;d++)c=g[d],b[c]=$.trim(this.getValue(c));b.username=b.username.toLowerCase().replace(/[^a-z0-9_]/g,"");b.initials=b.initials.toUpperCase();this.model.save(b,{waitForServer:!0,success:function(){t.popView();q("Member","Account","Successfully Change User Info")},error:h(function(b,c){this.showError(c)},
this)})};return c}();fd=function(){function c(){this.saveChanges=h(this.saveChanges,this);this.showError=h(this.showError,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Change Email"};c.prototype.events={"click .js-save-changes":"saveChanges"};c.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});$(this.el).html(s.fill("popover_change_email",b));return this};c.prototype.showError=function(b){return $(this.el).find("#account-error").text(null!=
b?b:"error").show()};c.prototype.saveChanges=function(b){n.preventDefault(b);return Ca({type:"POST",url:"/1/members/me/changeEmail",data:{email:$(this.el).find('[name="email"]').val()},success:function(){t.popView();aa.flash("Email Sent","confirm");q("Member","Account","Successfully Change Email")},interceptErrors:!0,error:h(function(b,c,f,g){c=b.status;b=b.responseText;return 400===c?this.showError(b):g()},this)})};return c}();Xb=function(){function c(){this.saveChanges=h(this.saveChanges,this);
this.showPasswordError=h(this.showPasswordError,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.initialize=function(){return this.model.bind("change:loginTypes",this.render)};c.prototype.getViewTitle=function(){return 0>ca.call(this.model.get("loginTypes"),"password")?"Set Password":"Change Password"};c.prototype.events={"click .js-save-changes":"saveChanges"};c.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,hasPassword:!0});
$(this.el).html(s.fill("popover_change_set_password",b));return this};c.prototype.getValue=function(b){return $(this.el).find("[name="+b+"]").val()};c.prototype.showPasswordError=function(b){return $(this.el).find("#password-error").text(null!=b?b:"error").show()};c.prototype.saveChanges=function(b){var c,d,f,g;n.preventDefault(b);c={};$(this.el).find("#password-error").hide();f=this.getValue("oldpassword");b=this.getValue("password");d=this.getValue("password2");g=h(function(){return this.model.save(c,
{waitForServer:!0,success:h(function(){Models.loadMemberPasswordData(this.model.id);q("Member","Account","Successfully Change Password");t.popView()},this),error:h(function(b,c){this.showError(c)},this)})},this);b||d?b!==d?this.showPasswordError("Passwords must match."):this.model.api.updatePassword({oldPassword:f,newPassword:b},function(){return g(!0)},this.showPasswordError):g(!1)};return c}();Ra=function(){function c(){this.changeFreq=h(this.changeFreq,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,
arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Send Emails..."};c.prototype.initialize=function(){return this.model.bind("change:prefs",this.render)};c.prototype.events={"click li a":"changeFreq"};c.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0});$(this.el).html(s.fill("popover_set_email_freq",b));return this};c.prototype.changeFreq=function(b){q("Member","Notifications","Successfully Change Email Frequency");this.model.setPref("minutesBetweenSummaries",parseInt($(b.target).closest("a").attr("value"))).save();
t.popView()};return c}();xb=function(){function c(){this.clearAvatar=h(this.clearAvatar,this);this.useGravatar=h(this.useGravatar,this);this.useUploadedAvatar=h(this.useUploadedAvatar,this);this.startUpload=h(this.startUpload,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Change Avatar"};c.prototype.initialize=function(){this.model.bind("change:avatarSource",this.render);return this.model.bind("change:uploadedAvatarHash",
this.render)};c.prototype.events={"change .js-upload-avatar":"startUpload","click .js-use-gravatar":"useGravatar","click .js-use-uploaded-avatar":"useUploadedAvatar","click .js-no-avatar":"clearAvatar"};c.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});b["avatarSource_"+b.avatarSource]=!0;$(this.el).html(s.fill("popover_avatar",b));c=$(this.el).find(".js-grav");b=c.find("img");$.get(b.attr("src"),h(function(){return c.show()},this));return this};c.prototype.startUpload=function(b){var c,
d,f,g;g=_.uniqueId("iframe");f=$(b.target);c=$(this.el).find(".js-file-too-large").hide();q("Member","Avatar","Use Uploaded - New");d=$("<iframe>").attr("name",g).css("display","none").appendTo("body").load(function(){$("body.error",d.contents()).text()&&c.show();return setTimeout(function(){return d.remove()},1E3)});f.closest("form").attr("target",g).find("input[name=token]").val(y.myToken()).end().submit();return setTimeout(function(){return f.val("")},100)};c.prototype.useUploadedAvatar=function(){q("Member",
"Avatar","Use Uploaded - Existing");this.model.api.useUploadedAvatar();return t.popView()};c.prototype.useGravatar=function(){q("Member","Avatar","Use Gravatar");this.model.api.useGravatar();return t.popView()};c.prototype.clearAvatar=function(){q("Member","Avatar","Use Initials");this.model.api.clearAvatar();return t.popView()};return c}();md=function(){function c(){this.cancelDeleteMember=h(this.cancelDeleteMember,this);this.deleteMember=h(this.deleteMember,this);this.render=h(this.render,this);
c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Delete Account?"};c.prototype.events={"click .js-delete-member":"deleteMember","click .js-cancel-delete":"cancelDeleteMember"};c.prototype.render=function(){$(this.el).html(s.fill("popover_confirm_member_delete",this.model.toJSON()));return this};c.prototype.deleteMember=function(b){n.stop(b);$(this.el).find(".js-delete-member").attr("disabled","disabled");this.model.api.deleteAccount("troodbye!",function(){t.hide();
aa.flash("Email Sent","confirm");q("Member","Account","Sent Account Delete Email")})};c.prototype.cancelDeleteMember=function(b){n.stop(b);t.hide()};return c}();id=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.render=function(){var b,c,d,f,g;b=this.model.toJSON({prefs:!0});c=this.options.data.tokens;b.hasTokens=0<(null!=c?c.length:void 0);$(this.el).html(s.fill("member_application_list",b));if(null!=c){b=$(this.el).find(".applications");g=this.options.data.tokens;
for(d=0,f=g.length;d<f;d++)c=g[d],b.append(this.model.getView(sd,c.id,c).render().el)}return this};return c}();sd=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="application clearfix";c.prototype.events={"click .js-revoke":"revoke"};c.prototype.render=function(){var b,c,d,f,g,i,j,h;h=this.options;c=h.dateExpires;g=h.permissions;d=h.identifier;b=h.dateCreated;b={identifier:d,dateApproved:V.toLongString(V.parse(b)),dateExpires:c?V.toLongString(V.parse(c)):
null,neverExpires:null==c};_.isEmpty(g)?b.permissions="read access on your public boards and organizations":(g=function(){var b,c,e;e=[];for(b=0,c=g.length;b<c;b++)f=g[b],i="",f.read&&(i+="read"),f.write&&(i+="and write"),j=function(){if("*"===f.idModel)switch(f.modelType){case "*":return"your account and all boards and organizations";case "Board":return"all your boards";case "Organization":return"all your organizations";default:return"unknown"}else switch(f.modelType){case "Member":return"your account";
case "Board":return"a specific board";case "Organization":return"a specific organization";default:return"unknown"}}(),e.push(""+i+" access on "+j);return e}(),b.permissions=g.join(", "));$(this.el).html(s.fill("member_application",b));return this};c.prototype.revoke=function(){q("Member","Applications","Revoke App");$(this.el).remove();return rpc.invoke("revokeToken",[this.options.id])};return c}();ib=function(){function c(){this.showMenu=h(this.showMenu,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,
arguments)}u(c,L);c.prototype.className="member";c.prototype.events={click:"showMenu"};c.prototype.initialize=function(){var b,c;this.model&&(this.enablePopupMenu=null!=(b=this.options.enablePopupMenu)?b:!0,this.options.goToBoardProfile&&(this.goToBoardProfile=!0),this.showStatus=null!=(c=this.options.showStatus)?c:!0,this.model.bind("change",this.render))};c.prototype.render=function(){var b,c,d;this.model?(J("render","rendering "+this.constructor.name+" "+this.model.get("fullName")),b=this.model.toJSON(),
b.showStatus=this.showStatus,b["status_"+b.status]=!0,c=h(function(b){b=_.detect(b.get("memberships"),h(function(b){return b.idMember===this.model.id},this));return"admin"===(null!=b?b.memberType:void 0)},this),this.showBoardAdmin&&(b.isBoardAdmin=c(this.getBoard())),this.showOrganizationAdmin&&(b.isOrganizationAdmin=c(this.getOrganization()))):b={deleted:!0};$(this.el).html(s.fill("member",b));this.enablePopupMenu||$(this.el).addClass("no-menu");$(this.el).data("id",null!=(d=this.model)?d.id:void 0);
return this};c.prototype.showMenu=function(b){var c;if((this.doClicks()&&this.enablePopupMenu||this.goToBoardProfile)&&this.model){n.stop(b);if(this.goToBoardProfile&&(c=this.getBoard())){this.model.viewBoardProfile(this.getBoard());return}this.options.goToProfile?Controller.memberProfileView(this.model.get("username")):(b=$(b.currentTarget).closest(".member,.inline-member-container"),t.toggle({elem:$(b)[0],top:b.hasClass("member")?35:16,view:this.getMenuView()}))}};c.prototype.doClicks=function(){return!DragSort.sorting};
return c}();(function(){function c(){this.getMenuView=h(this.getMenuView,this);c.__super__.constructor.apply(this,arguments)}u(c,ib);c.prototype.getMenuView=function(){return this.model.getView(hb,this.model.cid)};return c})();Zb=function(){function c(){this.getMenuView=h(this.getMenuView,this);c.__super__.constructor.apply(this,arguments)}u(c,ib);c.prototype.getMenuView=function(){var b;b=this.options.parent;return this.model.getView(ed,"card_"+b.cid,{card:b})};return c}();od=function(){function c(){this.getMenuView=
h(this.getMenuView,this);c.__super__.constructor.apply(this,arguments)}u(c,ib);c.prototype.showBoardAdmin=!0;c.prototype.getBoard=function(){return this.options.parent};c.prototype.getMenuView=function(){return this.model.getView(Wb,"board",{board:this.options.parent})};return c}();pd=function(){function c(){this.getMenuView=h(this.getMenuView,this);c.__super__.constructor.apply(this,arguments)}u(c,ib);c.prototype.showOrganizationAdmin=!0;c.prototype.getOrganization=function(){return this.options.parent};
c.prototype.getMenuView=function(){return this.model.getView(rd,"org",{organization:this.options.parent})};return c}();hb=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){var b;b=this.model.get("username");return""+this.model.get("fullName")+" ("+b+")"};c.prototype.className="activity-member-menu";c.prototype.render=function(){$(this.el).html(s.fillMenu("member_on_activity_menu",this.model.toJSON()));return this};return c}();gd=function(){function c(){this.makeMember=
h(this.makeMember,this);this.makeAdmin=h(this.makeAdmin,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Change Role"};c.prototype.initialize=function(){this.parent=this.options.parent;this.parent.bind("change:memberships",this.render)};c.prototype.events={"click .js-make-admin":"makeAdmin","click .js-make-member":"makeMember"};c.prototype.render=function(){var b;b=this.model.getMembershipData(this.parent);$(this.el).html(s.fill("popover_change_roles",
b));return this};c.prototype.makeAdmin=function(b){n.stop(b);this.parent.ownedByMember(this.model)||this.parent.api.addAdmin(this.model.id)};c.prototype.makeMember=function(b){n.stop(b);this.parent.ownedByMember(this.model)&&this.parent.api.removeAdmin(this.model.id)};return c}();$b=function(){function c(){this.render=h(this.render,this);this.changeRole=h(this.changeRole,this);this.removeMember=h(this.removeMember,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=
function(){var b;b=this.model.get("username");return""+this.model.get("fullName")+" ("+b+")"};c.prototype.events={"click .js-remove-member":"removeMember","click .js-change-role":"changeRole"};c.prototype.removeMember=function(){t.hide();this.parent.memberList.remove(this.model);this.parent.api.removeMember(this.model.id)};c.prototype.changeRole=function(){t.pushView({view:this.model.getView(gd,"",{parent:this.parent})})};c.prototype.getExtraData=function(){return{}};c.prototype.render=function(){var b;
b=_.extend(this.model.toJSON(),this.getExtraData(),this.model.getMembershipData(this.parent));$(this.el).html(s.fillMenu(this.templateName,b,{editable:this.parent.editable()}));return this};return c}();rd=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,$b);c.prototype.className="organization-member-menu";c.prototype.templateName="member_on_board_or_org_menu";c.prototype.initialize=function(){this.parent=this.options.organization};return c}();Wb=function(){function c(){c.__super__.constructor.apply(this,
arguments)}u(c,$b);c.prototype.className="board-member-menu";c.prototype.templateName="member_on_board_or_org_menu";c.prototype.initialize=function(){this.parent=this.options.board};c.prototype.getExtraData=function(){return{boardProfileUrl:Controller.getMemberBoardProfileUrl(this.model.get("username"),this.parent.id)}};return c}();ed=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){var b;b=this.model.get("username");return""+this.model.get("fullName")+
" ("+b+")"};c.prototype.className="card-member-menu";c.prototype.events={"click .js-remove-member":"removeMember"};c.prototype.initialize=function(){this.card=this.options.card};c.prototype.render=function(){$(this.el).html(s.fillMenu("member_on_card_menu",this.model.toJSON(),{editable:this.card.editable()}));return this};c.prototype.removeMember=function(){t.hide();this.card.removeMember(this.model.id)};return c}();jd=function(){function c(){this.onReopen=h(this.onReopen,this);this.getList=h(this.getList,
this);c.__super__.constructor.apply(this,arguments)}u(c,Xc);c.prototype.getList=function(){return this.model.boardList};c.prototype.getTitle=function(){return"Closed Boards"};c.prototype.getEmptyMessage=function(){return"No boards have been closed"};c.prototype.onReopen=function(b){return Controller.displayBoard({idBoard:b.id})};return c}();kd=$a(Oa,function(){function c(){this.removeAdmin=h(this.removeAdmin,this);this.makeAdmin=h(this.makeAdmin,this);this.removeMember=h(this.removeMember,this);this.renderActions=
h(this.renderActions,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.initialize=function(){this.board=this.options.board;this.board.memberList.onAddRemove(this.render);this.debouncedRenderActions=_.debounce(this.renderActions,20);Models.Action.bind("add:"+this.model.id,this.debouncedRenderActions);this.idModels=[this.board.id];return this.loadMoreActions()};c.prototype.events={"click .js-remove-member":"removeMember","click .js-make-admin":"makeAdmin",
"click .js-remove-admin":"removeAdmin","click .js-more-actions":"loadMoreActions"};c.prototype.render=function(){var b;b=_.extend(this.model.toJSON(),this.model.getMembershipData(this.board));$(this.el).html(s.fill("board_member_profile",b));return this.renderActions()};c.prototype.renderActions=function(){var b;b=$(this.el).find(".list-actions");(new Ta(Models.Action.getListForModel(this.model))).renderTo(b,{key:this.model.id,model:this.model});$(this.el).find(".js-more-actions").toggle(this.hasMoreActions());
return this};c.prototype.removeMember=function(){this.board.memberList.remove(this.model);this.board.api.removeMember(this.model.id);I.hide()};c.prototype.makeAdmin=function(){this.board.api.addAdmin(this.model.id,this.render)};c.prototype.removeAdmin=function(){this.board.api.removeAdmin(this.model.id,this.render)};c.prototype.getActionsFilter=function(){return Fb};return c}())}if(B("card_filter")){var S,dc,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,
u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};S=new (function(){function c(){this.getNumCards=h(this.getNumCards,this);this.filterMyCards=h(this.filterMyCards,this);this.clearAllCardFilters=h(this.clearAllCardFilters,this);this.refreshFilters=h(this.refreshFilters,this);this.fQActive=!1;this.filterArray=[]}c.prototype.refreshFilters=function(){var b,c,d,f,g,i,j;b=$("#board");if(0<
b.length)return 0<this.filterArray.length?(b.addClass("filtering"),c=$(".list-card:not(.placeholder,.js-composer)"),d=[],f=[],i=[],$(".matched-card").removeClass("matched-card"),g=/[\s\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,this.filterArray.forEach(h(function(b){if(b.match(/^label-*/))return d.push(b.replace(/label-/,".")+"-label");if(b.match(/^member-*/))return f.push(b.replace(/member-/,".assigned-to-"));if(b.match(/^title-*/))return b=b.replace(/^title-/,"").toLowerCase(),i=_.compact(b.split(g))},
this)),j=RegExp("^("+i.join("|")+")"),b=$(c).filter(h(function(b){b=_.compact($(c[b]).find("a.list-card-title").text().toLowerCase().split(g));return _.detect(b,function(b){return j.test(b)})},this)),d.length&&(b=b.filter(d.join())),f.length&&(b=b.filter(f.join())),b.addClass("matched-card"),$(".js-filter-cards").addClass("is-on"),this.getNumCards()):this.clearAllCardFilters()};c.prototype.clearAllCardFilters=function(){$("#board").removeClass("filtering");$(".matched-card").removeClass("matched-card");
this.filterArray=[];$(".js-filter-cards").removeClass("is-on");$(".card-filter .js-filter-toggle.active").removeClass("active");$(".card-filter .js-filter-by-title").val("");N.newCards=[];$(".list-card.temp-show").removeClass("temp-show");return this.fQActive=!1};c.prototype.filterMyCards=function(){var b,c;c=y.me();b=$("#board");if(c&&b.length)return this.clearAllCardFilters(),b="member-"+c.get("username"),this.filterArray.push(b),S.refreshFilters(),$(".js-filter-cards").addClass("is-on"),this.getNumCards()};
c.prototype.getNumCards=function(){var b,c;b=$("#board");if(0<b.length&&b.hasClass("filtering"))return c=$(".list"),c.each(function(b){var f,g,b=c[b];f=$(b).find(".list-card:not(.placeholder,.js-composer)").length;g="s";1===f&&(g="");return $(b).find(".num-cards").text(""+f+" card"+g)})};return c}());$(S.init);dc=function(){function c(){this.useTranslucent=h(this.useTranslucent,this);this.useHidden=h(this.useHidden,this);this.toggleFilter=h(this.toggleFilter,this);this.filterByTitle=h(this.filterByTitle,
this);this.render=h(this.render,this);this.initialize=h(this.initialize,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Search and Filter Cards"};c.prototype.initialize=function(){return this.model.bind("change:labelNames",this.render)};c.prototype.events={"click .js-filter-toggle":"toggleFilter","click .js-use-hidden":"useHidden","click .js-use-translucent":"useTranslucent"};c.prototype.render=function(){var b,c,d,f;b=$("#board");d=[];f=[];c=
this.model.toJSON({labelNames:!0});c.searchTerms="";S.filterArray.forEach(h(function(b){if(b.match(/^label-*/))return d.push(b);if(b.match(/^member-*/))return b=b.replace(/member-/,""),f.push(b);if(b.match(/^title-*/))return c.searchTerms=b.replace(/title-/,"")},this));c.boardMems=[];this.model.memberList.models.forEach(function(b){b=b.toJSON();_.include(f,b.username)&&(b.activeFilter=!0);c.boardMems.push(b)});b.hasClass("translucent-filter")?c.translucentfilter=!0:c.hiddenfilter=!0;d.forEach(h(function(b){"label-green"===
b&&(c.activeGreen=!0);"label-yellow"===b&&(c.activeYellow=!0);"label-orange"===b&&(c.activeOrange=!0);"label-red"===b&&(c.activeRed=!0);"label-purple"===b&&(c.activePurple=!0);if("label-blue"===b)return c.activeBlue=!0},this));$(this.el).html(s.fill("filter_cards",c,{},{member:s.member}));_.delay(h(function(){return $(this.el).find(".js-filter-by-title").keyup(_.debounce(this.filterByTitle,300))},this),20);return this};c.prototype.filterByTitle=function(b){var c;b.keyCode!==ta&&(b=$(".js-filter-by-title").val(),
c=[],S.filterArray.forEach(h(function(b){if(b.match(/^label-*/)||b.match(/^member-*/))return c.push(b)},this)),S.filterArray=c,b&&S.filterArray.push("title-"+b),S.refreshFilters())};c.prototype.toggleFilter=function(b){var c;n.stop(b);b=$(b.target).closest(".js-filter-toggle");b.hasClass("active")?b.removeClass("active"):b.addClass("active");b.hasClass("filter-label-toggle")&&(c="label-"+$(b).attr("attr"),_.include(S.filterArray,c)?S.filterArray=_.without(S.filterArray,c):S.filterArray.push(c));b.hasClass("filter-member-toggle")&&
(c="member-"+$(b).attr("attr"),_.include(S.filterArray,c)?S.filterArray=_.without(S.filterArray,c):S.filterArray.push(c));b.hasClass("js-clear-all")&&(S.filterArray=[]);S.refreshFilters()};c.prototype.useHidden=function(b){n.stop(b);b=$(b.target).closest(".js-use-hidden");$("#board").removeClass("translucent-filter");$(this.el).find(".display-options a").removeClass("active");b.addClass("active");S.getNumCards()};c.prototype.useTranslucent=function(b){n.stop(b);b=$(b.target).closest(".js-use-translucent");
$("#board").addClass("translucent-filter");$(this.el).find(".display-options a").removeClass("active");b.addClass("active");S.getNumCards()};return c}()}if(B("board")){var yb,Bb,ec,wd,vd,kb,lb,xd,zb,yd,zd,fc,Sb,cc,Ad,Bd,Cd,gc,Dd,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},ca=Array.prototype.indexOf||
function(c){for(var b=0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1};Bb=function(){function c(){this.getCheckItem=h(this.getCheckItem,this);this.getBoardInvitation=h(this.getBoardInvitation,this);this.getChecklist=h(this.getChecklist,this);this.getUrl=h(this.getUrl,this);this.getList=h(this.getList,this);this.getCard=h(this.getCard,this);c.__super__.constructor.apply(this,arguments)}u(c,$c);c.prototype.typeName="Board";c.prototype.initialize=function(){Api.init(this)};c.prototype.postInitialize=
function(){var b;this.listList=new Ed(this.get("lists")||[],{model:this});this.boardInvitationList=new bd(this.get("invitations")||[],{model:this});this.checklistList=new hc([],{model:this});this.memberList=new Sa;b=h(function(){this.memberList.refresh(Models.Member.getList(_.pluck(this.get("memberships"),"idMember")||[]),{model:this})},this);this.bind("change:memberships",b);b();this.bind("change:lists",h(function(){this.listList.refresh(this.get("lists")||[],{model:this})},this));b=h(function(){this.checklistList.refresh(this.get("checklists")||
[],{model:this})},this);b();this.bind("change:checklists",b);b=h(function(){return this.organization=Models.Organization.get(this.get("idOrganization"))},this);this.bind("change:idOrganization",b);b();this.checklistList.each(function(b){Models.finishInit(b);b.checkItemList.each(function(b){Models.finishInit(b)})});this.listList.each(function(b){Models.finishInit(b)});this.listList.each(function(b){b.cardList.each(function(b){Models.finishInit(b)})});this.setReady()};c.prototype.close=function(){this.set({closed:!0});
this.save()};c.prototype.reopen=function(){this.set({closed:!1});this.save()};c.prototype.toJSON=function(b){var e;null==b&&(b={});e=c.__super__.toJSON.apply(this,arguments);b.org&&null!=this.organization&&(e.hasOrg=!0,e.org=this.organization.toJSON({url:!0}));b.url&&(e.url=Controller.getBoardUrl(this));b.pinned&&(e.pinned=this.isPinned());return e};c.prototype.calcPos=function(b,c){return n.calcPos(b,this.listList,c,function(b){return!b.get("closed")})};c.prototype.getCard=function(b){return n.isShortId(b)?
Models.Card.find("idShort",Number(b))[0]:Models.Card.get(b)};c.prototype.getList=function(b){return this.listList.get(b)};c.prototype.getUrl=function(){return Controller.getBoardUrl(this)};c.prototype.getChecklist=function(b){return this.checklistList.get(b)};c.prototype.getBoardInvitation=function(b){return this.boardInvitationList.get(b)};c.prototype.getCheckItem=function(b){var c,d,f,g,i;g=this.checklistList.models;for(d=0,f=g.length;d<f;d++)if(c=g[d],c=null!=c?null!=(i=c.checkItemList)?i.get(b):
void 0:void 0)return c};c.prototype.editable=function(){var b;return(b=y.me())&&this.editableByMember(b)};c.prototype.editableByMember=function(b){return this.isMember(b)};c.prototype.isMember=function(b){var c;return"normal"===(c=this.getMemberType(b))||"admin"===c};c.prototype.invited=function(){var b;return(b=y.me())&&this.isMemberInvited(b)};c.prototype.isMemberInvited=function(b){return"invited"===this.getMemberType(b)};c.prototype.owned=function(){var b;return(b=y.me())&&this.ownedByMember(b)};
c.prototype.ownedByMember=function(b){return"admin"===this.getMemberType(b)};c.prototype.canJoin=function(){var b,c,d;return(null!=(b=this.get("prefs"))?b.selfJoin:void 0)&&(null!=(c=this.organization)?c.isMember(y.me()):void 0)&&(d=this.id,0>ca.call(y.me().get("idBoards"),d))};c.prototype.canInviteMembers=function(){var b,c,d;if("owners"===(null!=(c=this.get("prefs"))?c.invitations:void 0))b="admin";else if("members"===(null!=(d=this.get("prefs"))?d.invitations:void 0))b="normal";return"admin"===
this.getMemberType(y.me())||b===this.getMemberType(y.me())};c.prototype.getMemberType=function(b){return MemberOwner.getMemberType.call(this,b)};c.prototype.compareMemberType=function(b,c,d){return n.compareMemberType(this,b,c,d)};c.prototype.isMemberPublic=function(b){return"public"===this.getMemberType(b)};c.prototype.isMemberOrg=function(b){return"org"===this.getMemberType(b)};c.prototype.memberMatchesSetting=function(b,c){switch(this.getPref(c)){case "public":return y.isLoggedIn();case "org":return this.isMember(b)||
this.isMemberOrg(b);case "members":return this.isMember(b);case "owners":return this.ownedByMember(b);default:return!1}};c.prototype.canVote=function(b){return this.memberMatchesSetting(b,"voting")};c.prototype.canComment=function(b){return this.memberMatchesSetting(b,"comments")};c.prototype.canInvite=function(b){return this.memberMatchesSetting(b,"invitations")};c.prototype.prefNames=["permissionLevel","voting","comments","invitations","selfJoin"];c.prototype.myPrefNames=["showSidebar","showSidebarMembers",
"showSidebarBoardActions","showSidebarActivity","showListGuide"];c.prototype.myPrefDefaults={showListGuide:!1};c.prototype.getLabelName=function(b){var c;c=this.get("labelNames");return(null!=c?c[b]:void 0)||""};c.prototype.isPublic=function(){return"public"===this.getPref("permissionLevel")};c.prototype.isPartiallyLoaded=function(){var b,c,d,f;f=["memberships","lists"];for(c=0,d=f.length;c<d;c++)if(b=f[c],null==this.get(b))return!0;return this.get("invited")?!0:!1};c.prototype.pin=function(b){var c;
null==b&&(b=!0);c=y.me();b?c.addToSet("idBoardsPinned",this.id):c.pull("idBoardsPinned",this.id);c.save()};c.prototype.isPinned=function(){var b;return y.isLoggedIn()&&(b=this.id,0<=ca.call(y.me().get("idBoardsPinned"),b))};c.prototype.responseToInvite=function(b,c){var d;d=y.me();return d.api.respondToInvitation({accepted:b,idModel:this.id,token:$.cookie("invite-token-"+this.id),modelType:"Board"},function(f){b&&(d.set({idBoards:f.idBoards,idBoardsInvited:f.idBoardsInvited}),d.save());"function"===
typeof c&&c()})};c.prototype.acceptInvite=function(b){return this.responseToInvite(!0,b)};c.prototype.rejectInvite=function(b){return this.responseToInvite(!1,b)};c.prototype.getInviteToken=function(){return $.cookie("invite-token-"+this.id)};c.prototype.getIdBoardMems=function(){return _.map(this.memberList.models,h(function(b){return b.id},this))};return c}();kb=function(){function c(){this.sync=h(this.sync,this);c.__super__.constructor.apply(this,arguments)}u(c,va);c.prototype.model=Bb;c.prototype.initialize=
function(){this.bind("change:name",this.sort)};c.prototype.comparator=function(b){var c;c=b.organization||Models.Organization.get(b.get("idOrganization"));c=(null!=c?c.get("displayName"):void 0)||"";b=b.get("name")||"";return n.rpad(c,64).toUpperCase()+b.toUpperCase()};c.prototype.sync=function(b,c,d){d(Models.Board.all())};return c}();yd=function(){function c(){this.openBoardMenuSidebar=h(this.openBoardMenuSidebar,this);this.viewAllActivityList=h(this.viewAllActivityList,this);this.viewAllActivityHeader=
h(this.viewAllActivityHeader,this);this.openManageMembers=h(this.openManageMembers,this);this.signupAndJoinPopover=h(this.signupAndJoinPopover,this);this.joinBoard=h(this.joinBoard,this);this.rejectInvite=h(this.rejectInvite,this);this.acceptInvite=h(this.acceptInvite,this);this.showWidgetVisibility=h(this.showWidgetVisibility,this);this.showCardFilter=h(this.showCardFilter,this);this.dblClickAddListMenu=h(this.dblClickAddListMenu,this);this.addListPopover=h(this.addListPopover,this);this.openDesc=
h(this.openDesc,this);this.openBoardMenuTitle=h(this.openBoardMenuTitle,this);this.openBoardMenuIcon=h(this.openBoardMenuIcon,this);this.sortStop=h(this.sortStop,this);this.renderMembers=h(this.renderMembers,this);this.showDesktopNotification=h(this.showDesktopNotification,this);this.allowDesktopNotifications=h(this.allowDesktopNotifications,this);this.renderActions=h(this.renderActions,this);this.renderLists=h(this.renderLists,this);this.renderPermissionLevel=h(this.renderPermissionLevel,this);this.renderName=
h(this.renderName,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="board-wrapper";c.prototype.events={sortstop:"sortStop","click .js-allow-notifications":"allowDesktopNotifications","click .js-open-board-menu-icon":"openBoardMenuIcon","click .js-open-board-menu-title":"openBoardMenuTitle","click .js-open-desc":"openDesc","click .js-board-widget-vis":"showWidgetVisibility","click .js-show-all-widgets":"showWidgetVisibility","click .js-accept-invite":"acceptInvite",
"click .js-reject-invite":"rejectInvite","click .js-join-board":"joinBoard","click .js-signup-and-join":"signupAndJoinPopover","click .js-open-manage-board-members":"openManageMembers","click .js-open-board-menu-sidebar":"openBoardMenuSidebar","click .js-add-list-popover":"addListPopover","click .js-filter-cards":"showCardFilter","click .js-view-all-activity-header":"viewAllActivityHeader","click .js-view-all-activity-list":"viewAllActivityList","dblclick #board":"dblClickAddListMenu"};c.prototype.initialize=
function(){var b,c,d;this.model.view=this;this.model.bind("change:closed",this.render).bind("change:name",this.renderName).bind("change:prefs",this.renderPermissionLevel).bind("change:myPrefs",this.render).bind("change:idOrganization",this.renderName).bind("change:memberships",this.renderPermissionLevel);null!=this.model.organization&&this.model.organization.bind("change:name",this.renderName);b=_.debounce(this.renderLists,120);this.model.listList.bind("change:closed",b).onAddRemove(b);this.model.memberList.bind("change:status",
this.renderMembers).onAddRemove(this.renderMembers);Models.Action.bind("pushadd:"+this.model.id,this.showDesktopNotification).bind("add:"+this.model.id,_.debounce(this.renderActions,20)).bind("remove:"+this.model.id,_.debounce(this.renderActions,20));y.isLoggedIn()&&(c=y.me(),d=this.model.isMember(c),c.boardList.onAddRemove(h(function(){var b;b=null!=c.boardList.get(this.model.id)||this.model.isMember(c);if(b!==d)this.render();else if(!(b||this.model.isMemberInvited(c)||null!=this.model.organization&&
_.detect(this.model.organization.memberList.models,function(b){return b.id===c.id})&&"org"===this.model.get("prefs").permissionLevel)&&"public"!==this.model.get("prefs").permissionLevel)return Controller.displayErrorPage({errorType:"boardNotFound"})},this)))};c.prototype.render=function(){var b,c,d,f,g,i,j,m,l;i=this;d=i.model;b=$(i.el);this.cardComposerState={pos:{idBoard:d.id,idList:null,cardPos:null},members:[],labels:[],title:null,vis:!1};f={editable:d.editable(),owned:d.owned(),invited:d.invited()};
if(d.get("closed"))b.html(s.fill("board_closed",d.toJSON(),f));else{c=d.toJSON();c.url=Controller.getBoardUrl(this.model);l=d.prefNames.concat(d.myPrefNames);for(j=0,m=l.length;j<m;j++)g=l[j],c[""+g+"_"+d.getPref(g)]=!0;c.canJoin=d.canJoin();c.canInviteMembers=d.canInviteMembers();b.css({"margin-top":"100000px"});b.html(s.fill("board",c,f));_.defer(h(function(){return N.calc_board()},this));_.defer(h(function(){return i.renderName().renderLists().renderMembers().renderActions().renderPermissionLevel()},
this));_.delay(h(function(){ListGuide.calcVisLists();R.calc_surface();return $(this.el).find(".list-area-wrapper:first").dragscrollable({fxIgnore:function(c){var e;b=$(c.target).closest("#board");e=c.offsetY>b.height()-30;c=0<$(c.target).closest(".list").length;return e||c}})},this),1500)}return this};c.prototype.renderName=function(){var b,c;b=this.model;c=b.get("name");null!=b.organization?(b=$("<a>").attr("href","/"+b.organization.get("name")).text(""+b.organization.get("displayName")),$(this.el).find(".org-name").html(b)):
$(this.el).find(".org-name").empty();$(this.el).find("#board-header .js-board-title").text(c);Controller.setLocation({title:c});return this};c.prototype.renderPermissionLevel=function(){var b,c,d;c=$(this.el).find("#permission-level");d=this.model.getPref("permissionLevel");b={};"private"===d?b={permissionLevel:"private",altText:"This board is private. It's only viewable to members of this board."}:"public"===d?b={permissionLevel:"public",altText:"This board is public. It's viewable to all members of Trello."}:
"org"===d&&(b={permissionLevel:"org-private",altText:"This board is only viewable to members of the organization."});c.html(s.fill("board_permissions",b));b=this.model.canInvite(y.me());$(this.el).find(".js-manage-board-members").toggle(b);!b&&"board-member-modal"===I.getViewName()&&I.hide();return this};c.prototype.renderLists=function(){var b,c;b=$(this.el).find(".list-area");c=$(this.el).find(".list-area-wrapper");N.saveScrolls();(WindowSize.fLarge||WindowSize.fExtraLarge)&&N.fHorizScroll&&c.css({"margin-top":"+=10000"});
b.empty();this.model.listList.forEach(function(c){c.get("closed")||(c=c.getView(Ga),b.append(c.render().el))});(WindowSize.fLarge||WindowSize.fExtraLarge)&&_.defer(function(){N.calcLists();return N.restoreScrolls()});_.defer(function(){$(".board-wrapper").css({"margin-top":"0"});return c.css({"margin-top":"0"})});DragSort.refresh();return this};c.prototype.renderActions=function(){var b;b=$(this.el).find(".js-sidebar-list-actions");(new Ta(Models.Action.getListForModel(this.model))).renderTo(b,{limit:10,
key:this.model.id,model:this.model});$(this.el).find(".js-allow-notifications").toggle(DesktopNotifications.notEnabled());return this};c.prototype.allowDesktopNotifications=function(b){var c;n.preventDefault(b);q("Board Sidebar","Allow Desktop Notifications");c=this;DesktopNotifications.requestPermission(function(){c.renderActions()})};c.prototype.showDesktopNotification=function(b){var c,d,f,g,i,j,h,l,o,n,q;if(null!=b&&(g=V.parse(b.get("date")),h=function(){var c;return _.detect(Models.Action.getListForModel("Card",
null!=(c=b.get("data").card)?c.id:void 0),function(b){var c,e;c=V.parse(b.get("date"));return y.isMe(b.get("idMemberCreator"))&&12E5>g-c&&("commentCard"===(e=b.get("type"))||"createCard"===e)})},c=(new ic).getEntityLists([b],{})[0])){c.member=c.entities[0];c.entities=c.entities.slice(1);n=c.entities;for(l=0,o=n.length;l<o;l++)i=n[l],i[i.type+"Type"]=!0,"comment"===i.type&&(j={convertNewlines:!0},i.html=na.textAsHtml(i.text,j));if("commentCard"===b.get("type")&&!y.isMe(b.get("idMemberCreator"))&&(y.me().hasAtMe(b.get("data").text)||
h()))f=this.model.getCard(null!=(q=b.get("data").card)?q.id:void 0),d=this.model,DesktopNotifications.notify(c.db_id,{html:s.fill("desktop_notification",c,{},{entity:s.entity}),close:function(b){b&&null!=f&&f.addComment(b)},click:function(){f&&d&&Controller.displayBoard({board:d,idCard:f.id})}})}};c.prototype.renderMembers=function(){return MemberOwner.renderMembers.call(this,".js-list-board-members",od)};c.prototype.sortStop=function(b,c){n.stopPropagation(b);c.item.trigger("movelist",[c])};c.prototype.openBoardMenuIcon=
function(b){n.stop(b);q("Board Header","Open Board Menu","Icon");t.toggle({elem:$(".js-open-board-menu-icon")[0],top:32,view:this.model.getView(mb)})};c.prototype.openBoardMenuTitle=function(b){n.stop(b);q("Board Header","Open Board Menu","Title");t.toggle({elem:$(".js-open-board-menu-icon")[0],top:35,view:this.model.getView(mb)})};c.prototype.openDesc=function(b){n.stop(b);q("Board Header","Edit Description");I.show({view:this.model.getView(ec),displayType:"slim"})};c.prototype.addListPopover=function(b){n.stop(b);
q("Board Sidebar","Open Add List Menu");t.toggle({elem:b.target,top:35,view:this.model.getView(yb,"default")})};c.prototype.dblClickAddListMenu=function(b){n.stop(b);this.model.isMember(y.me())&&(q("Board","Open Add List Menu - From Double Click"),t.toggle({clientx:b.clientX,clienty:b.clientY,top:35,view:this.model.getView(yb,"dblClick",{dblClick:!0})}))};c.prototype.showCardFilter=function(b){n.stop(b);q("Board Sidebar","Open Search and Filter Menu");b=$(".js-filter-cards").is(":visible")?$(".js-filter-cards")[0]:
$(".js-show-all-widgets")[0];t.toggle({elem:b,top:35,view:this.model.getView(dc)})};c.prototype.showWidgetVisibility=function(b){var c;n.stop(b);q("Board Sidebar","Open Widget Visibility Menu");c=$(b.target).attr("name");t.toggle({elem:b.target,top:23,view:this.model.getView(zd,c,{settingName:c})})};c.prototype.acceptInvite=function(b){n.preventDefault(b);q("Board Sidebar","Accept Board Invite");$(this.el).find(".js-accept-invite").attr("disabled","disabled");this.model.acceptInvite(function(){return x.location.reload()});
return!1};c.prototype.rejectInvite=function(b){n.preventDefault(b);q("Board Sidebar","Reject Board Invite");this.model.rejectInvite(function(){return x.location.reload()});return!1};c.prototype.joinBoard=function(b){q("Board Sidebar","Join Board");n.preventDefault(b);y.me().api.addToBoard({idBoard:this.model.id},h(function(){this.render();return _.defer(h(function(){return $(this.el).find(".board-widget .js-join-board").closest(".board-widget").remove()},this))},this));this.model.memberList.add(y.me());
return!1};c.prototype.signupAndJoinPopover=function(b){n.stop(b);q("Board Sidebar","Open Sign Up and Join Popover");t.toggle({elem:b.target,top:40,view:this.model.getView(Dd)})};c.prototype.openManageMembers=function(b){var c;n.stop(b);q("Board Sidebar","Open Add Members");c=this.model.getView(xa);c.getOrgData();t.toggle({elem:$(b.target).closest(".js-open-manage-board-members")[0],top:35,view:c})};c.prototype.viewAllActivityHeader=function(){q("Board Sidebar","View All Board Activity","From Widget Header");
I.show({view:this.model.getView(Ha),displayType:"slim"})};c.prototype.viewAllActivityList=function(){q("Board Sidebar","View All Board Activity","From End of List");I.show({view:this.model.getView(Ha),displayType:"slim"})};c.prototype.openBoardMenuSidebar=function(b){n.stop(b);q("Board Sidebar","Open Board Menu");t.toggle({elem:$(".js-open-board-menu-sidebar")[0],top:35,view:this.model.getView(mb)})};return c}();Dd=function(){function c(){this.setAutoAccept=h(this.setAutoAccept,this);this.render=
h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Create New Account"};c.prototype.events={"click .js-google-confirm-account":"setAutoAccept","click .js-confirm-email-account":"setAutoAccept"};c.prototype.render=function(){var b;b={email:$.cookie("email"),returnUrl:Controller.getBoardUrl(this.model)};$(this.el).html(s.fill("popover_signup",b));return this};c.prototype.setAutoAccept=function(){return $.cookie("accept-board-invite-"+
this.model.id,"1",{expires:1,path:"/"})};return c}();yb=function(){function c(){this.cancel=h(this.cancel,this);this.addList=h(this.addList,this);this.renderValue=h(this.renderValue,this);this.updateListList=h(this.updateListList,this);this.getClosestListPos=h(this.getClosestListPos,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Add List"};c.prototype.events={"change .js-select-list-pos":"renderValue","click .js-add-list":"addList",
"submit form":"addList","click .js-cancel":"cancel"};c.prototype.getLists=function(){var b,c,d,f,g;f=this.model.listList.models;g=[];for(c=0,d=f.length;c<d;c++)b=f[c],b.get("closed")||g.push(b);this.lists=g;return this.listsLength=this.lists.length+1};c.prototype.render=function(){$(this.el).html(s.fill("popover_add_list"));_.delay(h(function(){this.options.dblClick&&this.getClosestListPos();this.getLists();return this.updateListList()},this),10);return this};c.prototype.getClosestListPos=function(){var b,
c;b=$(".list");c=[];this.closestListIdx=0;b.each(h(function(d){d=parseInt(Math.abs($(b[d]).offset().left+$(b[d]).width()/2-t.el_left),10);return c.push(d)},this));this.closestListIdx=_.indexOf(c,_.min(c));if(t.el_left>$(b[this.closestListIdx]).offset().left+$(b[this.closestListIdx]).width()/2)return this.closestListIdx+=1};c.prototype.updateListList=function(){var b,c,d;c=$(this.el).find(".js-select-list-pos");for(b=0,d=this.listsLength;0<=d?b<d:b>d;0<=d?b++:b--)$("<option>").val(b).text(b+1).appendTo(c);
b=c.find("option:last");this.options.dblClick&&(b=c.find("option:eq("+this.closestListIdx+")"));b.attr("selected","selected");return this.renderValue()};c.prototype.renderValue=function(){var b;b=parseInt($(this.el).find(".js-select-list-pos").val(),10)+1;$(".js-pos-value").html(n.getNaturalNumber(""+b))};c.prototype.addList=function(b){var c,d,f,g;n.stop(b);f=$(this.el).find(".js-list-name").val();b=$(this.el).find(".js-select-list-pos");g=parseInt(b.find("option:selected").val(),10);d=g===this.listsLength-
1?!1:!0;c="List"===f?!1:!0;t.hide();_.defer(h(function(){return this.model.listList.create({name:f,pos:this.model.calcPos(g),closed:!1},{success:h(function(b){this.model.listList.remove(b,{silent:!0});return c&&d?q("Board","Add List Menu","Successfully Add List - Changed Name, Changed Position"):c?q("Board","Add List Menu","Successfully Add List - Changed Name, Default Position"):d?q("Board","Add List Menu","Successfully Add List - Default Name, Changed Position"):q("Board","Add List Menu","Successfully Add List - Default Name, Default Position")},
this)})},this))};c.prototype.cancel=function(b){n.stop(b);t.hide();q("Board","Add List Menu","Click Cancel Button")};return c}();ec=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.initialize=function(){this.model.bind("change:name",this.render);this.model.bind("change:desc",this.render)};c.prototype.events={"click .js-edit-desc":"editDesc"};c.prototype.render=function(){var b,c,d;b=this.model.toJSON();c=this.model.get("desc");
b.hasDesc=!!c;d={editable:this.model.editable(),owned:this.model.owned()};$(this.el).html(s.fill("board_desc",b,d));b.hasDesc&&$(this.el).find(".board-description>div.current").html(na.markdownAsHtml(c));return this};c.prototype.editDesc=function(b){n.stop(b);this.edit("desc")};return c}();zd=function(){function c(){this.hideAllWidgets=h(this.hideAllWidgets,this);this.showWidget=h(this.showWidget,this);this.hideWidget=h(this.hideWidget,this);this.render=h(this.render,this);this.initialize=h(this.initialize,
this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Show Widgets"};c.prototype.initialize=function(){this.settingName=this.options.settingName;return this.model.bind("change:myPrefs",this.render)};c.prototype.events={"click .js-hide":"hideWidget","click .js-show":"showWidget","click .js-hide-all":"hideAllWidgets"};c.prototype.render=function(){var b;b={visible:this.model.getPref(this.settingName),isShowAll:"showSidebar"===this.settingName};$(this.el).html(s.fillMenu("board_widget_menu",
b));return this};c.prototype._commitPref=function(b,c){t.hide();_.defer(h(function(){this.model.setPref(b,c);return this.model.save()},this))};c.prototype.hideWidget=function(){this._commitPref(this.settingName,!1)};c.prototype.showWidget=function(){this._commitPref(this.settingName,!0)};c.prototype.hideAllWidgets=function(){this._commitPref("showSidebar",!1)};return c}();gc=function(){function c(){this.exportJSON=h(this.exportJSON,this);this.printModel=h(this.printModel,this);this.cancel=h(this.cancel,
this);this.focusInput=h(this.focusInput,this);this.render=h(this.render,this);this.initialize=h(this.initialize,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Share, Print, and Export"};c.prototype.initialize=function(){return this.modelType=this.model.typeName.toLowerCase()};c.prototype.events={"click .js-print":"printModel","click .js-export-json":"exportJSON","click input[type='text']":"focusInput","submit form":"cancel"};c.prototype.render=
function(){var b,c,d,f,g;c={};c.object=this.modelType;c.jsonURL="/"+this.model.typeName.toLowerCase()+"/"+this.model.id+"/"+n.makeSlug(this.model.get("name"))+".json";b="card"===c.object?this.model.board:this.model;d=b.get("prefs").permissionLevel;"org"===d&&(c.orgName=null!=(f=null!=(g=b.organization)?g.get("displayName"):void 0)?f:"the organization it belongs to");"private"===d&&(c["private"]=!0);"org"===d&&(c.org=!0);"public"===d&&(c["public"]=!0);$(this.el).html(s.fill("popover_share",c));b=h(function(b){return this.model.api.getShortLink({},
function(c){return b(null,c)},function(c){return b(c)})},this);$(this.el).find(".js-url").text("Retrieving...");b(h(function(b,c){return $(this.el).find(".js-url").val(b?"Error!":c).focus().select()},this));return this};c.prototype.focusInput=function(b){$(b.target).focus().select();return!1};c.prototype.cancel=function(b){n.stop(b);return!1};c.prototype.printModel=function(b){n.stop(b);"board"===this.modelType?(q("Share, Print, and Export Menu","Print","Board"),I.hide(),t.hide()):q("Share, Print, and Export Menu",
"Print","Card");_.defer(function(){return x.print()})};c.prototype.exportJSON=function(){return"board"===this.modelType?q("Share, Print, and Export Menu","Export JSON","Board"):q("Share, Print, and Export Menu","Export JSON","Card")};return c}();xd=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.tagName="li";c.prototype.initialize=function(){return this.model.bind("change:actionCount",this.render)};c.prototype.events={click:"openBoard"};
c.prototype.render=function(){var b,c;b=this.model.toJSON();b.url=Controller.getBoardUrl(this.model);b.orgName=this.model.organization?this.model.organization.get("displayName"):void 0;b.current=Controller.onBoardView(this.model.id);c=this.model.get("actionCount");0<c&&(b.unreadActionsCount=100<c?"100+":c);$(this.el).html(s.fill("board_menu_item",b));return this};c.prototype.openBoard=function(){return q("Header","Boards Menu","Opened Board")};return c}();lb=function(){function c(){this.viewArchive=
h(this.viewArchive,this);this.addBoard=h(this.addBoard,this);this.getOrganization=h(this.getOrganization,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.events={"click .js-add-board":"addBoard","click .js-view-archive":"viewArchive"};c.prototype.initialize=function(){this.model.boardList.bind("change:closed",this.render).onAddRemove(this.render)};c.prototype.getOrganization=function(){return this.options.organization};c.prototype.addBoard=function(b){var c,d,f;n.stop(b);c=this.model.getView(fc,
"new",{newBoard:!0});c.idOrganization=null!=(d=null!=(f=this.getOrganization())?f.id:void 0)?d:"";0<$(b.target).closest(".pop-over").length?t.pushView({view:c}):t.toggle({elem:$(b.target).closest(".js-add-board")[0],top:35,view:c});return!1};c.prototype.viewArchive=function(b){n.preventDefault(b);I.show({view:this.model.getView(jd)});rpc.invoke("getBoardList",[y.myUsername(),{memberships:!0}],h(function(b){var c,f,g,i;i=b.boards;for(f=0,g=i.length;f<g;f++)c=i[f],(b=this.model.boardList.get(c._id))?
b.set(c,{silent:!0}):this.model.boardList.add([c],{silent:!0});return this.model.boardList.trigger("refresh")},this));return!1};return c}();fc=function(){function c(){this.submit=h(this.submit,this);this.helperAddOrg=h(this.helperAddOrg,this);this.helperVis=h(this.helperVis,this);this.changeOrg=h(this.changeOrg,this);this.setPermissionLevel=h(this.setPermissionLevel,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return this.options.copyBoard?
"Copy Board":"New Board"};c.prototype.events={"change select[name='org-id']":"changeOrg","click .js-helper-vis":"helperVis","click .js-helper-add-org":"helperAddOrg","submit form":"submit","click .js-submit":"submit"};c.prototype.render=function(){var b,c,d,f;b=_.map(y.me().organizationList.models,function(b){return b.toJSON()});this.options.copyBoard&&(this.idOrganization=null!=(c=this.model.organization)?c.id:void 0);for(d=0,f=b.length;d<f;d++)c=b[d],c.selectOrg=c.id===this.idOrganization?!0:!1;
c=!!this.idOrganization;b={orgs:b,hasOrg:c,canAddToOrgs:0!==b.length,isCopyBoard:this.options.copyBoard,isNewBoard:this.options.newBoard};this.options.copyBoard?b["permissionLevel_"+this.model.get("prefs").permissionLevel]=!0:c?b.permissionLevel_org=!0:b.permissionLevel_private=!0;$(this.el).html(s.fill("board_new",b));return this};c.prototype.setPermissionLevel=function(b){$(this.el).find("select[name='permissionLevel'] option[value='"+b+"']").attr("selected","selected")};c.prototype.getPermissionLevel=
function(){return $(this.el).find('select[name="permissionLevel"]').val()};c.prototype.changeOrg=function(b){var c;c=this.getPermissionLevel();b=""!==$(b.target).find("option:selected").val();"private"===c&&b?this.setPermissionLevel("org"):"org"===c&&!b&&this.setPermissionLevel("private");$(this.el).find('option[value="org"]').removeAttr("disabled");b||$(this.el).find('option[value="org"]').attr("disabled","disabled")};c.prototype.helperVis=function(b){n.stop(b);t.pushView({view:this.model.getView(Bd)})};
c.prototype.helperAddOrg=function(b){n.stop(b);t.pushView({view:this.model.getView(Ad)})};c.prototype.submit=function(b){var c;n.stop(b);b={name:$(this.el).find('input[name="name"]').val().trim(),idOrganization:null!=(c=$(this.el).find('select[name="org-id"]').val())?c:"",prefs_permissionLevel:$(this.el).find('select[name="permissionLevel"]').val()};if(""===b.name)$(this.el).find('input[name="name"]').focus().select();else return this.options.copyBoard&&(b.idBoardSource=this.model.id,b.keepFromSource=
$(this.el).find("input:checkbox[checked]").map(function(){return this.name}).get().join()),this.options.newBoard?q("Board","Create","New"):this.options.copyBoard&&q("Board","Create","Copy"),Ca({url:"/1/boards",type:"post",data:b,dataType:"json",success:h(function(b){this.options.copyBoard&&aa.hide("copying");Controller.displayBoard({board:b,forceReload:!0})},this)}),this.options.copyBoard&&aa.show("Copying...","info","copying"),t.hide()};return c}();Bd=function(){function c(){this.render=h(this.render,
this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Visibility"};c.prototype.render=function(){$(this.el).html(s.fill("popover_helper_new_board_vis"));return this};return c}();Ad=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Add an Organization"};c.prototype.render=function(){$(this.el).html(s.fill("popover_helper_new_board_add_org"));return this};
return c}();Sb=function(){function c(){this.keyEvent=h(this.keyEvent,this);this.deselectBoards=h(this.deselectBoards,this);this.hoverItem=h(this.hoverItem,this);this.renderBoards=h(this.renderBoards,this);this.getActivityCounts=h(this.getActivityCounts,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,lb);c.prototype.getViewTitle=function(){return"Boards"};c.prototype.initialize=function(){this.model.boardPinnedList.onAddRemove(this.render)};c.prototype.events=
{"click .js-add-board":"addBoard","click .js-view-archive":"viewArchive","hover .js-add-board":"deselectBoards","hover .js-view-archive":"deselectBoards","hover .js-see-all-boards":"deselectBoards","hover .js-fill-boards li":"hoverItem","keyup .js-search-boards":"keyEvent"};c.prototype.render=function(){var b,c,d;b={};b.allBoardsUrl=Controller.getMemberBoardsUrl();$(this.el).html(s.fill("header_boards_menu",b));this.searchInput=$(this.el).find(".js-search-boards");this.fillEl=$(this.el).find(".js-fill-boards");
this.oldTerm="";b=y.me().boardList.models;b=_.map(b,function(b){return b.id});d=null!=(c=y.me().boardPinnedList)?c.models:void 0;c=_.map(d,function(b){return b.id});c=_.uniq(b.concat(c));this.allBoards=_.sortBy(Models.Board.getList(c),function(b){return b.get("name").toLowerCase()});this.renderBoards();return this};c.prototype.getActivityCounts=function(b){return Models.loadBoardsMenuData(b)};c.prototype.renderBoards=function(b){var c,d,f,g,i;f=this.model;b?(d=function(){var d,f,g;g=[];for(d=0,f=
b.length;d<f;d++)c=b[d],c.get("closed")||g.push(c);return g}(),d=d.slice(0,7)):d=function(){var b,d,g,i;g=f.boardPinnedList.models;i=[];for(b=0,d=g.length;b<d;b++)c=g[b],c.get("closed")||i.push(c);return i}();this.fillEl.empty();for(g=0,i=d.length;g<i;g++)c=d[g],this.fillEl.append(c.getView(xd).render().el);0===d.length&&(d=0===this.model.boardList.length?"No Available Boards":"No Boards",b&&(d="No Matching Boards"),this.fillEl.append('<p class="empty">'+d+"</p>"));if(b)return n.selectMenuItem(this.fillEl,
"li",this.fillEl.find("li:first"))};c.prototype.hoverItem=function(b){b=$(b.target).closest("li");n.selectMenuItem(this.fillEl,"li",b)};c.prototype.deselectBoards=function(){this.fillEl.find("li").removeClass("selected")};c.prototype.keyEvent=function(b){var c,d,f,g;if(!((d=b.keyCode)===ia||d===sa||d===la||d===ma||d===ha||(b.shiftKey||b.altKey||b.ctrlKey)&&((f=b.keyCode)===Z||f===Y)))if((g=b.keyCode)===Z||g===Y)n.navMenuList($(".js-fill-boards"),"li",b.keyCode);else if(b.keyCode===da)$("list-card.active-card").removeClass("active-card"),
b=$(".js-fill-boards").find("li.selected:first").find("a"),0<b.length&&(b.click(),t.hide());else if(b=this.searchInput.val().toLowerCase().trim(),this.oldTerm!==b)if(""===b)this.oldTerm=b,this.renderBoards();else return this.oldTerm=b,c=RegExp("^("+b.split(/\s+/).join("|")+")"),b=[],b=_.filter(this.allBoards,function(b){b=b.get("name").toLowerCase().split(/\s+/);return _.detect(b,function(b){return c.test(b)})}),this.deselectBoards(),this.renderBoards(b)};return c}();Cd=function(){function c(){this.render=
h(this.render,this);this.getOrganization=h(this.getOrganization,this);c.__super__.constructor.apply(this,arguments)}u(c,lb);c.prototype.tagName="ul";c.prototype.initialize=function(b){this.idMember=b.idMember;c.__super__.initialize.apply(this,arguments)};c.prototype.getOrganization=function(){return this.model};c.prototype.render=function(){var b,c,d,f,g,i;f=this.model;c=f.toJSON();c.isMe=y.isMe(f);d=_.detect(this.model.get("memberships"),function(b){return y.isMe(b.idMember)});c.isOrgMember=!!d;
$(this.el).html(s.fill("org_boards_list",c));d=function(){var c,e,d,g;d=f.boardList.models;g=[];for(c=0,e=d.length;c<e;c++)b=d[c],b.get("closed")||g.push(b);return g}();for(g=0,i=d.length;g<i;g++)b=d[g],c=b.getView(zb,"personal"),$(this.el).find(".js-list-boards").append(c.render(y.isMe(f)).el);return this};return c}();zb=function(){function c(){this.joinBoard=h(this.joinBoard,this);this.showMenu=h(this.showMenu,this);this.openBoard=h(this.openBoard,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,
arguments)}u(c,L);c.prototype.tagName="li";c.prototype.initialize=function(){this.model.bind("change:name",this.render);return y.me().bind("change:idBoardsPinned",this.render)};c.prototype.events={"click .js-boards-list-menu":"showMenu","click .js-join-board":"joinBoard","click .js-open-board":"openBoard"};c.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,url:!0,pinned:!0});100<b.actionCount&&(b.plus=!0,b.actionCount=100);b.canJoin=this.model.canJoin();$(this.el).html(s.fill("member_board_stats",
b));return this};c.prototype.openBoard=function(){return q("Member","Boards Page","Opened Board - "+this.options.boardType)};c.prototype.showMenu=function(b){n.stop(b);q("Member","Boards Page","Opened Board Menu - "+this.options.boardType);Models.loadBoardMenuData(this.model.id,h(function(){return t.toggle({elem:$(b.target).closest(".js-boards-list-menu")[0],top:30,view:Models.Board.get(this.model.id).getView(mb)})},this))};c.prototype.joinBoard=function(b){n.stop(b);y.me().api.addToBoard({idBoard:this.model.id});
this.model.memberList.add(y.me());y.me().boardList.add(this.model);q("Member","Boards Page","Joined Board - "+this.options.boardType);$(b.currentTarget).hide()};return c}();cc=function(){function c(){this.loadAllOrgBoards=h(this.loadAllOrgBoards,this);this.showMore=h(this.showMore,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,lb);c.prototype.initialize=function(){this.model.boardList.onAddRemove(this.render).bind("change:closed",this.render);this.showAll=
!1;return this.loadAllOrgBoards()};c.prototype.render=function(){var b,c,d,f,g,i,j;d=this.model;f=this.options.organization;this.isMe=y.isMe(this.options.model);this.boardTypeStr="";c=h(function(b){if(b.get("closed"))return!1;if(f)return this.boardTypeStr="Your Org Board",this.isMe||(this.boardTypeStr="Other Person's Org Board"),b.get("idOrganization")===f.id;this.boardTypeStr="Your Personal Board";this.isMe||(this.boardTypeStr="Other Person's Personal Board");return!b.organization},this);g=d.boardList.filter(c);
c=_.difference(Models.Board.all().filter(c),g);f?(b=f.toJSON({prefs:!0,url:!0}),b.hasMore=!this.showAll&&(null!=c?c.length:void 0),b.showAll=this.showAll&&(null!=c?c.length:void 0)):b={displayName:"Boards"};b.isMe=this.isMe;b.empty=0===g.length;$(this.el).html(s.fill("member_boards_list",b,{editable:y.isMe(d)}));$(this.el).find(".js-list-boards").empty();for(i=0,j=g.length;i<j;i++)b=g[i],b=b.getView(zb,"org",{boardType:this.boardTypeStr}),$(this.el).find(".js-list-boards").append(b.render(y.isMe(d)).el);
$(this.el).find(".js-show-all-org-boards:first").click(h(function(){return this.showMore()},this));if(this.showAll)for(g=0,i=c.length;g<i;g++)b=c[g],this.boardTypeStr="Your Other Org Board",this.isMe||(this.boardTypeStr="Other Person's Other Org Board"),b=b.getView(zb,"org",{boardType:this.boardTypeStr}),$(this.el).find(".js-list-more-boards").append(b.render(y.isMe(d)).el);$(this.el).find(".js-view-org-profile").click(h(function(){return q("Member","Boards Page","View Org Profile")},this));return this};
c.prototype.showMore=function(){this.showAll=!0;q("Member","Boards Page","Show All Org Boards");return this.render()};c.prototype.loadAllOrgBoards=function(){if(null!=this.options.organization)return Models.loadOrganizationData(this.options.organization.get("name"),!0,h(function(){return this.render()},this),h(function(){},this))};return c}();vd=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,lb);c.prototype.tagName="ul";c.prototype.initialize=
function(b){this.idMember=b.idMember;c.__super__.initialize.apply(this,arguments);this.model.boardInvitedList.bind("change",this.render).bind("refresh",this.render).bind("add",this.render).bind("remove",this.render)};c.prototype.render=function(){$(this.el).html(s.fill("member_invitation_list",{model:"Board"}));$(this.el).find(".js-list-invitations").empty();this.model.boardInvitedList.forEach(h(function(b){if(!b.get("closed"))return b=new wd({model:b}),$(this.el).find(".js-list-invitations").append(b.render().el)},
this));return this};return c}();wd=function(){function c(){this.rejectInvitation=h(this.rejectInvitation,this);this.acceptInvitation=h(this.acceptInvitation,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.tagName="li";c.prototype.events={"click .js-accept-invitation":"acceptInvitation","click .js-reject-invitation":"rejectInvitation"};c.prototype.render=function(){var b;b=this.model.toJSON();b.url=Controller.getBoardUrl(b);$(this.el).html(s.fill("member_invitation",
b));return this};c.prototype.acceptInvitation=function(){$(this.el).find(".js-accept-invitation").attr("disabled","disabled");this.model.acceptInvite();return q("Member","Boards Page","Accept Board Invite")};c.prototype.rejectInvitation=function(){this.model.rejectInvite();return q("Member","Boards Page","Reject Board Invite")};return c}()}if(B("boardMenu")){var Ha,Fd,Gd,xa,mb,Hd,Id,Jd,Kd,Ld,jc,Md,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=
function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};mb=function(){function c(){this.closeConfirm=h(this.closeConfirm,this);this.shareBoard=h(this.shareBoard,this);this.unpinBoard=h(this.unpinBoard,this);this.pinBoard=h(this.pinBoard,this);this.copyBoard=h(this.copyBoard,this);this.filterCards=h(this.filterCards,this);this.addList=h(this.addList,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,
arguments)}u(c,L);c.prototype.getViewTitle=function(){return""+this.model.get("name")};c.prototype.events={"click .js-settings":"openSettings","click .js-members":"openMembers","click .js-archived-items":"openArchivedItems","click .js-labels":"openLabels","click .js-activity":"openActivity","click .js-add-list":"addList","click .js-board-menu-filter-cards":"filterCards","click .js-copy-board":"copyBoard","click .js-pin-board":"pinBoard","click .js-unpin-board":"unpinBoard","click .js-share":"shareBoard",
"click .js-close-board":"closeConfirm"};c.prototype.initialize=function(){this.model.bind("change",this.render)};c.prototype.render=function(){var b;b=this.model.toJSON({url:!0});b.pinned=this.model.isPinned();b.canPin=y.isLoggedIn();Controller.onAnyBoardView()&&(b.showBoardDetailFunctions=!0);$(this.el).html(s.fillMenu("board_menu",b,{editable:this.model.editable(),owned:this.model.owned()}));return this};c.prototype.openSettings=function(b){n.stop(b);q("Board Menu","Open Settings");t.pushView({view:this.model.getView(Kd)})};
c.prototype.openMembers=function(){var b;q("Board Menu","Open Members");b=this.model.getView(xa);b.getOrgData();t.pushView({view:b})};c.prototype.openArchivedItems=function(){var b;q("Board Menu","Open Archived Items");b=this.model.getView(Fd);b.getData();I.show({view:b,displayType:"archive"})};c.prototype.openLabels=function(){q("Board Menu","Edit Labels");t.pushView({view:this.model.getView(jc)})};c.prototype.openActivity=function(){q("Board Menu","Open Activity");I.show({view:this.model.getView(Ha),
displayType:"slim"})};c.prototype.addList=function(b){n.stop(b);q("Board Menu","Open Add List");t.pushView({view:this.model.getView(yb,"default")})};c.prototype.filterCards=function(b){n.stop(b);q("Board Menu","Open Search and Filter Cards");t.pushView({view:this.model.getView(dc)})};c.prototype.copyBoard=function(b){n.stop(b);q("Board Menu","Open Copy Board");t.pushView({view:this.model.getView(fc,"copy",{copyBoard:!0})})};c.prototype.pinBoard=function(){q("Board Menu","Pin/Unpin","Pin");this.model.pin(!0);
this.render()};c.prototype.unpinBoard=function(){q("Board Menu","Pin/Unpin","Unpin");this.model.pin(!1);this.render()};c.prototype.shareBoard=function(b){n.stop(b);q("Board Menu","Share, Print, Export");t.pushView({view:this.model.getView(gc)})};c.prototype.closeConfirm=function(b){n.stop(b);q("Board Menu","Open Confirm Close");t.pushView({view:this.model.getView(Ld)})};return c}();Kd=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=
function(){return"Settings"};c.prototype.events={"click .js-rename":"renameBoard","click .js-org":"changeOrg","click .js-permissions":"changePermissions","click .js-desc":"editDesc","click .js-layout":"changeLayout"};c.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0,url:!0});b.pinned=this.model.isPinned();b.canPin=y.isLoggedIn();Controller.onAnyBoardView()&&(b.showBoardDetailFunctions=!0);if(null!=(c=this.model.organization)&&c.owned())b.orgOwner=!0,b.orgName=this.model.organization.get("displayName");
$(this.el).html(s.fillMenu("board_menu_settings",b,{editable:this.model.editable(),owned:this.model.owned()}));return this};c.prototype.renameBoard=function(b){n.stop(b);q("Board Menu","Open Rename Board");t.pushView({view:this.model.getView(Md)})};c.prototype.changeOrg=function(b){n.stop(b);q("Board Menu","Change Org");t.pushView({view:this.model.getView(Jd)})};c.prototype.changePermissions=function(b){n.stop(b);q("Board Menu","Change Permissions");t.pushView({view:this.model.getView(Id)})};c.prototype.editDesc=
function(b){n.stop(b);q("Board Menu","Edit Description");I.show({view:this.model.getView(ec),displayType:"slim"})};c.prototype.changeLayout=function(b){n.stop(b);q("Board Menu","Change Layout Options");t.pushView({view:this.model.getView(Gd)})};return c}();Md=function(){function c(){this.rename=h(this.rename,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Rename Board"};c.prototype.events={"click`.js-rename-board":"rename",
"submit form":"rename"};c.prototype.render=function(){var b;b={};b.boardName=this.model.get("name");$(this.el).html(s.fill("popover_rename_board",b));return this};c.prototype.rename=function(b){n.stop(b);b=$(this.el).find(".js-board-name").val();""!==b&&(q("Board","Successfully Rename Board"),this.model.set({name:b}),this.model.save(),t.hide())};return c}();Jd=function(){function c(){this.submit=h(this.submit,this);this.cancel=h(this.cancel,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,
arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Change Organization"};c.prototype.events={"click .js-cancel":"cancel","click .js-submit":"submit"};c.prototype.render=function(){var b,c,d,f,g;b=this.model.toJSON({org:!0});d=this.model.owned()?y.me().organizationList.models:[];var i;i=[];for(f=0,g=d.length;f<g;f++)c=d[f],i.push(c.toJSON());b.orgs=i;b.hasOrgs=0!==b.orgs.length;if(b.idOrganization){g=b.orgs;for(d=0,f=g.length;d<f;d++)c=g[d],c.id===b.idOrganization&&(c.select=!0)}$(this.el).html(s.fill("popover_change_board_org",
b));return this};c.prototype.cancel=function(){return t.hide()};c.prototype.submit=function(b){n.stop(b);q("Board Menu","Change Org");b=$(this.el).find(".js-org").val();this.model.api.setOrganization(b);this.model.set({idOrganization:b},{fromServer:!0});return t.hide()};return c}();Id=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Change Permissions"};c.prototype.initialize=function(){return this.model.bind("change:prefs",
this.render)};c.prototype.events={"change select":"changePerm"};c.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});b.hasOrg=null!=(null!=(c=this.model.organization)?c.id:void 0);c={editable:this.model.editable(),owned:this.model.owned()};$(this.el).html(s.fill("board_menu_perms",b,c));this.renderCurrentValue();return this};c.prototype.renderCurrentValue=function(){var b;b=$(this.el).find(".setting");b.each(function(c){var d;d=b[c];c=$(d).find("option:selected").text().trim();return $(d).find(".value").text(c)})};
c.prototype.changePerm=function(b){var c,d,f;c=$(b.target);c.closest(".setting");!c.hasClass("disabled")&&!c.closest(".js-disabled").length&&(d=c.attr("name"),f=c.find("option:selected").val(),f=function(){switch(f){case "true":return!0;case "false":return!1;default:return f}}(),this.model.setPref(d,f),this.model.save(),n.stop(b))};return c}();Gd=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Layout Options"};
c.prototype.initialize=function(){return this.model.bind("change:myPrefs",this.render)};c.prototype.events={"change select":"changePref"};c.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});c={editable:this.model.editable(),owned:this.model.owned()};$(this.el).html(s.fill("board_menu_layout",b,c));this.renderCurrentValue();return this};c.prototype.renderCurrentValue=function(){var b;b=$(this.el).find(".setting");b.each(function(c){var d;d=b[c];c=$(d).find("option:selected").text().trim();
return $(d).find(".value").text(c)})};c.prototype.changePref=function(b){var c,d,f;c=$(b.target);c.closest(".setting");!c.hasClass("disabled")&&!c.closest(".js-disabled").length&&(d=c.attr("name"),f=c.find("option:selected").val(),f=function(){switch(f){case "true":return!0;case "false":return!1;default:return f}}(),this.model.setPref(d,f),this.model.save(),n.stop(b))};return c}();xa=function(){function c(){this.viewMoreOrgMembers=h(this.viewMoreOrgMembers,this);this.addAllOrgMembers=h(this.addAllOrgMembers,
this);this.addOrgMember=h(this.addOrgMember,this);this.orgMembersAvailable=h(this.orgMembersAvailable,this);this.canRemoveInvitation=h(this.canRemoveInvitation,this);this.removeInvitation=h(this.removeInvitation,this);this.clearSearchResults=h(this.clearSearchResults,this);this.sendMemberInvitation=h(this.sendMemberInvitation,this);this.sendEmailInvitation=h(this.sendEmailInvitation,this);this.hoverMember=h(this.hoverMember,this);this.keydownEvent=h(this.keydownEvent,this);this.search=h(this.search,
this);this.searchPaste=h(this.searchPaste,this);this.showMemberMenu=h(this.showMemberMenu,this);this.renderSearchResults=h(this.renderSearchResults,this);this.renderOrgMembers=h(this.renderOrgMembers,this);this.renderBoardMembers=h(this.renderBoardMembers,this);this.renderInvitations=h(this.renderInvitations,this);this.getOrgData=h(this.getOrgData,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Members"};c.prototype.initialize=
function(){var b;this.invitationList=this.model.boardInvitationList;this.invitationList.onAddRemove(this.renderInvitations).bind("change",this.renderInvitations);if(null!=(b=this.model.organization))b.memberList.onAddRemove(this.renderOrgMembers)};c.prototype.events={"click .js-board-members .js-select-member":"showMemberMenu","click .js-search-results .js-select-member":"sendMemberInvitation","click .js-search-results .email-invite":"sendEmailInvitation","paste .js-search-input":"searchPaste","click .js-org-members .js-select-member":"addOrgMember",
"click .js-org-members .js-add-all-org-members":"addAllOrgMembers","click .js-org-members .js-more-org-members":"viewMoreOrgMembers","click .js-remove-invitation":"removeInvitation","hover .js-select-member":"hoverMember"};c.prototype.render=function(){var b,c;c={placeholder:"Search or add email address"};b=this.model.canInviteMembers();null!=this.model.organization&&(c.orgName=this.model.organization.get("displayName"));c.canInvite=b;$(this.el).html(s.fill("manage_members",c,{editable:this.model.editable()}));
b?_.delay(h(function(){this.renderOrgMembers();this.renderInvitations();this.input=$(this.el).find(".js-search-input");return this.input.click(function(b){return n.stop(b)}).keyup(_.debounce(this.search,500)).keydown(this.keydownEvent).focus()},this),10):_.delay(h(function(){return this.renderBoardMembers()},this),10);this.loadingEl=$(this.el).find(".js-loading");t.calcTop();return this};c.prototype.getOrgData=function(){if(null!=this.model.organization&&this.model.editable())return Models.loadOrganizationData(this.model.organization.id,
!0,h(function(){this.model.organization.trigger("change:memberships");return this.renderOrgMembers()},this),function(){})};c.prototype.renderInvitations=function(){var b,c,d;c=$(this.el).find(".js-pending-invites");b=c.find(".js-list").empty();d=this.invitationList;c.toggle(0<d.length);d.each(h(function(c){var e,d,j;j=Models.Member.get(c.get("idMemberInviter"));e={MemberInviter:null!=j?j.toJSON():void 0,idMemberInvited:c.get("idMemberInvited"),dateExpires:c.get("dateExpires"),email:c.get("email"),
canRemove:this.canRemoveInvitation(c)};e.idMemberInvited&&(d=Models.Member.get(e.idMemberInvited),null!=d&&(e.MemberInvited=d.toJSON()));e=$(s.fill("invitation",e,{},{member:s.member,member_inline:s.member_inline}));e.find(".inviter .inline-member-container").data("member",j);null!=d&&e.find(".invitee .inline-member-container").data("member",d);e.data("id",c.get("id"));b.append(e)},this));c.toggle(0<d.length);V.update(this.el);t.calcTop();return this};c.prototype.renderBoardMembers=function(){var b,
c;c=$(this.el).find(".js-board-members").hide();b=c.find(".js-list").empty();7<this.model.memberList.models.length&&b.addClass("collapsed");_.each(this.model.memberList.models,h(function(c){c=c.toJSON();return b.append(s.fill("select_member",c,{},{member:s.member}))},this));c.show();t.calcTop()};c.prototype.renderOrgMembers=function(){var b,c,d,f,g;d=$(this.el).find(".js-org-members").hide();c=d.find(".js-list").empty();b=d.find(".js-num-org-mem").empty();f=d.find(".js-more-org-members").addClass("hide");
null!=this.model.organization&&(g=this.orgMembersAvailable(),0<g.length&&(7<g.length&&f.removeClass("hide"),f=g.slice(0,7),_.each(f,h(function(b){b=b.toJSON();return c.append(s.fill("select_member",b,{},{member:s.member}))},this)),b.html(g.length),d.show()),t.calcTop())};c.prototype.renderSearchResults=function(b,c){var d,f,g,i,j,h,l,o,q,u,w;h=c.members;i=c.invitedEmails;q=c.uninvitedEmails;d=$(this.el);g=d.find(".js-search-results");f=g.find(".js-list").empty();o=_.all([i,q,h],_.isEmpty);j=3<=b.trim().length;
d.find(".js-no-results").toggle(o&&j);g.toggle(!o);$(this.el).find(".js-org-members").hide();j||this.renderOrgMembers();d=_.map(this.invitationList.models,function(b){return b.get("idMemberInvited")});g={invited:"invited",joined:"joined",uninvitedExact:"will-invite",uninvitedFuzzy:""};l={invited:2,joined:3,uninvitedExact:1,uninvitedFuzzy:1};for(o=0,u=q.length;o<u;o++)j=q[o],$(s.fill("member_search_result_email",{email:j,isInvitable:!0,className:"will-invite"})).data({email:j}).appendTo(f);for(q=0,
o=i.length;q<o;q++)j=i[q],$(s.fill("member_search_result_email",{email:j,isInvitable:!1,className:"invited",extraText:"already invited"})).appendTo(f);u=_.sortBy(h,function(b){return 1E4*l[b.type]-b.similarity});for(j=0,o=u.length;j<o;j++)h=u[j],q=h.type,delete h.type,delete h.similarity,null==Models.Member.get(h._id)&&Models.Member.add(new ra(h)),i=_.extend({className:g[q],isInvitable:"uninvitedFuzzy"===q||"uninvitedExact"===q},h),null!=(w=i.id)?w:i.id=h._id,_.include(d,h._id)&&(i.extraText="invited"),
"joined"===g[q]&&(i.extraText="already joined"),f.append(s.fill("select_member",i,{},{member:s.member}));this.loadingEl.hide();f=$(this.el).find(".js-search-results .js-list li:first");n.selectMenuItem($(this.el).find(".js-org-members .js-list"),"li",f);t.calcTop()};c.prototype.showMemberMenu=function(b){n.stop(b);b=$(b.target).closest(".js-select-member").attr("idMember");b=Models.Member.get(b);t.pushView({view:b.getView(Wb,"board",{board:this.model})})};c.prototype.searchPaste=function(){this.loadingEl.show();
return this.input.keyup()};c.prototype.search=function(b){var c,d;if(!((d=b.keyCode)===ia||d===la||d===sa||d===Z||d===ha||d===Y||d===ma||d===ta))this.loadingEl.show(),c=this.input.val().toLowerCase().trim(),rpc.invoke("searchBoardMembers",[c,this.model.id],h(function(b){return this.renderSearchResults(c,b)},this))};c.prototype.keydownEvent=function(b){var c,d;if(!((c=b.keyCode)===ia||c===la||c===sa||c===ha||c===ma||c===ta))if(b.keyCode===da)0<$(this.el).find(".js-search-results .js-list .selected .js-select-member").length?
(n.stop(b),$(this.el).find(".js-search-results .js-list .selected:first .js-select-member").click()):0<$(this.el).find(".js-search-results .js-list .email-invite").length&&(n.stop(b),$(this.el).find(".email-invite:first").click());else if((d=b.keyCode)===Z||d===Y)n.stop(b),n.navMenuList($(this.el).find(".js-search-results .js-list"),"li",b.keyCode)};c.prototype.hoverMember=function(b){b=$(b.target).closest("li");return n.selectMenuItem($(this.el).find(".pop-over-member-list"),"li",b)};c.prototype.sendEmailInvitation=
function(b){var c;n.stop(b);b=$(b.target).closest(".email-invite").find(".email").text();c=_.map(this.invitationList.models,function(b){return b.get("email")});_.include(c,b)||(q("Invitations","Send","Email Address"),this.clearSearchResults(),ABTest.event("invite_new_member"),this.invitationList.create({email:b,idMemberInviter:y.myId()},{error:h(function(b){return this.invitationList.remove(b)},this)}))};c.prototype.sendMemberInvitation=function(b){var c,d,f,g;n.stop(b);b=$(b.target).closest(".js-select-member").attr("idMember");
f=Models.Member.get(b);c=_.map(this.invitationList.models,function(b){return b.get("idMemberInvited")});d=_.map(this.model.memberList.models,function(b){return b.id});c=c.concat(d);_.include(c,b)||(this.clearSearchResults(),ABTest.event("invite_existing_member"),c=_.pluck(null!=(g=this.model.organization)?g.memberList.models:void 0,"id"),_.include(c,b)?(q("Invitations","Add Org Member"),f.api.addToBoard({idBoard:this.model.id}),this.model.memberList.add(f)):(q("Invitations","Send","Member"),this.invitationList.create({idMemberInvited:b,
idMemberInviter:y.myId()},{error:h(function(b){return this.invitationList.remove(b)},this)})))};c.prototype.clearSearchResults=function(){this.input.val("").focus().select();$(this.el).find(".js-search-results").hide();return this.renderOrgMembers()};c.prototype.removeInvitation=function(b){var c;q("Invitations","Delete");null!=(c=this.invitationList.get($(b.currentTarget).closest(".invitation").data("id")))&&c.destroy({success:this.search});n.setCaretAtEnd(this.input[0])};c.prototype.canRemoveInvitation=
function(b){return b.get("idMemberInviter")===y.myId()||this.model.owned()};c.prototype.orgMembersAvailable=function(){return _.difference(this.model.organization.memberList.models,this.model.memberList.models)};c.prototype.addOrgMember=function(b){n.stop(b);q("Invitations","Add Org Member");b=$(null!=b?b.target:void 0).closest(".js-select-member").attr("idMember");b=Models.Member.get(b);b.api.addToBoard({idBoard:this.model.id});this.model.memberList.add(b);this.renderOrgMembers()};c.prototype.addAllOrgMembers=
function(b){var c,d,f;n.stop(b);q("Invitations","Add All Org Members");c=this.orgMembersAvailable();for(d=0,f=c.length;d<f;d++)b=c[d],b.api.addToBoard({idBoard:this.model.id}),this.model.memberList.add(b);return t.hide()};c.prototype.viewMoreOrgMembers=function(b){n.stop(b);q("Board Menu","View More Org Members");t.pushView({view:this.model.getView(Hd)})};return c}();Hd=function(){function c(){this.hoverMember=h(this.hoverMember,this);this.enableSelfJoin=h(this.enableSelfJoin,this);this.filterAndFillMembers=
h(this.filterAndFillMembers,this);this.keyupEvent=h(this.keyupEvent,this);this.render=h(this.render,this);this.renderOrgMembers=h(this.renderOrgMembers,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Organization Members"};c.prototype.initialize=function(){var b;if(null!=(b=this.model.organization))b.memberList.onAddRemove(this.render)};c.prototype.events={"click .js-org-members .js-select-member":"addOrgMember","click .js-org-members .js-add-all-org-members":"addAllOrgMembers",
"click .js-enable-self-join":"enableSelfJoin",keyup:"keyupEvent","hover .js-select-member":"hoverMember"};c.prototype.renderOrgMembers=function(b){var c,d,f,g;f=[];if(b)for(g=0,c=b.length;g<c;g++)d=b[g],f.push(Models.Member.get(d));else f=this.model.getView(xa).orgMembersAvailable();b=$(this.el).find(".js-org-members .js-list").empty();for(d=0,g=f.length;d<g;d++)c=f[d],c=c.toJSON(),b.append(s.fill("select_member",c,{},{member:s.member}));$(this.el).find(".js-org-members .js-num-org-mem").empty().text(f.length)};
c.prototype.render=function(){var b,c;b=this.model.toJSON({prefs:!0});b.placeholder="Search for organization members";b.orgName=null!=(c=this.model.organization)?c.get("displayName"):void 0;b.canInvite=!0;$(this.el).html(s.fill("manage_members",b,{editable:this.model.editable()}));this.renderOrgMembers();$(this.el).find(".js-org-members").removeClass("hide");$(this.el).find(".js-add-all-org-members").removeClass("hide");$(this.el).find(".js-enable-self-join").removeClass("hide");return this};c.prototype.keyupEvent=
function(b){var c,d,f,g;c=$(".js-search-input").val().trim();if(!((d=b.keyCode)===ia||d===la||d===sa))b.keyCode===da?(n.stop(b),0<$(this.el).find(".js-org-members .js-list .selected").length&&(b=$(this.el).find(".js-org-members .js-list .selected:first .js-select-member").attr("idMember"),b=Models.Member.get(b),b.api.addToBoard({idBoard:this.model.id}),this.model.memberList.add(b),$(this.el).find(".js-search-input").focus().select())):(f=b.keyCode)===Z||f===Y?(n.stop(b),n.navMenuList($(null!=(g=t.view)?
g.el:void 0).find(".js-org-members .js-list"),".item",b.keyCode)):0<c.length?(this.filterAndFillMembers(c),$(".js-org-members .js-list").removeClass("collapsed"),$(".js-add-all-org-members").addClass("hide")):(this.renderOrgMembers(),$(".js-org-members .js-list").addClass("collapsed"),$(".js-add-all-org-members").removeClass("hide"))};c.prototype.filterAndFillMembers=function(b){var c;c=_.pluck(this.model.getView(xa).orgMembersAvailable(),"id");b=n.filterMembers(b,c);b=b.slice(0,7);0<b.length?(this.renderOrgMembers(b),
b=$(this.el).find(".js-org-members .js-list .item:first"),n.selectMenuItem($(this.el).find(".js-org-members .js-list"),".item",b)):$(this.el).find(".js-org-members .js-list").html("<li><p class='empty'>No matched members</p></li>")};c.prototype.addOrgMember=function(b){return this.model.getView(xa).addOrgMember(b)};c.prototype.addAllOrgMembers=function(b){return this.model.getView(xa).addAllOrgMembers(b)};c.prototype.enableSelfJoin=function(b){$(b.target).hide();q("Board Menu","Enable Self Join");
this.model.setPref("selfJoin","enabled");this.model.save();return this.render()};c.prototype.hoverMember=function(b){b=$(b.target).closest(".item");return n.selectMenuItem($(this.el).find(".pop-over-member-list"),".item",b)};return c}();Fd=function(){function c(){this.switchSections=h(this.switchSections,this);this.setSectionLabel=h(this.setSectionLabel,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}var b;u(c,L);c.prototype.initialize=function(){var b,c,f;f={};
this.section="cards";this.loading=!0;b=h(function(b){if(!f[b.id])return f[b.id]=!0,b.cardList.onAddRemove(this.render).bind("change:closed",this.render)},this);c=h(function(c){return c.forEach(b)},this);this.model.listList.onAddRemove(c).onAddRemove(this.render).bind("change:closed",this.render);return c(this.model.listList)};c.prototype.events={"click .js-switch-section":"switchSections","click .js-more-archive-cards":"getMoreCards"};b=function(b,c){var f,g,i,h;f={};_.each(b.cards,function(b){var e,
g;(e=c.getCard(b._id))?(e.set(b,{silent:!0}),f[e.get("idList")]=!0):(e=Models.finishInit(new wa(b)),Models.Card.add(e,{silent:!0}));if((g=c.getList(b.idList))&&!g.cardList.include(e))return g.cardList.add(e,{silent:!0}),f[b.idList]=!0});h=[];for(g in f)h.push(null!=(i=c.getList(g))?i.cardList.trigger("refresh"):void 0);return h};c.prototype.getMoreCards=function(){var c,d;c=this.model;if("cards"===this.section)return this.loading=!0,d=Date.now(),this.model.listList.forEach(function(b){return b.cardList.forEach(function(b){if(b.get("closed")&&
new Date(b.get("dateLastActivity"))<d)return d=new Date(b.get("dateLastActivity"))})}),rpc.invoke("getClosedCards",[c.id,{count:10,oldest:d}],h(function(d){b(d,c);this.hasMoreCards=d.hasMore;this.loading=!1;return this.render()},this))};c.prototype.getData=function(){var c;c=this.model;"cards"===this.section&&(this.loading=!0,rpc.invoke("getClosedCards",[c.id,{count:10}],h(function(d){b(d,c);d.hasMore&&(this.hasMoreCards=!0);this.loading=!1;this.render()},this)))};c.prototype.render=function(){var b,
c,f,g,i,h;b="lists"===this.section;f=!b;b?(g=this.model.listList.filter(function(b){return b.get("closed")}),c=function(b){return b.get("name")}):(g=[],this.model.listList.forEach(function(b){return g=g.concat(b.cardList.filter(function(b){return b.get("closed")}))}),c=function(b){return(b=0-new Date(b.get("dateLastActivity")))?b:0});g=_.sortBy(g,c);c=this.model.toJSON();b={loading:this.loading,empty:!this.loading&&0===g.length,emptyMessage:"No Archived "+(b?"Lists":"Cards"),hasMoreCards:!this.loading&&
this.hasMoreCards&&f};c["section_"+this.section]=b["section_"+this.section]=!0;c.content=s.fill("archive_items",b);$(this.el).html(s.fill("board_archive",c));c=$(this.el).find(".archive-items");if(f)for(i=0,h=g.length;i<h;i++)b=g[i],c.append(b.getView(Yc,null,{reOpenText:"Send to Board",canDelete:f}).render().el);else for(i=0,h=g.length;i<h;i++)b=g[i],c.append(b.getView(eb,null,{reOpenText:"Send to Board",canDelete:f}).render().el);this.setSectionLabel(this.section);I.calcPos();return this};c.prototype.setSectionLabel=
function(){var b;$(this.el).find(".js-current-section").html(""+n.toTitleCase(this.section));b="Lists";"lists"===this.section&&(b="Cards");$(this.el).find(".js-new-section").html(b)};c.prototype.switchSections=function(){this.section="cards"===this.section?"lists":"cards";this.getData();return this.render()};return c}();jc=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Label Names"};c.prototype.tagName=
"form";c.prototype.className="edit-labels js-edit-labels";c.prototype.events={"submit .js-edit-labels":"saveLabels","click .js-save":"saveLabels","click input['text']":"focus"};c.prototype.render=function(){var b,c,d;b=this.model.toJSON({labels:!0});c={editable:this.model.editable(),owned:this.model.owned()};d="board_labels";this.model.editable()||(d="board_labels_static");$(this.el).html(s.fill(d,b,c));return this};c.prototype.focus=function(b){return $(b.target).focus().select()};c.prototype.saveLabels=
function(b){var c,d,f,g,i;n.stop(b);f={labelNames:{}};d=$(this.el).find(".js-label-title");q("Board Menu","Change Labels");for(g=0,i=d.length;g<i;g++)c=d[g],b=$(c).attr("name"),c=$(c).val(),f.labelNames[b]=c;this.model.save(f);t.popView()};return c}();Ha=$a(Oa,function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.events={"click .js-more-actions":"loadMoreActions"};c.prototype.initialize=function(){var b;this.fullHistory=this.options.fullHistory;
null!=(b=this.fullHistory)?b:this.fullHistory=!1;Models.Action.bind("add:"+this.model.id,_.debounce(this.render,20));this.loadMoreActions()};c.prototype.render=function(){var b;$(this.el).html(s.fill("board_activity",this.model.toJSON()));b=$(this.el).find(".list-activity");(new Ta(this.getActions())).renderTo(b,{compact:!this.fullHistory,key:"boardactivity_"+this.model.id,model:this.model});$(this.el).find(".js-more-actions").toggle(this.hasMoreActions());return this};c.prototype.renderActions=function(){return this.render()};
c.prototype.getActionsFilter=function(){return Aa};return c}());Ld=function(){function c(){this.cancel=h(this.cancel,this);this.close=h(this.close,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Close Board?"};c.prototype.events={"click .js-close-board":"close","click .js-cancel":"cancel"};c.prototype.render=function(){$(this.el).html(s.fill("popover_confirm_close_board"));return this};c.prototype.close=function(b){n.stop(b);
t.hide();this.model.close();q("Board","Close Menu","Successfully Close Board");return!1};c.prototype.cancel=function(b){n.stop(b);t.hide();q("Board","Close Menu","Click Cancel Button")};return c}()}B("boardPreference")&&(G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},x.BoardPreference=function(){function c(){c.__super__.constructor.apply(this,arguments)}
u(c,Tb);c.prototype.typeName="BoardPreference";c.prototype.initialize=function(){Api.init(this)};return c}());if(B("list")){var Nd,Ed,Od,Pd,Ga,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Nd=function(){function c(){this.getBoard=h(this.getBoard,this);this.reopen=h(this.reopen,this);this.refreshCardList=
h(this.refreshCardList,this);c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="List";c.prototype.initialize=function(){Api.init(this);this.cardList=new CardList([],{model:this});this.bind("change",this.onChange);this.cardList.bind("change:idList",h(function(b){var c;c=h(function(){return b.get("idList")!==this.get("id")},this);if(c())return _.defer(h(function(){if(c())return this.cardList.remove(b)},this))},this));this.bind("changeCards",this.refreshCardList)};c.prototype.postInitialize=
function(){this.refreshCardList();this.setReady()};c.prototype.refreshCardList=function(){return this.cardList.refresh(null!=this.id?_.filter(Models.Card.all(),h(function(b){return b.get("idList")===this.id},this))||[]:[])};c.prototype.withIdParents=function(b){this.getBoard().onId(function(c){b([c])})};c.prototype.move=function(b){this.set({pos:this.getBoard().calcPos(b,this)});this.save();this.collection.sort({silent:!0})};c.prototype.close=function(){this.set({closed:!0});this.save()};c.prototype.reopen=
function(){Ca({url:"/1/lists/"+this.id,type:"put",data:{closed:!1,pos:this.getBoard().calcPos(this.collection.length,this)},dataType:"json"})};c.prototype.onChange=function(){};c.prototype.calcPos=function(b,c){return n.calcPos(b,this.cardList,c,function(b){return!b.get("closed")})};c.prototype.getBoard=function(){return this.collection.options.model};c.prototype.editable=function(){return this.getBoard().editable()};return c}();Ed=function(){function c(){c.__super__.constructor.apply(this,arguments)}
u(c,Ea);c.prototype.model=Nd;c.prototype.initialize=function(b,c){this.options=c;this.bind("change:pos",this.sort)};c.prototype.comparator=function(b){return b.get("pos")||0};return c}();Ga=function(){function c(){this.restoreScroll=h(this.restoreScroll,this);this.saveScroll=h(this.saveScroll,this);this.eventStopPropagation=h(this.eventStopPropagation,this);this.moveList=h(this.moveList,this);this.openMenu=h(this.openMenu,this);this.sortStop=h(this.sortStop,this);this.sortReceive=h(this.sortReceive,
this);this.triggerOnItem=h(this.triggerOnItem,this);this.selectNewCard=h(this.selectNewCard,this);this.renderCards=h(this.renderCards,this);this.renderName=h(this.renderName,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.className="list";c.prototype.events={sortreceive:"sortReceive",sortstop:"sortStop","click .js-open-list-menu":"openMenu","mousedown .list-cards":"eventStopPropagation",movelist:"moveList",dblclick:"eventStopPropagation","click .js-open-card-composer":"openCardComposer"};
c.prototype.initialize=function(){var b;this.model.bind("change:name",this.renderName);this.model.view=this;b=_.debounce(this.renderCards,45);this.model.cardList.onAddRemove(b).bind("change:closed",b)};c.prototype.render=function(){J("render","rendering list "+this.model.get("name"));$(this.el).html(s.fill("list",this.model.toJSON(),{editable:this.model.editable()}));this.renderName().renderCards();DragSort.refreshCardSortable();return this};c.prototype.renderName=function(){$(this.el).find("div.list-title .current").text(this.model.get("name"));
ListGuide.calc();return this};c.prototype.renderCards=function(){var b,c;J("render","rendering cards for list "+this.model.get("name"));b=$(this.el).find(".list-cards");b.find(".list-card").not(".placeholder").addClass("to-remove");c=0<N.newCards.length;this.model.cardList.forEach(h(function(d){var f;d.get("closed")||(f=d.getView(Ua).render().el,$(f).removeClass("to-remove"),b.append(f),c&&$(N.newCards).each(h(function(b){if(d.id===$(N.newCards)[b].id)return $(f).addClass("temp-show")},this)))},this));
b.find(".list-card.to-remove").remove();boardView.cardComposerState.vis&&boardView.model.getView(fa).updatePositionOnBoard({},this.selectNewCard);ListGuide.calc_num_cards();return this};c.prototype.selectNewCard=function(){var b,c;if(null!=(null!=(b=N.cardToSelect)?b.id:void 0))b=this.model.cardList.filter(function(b){return!b.get("closed")}),b=_.find(b,function(b){return b.id===N.cardToSelect.id}),null!=b&&N.selectCard(null!=b?null!=(c=b.view)?c.el:void 0:void 0),N.cardToSelect=null};c.prototype.openCardComposer=
function(b){n.stop(b);t.hide();boardView.cardComposerState.pos.idList=this.model.id;boardView.cardComposerState.pos.cardPos=this.model.cardList.filter(function(b){return!b.get("closed")}).length;boardView.model.getView(fa).updatePositionOnBoard();q("Card Composer","Open","Via Bottom of List")};c.prototype.triggerOnItem=function(b,c,d){var f;n.stopPropagation(b);f=this;_.defer(function(){return c.item.trigger(d,[c,f])})};c.prototype.sortReceive=function(b,c){this.triggerOnItem(b,c,"moveto")};c.prototype.sortStop=
function(b,c){this.triggerOnItem(b,c,"movein")};c.prototype.openMenu=function(b){var c;c=this.model;if(!DragSort.sorting)return n.preventDefault(b),q("List Menu","Open List Menu"),t.toggle({elem:b.target,top:24,view:c.getView(Od)}),!1};c.prototype.moveList=function(b,c){this.model.move(c.item.parent().children().index(c.item))};c.prototype.eventStopPropagation=function(b){n.stopPropagation(b)};c.prototype.saveScroll=function(){this.scrollTop=$(this.el).find(".list-cards").scrollTop()};c.prototype.restoreScroll=
function(){$(this.el).find(".list-cards").scrollTop(this.scrollTop)};return c}();Od=function(){function c(){this.closeList=h(this.closeList,this);this.addCard=h(this.addCard,this);this.moveList=h(this.moveList,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"List Actions"};c.prototype.events={"click .js-add-card":"addCard","click .js-move-list":"moveList","click .js-close-list":"closeList"};c.prototype.render=function(){$(this.el).html(s.fillMenu("list-menu",
this.model.toJSON(),{editable:this.model.editable()}));return this};c.prototype.moveList=function(b){n.stop(b);q("List Menu","Open Move List Popover");t.pushView({view:this.model.getView(Pd)})};c.prototype.addCard=function(b){n.stop(b);t.hide();boardView.cardComposerState.pos.idList=this.model.id;boardView.cardComposerState.pos.cardPos=0;boardView.model.getView(fa).updatePositionOnBoard();q("List Menu","Add Card");q("Card Composer","Open","Via List Menu")};c.prototype.closeList=function(b){n.stop(b);
b=this.model;q("List Menu","Archive List");t.hide();b.close();return!1};return c}();Pd=function(){function c(){this.commitChange=h(this.commitChange,this);this.updateListList=h(this.updateListList,this);this.renderValue=h(this.renderValue,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Move List"};c.prototype.events={"change .js-select-list-pos":"renderValue","click .js-commit-position":"commitChange"};c.prototype.render=
function(){$(this.el).html(s.fill("popover_move_list",[]));this.updateListList();_.defer(h(function(){return this.renderValue()},this));return this};c.prototype.renderValue=function(){var b;b=parseInt($(this.el).find(".js-select-list-pos").val(),10)+1;$(".js-pos-value").html(n.getNaturalNumber(""+b))};c.prototype.updateListList=function(){var b,c,d,f,g,i,h,m,l,o;i=this.model.getBoard().listList.models;f=this.model.id;c=$(this.el).find(".js-select-list-pos");c.empty();h=0;d=1;o=[];for(m=0,l=i.length;m<
l;m++)g=i[m],g.get("closed")||(b=d++,g.id===f&&(b+=" (current)"),b=$("<option>").val(h++).text(b).appendTo(c),o.push(g.id===f?b.attr("selected","selected"):void 0));return o};c.prototype.commitChange=function(b){var c;n.stop(b);b=this.model;c=$(this.el).find(".js-select-list-pos");c=parseInt(c.find("option:selected").val(),10);b.move(c);q("List Menu","Move Menu","Successfully Moved");t.hide()};return c}()}if(B("card_composer")){var fa,nb,ob,Va,Qd,h=function(c,b){return function(){return c.apply(b,
arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};fa=function(){function c(){this.clearAndHide=h(this.clearAndHide,this);this.hide=h(this.hide,this);this.clearItems=h(this.clearItems,this);this.openMenu=h(this.openMenu,this);this.clearSelectedItems=h(this.clearSelectedItems,this);this.renderSelectedItems=h(this.renderSelectedItems,this);this.keyupEvent=
h(this.keyupEvent,this);this.pasteEvent=h(this.pasteEvent,this);this.submitCard=h(this.submitCard,this);this.getListModel=h(this.getListModel,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="card-composer";c.prototype.events={"click .js-add-card":"submitCard","click .js-cancel":"clearAndHide","click .js-cc-menu":"openMenu",keyup:"keyupEvent",paste:"pasteEvent",keydown:"keydownEvent"};c.prototype.render=function(b,c){var d;boardView.cardComposerState.vis=
!0;d={};d.title=boardView.cardComposerState.title;$(".card-composer").remove();$(this.el).html(s.fill("card_composer_inline",d));this.renderSelectedItems();this.titleInput=$(this.el).find(".js-card-title");_.defer(h(function(){n.setCaretAtEnd(this.titleInput[0]);return"function"===typeof c?c():void 0},this));_.delay(h(function(){return this.scrollToComposer()},this),50);return this};c.prototype.scrollToComposer=function(){var b,c,d,f,g,i,h,m;g=this.getListModel().view.el;$(g).find(".list-card");c=
$(g).position().left;m=$(".list-area").scrollLeft();b=$("#board").outerWidth();f=$(g).find(".list-cards").scrollTop();d=$(g).find(".list-card-area").height();h=$(this.el).prop("offsetTop");i=$(this.el).outerHeight()+30;(m+b<c+$(".list").first().outerWidth()||c<m)&&$(".list-area-wrapper").animate({scrollLeft:c},100);(h>f+d||h+i<f)&&$(g).find(".list-cards").animate({scrollTop:h},100)};c.prototype.updatePositionOnBoard=function(b,c){var d,f,g,i,h;h=boardView.cardComposerState.pos;f=this.getListModel(h);
g=f.cardList.filter(function(b){return!b.get("closed")});d=$(f.view.el).find(".list-card");f=$(f.view.el).find(".list-cards");i=null!=g[h.cardPos-1];0===h.cardPos||0===g.length?f.prepend(this.render({},c).el):i?(d=d[h.cardPos-1],$(d).after(this.render({},c).el)):f.append(this.render({},c).el);this.delegateEvents()};c.prototype.getListModel=function(b){b||(b=boardView.cardComposerState.pos);return _.find(Models.Board.get(b.idBoard).listList.models,function(c){return c.id===b.idList})};c.prototype.submitCard=
function(b){var c,d,f,g,i;n.preventDefault(b);i=jQuery.trim(this.titleInput.val());""!==i&&(b=boardView.cardComposerState,d=this.getListModel(b.pos),g={name:i,pos:d.calcPos(b.pos.cardPos),closed:!1,idBoard:b.pos.idBoard,idList:b.pos.idList},b.pos.cardPos+=1,f=_.clone(boardView.cardComposerState.members),c=_.clone(boardView.cardComposerState.labels),this.titleInput.val(""),b.title="",this.clearItems(),d.onId(h(function(b){this.idList=b;return d.cardList.create(g,{success:h(function(b){b.onId(h(function(){N.cardToSelect=
b;f.forEach(h(function(c){var e,c=null!=(e=Models.Member.find("username",c)[0])?e.get("id"):void 0;return b.addMember(c)},this));c.forEach(h(function(c){return b.toggleLabel(c)},this));$("#board").hasClass("filtering")&&($(b.view.el).addClass("temp-show"),N.newCards.push(b));return 0<c.length&&0<f.length?q("Card Composer","Card Added","With Members and Labels"):0<f.length?q("Card Composer","Card Added","With Members"):0<c.length?q("Card Composer","Card Added","With Labels"):q("Card Composer","Card Added",
"No items included")},this))},this)})},this)))};c.prototype.pasteEvent=function(){$(this.el).find(".js-card-title").focus().keyup()};c.prototype.keydownEvent=function(b){var c,d,f,g;f=$(b.target).closest(".js-card-title").hasClass("js-card-title");d=$(b.target).closest(".js-add-card").hasClass("js-add-card");if((f||d)&&!t.isVisible()&&b.keyCode===da)n.stop(b),$(".js-add-card").click();else if((g=b.keyCode)===ua||g===da)this.titleInput.focus(),f=n.getWordFromCaret(this.titleInput[0]),d=$(null!=(c=
t.view)?c.el:void 0),c=!1,t.view instanceof ob?(d.find(".js-members-list .item.selected:first .js-select-member").first().click(),c=!0):t.view instanceof nb?(d.find(".edit-labels-pop-over .card-label.selected").first().click(),c=!0):t.view instanceof Va&&0<d.find(".js-pos-results").length&&(d.find(".js-pos-results li.selected:first a").first().click(),c=!0),c&&(n.stop(b),n.insertSelection(this.titleInput,"",f.start,f.end),boardView.cardComposerState.title=this.titleInput.val()),this.renderSelectedItems(),
t.hide()};c.prototype.keyupEvent=function(b){var c,d,f,g,i;if(!((d=b.keyCode)===ua||d===da))if(b.keyCode===ta&&this.titleInput.focus(),(f=b.keyCode)===Z||f===ha||f===Y||f===ma)n.stop(b),c=$(null!=(i=t.view)?i.el:void 0),t.view instanceof ob?n.navMenuList(c.find(".js-members-list"),".item",b.keyCode):t.view instanceof nb?n.navMenuList(c.find(".edit-labels-pop-over"),".card-label",b.keyCode):t.view instanceof Va&&0<c.find(".js-pos-results").length&&n.navMenuList(c.find(".js-pos-results"),"li",b.keyCode);
else if(!Browser.isTouch()&&$(b.target).closest(".js-card-title").hasClass("js-card-title"))if(i=n.getWordFromCaret(this.titleInput[0]),f=/^@\S/.test(i.str.substring(0,2)),d=/^\#\S/.test(i.str.substring(0,2)),g=/^\^\S/.test(i.str.substring(0,2)),i=i.str.substring(1),f||d||g){if(!((c=b.keyCode)===ia||c===la||c===sa)){if(f){b=boardView.model.getView(ob);c=_.pluck(boardView.model.memberList.models,"id");c=n.filterMembers(i,c);return 0<c.length?(t.load(b),b.render(c,!0),t.show({elem:$(".js-cc-menu")[0],
top:30,view:b,preloaded:!0}),this.titleInput.focus(),c=$(b.el).find(".js-members-list .item:first"),n.selectMenuItem($(b.el).find(".js-members-list"),".item",c)):t.hide()}if(d){b=boardView.model.getView(nb);c=b.filterLabels(i);return 0<c.length?(t.load(b),b.render(c),t.show({elem:$(".js-cc-menu")[0],top:30,view:b,preloaded:!0}),this.titleInput.focus(),c=$(b.el).find(".edit-labels-pop-over .card-label:first"),n.selectMenuItem($(b.el).find(".edit-labels-pop-over"),"li",c)):t.hide()}if(g){b=boardView.model.getView(Va);
c=b.filterPos(i);return c.hasData?(t.load(b),b.renderPosResults(c),t.show({elem:$(".js-cc-menu")[0],top:30,view:b,preloaded:!0}),this.titleInput.focus(),c=$(b.el).find(".js-pos-results li:first"),n.selectMenuItem($(b.el).find(".js-pos-results"),"li",c)):t.hide()}}}else return b=$(this.el).find(".js-card-title").val(),boardView.cardComposerState.title=b,t.hide()};c.prototype.renderSelectedItems=function(){var b,c,d,f,g,i,h,m,l,o;h=boardView.cardComposerState;i=$(this.el).find(".list-card .list-card-members");
f=$(this.el).find(".list-card .card-labels");if(0<h.labels.length+h.members.length){if(0<h.members.length){b="";l=h.members;for(d=0,m=l.length;d<m;d++)g=l[d],c=null!=(o=Models.Member.find("username",g)[0])?o.toJSON():void 0,b+="<div class='member js-remove-member' name='"+g+"'>"+s.fill("member",c)+"</div>";i.empty();i.append(b);$(this.el).find(".list-card").css({"padding-bottom":30})}else i.empty(),$(this.el).find(".list-card").css({"padding-bottom":0});if(0<h.labels.length){f.empty();i=wa.prototype.labels;
for(c=0,g=i.length;c<g;c++)if(b=i[c],d=_.include(h.labels,b))b="<div class='card-label "+b+"-label' name='"+b+"'></div>",f.append(b)}}else i.empty(),f.empty(),$(this.el).find(".js-clear-all-items").hide(),$(this.el).find(".list-card").css({"padding-bottom":0})};c.prototype.clearSelectedItems=function(){$(this.el).find(".js-card-title").val("").focus().select();this.itemsToAddList=boardView.cardComposerState=[];this.renderSelectedItems()};c.prototype.openMenu=function(b){n.stop(b);q("Card Composer",
"Open Selector Menu");return t.toggle({elem:$(b.target)[0],top:36,view:boardView.model.getView(Qd)})};c.prototype.clearItems=function(){boardView.cardComposerState.members=[];boardView.cardComposerState.labels=[];boardView.cardComposerState.title=null};c.prototype.hide=function(){$(this.el).remove();boardView.cardComposerState.vis=!1};c.prototype.clearAndHide=function(){this.clearItems();return this.hide()};return c}();Qd=function(){function c(){this.openPosSelector=h(this.openPosSelector,this);this.openLabelSelector=
h(this.openLabelSelector,this);this.openMemSelector=h(this.openMemSelector,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Select"};c.prototype.events={"click .js-mem-selector":"openMemSelector","click .js-label-selector":"openLabelSelector","click .js-pos-selector":"openPosSelector"};c.prototype.render=function(){$(this.el).html(s.fill("popover_selector_menu"));return this};c.prototype.openMemSelector=function(b){n.stop(b);
return t.pushView({view:boardView.model.getView(ob)})};c.prototype.openLabelSelector=function(b){n.stop(b);return t.pushView({view:boardView.model.getView(nb)})};c.prototype.openPosSelector=function(b){n.stop(b);return t.pushView({view:boardView.model.getView(Va)})};return c}();ob=function(){function c(){this.addOrRemoveMember=h(this.addOrRemoveMember,this);this.keyupEvent=h(this.keyupEvent,this);this.hoverMemberSelect=h(this.hoverMemberSelect,this);this.filterAndFillMembers=h(this.filterAndFillMembers,
this);this.fillMems=h(this.fillMems,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Select Members"};c.prototype.events={"hover .item":"hoverMemberSelect","click .item":"addOrRemoveMember",keyup:"keyupEvent"};c.prototype.render=function(b,c){var d;b||(b=_.pluck(boardView.model.memberList.models,"id"));d={showSearch:!0};if(5>=b.length||c)d.showSearch=!1;$(this.el).html(s.fill("popover_member_searcher",d));this.fillMems(b);
0<$(this.el).find(".js-filter-members").length&&_.delay(h(function(){return $(this.el).find(".js-filter-members").focus().select()},this),20);return this};c.prototype.fillMems=function(b){var c,d,f,g,i;$(this.el).find(".js-members-list").empty();f=[];boardView.cardComposerState.members.forEach(h(function(b){var c;if(RegExp("^"+b+"$").test(b))return b=null!=(c=Models.Member.find("username",b)[0])?c.get("id"):void 0,f.push(b)},this));b=b.slice(0,5);for(g=0,i=b.length;g<i;g++)d=b[g],c=Models.Member.get(d).toJSON(),
_.include(f,d)&&(c.isActive=!0),$(this.el).find(".js-members-list").append(s.fill("select_member",c,{},{member:s.member}))};c.prototype.filterAndFillMembers=function(b){var c;c=_.pluck(boardView.model.memberList.models,"id");b=n.filterMembers(b,c);0<b.length?(this.fillMems(b),b=$(this.el).find(".js-members-list .item:first"),n.selectMenuItem($(this.el).find(".js-members-list"),".item",b)):$(this.el).find(".js-members-list").html("<li><p class='empty'>No matched members</p></li>")};c.prototype.hoverMemberSelect=
function(b){b=$(b.target).closest(".item");return n.selectMenuItem($(this.el).find(".js-members-list"),".item",b)};c.prototype.keyupEvent=function(b){var c,d,f;c=$(".js-filter-members").val().trim().toLowerCase();(d=b.keyCode)===ua||d===da?(n.stop(b),$(this.el).find(".js-members-list .item.selected:first .js-select-member").first().click()):(f=b.keyCode)===Z||f===Y?(n.stop(b),n.navMenuList($(this.el).find(".js-members-list"),".item",b.keyCode)):this.filterAndFillMembers(c)};c.prototype.addOrRemoveMember=
function(b){n.stop(b);b=$(b.target).closest(".item");b.toggleClass("active");b=b.find(".username").text();_.include(boardView.cardComposerState.members,b)?(boardView.cardComposerState.members=_.without(boardView.cardComposerState.members,b),q("Card Composer","Remove Member")):(boardView.cardComposerState.members.push(b),q("Card Composer","Add Member"));boardView.model.getView(fa).renderSelectedItems()};return c}();nb=function(){function c(){this.addOrRemoveLabel=h(this.addOrRemoveLabel,this);this.hoverLabelSelect=
h(this.hoverLabelSelect,this);this.filterLabels=h(this.filterLabels,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Select Labels"};c.prototype.events={"hover .item":"hoverLabelSelect","click .card-label":"addOrRemoveLabel"};c.prototype.render=function(b){var c,d,f,g,i,h;g=[];b||(b=wa.prototype.labels);d=boardView.cardComposerState.labels;for(i=0,h=b.length;i<h;i++)c=b[i],f=_.include(d,c),g.push({color:c,name:boardView.model.getLabelName(c),
isActive:f});b={labels:g,hideEditTitles:!0};$(this.el).html(s.fill("popover_change_labels",b));return this};c.prototype.filterLabels=function(b){var c,d,f,g,i,h;f=RegExp("^"+b.toLowerCase());c=[];h=wa.prototype.labels;for(g=0,i=h.length;g<i;g++)b=h[g],d=boardView.model.getLabelName(b).toLowerCase().split(" "),d.push(b),_.detect(d,function(b){return f.test(b)})&&c.push(b);return c};c.prototype.hoverLabelSelect=function(b){b=$(b.target).closest(".card-label");return n.selectMenuItem($(this.el).find(".edit-labels-pop-over"),
".card-label",b)};c.prototype.addOrRemoveLabel=function(b){n.stop(b);b=$(b.target).closest(".card-label");b.toggleClass("active");b=b.attr("label");_.include(boardView.cardComposerState.labels,b)?(boardView.cardComposerState.labels=_.without(boardView.cardComposerState.labels,b),q("Card Composer","Remove Label")):(boardView.cardComposerState.labels.push(b),q("Card Composer","Add Label"));boardView.model.getView(fa).renderSelectedItems()};return c}();Va=function(){function c(){this.changePosition=
h(this.changePosition,this);this.changeList=h(this.changeList,this);this.updatePositionList=h(this.updatePositionList,this);this.updateListList=h(this.updateListList,this);this.renderPosResults=h(this.renderPosResults,this);this.filterPos=h(this.filterPos,this);this.selectPosResult=h(this.selectPosResult,this);this.hoverPosResultsSelect=h(this.hoverPosResultsSelect,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Select Position"};c.prototype.events=
{"change .js-select-list":"changeList","change .js-select-position":"changePosition","hover .js-pos-results li":"hoverPosResultsSelect","click .js-select-pos-keyword":"selectPosResult","click .js-select-pos-pos":"selectPosResult","click .js-select-pos-list":"selectPosResult"};c.prototype.render=function(){this.composerView=boardView.model.getView(fa);$(this.el).html(s.fill("popover_change_position"));this.updateListList();return this};c.prototype.hoverPosResultsSelect=function(b){b=$(b.target).closest("li");
return n.selectMenuItem($(this.el).find(".js-pos-results"),"li",b)};c.prototype.selectPosResult=function(b){var c,d,f;n.stop(b);d=$(b.target).closest("a");f=d.attr("name");b=boardView.cardComposerState.pos;c=this.composerView.getListModel().cardList.filter(function(b){return!b.get("closed")}).length+1;d.hasClass("js-select-pos-keyword")?"top"===f?(b.cardPos=0,q("Card Composer","Select Position in List by Autocomplete",'Top of List - Used "Top"')):"bottom"===f&&(b.cardPos=c,q("Card Composer","Select Position in List by Autocomplete",
'Bottom of List - Used "Bottom"')):d.hasClass("js-select-pos-pos")?(b.cardPos=parseInt(f,10)-1,q("Card Composer","Select Position in List by Autocomplete","Selected Position - Used Number")):d.hasClass("js-select-pos-list")&&(c=this.composerView.getListModel().cardList.filter(function(b){return!b.get("closed")}).length===b.cardPos,b.idList=f,c?(b.cardPos=this.composerView.getListModel().cardList.filter(function(b){return!b.get("closed")}).length,q("Card Composer","Select List by Autocomplete","Bottom")):
q("Card Composer","Select List by Autocomplete","Not Bottom"));t.hide();this.composerView.hide();this.composerView.updatePositionOnBoard()};c.prototype.filterPos=function(b){var c,d,f,g,i,h;g=RegExp("^"+b.toLowerCase());f=RegExp("^"+b+"$");this.composerView=boardView.model.getView(fa);d={keywordList:[],posList:[],listList:[]};c=this.composerView.getListModel().cardList.filter(function(b){return!b.get("closed")});for(b=0,i=c.length;0<=i?b<=i:b>=i;0<=i?b++:b--)c=b+1,f.test(""+c)&&d.posList.push(c);
_.each(["top","bottom"],function(b){if(g.test(b))return d.keywordList.push(b)});h=boardView.options.model.listList.models;for(c=0,i=h.length;c<i;c++)b=h[c],b.get("closed")||(f=_.compact(b.get("name").toLowerCase().split(/\s+/)),_.detect(f,function(b){return g.test(b)})&&d.listList.push(b.toJSON()));0<d.keywordList.length+d.posList.length+d.listList.length&&(d.hasData=!0);return d};c.prototype.renderPosResults=function(b){var c,d,f,g,i,h,m,l,o;this.composerView=boardView.model.getView(fa);o=this.composerView.getListModel();
f=boardView.cardComposerState.pos.cardPos+1;i="of";1===f?h="Top":f===o.cardList.filter(function(b){return!b.get("closed")}).length+1?h="Bottom":(h=n.getNaturalNumber(""+f),i="in");d=[];l=b.keywordList;for(g=0,m=l.length;g<m;g++)c=l[g],c={value:c,natural:""+(c.charAt(0).toUpperCase()+c.substring(1))},d.push(c);g=[];c=b.posList;for(m=0,l=c.length;m<l;m++)f=c[m],f={value:f,natural:""+n.getNaturalNumber(""+f)},g.push(f);b={currentListName:o.get("name"),currentListId:o.id,currentPos:h,currentPosPrep:i,
keywordList:d,posList:g,listList:b.listList};$(this.el).html(s.fill("popover_filter_pos_results",b))};c.prototype.updateListList=function(){var b,c,d,f,g,h,j,m;d=this.composerView.getListModel();f=d.id;d=d.getBoard();c=$(this.el).find(".js-select-list");c.empty();m=_.sortBy(d.listList.models,function(b){return b.get("pos")});for(h=0,j=m.length;h<j;h++)d=m[h],d.get("closed")||(b=g=d.get("name"),d._id===f&&(b+=" (selected)"),b=$("<option value='"+d.id+"'>"+b+"</option>"),c.append(b),d.id===f&&(b.attr("selected",
"selected"),$(this.el).find(".js-list-value").html(g)));return this.updatePositionList()};c.prototype.updatePositionList=function(){var b,c,d,f,g,h,j,m;c=$(this.el).find(".js-select-list");d=$(this.el).find(".js-select-position");g=c.find("option:selected").val();d.empty();_.detect(boardView.model.listList.models,function(b){var c;return null!=(c=b.id===g)?c:board.listList.models[0]});c=this.composerView.getListModel().cardList.filter(function(b){return!b.get("closed")});boardView.cardComposerState.pos.cardPos>
c.length&&(boardView.cardComposerState.pos.cardPos=c.length+1);if(0===c.length)b=$("<option>").val("0").text("1").appendTo(d),$(this.el).find(".js-pos-value").html(n.getNaturalNumber("1"));else for(f=0,m=c.length;0<=m?f<=m:f>=m;0<=m?f++:f--)b=j=""+(f+1),h=!1,0<c.length&&(0===f?b+=" (top)":f===c.length&&(b+=" (bottom)")),f===boardView.cardComposerState.pos.cardPos&&(h=!0),b=$("<option>").val(f).text(b).appendTo(d),h&&(b.attr("selected","selected"),$(this.el).find(".js-pos-value").html(n.getNaturalNumber(j)))};
c.prototype.changeList=function(){var b,c,d;d=boardView.cardComposerState.pos;c=this.composerView.getListModel().cardList.filter(function(b){return!b.get("closed")}).length===d.cardPos;b=$(this.el).find(".js-select-list").find("option:selected").val();d.idList=b;c?(d.cardPos=this.composerView.getListModel().cardList.filter(function(b){return!b.get("closed")}).length,q("Card Composer","Change Position by Click","Change List - Bottom")):q("Card Composer","Change Position by Click","Change List - Not Bottom");
t.hide();this.composerView.hide();this.composerView.updatePositionOnBoard()};c.prototype.changePosition=function(){var b;b=$(this.el).find(".js-select-position");b=parseInt(b.find("option:selected").val(),10);boardView.cardComposerState.pos.cardPos=b;q("Card Composer","Change Position by Click","Change Position in List");t.hide();this.composerView.hide();this.composerView.updatePositionOnBoard()};return c}()}if(B("card")){var wa,Rd,Ia,pb,kc,lc,Ua,Sd,h=function(c,b){return function(){return c.apply(b,
arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},ca=Array.prototype.indexOf||function(c){for(var b=0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1},X=Array.prototype.slice;wa=function(){function c(){this.markRelatedNotificationsRead=h(this.markRelatedNotificationsRead,this);this.getCheckItem=h(this.getCheckItem,this);this.subscribe=
h(this.subscribe,this);this.getVoterDisplayData=h(this.getVoterDisplayData,this);this.vote=h(this.vote,this);this.addComment=h(this.addComment,this);this.getUrl=h(this.getUrl,this);this.getList=h(this.getList,this);this.getBoard=h(this.getBoard,this);this.reopen=h(this.reopen,this);this.close=h(this.close,this);this.hasChecklist=h(this.hasChecklist,this);this.removeChecklist=h(this.removeChecklist,this);this.addChecklist=h(this.addChecklist,this);this.hasMember=h(this.hasMember,this);this.removeMember=
h(this.removeMember,this);this.addMember=h(this.addMember,this);this.moveToList=h(this.moveToList,this);c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="Card";c.prototype.initialize=function(){Api.init(this)};c.prototype.postInitialize=function(){var b,c,d,f,g,i,j;this.memberList=new Sa([],{model:this});this.memberVotedList=new Sa([],{model:this});this.checkItemStateList=new Td(this.get("checkItemStates")||[],{model:this});this.checklistList=new hc([],{model:this});this.attachmentList=
new Ud([],{model:this});f=h(function(){this.memberList.refresh(Models.Member.getList(this.get("idMembers")||[]),{model:this})},this);g=h(function(){this.memberVotedList.refresh(Models.Member.getList(this.get("idMembersVoted")||[]),{model:this})},this);j=h(function(){var b,c,e,d;if(null!=(c=this.get("idMembersVoted")))b=this.get("badges"),b.votes=c.length,b.viewingMemberVoted=(e=null!=(d=y.me())?d.id:void 0,0<=ca.call(c,e)),this.trigger("change:badges")},this);d=h(function(){this.checklistList.refresh(_.map(this.get("idChecklists")||
[],h(function(b){return this.getBoard().getChecklist(b)},this)).filter(function(b){return null!=b}),{model:this})},this);c=h(function(){this.checkItemStateList.refresh(this.get("checkItemStates")||[],{model:this})},this);b=h(function(){this.attachmentList.refresh(this.get("attachments")||[],{model:this})},this);i=h(function(){var b;b=this.get("labels");if(!_.isString(null!=b?b[0]:void 0))return this.set("labels",_.pluck(b,"color"),{silent:!0})},this);f();g();d();c();b();i();this.bind("change:idMembers",
f);this.bind("change:idMembersVoted",g);this.bind("change:idMembersVoted",j);this.bind("change:idChecklists",d);this.bind("change:checkItemStates",c);this.bind("change:attachments",b);this.bind("change:labels",i);this.bind("change:idList",function(b){var c,e;e=b.getList();c=b.getBoard().getList(b.get("idList"));e.cardList.remove(b);c.cardList.add(b)});this.badgeList=new Vd([],{model:this});this.get("idMembersVoted")||this.set("idMembersVoted",[],{silent:!0});this.setReady()};c.prototype.withIdParents=
function(b){var c;c=this.getList();c.onId(function(d){b([d,c.getBoard().id])})};c.prototype.moveToList=function(b,c){var d;d=this;b.onId(function(f){d.set({pos:b.calcPos(c,d),idList:f});d.save()})};c.prototype.moveToNextList=function(){var b,c;c=this.getBoard().listList.filter(function(b){return!b.get("closed")});b=_.indexOf(c,this.getList());b<c.length-1&&this.moveToList(c[b+1],1E9)};c.prototype.moveToPrevList=function(){var b,c;c=this.getBoard().listList.filter(function(b){return!b.get("closed")});
b=_.indexOf(c,this.getList());0<b&&this.moveToList(c[b-1],1E9)};c.prototype.addMember=function(b){var c;c=$("#board");this.hasMember(b)||(this.addToSet("idMembers",b),this.save(),0<c.length&&(b=Models.Member.get(b).get("username"),$(this.view.el).addClass("assigned-to-"+b),S.refreshFilters()),!0);return!1};c.prototype.removeMember=function(b){var c;c=$("#board");this.hasMember(b)&&(this.pull("idMembers",b),this.save(),0<c.length&&(b=Models.Member.get(b).get("username"),$(this.view.el).removeClass("assigned-to-"+
b),S.refreshFilters()),!0);return!1};c.prototype.toggleMember=function(b){this.hasMember(b)?this.removeMember(b):this.addMember(b)};c.prototype.hasMember=function(b){return this.memberList.get(b)};c.prototype.addChecklist=function(b){this.hasChecklist(b)||(this.addToSet("idChecklists",b),this.save(),!0);return!1};c.prototype.removeChecklist=function(b){this.hasChecklist(b)&&(this.pull("idChecklists",b),this.save(),!0);return!1};c.prototype.getIdCardMems=function(){return _.map(this.memberList.models,
h(function(b){return b.id},this))};c.prototype.getIdCommenters=function(){var b;b=[];_.each(Models.Action.getListForModel(this),h(function(c){if("commentCard"===c.get("type"))return c=c.get("idMemberCreator"),b.push(c)},this));return this.idCommenters=_.uniq(b)};c.prototype.hasChecklist=function(b){return this.checklistList.get(b)};c.prototype.close=function(){this.set({closed:!0});this.save()};c.prototype.reopen=function(){var b;b=this.getList();null!=b&&(this.set({closed:!1,pos:b.calcPos(b.cardList.length,
this)}),this.save())};c.prototype.getBoard=function(){this.board||(this.board=Models.Board.get(this.get("idBoard")));return this.board};c.prototype.getList=function(){return this.getBoard().listList.get(this.get("idList"))};c.prototype.getUrl=function(){return Controller.getCardUrl(this)};c.prototype.editable=function(){return this.getBoard().editable()};c.prototype.addComment=function(b){var c;c=this;if(""!==b)c.onId(function(d){var f;f=_.uniqueId("placeholder");return c.withIdParents(function(){var g,
h,j,m;h=c.getBoard();g=new Pa({_id:f,type:"commentCard",data:{text:b,card:{id:c.id,name:c.get("name")},board:{id:h.id,name:h.get("name")}},idMemberCreator:y.myId(),version:1});Models.Action.add(g);j=function(b){Models.Action.remove(f,b);setTimeout(function(){return g.destroy()},1E4);return Models.Action.unbind("add:"+d,m)};m=function(){return j(!1)};h=function(){return j(!0)};setTimeout(g.takingTooLong,2E3);c.api.addComment(b,h,h);return Models.Action.bind("add:"+d,m)})})};c.prototype.vote=function(b){var c;
b!==this.voted&&this.getBoard().canVote(y.me())&&(c="/1/cards/"+this.id+"/membersVoted",b?Ca({url:c,type:"post",data:{value:y.me().id},dataType:"json",error:function(b){return"undefined"!==typeof console&&null!==console?"function"===typeof console.error?console.error(b):void 0:void 0}}):Ca({url:""+c+"/"+y.me().id,type:"delete",dataType:"json",error:function(b){return"undefined"!==typeof console&&null!==console?"function"===typeof console.error?console.error(b):void 0:void 0}}),c=this.get("badges"),
c.viewingMemberVoted=b,c.votes+=b?1:-1,this.trigger("change:badges"))};c.prototype.voted=function(){var b;return null!=(b=this.get("badges"))?b.viewingMemberVoted:void 0};c.prototype.getVoterDisplayData=function(b){return this.api.getVoterDisplayData({},h(function(c){Models.Member.update(c.members);return b()},this),function(){})};c.prototype.toggleVote=function(){this.vote(!this.voted())};c.prototype.subscribe=function(b){var c;b!==this.get("subscribed")&&(c="/1/cards/"+this.id+"/subscribed",this.get("badges").subscribed=
b,Ca({url:c,type:"put",data:{value:b},dataType:"json",error:function(b){return"undefined"!==typeof console&&null!==console?"function"===typeof console.error?console.error(b):void 0:void 0}}))};c.prototype.getCheckItem=function(b){var c,d,f,g;for(d=0,f=this.checklistList.length-1;0<=f?d<=f:d>=f;0<=f?d++:d--)if(c=this.checklistList.at(d),c=null!=c?null!=(g=c.checkItemList)?g.get(b):void 0:void 0)return c;return null};c.prototype.labels="green,yellow,orange,red,purple,blue".split(",");c.prototype.getLabels=
function(){var b,c,d,f,g;f=this.labels;g=[];for(c=0,d=f.length;c<d;c++)b=f[c],g.push(this.getLabel(b));return g};c.prototype.hasLabel=function(b){return _.include(this.get("labels"),b)};c.prototype.setLabel=function(b,c){c?this.addToSet("labels",b):this.pull("labels",b);this.save()};c.prototype.getLabel=function(b){return{shortcut:String.fromCharCode(49+_.indexOf(this.labels,b)),color:b,name:this.getBoard().getLabelName(b),isActive:this.hasLabel(b)}};c.prototype.toggleLabel=function(b){this.setLabel(b,
!this.hasLabel(b))};c.prototype.markRelatedNotificationsRead=function(){var b,c,d,f,g,h;f=Models.Notification.all();h=[];for(c=0,d=f.length;c<d;c++)b=f[c],b.get("unread")&&(null!=(g=b.get("data").card)?g.id:void 0)===this.id&&h.push(b.markRead());return h};c.prototype.toJSON=function(b){var e;null==b&&(b={});e=c.__super__.toJSON.apply(this,arguments);b.url&&(e.url=Controller.getCardUrl(this));return e};return c}();x.CardList=Ea.extend({model:wa,initialize:function(c,b){this.options=b;this.bind("change:pos",
this.sort)},comparator:function(c){return c.get("pos")||0}});Ua=function(){function c(){this.doClicks=h(this.doClicks,this);this.showDetail=h(this.showDetail,this);this.selectCard=h(this.selectCard,this);this.moveIn=h(this.moveIn,this);this.moveTo=h(this.moveTo,this);this.openCardMenu=h(this.openCardMenu,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="list-card js-member-droppable clearfix";c.prototype.events={moveto:"moveTo",movein:"moveIn",
"click .js-card-menu":"openCardMenu",click:"showDetail",mouseover:"selectCard"};c.prototype.initialize=function(){this.model.bind("change",this.render);this.model.view=this;this.model.memberList.onAddRemove(this.render);this.model.badgeList.bind("refresh",this.render);this.model.getBoard().bind("change:labelNames",this.render)};c.prototype.render=function(){var b,c,d,f;f=this.model;J("render","rendering card "+f.get("name"));b=f.toJSON();b.labels=f.getLabels();b.url=Controller.getCardUrl(this.model);
$(this.el).html(s.fill("card_in_list",b,{editable:this.model.editable()}));b.members=f.memberList.models;b.members.forEach(h(function(b){b="assigned-to-"+b.get("username");$(this.el).addClass(b)},this));$(this.el).removeClass("red-label orange-label yellow-label green-label blue-label purple-label");b.labels.forEach(h(function(b){b.isActive&&(b=b.color+"-label",$(this.el).addClass(b))},this));Browser.isTouch()||$(this.el).droppable({refreshPositions:!0,inBounds:function(b){var c,e,d,f;c=$("#board");
e=c.offset();return e.left<(d=b.pageX)&&d<e.left+c.width()&&e.top<(f=b.pageY)&&f<e.top+c.height()},accept:".js-list-board-members .member",drop:function(b,c){var e;e=c.draggable.data("id");c.draggable.clone();f.memberList.detect(function(b){return b.id===e})||(f.addMember(e),q("Card","Add Member by Board Sidebar"))}});d=$(this.el).find(".list-card-members");this.model.memberList.forEach(function(b){b=b.getView(Zb,"card_"+f.cid,{parent:f});d.prepend(b.render().el)});c=$(this.el).find(".badges");this.model.badgeList.forEach(function(b){b=
b.getView(fb,"card");c.append(b.render().el)});$(this.el).data("card",f);return this};c.prototype.openCardMenu=function(b){n.stop(b);q("Card Menu","Open Card Menu","On Board View");t.toggle({elem:b.target,top:23,view:this.model.getView(kc)})};c.prototype.moveTo=function(b,c,d){b=c.item.parent().children(".list-card:not(.placeholder)").index(c.item);this.model.moveToList(d.model,b)};c.prototype.moveIn=function(b,c,d){d.model.id===this.model.get("idList")&&this.moveTo(b,c,d)};c.prototype.selectCard=
function(){N.fMouseSelect&&N.selectCard(this.el)};c.prototype.showDetail=function(b,c){var d,f,g,i;this.model.markRelatedNotificationsRead();Models.Notification.unbind("add",this.model.markRelatedNotificationsRead);Models.Notification.bind("add",this.model.markRelatedNotificationsRead);if(_.isFunction(b))d=b;else{if((f=b)&&(f.ctrlKey||f.metaKey||f.shiftKey))return;g=Controller.title;d=function(b){b||(Controller.goBack(),Controller.setLocation({title:g}))}}if(null!=f){if(f.isPropagationStopped())return;
f.isDefaultPrevented()||n.stop(f)}if(!this.doClicks())return!1;R.cancelEdits();boardView.model.getView(fa).hide();i=h(function(){var b;b=1<=arguments.length?X.call(arguments,0):[];Models.Notification.unbind("add",this.model.markRelatedNotificationsRead);return"function"===typeof d?d.apply(null,b):void 0},this);q("Board","Open Card Detail");I.show({view:this.model.getView(Rd),hide:i});this.$(".list-card-wrapper").parent();null!=f&&Controller.saveCardLocation(this.model,c)};c.prototype.doClicks=function(){return!DragSort.sorting};
return c}();Rd=function(){function c(){this.openSharePopover=h(this.openSharePopover,this);this.unsubscribe=h(this.unsubscribe,this);this.subscribe=h(this.subscribe,this);this.unvote=h(this.unvote,this);this.vote=h(this.vote,this);this.dueDateSidebar=h(this.dueDateSidebar,this);this.dueDateBadge=h(this.dueDateBadge,this);this.addChecklistMenu=h(this.addChecklistMenu,this);this.openAutoMentioner=h(this.openAutoMentioner,this);this.keyAutoMention=h(this.keyAutoMention,this);this.checkInsertMember=h(this.checkInsertMember,
this);this.inputComment=h(this.inputComment,this);this.changeMembers=h(this.changeMembers,this);this.clearComment=h(this.clearComment,this);this.submitComment=h(this.submitComment,this);this.startUpload=h(this.startUpload,this);this.renderAttachments=h(this.renderAttachments,this);this.renderChecklists=h(this.renderChecklists,this);this.renderSubscribe=h(this.renderSubscribe,this);this.renderVotes=h(this.renderVotes,this);this.renderLabels=h(this.renderLabels,this);this.renderBadges=h(this.renderBadges,
this);this.renderMemberList=h(this.renderMemberList,this);this.renderActionList=h(this.renderActionList,this);this.renderOpen=h(this.renderOpen,this);this.renderList=h(this.renderList,this);this.renderCardAttrs=h(this.renderCardAttrs,this);this.doClicks=h(this.doClicks,this);this.showVotes=h(this.showVotes,this);this.editLabels=h(this.editLabels,this);this.deleteCardPopover=h(this.deleteCardPopover,this);this.moveCard=h(this.moveCard,this);this.reopenCard=h(this.reopenCard,this);this.closeCard=h(this.closeCard,
this);this.openCardMenu=h(this.openCardMenu,this);this.editDesc=h(this.editDesc,this);this.render=h(this.render,this);this.getData=h(this.getData,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.initialize=function(){var b,c,d;c=this.model;c.bind("change",this.renderCardAttrs).bind("change:closed",this.renderOpen).bind("change:labels",this.renderLabels).bind("change:idList",this.renderList);c.getBoard().bind("change:labelNames",this.renderLabels);d=_.debounce(this.renderActionList,
1);b=h(function(){return Models.Action.bind("add:"+this.model.id,d).bind("remove:"+this.model.id,d)},this);this.model.bind("change:id",b);this.model.bind("change:idMembersVoted",this.renderVotes);this.model.bind("change:badges",this.renderVotes);this.model.bind("change:subscribed",this.renderSubscribe);b();c.memberVotedList.onAddRemove(this.renderVotes);c.memberList.onAddRemove(this.renderMemberList);c.badgeList.bind("refresh",this.renderBadges);c.checklistList.onAddRemove(this.renderChecklists);
c.attachmentList.onAddRemove(this.renderAttachments);c.getBoard().bind("change:prefs",this.render);this.getData()};c.prototype.events={"keypress .new-comment-input":"submitComment","click .js-card-menu":"openCardMenu","click .js-close-card":"closeCard","click .js-reopen-card":"reopenCard","click .js-move-card":"moveCard","click .js-edit-labels":"editLabels","click .js-change-card-members":"changeMembers","click .js-add-comment":"submitComment","click .js-cancel-comment":"stopEditing","click .new-comment":"inputComment",
"focus .new-comment-input":"inputComment","click .js-add-comment":"submitComment","keypress .new-comment-input":"submitComment","click .js-cancel-comment":"clearComment","click .js-open-mention-selector":"openAutoMentioner","keyup .new-comment-input":"keyAutoMention","keydown .new-comment-input":"checkInsertMember","click .js-edit-desc":"editDesc","click .js-add-checklist-menu":"addChecklistMenu","click .js-add-due-date":"dueDateSidebar","click .js-vote":"vote","click .js-unvote":"unvote","click .js-subscribe":"subscribe",
"click .js-unsubscribe":"unsubscribe","click .js-show-votes":"showVotes","change .js-attach-file":"startUpload","click .js-change-due-date":"dueDateBadge","click .js-delete-card-popover":"deleteCardPopover","click .js-share":"openSharePopover"};c.prototype.getData=function(){var b;b=this.model;this.loading=!0;Models.loadCardActions(b.get("idBoard"),b.id,h(function(){this.loading=!1;$(".js-loading-card-actions").hide()},this))};c.prototype.render=function(){var b,c,d;d=this;c=d.model.toJSON();b=_.map(_.filter(d.options.members,
function(b){return _.detect(d.options.CardMembers,function(c){return c.get("idMember")===b.id})}),function(b){return b.toJSON()});c.active_members=b;c.canComment=this.model.getBoard().canComment(y.me());c.canVote=this.model.getBoard().canVote(y.me());c.canSubscribe=y.isLoggedIn();c.showActions=c.canVote||c.canSubscribe;$(this.el).html(s.fill("card_detail",_.extend({loading:this.loading},c),{editable:this.model.editable()}));this.commentInput=$(this.el).find(".new-comment-input")[0];d.renderCardAttrs().renderList().renderActionList().renderMemberList().renderOpen().renderChecklists().renderVotes().renderSubscribe().renderBadges().renderAttachments().renderLabels();
this.recallDrafts();return this};c.prototype.editDesc=function(b){q("Card Detail","Edit Description");n.stop(b);this.edit("desc")};c.prototype.openCardMenu=function(b){n.stop(b);q("Card Menu","Open Card Menu","On Card Detail");t.toggle({elem:b.target,top:30,view:this.model.getView(kc)})};c.prototype.closeCard=function(){var b;$(this.model.view.el).remove();q("Card Detail Sidebar","Archive");b=$(this.model.view.el).next(".list-card:visible");N.selectCard(b);N.cardToSelect=b;this.model.close()};c.prototype.reopenCard=
function(){q("Card Detail Sidebar","Re-Open");this.model.reopen()};c.prototype.moveCard=function(b){n.stop(b);q("Card Detail Sidebar","Move");t.toggle({elem:$(b.target).closest(".button-link")[0],top:35,view:this.model.getView(lc)})};c.prototype.deleteCardPopover=function(b){n.stop(b);q("Card Detail Sidebar","Delete","Open Confirm Delete");t.toggle({elem:$(b.target).closest(".js-delete-card-popover")[0],top:35,view:this.model.getView(Sd)})};c.prototype.editLabels=function(b){n.stop(b);q("Card Detail Sidebar",
"Labels","Open From Sidebar");t.toggle({elem:$(b.target).closest(".button-link")[0],top:35,view:this.model.getView(Ia)})};c.prototype.showVotes=function(b){n.stop(b);this.model.getVoterDisplayData(h(function(){q("Card Detail Badges","Vote","Show Voters");return t.toggle({elem:$(b.target).closest(".js-show-votes")[0],top:30,view:this.model.getView(qd)})},this))};c.prototype.doClicks=function(){return!DragSort.sorting};c.prototype.renderCardAttrs=function(){var b,c;b=this.model;c=b.get("name");b=b.get("desc");
$(this.el).find(".window-title-text").text(c);$(this.el).find(".card-detail-desc>div.current").html(na.markdownAsHtml(null!=b?b:""));c=!/^\s*$/.test($(this.el).find(".card-detail-desc>div.current").text());$(this.el).find(".card-detail-desc>div.current").toggle(c);return this};c.prototype.renderList=function(){$(this.el).find(".js-current-list").html(s.fill("card_detail_list",{listName:this.model.getList().get("name")}));return this};c.prototype.renderOpen=function(){var b;b=!0===this.model.get("closed");
$(this.el).find(".js-close-card").toggleClass("hide",b);$(this.el).find(".js-reopen-card").toggleClass("hide",!b);return this};c.prototype.renderActionList=function(){var b,c,d;c=$(this.el).find(".list-actions");d=this.model.getBoard().id;b=_.filter(Models.Action.getListForModel(this.model),function(b){var c;return(null!=(c=b.get("data").board)?c.id:void 0)===d||"commentCard"===b.get("type")});(new Ta(b)).renderTo(c,{compact:!1,key:this.model.id,model:this.model});return this};c.prototype.renderMemberList=
function(){var b,c,d;d=this.model;b=$(this.el).find(".card-detail-members");c=$(this.el).find(".no-mems");b.find(".member").not(".js-change-card-members").remove();b.toggleClass("hide",0===d.memberList.length);c.toggleClass("hide",0!==d.memberList.length);d.memberList.forEach(function(c){c=c.getView(Zb,"carddetail_"+d.cid,{parent:d});return b.append(c.render().el)});return this};c.prototype.renderBadges=function(){var b,c;c=this.model;b=$(this.el).find(".badges");b.empty();c.badgeList.forEach(h(function(c){var e;
c.get("hasVotes")?(c=this.model.toJSON(),c.voted=this.model.voted(),c.nVotes=null!=(e=this.model.get("badges"))?e.votes:void 0,c.hasVotes=c.nVotes,c.singleVote=1===c.nVotes,c.justYourVote=1===c.nVotes&&c.voted,c.canVote=this.model.getBoard().canVote(y.me()),b.append(s.fill("votes",c,{editable:this.model.editable()}))):c.get("hasDueDate")?(e=c.toJSON(),b.append(s.fill("card_detail_date",e,{editable:this.model.editable()}))):(e=c.getView(fb,"carddetail"),b.append(e.render().el))},this));return this};
c.prototype.renderLabels=function(){var b,c,d,f,g;b=_.filter(this.model.getLabels(),function(b){return b.isActive});c=$(this.el).find(".card-label-list").find(".card-labels");c.empty();0===b.length&&c.append("<p class='empty'>No labels</p>");for(f=0,g=b.length;f<g;f++)d=b[f],c.append(s.fill("label",d));return this};c.prototype.renderVotes=function(){var b,c;b=$(this.el).find(".js-vote-sidebar-button");c=this.model.toJSON();c.voted=this.model.voted();c.canVote=this.model.getBoard().canVote(y.me());
b.html(s.fill("card_detail_vote_btn_sidebar",c));return this};c.prototype.renderSubscribe=function(){var b,c;b=$(this.el).find(".js-subscribe-sidebar-button");c=this.model.toJSON();c.subscribed=this.model.get("subscribed");b.html(s.fill("card_detail_subscribe",c));return this};c.prototype.renderChecklists=function(){var b,c;c=this.model;b=$(this.el).find(".checklists.window-module");b.empty();c.checklistList.forEach(function(d){d=d.getView(mc,c.cid,{card:c});b.append(d.render().el)});return this};
c.prototype.renderAttachments=function(){var b,c,d;d=this.model;$(this.el).find(".attachments .uploader");c=$(this.el).find(".attachments .attachment-list");b=$(this.el).find(".attachments .no-attachments");c.empty().toggleClass("hide",0===d.attachmentList.length);b.toggleClass("hide",0!==d.attachmentList.length);d.attachmentList.forEach(function(b){b=b.getView(Wd,"card",{card:d});c.append(b.render().el)});return this};c.prototype.startUpload=function(b){var c,d,f,g;g=_.uniqueId("iframe");f=$(b.target);
c=$(this.el).find(".js-file-too-large").hide();d=$("<iframe>").attr("name",g).css("display","none").appendTo("body").load(function(){$("body.error",d.contents()).text()&&c.show();return setTimeout(function(){return d.remove()},1E3)});f.closest("form").attr("target",g).find("input[name=token]").val(y.myToken()).end().submit();q("Card Detail Sidebar","Attachment","Upload Complete");setTimeout(function(){return f.val("")},100)};c.prototype.submitComment=function(b){var c,d,f;d=this.model;if(!("keypress"===
b.type&&(!((c=b.keyCode)===da||c===Ob)||!b.ctrlKey)))return q("Card Detail","Comment","Submit Comment"),n.stopPropagation(b),c=$(this.commentInput),f=$.trim(c.val()),c.val(""),d.addComment(f),R.cancelEdits(),"keypress"===b.type&&c[0].focus(),!1};c.prototype.clearComment=function(b){n.stop(b);$(this.commentInput).val("").focus().blur();return $(".new-comment").removeClass("focus")};c.prototype.changeMembers=function(b){n.stop(b);q("Card Detail Sidebar","Members","Open Manage Member Menu");b=$(this.el).find(".js-change-card-members");
t.toggle({elem:b[0],top:35,view:this.model.getView(pb)})};c.prototype.inputComment=function(b){n.stopPropagation(b);b=$(this.el).find(".new-comment");R.cancelEdits(this.commentInput);b.addClass("focus")};c.prototype.checkInsertMember=function(b){var c,d,f,g;if(t.isVisible()&&0<$(".pop-over").find(".js-available-members").length&&!Browser.isTouch()&&!(b.shiftKey&&((c=b.keyCode)===Z||c===Y)||b.altKey&&((d=b.keyCode)===Z||d===Y))){if((f=b.keyCode)===ua||f===da)return n.stop(b),$(".pop-over").find(".js-available-members").find(".item.selected:first .js-select-member").first().click(),
t.hide(),!1;if((g=b.keyCode)===Z||g===Y)return c=$(".js-available-members"),n.navMenuList(c,".item",b.keyCode),!1}};c.prototype.keyAutoMention=function(b){var c,d,f;if(!Browser.isTouch())if(d=n.getWordFromCaret(this.commentInput),c=/^@\S/,c.test(d.str.substring(0,2))){if(!((f=b.keyCode)===ia||f===la||f===sa||f===Z||f===Y))if(b=this.model.getView(nc,"input",{input:!0}),t.load(b),0!==b.idMatchMems.length)return t.show({elem:$(".js-open-mention-selector")[0],top:35,view:b,preloaded:!0}),$(this.commentInput).focus()}else return _.delay(function(){return t.hide()},
5)};c.prototype.openAutoMentioner=function(b){n.stop(b);q("Card Detail","Mention Autocomplete","Open Menu - With Click");t.toggle({elem:$(b.target).closest(".js-open-mention-selector")[0],top:35,view:this.model.getView(nc,"button",{button:!0})})};c.prototype.addChecklistMenu=function(b){n.preventDefault(b);q("Card Detail Sidebar","Checklist","Open Add Checklist Menu");t.toggle({elem:b.target,top:35,view:this.model.getView(Xd)});return!1};c.prototype.dueDateBadge=function(b){n.preventDefault(b);q("Card Detail Badges",
"Due Date","Open Due Date Menu");t.toggle({elem:$(b.target).closest(".due-date-badge")[0],top:28,view:this.model.getView(qb)});return!1};c.prototype.dueDateSidebar=function(b){n.preventDefault(b);q("Card Detail Sidebar","Due Date","Open Due Date Menu");t.toggle({elem:$(b.target).closest(".button-link")[0],top:35,view:this.model.getView(qb)});return!1};c.prototype.vote=function(b){n.preventDefault(b);q("Card Detail Sidebar","Vote","Vote");this.model.vote(!0);return!1};c.prototype.unvote=function(b){n.preventDefault(b);
q("Card Detail Sidebar","Vote","Unvote");this.model.vote(!1);return!1};c.prototype.subscribe=function(){q("Card Detail Sidebar","Subscribe","Subscribe");return this.model.subscribe(!0)};c.prototype.unsubscribe=function(){q("Card Detail Sidebar","Subscribe","Unsubscribe");return this.model.subscribe(!1)};c.prototype.openSharePopover=function(b){n.stop(b);q("Card Detail Sidebar","Share, Print, and Export","Open Share Popover");t.toggle({elem:$(b.target).closest(".js-share")[0],top:35,view:this.model.getView(gc)})};
return c}();Sd=function(){function c(){this.cancel=h(this.cancel,this);this.deleteCard=h(this.deleteCard,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Delete Card?"};c.prototype.events={"click .js-delete-card":"deleteCard","click .js-cancel":"cancel"};c.prototype.render=function(){$(this.el).html(s.fill("popover_confirm_delete_card"));return this};c.prototype.deleteCard=function(){t.hide();I.hide();this.model.destroy();
q("Card","Delete Menu","Successfully Deleted")};c.prototype.cancel=function(b){n.stop(b);q("Card","Delete Menu","Cancel");t.hide()};return c}();pb=function(){function c(){this.selectMem=h(this.selectMem,this);this.keyupEvent=h(this.keyupEvent,this);this.hoverMemberSelect=h(this.hoverMemberSelect,this);this.fillMems=h(this.fillMems,this);this.filterMembers=h(this.filterMembers,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Members"};
c.prototype.events={"click .js-select-member":"selectMem","hover .pop-over-member-list .item":"hoverMemberSelect",keyup:"keyupEvent",keydown:"keydownEvent"};c.prototype.render=function(){$(this.el).html(s.fill("popover_select_members",{},{},{select_member:s.select_member}));this.memListEl=$(this.el).find(".js-mem-list");this.allMembers=_.sortBy(this.model.getBoard().memberList.models,function(b){return b.get("fullName")});this.fillMems(this.allMembers);return this};c.prototype.filterMembers=function(b){var c,
d,f,g,h,j;if(""===b)return this.allMembers;f=RegExp("^"+b);c=[];j=this.allMembers;for(g=0,h=j.length;g<h;g++)b=j[g],d=n.getMemNameArray(b.id),_.detect(d,function(b){return f.test(b)})&&c.push(b);return c.slice(0,8)};c.prototype.fillMems=function(b){var c,d;d=this.model;this.memListEl.empty();this.memListEl.toggleClass("collapsed",9<b.length);0===b.length?this.memListEl.append("<p class='empty'>No results</p>"):(c=_.pluck(d.memberList.models,"id"),b.forEach(h(function(b){var d;d=b.toJSON();_.include(c,
b.id)&&(d.isActive=!0);return this.memListEl.append(s.fill("select_member",d,{},{member:s.member}))},this)))};c.prototype.hoverMemberSelect=function(b){b=$(b.target).closest(".item");return n.selectMenuItem(this.memListEl,".item",b)};c.prototype.keydownEvent=function(b){var c;if((c=b.keyCode)===ua||c===da)n.stop(b),$(this.el).find(".js-mem-list .item.selected:first .js-select-member").first().click(),$(".js-search-mem").val("").focus(),this.fillMems(this.allMembers)};c.prototype.keyupEvent=function(b){var c,
d;if(!((c=b.keyCode)===ua||c===da||c===ia||c===sa||c===la||c===Ec||c===ta)){if((d=b.keyCode)===Z||d===Y)return n.navMenuList(this.memListEl,".item",b.keyCode);b=$(".js-search-mem").val().trim();b=this.filterMembers(b);this.fillMems(b);this.focusSearch();if(b.length<this.allMembers.length)return b=this.memListEl.find(".item").first(),n.selectMenuItem(this.memListEl,".item",b)}};c.prototype.selectMem=function(b){var c,d;d=this.model;c=$(b.target).closest(".js-select-member");b=c.closest(".item");c=
c.attr("idMember");b.hasClass("active")?(d.removeMember(c),b.removeClass("active")):(d.addMember(c),b.addClass("active"));this.focusSearch();S.refreshFilters()};c.prototype.focusSearch=function(){return $(".js-search-mem").focus()};return c}();kc=function(){function c(){this.close=h(this.close,this);this.changeDueDate=h(this.changeDueDate,this);this.editLabels=h(this.editLabels,this);this.moveCard=h(this.moveCard,this);this.changeMembers=h(this.changeMembers,this);this.vote=h(this.vote,this);this.toggleSubscribe=
h(this.toggleSubscribe,this);this.doClicks=h(this.doClicks,this);this.render=h(this.render,this);this.initialize=h(this.initialize,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Card Actions"};c.prototype.initialize=function(){return this.model.bind("change:subscribed",this.render)};c.prototype.events={"click .js-change-card-members":"changeMembers","click .js-edit-labels":"editLabels","click .js-due-date":"changeDueDate","click .js-subscribe":"toggleSubscribe",
"click .js-vote":"vote","click .js-move-card":"moveCard","click .js-close-card":"close"};c.prototype.render=function(){var b;b={};y.me();b.hasVoted=this.model.voted();b.canVote=this.model.getBoard().canVote(y.me());b.isSubscribed=this.model.get("subscribed");$(this.el).html(s.fill("popover_card_menu",b));return this};c.prototype.doClicks=function(){return!DragSort.sorting};c.prototype.toggleSubscribe=function(b){n.preventDefault(b);this.model.get("subscribed")?(q("Card Menu","Subscribe","Subscribe"),
this.model.subscribe(!1)):(q("Card Menu","Subscribe","Unsubscribe"),this.model.subscribe(!0))};c.prototype.vote=function(b){n.preventDefault(b);q("Card Menu","Vote");this.model.toggleVote();this.render();return!1};c.prototype.changeMembers=function(b){var c;c=this.model;q("Card Menu","Open Change Members Menu");n.preventDefault(b);if(!this.doClicks())return!1;n.stopPropagation(b);t.pushView({view:c.getView(pb)})};c.prototype.moveCard=function(b){n.stop(b);q("Card Menu","Open Move Card Menu");t.pushView({view:this.model.getView(lc)})};
c.prototype.editLabels=function(b){n.stop(b);q("Card Menu","Open Edit Labels Menu");t.pushView({view:this.model.getView(Ia)})};c.prototype.changeDueDate=function(b){n.stop(b);q("Card Menu","Open Due Date Menu");t.pushView({view:this.model.getView(qb)})};c.prototype.close=function(){var b,c;b=this.model;q("Card Menu","Archive Card");b.getBoard();c=$(b.view.el).next(".list-card:visible");N.selectCard(c);N.cardToSelect=c;$(b.view.el).remove();b.close();t.hide()};return c}();lc=function(){function c(){this.cancelChange=
h(this.cancelChange,this);this.commitChange=h(this.commitChange,this);this.updatePositionList=h(this.updatePositionList,this);this.updateListList=h(this.updateListList,this);this.updateBoardData=h(this.updateBoardData,this);this.renderValues=h(this.renderValues,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Move Card"};c.prototype.events={"change .js-select-position":"renderValues","change .js-select-list":"updatePositionList",
"change .js-select-board":"updateBoardData","click .js-commit-position":"commitChange","click .js-cancel-position":"cancelChange"};c.prototype.render=function(){var b,c;c=this.model;b={boards:[]};y.me().boardList.each(function(d){var f;if(!d.get("closed"))return f=d.toJSON(),d.id===c.get("idBoard")&&(f.selected=!0),b.boards.push(f)});b.boards=_.sortBy(b.boards,function(b){return b.name});$(this.el).html(s.fill("popover_move_card",b));this.updateBoardData();return this};c.prototype.renderValues=function(){var b,
c,d,f,g;b=$(this.el);d=b.find(".js-select-board option:selected").val();f=b.find(".js-select-list option:selected").val();g=parseInt(b.find(".js-select-position option:selected").val(),10)+1;c=Models.Board.get(d);d=c.get("name");c=_.find(c.listList.models,h(function(b){return b.id===f},this)).get("name");g=n.getNaturalNumber(""+g);b.find(".js-board-value").html(d);b.find(".js-list-value").html(c);b.find(".js-pos-value").html(g)};c.prototype.updateBoardData=function(){var b,c,d,f,g,i,j;b=$(this.el);
d=b.find(".js-select-board").find("option:selected").val();if(d===this.model.getBoard().id){b=this.model.getBoard();this._boardData=b.toJSON();j=this._boardData.lists;for(g=0,i=j.length;g<i;g++)f=j[g],f.cardCount=b.listList.get(f.id).cardList.filter(function(b){return!b.get("closed")}).length;return this.updateListList()}c=b.find(".select-list,.select-position");c.attr("disabled","disabled");return Models.loadBoardListData(d,{lists:"open",list_fields:"name,pos",cards:"visible",card_fields:"idList"},
h(function(){this._boardData=Models.Board.get(d).toJSON();this.updateListList();return c.removeAttr("disabled")},this))};c.prototype.updateListList=function(){var b,c,d,f,g,h,j,m;b=$(this.el);d=b.find(".js-select-board");b=b.find(".js-select-list");f=d.find("option:selected").val();b.empty();d=this.model.getList().id;f=f===this.model.getBoard().id?d:this._boardData.lists[0].id;m=_.sortBy(this._boardData.lists,function(b){return b.pos});for(h=0,j=m.length;h<j;h++)g=m[h],g.closed||(c=g.name,g.id===
d&&(c+=" (current)"),c=$("<option>").val(g.id).text(c).appendTo(b),g.id===f&&c.attr("selected","selected"));return this.updatePositionList()};c.prototype.updatePositionList=function(){var b,c,d,f,g,h,j,m,l;g=this.model;b=$(this.el);d=b.find(".js-select-list");f=b.find(".js-select-position");h=d.find("option:selected").val();f.empty();d=null!=(j=_.detect(this._boardData.lists,function(b){return b.id===h}))?j:this._boardData.lists[0];d=(null!=d?d.id:void 0)===this.model.getList().id;j=Models.Board.get(this._boardData.id).listList.get(h).cardList.length;
d?(l=g=_.indexOf(g.getList().cardList.filter(function(b){return!b.get("closed")}),g),j-=1):(g=-1,l=j);for(d=0;0<=j?d<=j:d>=j;0<=j?d++:d--)c=m=""+(d+1),d===g?c+=" (current)":0<j&&(0===d?c+=" (top)":d===j&&(c+=" (bottom)")),c=$("<option>").val(d).text(c).appendTo(f),d===l&&(b.find(".js-pos-value").html(n.getNaturalNumber(m)),c.attr("selected","selected"));this.renderValues()};c.prototype.commitChange=function(){var b,c,d,f;f=this.model;b=$(this.el);c=b.find(".js-select-board");d=b.find(".js-select-list");
b=b.find(".js-select-position");c=c.find("option:selected").val();d=d.find("option:selected").val();b=parseInt(b.find("option:selected").val(),10);c===f.getBoard().id?(d=f.getBoard().listList.get(d),f.moveToList(d,b),q("Card","Move Menu","Same Board")):null!=c&&null!=d&&null!=b&&(q("Card","Move Menu","Changed Board"),f.getList().cardList.remove(f),I.hide(),f.api.moveToBoard({idBoard:c,idList:d,index:b}));t.hide()};c.prototype.cancelChange=function(){return t.hide()};return c}();Ia=function(){function c(){this.toggleColorBlindMode=
h(this.toggleColorBlindMode,this);this.openEditLabelTitles=h(this.openEditLabelTitles,this);this.toggleLabel=h(this.toggleLabel,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Change Labels"};c.prototype.initialize=function(){return y.me().bind("change:prefs",this.render)};c.prototype.events={"click .card-label":"toggleLabel","click .js-edit-label-titles":"openEditLabelTitles","click .js-toggle-color-blind-mode":"toggleColorBlindMode"};
c.prototype.render=function(){var b,c;b={labels:this.model.getLabels(),showShortcuts:this.options.showShortcuts};c={editable:this.model.editable()};b.cbModeEnabled=y.me().get("prefs").colorBlind;b.cbToggleText="Enable";b.cbModeEnabled&&(b.cbToggleText="Disable");$(this.el).html(s.fill("popover_change_labels",b,c));return this};c.prototype.toggleLabel=function(b){var c,b=$(b.target).closest(".card-label");if(c=b.attr("label"))q("Card","Labels Menu","Change Label"),this.model.toggleLabel(c),this.options.hideOnSelect?
t.hide():(c=b.hasClass("active"),b.toggleClass("active",!c))};c.prototype.openEditLabelTitles=function(b){n.stop(b);q("Card","Labels Menu","Open Edit Label Titles");t.pushView({view:this.model.board.getView(jc)})};c.prototype.toggleColorBlindMode=function(){y.me().toggleColorBlindMode()};return c}()}if(B("action")){var Pa,Ta,ic,Yd,Zd,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,
d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Pa=function(){function c(){this.takingTooLong=h(this.takingTooLong,this);c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.initialize=function(){return this.date=new Date(this.get("date"))};c.prototype.getModel=function(){return this.collection.options.model};c.prototype.isMember=function(b){return this.get("idMemberCreator")===b.id};c.prototype.getBoard=function(){var b,c,d;return(b=null!=
(c=this.get("data"))?null!=(d=c.board)?d.id:void 0:void 0)?Models.Board.get(b):null};c.prototype.getCard=function(){var b,c,d;return(b=null!=(c=this.get("data"))?null!=(d=c.card)?d.id:void 0:void 0)?Models.Card.get(b):null};c.prototype.editable=function(){var b,c;c=this.get("idMemberCreator");return"commentCard"===this.get("type")&&(y.isMe(c)||(b=this.getBoard())&&0<b.compareMemberType(y.me(),this.get("idMemberCreator"),{mode:"members"}))};c.prototype.isPlaceholder=function(){return null==this.get("date")};
c.prototype.includesModel=function(b,c){var d,f;return(null!=(d=this.get("data"))?null!=(f=d[b])?f.id:void 0:void 0)===c||"member"===b&&this.get("idMemberCreator")===c};c.prototype.idModels=function(){var b,c,d,f;f=null!=(d=this.get("data"))?d:{};d=[];for(b in f)c=f[b],null!=c.id&&d.push(c.id);b=this.get("idMemberCreator");null!=b&&d.push(b);return d};c.prototype.takingTooLong=function(){this.isTakingTooLong=!0;return this.trigger("takingTooLong")};return c}();ic=function(){function c(){c.__super__.constructor.apply(this,
arguments)}u(c,bb);c.prototype.getMember=function(b){return Models.Member.get(b)};c.prototype.getBoard=function(b){return Models.Board.get(b)};return c}();Ta=function(){function c(){this._getRelatedBoards=h(this._getRelatedBoards,this);this.sync=h(this.sync,this);c.__super__.constructor.apply(this,arguments)}u(c,va);c.prototype.model=Pa;c.prototype.initialize=function(b,c){this.options=c};c.prototype.comparator=function(b){return/^placeholder/.test(b.id)?(b=parseInt(b.id.substr(11)),-new Date(2020,
1,1)-b):-V.parse(b.get("date"))||0};c.prototype.sync=function(b,c,d){return d(ModelAction.actions)};c.prototype.getEntityLists=function(b){return(new ic).getEntityLists(this.models,b)};c.prototype._getRelatedBoards=function(b){var c,d,f;d=function(){var b,d,h,m,l,o,n;h=this.models;n=[];for(b=0,d=h.length;b<d;b++)if(f=h[b],"moveCardToBoard"===(m=f.get("type"))||"moveCardFromBoard"===m)c=f.get("data"),n.push((null!=(l=c.boardTarget)?l.id:void 0)||(null!=(o=c.boardSource)?o.id:void 0));return n}.call(this);
d=_.compact(_.uniq(d));d=_.reject(d,function(b){return null!=Models.Board.get(b)});return 0===d.length?b():Models.loadBoardNames(d,b)};c.prototype.renderTo=function(b,c){return this._getRelatedBoards(h(function(){var d,f,g,h,j,m;c=_.extend({},{compact:!0},c);g=this.getEntityLists(c);b.empty();m=[];for(h=0,j=g.length;h<j;h++)f=g[h],d=_.detect(this.models,function(b){return b.id===f.db_id}),d=d.getView(Yd,f._id,{entityList:f.entities,children:f.children,date:f.date,opts:c}),m.push(b.append(d.render().el));
return m},this))};return c}();Yd=function(){function c(){this.confirmDeleteAction=h(this.confirmDeleteAction,this);this.viewMemberActionMenu=h(this.viewMemberActionMenu,this);this.clickComment=h(this.clickComment,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="phenom clearfix";c.prototype.initialize=function(b){this.entityList=b.entityList;this.date=b.date;this.children=b.children;this.opts=b.opts;return this.model.bind("takingTooLong",
this.render)};c.prototype.destructor=function(){};c.prototype.events={"click .js-show-mem-menu":"viewMemberActionMenu","click .action-comment":"clickComment","click .js-confirm-delete-action":"confirmDeleteAction"};c.prototype.render=function(){var b,c,d,f,g,i,j,m,l;J("render","rendering action");j=this.opts;f={entities:this.entityList,date:this.date,hasChildren:!1};null!=this.children&&(f.hasChildren=!0,f.children=this.children.reverse(),f.hasMoreThanOneChild=1<this.children.length);j.showBoard&&
(c=Models.Board.get(null!=(m=this.model.get("data"))?null!=(l=m.board)?l.id:void 0:void 0),null!=c&&(f.board=c.toJSON({prefs:!0,url:!0})));j.showOrganization&&(c=Models.Organization.get(null!=(b=this.model.get("data"))?null!=(i=b.organization)?i.id:void 0:void 0),null!=c&&(f.organization=c.toJSON({prefs:!0,url:!0})));this.fUsePeriod=!0;f.entities=f.entities.slice(1);d=this.getContext();b=h(function(b){var c,e,g,h;for(g=0,h=b.length;g<h;g++)if(c=b[g],c[c.type+"Type"]=!0,"comment"===c.type&&(e={convertNewlines:!0},
this.fUsePeriod=!1,c.embedly&&!j.compact&&(e.embedlyUrlData=JSON.parse(c.embedly),c.hasEmbedly=!0),c.html=na.textAsHtml(c.text,e)),"attachmentPreview"===c.type&&(this.fUsePeriod=!1),c&&(c.id||c.idContext))c.isContext=f.isContext=c.id===d.id||c.idContext===d.id},this);if(f.children){l=f.children;for(c=0,m=l.length;c<m;c++)i=l[c],b(i.entities)}b(f.entities);f.showAttachmentPreview=!j.compact;f.canDelete=!this.model.isPlaceholder()&&!j.compact&&this.model.editable();f.member=null!=(g=Models.Member.get(this.entityList[0].id))?
g.toJSON():void 0;g={entity:s.entity,member:s.member};J("actions",f);$(this.el).html(s.fill("action",f,{},g));!f.hasMoreThanOneChild&&this.fUsePeriod&&(g=_.last($(this.el).find(".phenom-desc").contents()),i=$.trim(g.nodeValue),b=".",0<i.length&&(b=" "+$.trim(g.nodeValue)+"."),$(this.el).find(".phenom-desc").contents().last().remove(),$(this.el).find(".phenom-desc").append(b));V.update(this.el);this.model.isTakingTooLong&&$(this.el).addClass("unsent");return this};c.prototype.getContext=function(){return this.opts.model};
c.prototype.clickComment=function(b){var c;if(!$(b.target).is("a")&&"Board"===this.getContext().typeName)return c=_.detect(this.entityList,function(b){return"card"===b.type}),this.getContext().getCard(c.id).getView(Ua).showDetail(b)};c.prototype.viewMemberActionMenu=function(b){var c,d;n.stop(b);c=Models.Member.get(this.entityList[0].id);d=22;0<$(b.target).closest(".member").length&&(d=36);t.toggle({elem:$(b.target).closest(".js-show-mem-menu")[0],top:d,view:c.getView(hb)})};c.prototype.confirmDeleteAction=
function(b){n.stop(b);t.toggle({elem:b.target,top:23,view:this.model.getView(Zd)})};return c}();Zd=function(){function c(){this.cancelDelete=h(this.cancelDelete,this);this.deleteAction=h(this.deleteAction,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Delete Comment?"};c.prototype.events={"click .js-delete-action":"deleteAction","click .js-cancel-delete":"cancelDelete"};c.prototype.render=function(){$(this.el).html(s.fill("popover_confirm_action_delete",
{},{editable:!0}));return this};c.prototype.deleteAction=function(){var b;Models.Action.remove(this.model.id);null!=(b=this.model.getCard())&&b.api.deleteAction(this.model.id);t.hide()};c.prototype.cancelDelete=function(b){n.stop(b);t.hide()};return c}()}if(B("notification")){var Tc,Ub,$d,ae,bc,oc,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;
c.prototype=new e;c.__super__=b.prototype;return c},ca=Array.prototype.indexOf||function(c){for(var b=0,e=this.length;b<e;b++)if(this[b]===c)return b;return-1};Ub=function(){function c(){this.markRead=h(this.markRead,this);this.getExpandedData=h(this.getExpandedData,this);c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="Notification";c.prototype.getModel=function(){return this.collection.options.model};c.prototype.getExpandedData=function(){var b,c,d,f;c=_.extend(this.toJSON().data,
{date:this.get("date"),unread:this.get("unread")});c[this.get("type")]=!0;c.memberCreator=Models.Member.get(this.get("idMemberCreator"));b=null!=(d=this.get("member"))?d.id:void 0;null!=b&&(c.member=Models.Member.get(b));d=function(b){var d,f,h,l;h=_.keys(b)[0];d=n.capitalize(h);f=b[h];return null!=y.me().get("id"+d+"sInvited")&&(l=f.id,0<=ca.call(y.me().get("id"+d+"sInvited"),l))&&!_.any(Models.Notification.all(),function(b){return b.get("type")==="invitedTo"+d&&b.get("data")[h].id===f.id&&b.get("date")>
c.date})};b=c.board;f=c.organization;0===this.get("type").indexOf("invitedTo")&&(null!=b&&(c.stillInvited=d({board:b})),null!=f&&(c.stillInvited=d({organization:f})));return c};c.prototype.markRead=function(){this.set({unread:!1});Models.Notification.trigger("change",this);return y.me().api.markNotificationRead({idNotification:this.id})};return c}();oc=function(){function c(){this.rejectInvitation=h(this.rejectInvitation,this);this.acceptInvitation=h(this.acceptInvitation,this);this.handleInvitation=
h(this.handleInvitation,this);this.viewMemberActionMenu=h(this.viewMemberActionMenu,this);this.clickedNotification=h(this.clickedNotification,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.enablePopupMenu=!0;c.prototype.showStatus=!1;c.prototype.className="phenom clearfix";c.prototype.events={click:"clickedNotification","click .js-show-mem-menu":"viewMemberActionMenu","click .js-accept-invitation":"acceptInvitation","click .js-reject-invitation":"rejectInvitation"};
c.prototype.render=function(){var b,c,d,f,g,h,j;b=this.model.getExpandedData();b.entities=(new ae).getEntityList(this.model.toJSON());b.member=null!=(c=Models.Member.get(b.entities[0].id))?c.toJSON():void 0;b.entities.shift(1);d={convertNewlines:!0};j=b.entities;for(g=0,h=j.length;g<h;g++)c=j[g],null!=c.text&&(f=n.truncate(c.text,250),c.html=na.textAsHtml(f,d)+(f.length<c.text.length?"&hellip;":""));J("notifications",b);$(this.el).html(s.fill("notification",b,{},{entity:s.entity,member:s.member}));
b.unread?$(this.el).addClass("unread"):$(this.el).removeClass("unread");V.update(this.el);return this};c.prototype.clickedNotification=function(){if(this.isHeader)return q("Header","Notifications Menu","Clicked Notification");if(this.isNotifications)return q("Member","Notifications","Clicked Notification")};c.prototype.viewMemberActionMenu=function(b){var c,d;n.stop(b);c=Models.Member.get(this.model.get("idMemberCreator"));0<$(b.target).closest(".pop-over").length?t.pushView({view:c.getView(hb)}):
(d=22,0<$(b.target).closest(".member").length&&(d=36),t.toggle({elem:$(b.target).closest(".js-show-mem-menu")[0],top:d,view:c.getView(hb)}))};c.prototype.handleInvitation=function(b,c){var d;d=this.model.get("data")[b.toLowerCase()].id;return y.me().api.respondToInvitation({accepted:c,idModel:d,modelType:b},h(function(c){var e;e={};e["id"+b+"s"]=c["id"+b+"s"];e["id"+b+"sInvited"]=c["id"+b+"sInvited"];y.me().set(e);y.me().save();this.render();(Controller.onBoardView(d)||Controller.onOrganizationView(d)||
Controller.onErrorView())&&x.navigate(null,{forceReload:!0})},this))};c.prototype.acceptInvitation=function(){$(this.el).find(".js-accept-invitation").attr("disabled","disabled");if("invitedToBoard"===this.model.get("type")){this.handleInvitation("Board",!0);if(this.isHeader)return q("Header","Notifications Menu","Accept Board Invite");if(this.isNotifications)return q("Member","Notifications","Accept Board Invite")}else if("invitedToOrganization"===this.model.get("type")){this.handleInvitation("Organization",
!0);if(this.isHeader)return q("Header","Notifications Menu","Accept Org Invite");if(this.isNotifications)return q("Member","Notifications","Accept Org Invite")}};c.prototype.rejectInvitation=function(){if("invitedToBoard"===this.model.get("type")){this.handleInvitation("Board",!1);if(this.isHeader)return q("Header","Notifications Menu","Reject Board Invite");if(this.isNotifications)return q("Member","Notifications","Reject Board Invite")}else if("invitedToOrganization"===this.model.get("type")){this.handleInvitation("Organization",
!1);if(this.isHeader)return q("Header","Notifications Menu","Reject Org Invite");if(this.isNotifications)return q("Member","Notifications","Reject Org Invite")}};return c}();ae=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,vb);c.prototype.getMember=function(b){return Models.Member.get(b)};return c}();$d=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,oc);c.prototype.isHeader=!0;c.prototype.goToProfile=!0;return c}();bc=function(){function c(){c.__super__.constructor.apply(this,
arguments)}u(c,oc);c.prototype.isNotifications=!0;c.prototype.goToProfile=!1;return c}();Tc=function(){function c(){this.viewAllNotifications=h(this.viewAllNotifications,this);this.render=h(this.render,this);this.markUnread=h(this.markUnread,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Notifications"};c.prototype.className="header-notification-list";c.prototype.events={"click .js-view-all-notifications":"viewAllNotifications"};c.prototype.markUnread=
function(){var b,c,d,f,g;d=this.menuRows;g=[];for(b in d)c=d[b],c.model.get("unread")&&g.push(null!=(f=Models.Notification.get(b))?f.markRead():void 0);return g};c.prototype.render=function(){var b,c,d,f,g,h;c=this.model;this.menuRows={};b=0;$(this.el).empty();f=Models.Notification.sortedByDateDescending();for(g=0,h=f.length;g<h;g++){d=f[g];if(4<b)break;b++;this.menuRows[d.id]=d.getView($d,"header");$(this.el).append(this.menuRows[d.id].render().el)}var j;h=Models.Notification.sortedByDateDescending().slice(5);
j=[];for(b=0,g=h.length;b<g;b++)d=h[b],d.get("unread")&&j.push(d);d=j.length;d=0===d?"":" ("+d+" more unread)";0===f.length&&$(this.el).append('<p class="empty">No Notifications</p>');$(this.el).append(s.fill("menu",{menu_cards:[{name:"See All Notifications"+d,js_class:"js-view-all-notifications",url:"/"+c.get("username")+"/notifications"}]}));return this};c.prototype.viewAllNotifications=function(){return q("Header","Notifications Menu","See All Notifications")};return c}()}if(B("badge")){var oa,
Vd,fb,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},h=function(c,b){return function(){return c.apply(b,arguments)}};oa=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="Badge";return c}();Vd=function(){function c(){this.getCard=h(this.getCard,this);this.update=h(this.update,this);c.__super__.constructor.apply(this,
arguments)}u(c,va);c.prototype.model=oa;c.prototype.initialize=function(b,c){var d;this.options=c;this.bind("change:pos",this.sort);d=this.getCard();d.bind("change:badges",this.update);d.memberVotedList.onAddRemove(this.update);d.bind("change:closed",this.update);d.bind("change:subscribed",this.update);Models.Notification.bind("add",this.update);Models.Notification.bind("change",this.update);Models.Notification.bind("remove",this.update);setInterval(this.update,36E5);this.update()};c.prototype.update=
function(){var b,c,d,f,g,h,j,m,l,o,n;d=this.options.model;c=d.get("badges");b=[];null!=c&&((h=function(){var b,c,e,f,g;e=Models.Notification.all();g=[];for(b=0,c=e.length;b<c;b++)o=e[b],o.get("unread")&&(null!=(f=o.get("data").card)?f.id:void 0)===d.id&&d.id&&g.push(1);return g}().length)&&b.push(new oa({hasUnreadNotifications:!0,count:h,className:"unread-notification",titleAttr:"This card has "+h+" unread notification(s)."})),d.get("closed")&&b.push(new oa({isArchived:!0,titleAttr:"This card is in the archive."})),
h=null!=(f=null!=(g=d.get("badges"))?g.votes:void 0)?f:0,f=d.get("badges").viewingMemberVoted||!1,0<h&&(g="votes",f&&(g="votes voted"),b.push(new oa({hasVotes:!0,className:g,count:""+h+" vote"+(1===h?"":"s"),titleAttr:"This card has "+h+" votes(s)."}))),c.comments&&b.push(new oa({hasComments:!0,className:"comments",count:c.comments,titleAttr:"This card has "+c.comments+" comment(s)."})),c.subscribed&&b.push(new oa({className:"image-only",isSubscribed:!0,titleAttr:"You are subscribed to this card."})),
c.description&&b.push(new oa({hasDesc:!0,className:"image-only",titleAttr:"This card has a description."})),c.due&&(h=V.parse(c.due),f=new Date,n=g="",f=(h-f)/36E5,g=Math.round(10*f)/10,-36>=f?(g="due-past",l=!0,n="This card is past due."):0>=f?(g="due-now",m=!0,n="This card is due now!"):24>f?(1>=g?n="This card is due in less than an hour.":1.3>=g?n="This card is due in about an hour.":(f=Math.floor(g),j=g-parseInt(g,10),j=Math.round(10*j),n=3>j?"This card is due in "+f+" hours.":7<j?"This card is due in "+
(f+1)+" hours.":"This card is due in "+f+" and a half hours."),j=!0,g="due-soon"):(n="This card is due later.",g="due-future"),b.push(new oa({hasDueDate:!0,date:h,dateText:V.toLongString(h),shortDueDate:h.toString("MMM d"),className:g,titleAttr:n,isDueSoon:j,isDueNow:m,isDuePast:l}))),c.attachments&&b.push(new oa({hasAttachments:!0,count:c.attachments,titleAttr:"This card has "+c.attachments+" attachment(s)."})),c.checkItems&&b.push(new oa({hasTasks:!0,count:c.checkItemsChecked,total:c.checkItems,
hasTotal:!0,complete:c.checkItems===c.checkItemsChecked?"complete":"",titleAttr:"This card has "+c.checkItemsChecked+" of "+c.checkItems+" checklist items completed.",className:c.checkItems===c.checkItemsChecked?"complete":""})),c.fogbugz&&b.push(new oa({className:"image-only",hasFogBugzLink:!0,fogBugzUrl:c.fogbugz,titleAttr:"This card has a FogBugz case.",click:function(){return x.open(c.fogbugz,"FogBugz")}})),this.refresh(b))};c.prototype.getCard=function(){return this.options.model};return c}();
fb=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="badge";c.prototype.events={click:"click"};c.prototype.initialize=function(){var b,c,d;b=this.model.get("className");d=this.model.get("titleAttr");c=this.model.get("highlight");d&&$(this.el).attr("title",d);b&&$(this.el).addClass(b);c&&$(this.el).addClass("highlight")};c.prototype.render=function(){var b;b=this.model.toJSON();b.single=1===b.count;$(this.el).html(s.fill("badges",b));return this};c.prototype.click=
function(b){var c;if(c=this.model.get("click"))return n.stop(b),c(b,this.model)};return c}()}if(B("checklist")){var Xd,be,ce,de,ee,hc,fe,mc,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};ee=function(){function c(){this.editable=h(this.editable,this);this.getCheckItem=h(this.getCheckItem,
this);this.getCompletedCount=h(this.getCompletedCount,this);this.getBoard=h(this.getBoard,this);this.withIdParents=h(this.withIdParents,this);c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="Checklist";c.prototype.initialize=function(){return Api.init(this)};c.prototype.postInitialize=function(){var b;this.checkItemList=new ce([],{model:this});b=h(function(){var b;b=this.checkItemList.filter(function(b){return/^placeholder/.test(b.id)});this.checkItemList.refresh(this.get("checkItems"),
{model:this});return this.checkItemList.add(b)},this);b();this.bind("change:checkItems",b);return this.setReady()};c.prototype.withIdParents=function(b){return this.getBoard().onId(function(c){return b([c])})};c.prototype.getBoard=function(){var b;b=this.collection.options.model;switch(b.typeName){case "Board":return b;case "Card":return b.getBoard();default:return null}};c.prototype.getCompletedCount=function(b){var c;c=0;this.checkItemList.each(function(d){var f;f=b.checkItemStateList.detect(function(b){return b.get("idCheckItem")===
d.id});if("complete"===(null!=f?f.get("state"):void 0))return c++});return c};c.prototype.getCheckItem=function(b){return this.checkItemList.get(b)};c.prototype.editable=function(){return this.getBoard().editable()};c.prototype.calcPos=function(b,c){return n.calcPos(b,this.checkItemList,c)};return c}();hc=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Ea);c.prototype.model=ee;c.prototype.initialize=function(b,c){this.options=c};c.prototype.comparator=function(b){return b.get("name")};
c.prototype.idList=function(){return this.pluck("_id")};return c}();Xd=function(){function c(){this.addChecklist=h(this.addChecklist,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Add Checklist"};c.prototype.events={"click .js-add-checklist":"addChecklist","submit form":"addChecklist"};c.prototype.render=function(){$(this.el).html(s.fill("checklist_add_menu",[]));return this};c.prototype.addChecklist=function(b){var c;
n.stop(b);c=$(this.el).find(".js-checklist-title").val();0!==c.length&&("Checklist"===c?q("Checklist","Create","Default Title (Checklist)"):q("Checklist","Create","Renamed"),this.model.onId(h(function(){return this.model.getBoard().checklistList.create({name:c},{success:h(function(b){return b.onId(h(function(c){var e;this.model.addChecklist(c);e=b.getView(mc,this.model.cid,{card:this.model});return _.defer(function(){e.newTaskInput.focus().select()})},this))},this)})},this)),t.hide())};return c}();
be=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="CheckItem";c.prototype.initialize=function(){return Api.init(this)};c.prototype.postInitialize=function(){return this.setReady()};c.prototype.withIdParents=function(b){var c;c=this.getChecklist();return c.onId(function(d){c.withIdParents(function(c){b([d].concat(c))})})};c.prototype.getChecklist=function(){return this.collection.options.model};c.prototype.editable=function(){return this.getChecklist().editable()};
c.prototype.getContext=function(){return this.getChecklist()};c.prototype.move=function(b){this.set("pos",this.getChecklist().calcPos(b,this));this.save();this.collection.sort({silent:!0})};return c}();ce=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Ea);c.prototype.model=be;c.prototype.initialize=function(b,c){this.options=c;this.bind("change:pos",this.sort)};c.prototype.comparator=function(b){return b.get("pos")};return c}();de=function(){function c(){this.render=h(this.render,
this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.className="check-item task";c.prototype.initialize=function(){this.model.bind("change",this.render);return c.__super__.initialize.apply(this,arguments)};c.prototype.events={"click .checkbox":"toggleState","click .js-delete-item":"delete","click .js-convert-item-to-card":"convertToCard",movecheckitem:"moveCheckItem"};c.prototype.getCheckItemState=function(){return this.getCard().checkItemStateList.detect(h(function(b){return b.get("idCheckItem")===
this.model.id},this))};c.prototype.getCard=function(){return this.options.card};c.prototype.customSet=function(b,c){return"name"===b?(this.model.withIdParents(h(function(b){return this.model.api.changeName({name:c,idCard:this.getCard().id,idParents:b})},this)),!0):!1};c.prototype.render=function(){var b,c;c=this.model.toJSON();b=this.getCheckItemState();c.state=null!=b?b.get("state"):void 0;c.checked="complete"===c.state;$(this.el).html(s.fill("check_item",c,{editable:this.model.editable()})).toggleClass("complete",
c.checked);this.recallDrafts();return this};c.prototype.toggleState=function(){var b,c;this.model.editable()&&(c=!$(this.el).hasClass("complete"),$(this.el).toggleClass("complete",c),b=this.getCard(),b.api.setChecklistTaskState({state:c?"complete":"",idCheckItem:this.model.id}))};c.prototype["delete"]=function(b){n.stop(b);this.model.destroy()};c.prototype.convertToCard=function(b){n.stop(b);this.model.withIdParents(h(function(b){this.model.getChecklist().checkItemList.remove(this.model);this.model.api.convertToCard({idCard:this.getCard().id,
idParents:b})},this))};c.prototype.moveCheckItem=function(b,c){this.model.move(c.item.parent().children().index(c.item))};return c}();mc=function(){function c(){this.addTask=h(this.addTask,this);this.cancelItemEditing=h(this.cancelItemEditing,this);this.renderCheckItems=h(this.renderCheckItems,this);this.renderName=h(this.renderName,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.className="checklist";c.prototype.events={"keypress .new-task-text":"submitTask",
"click .js-add-checklist-item":"submitTask","click .js-cancel-checklist-item":"cancelItemEditing","click .new-task-text":"focusTaskInput","focus .new-task-text":"inputTask","click .js-open-checklist-menu":"openChecklistMenu","sortstop .task-list":"sortStop"};c.prototype.initialize=function(){var b;b=this.model;b.checkItemList.onAddRemove(this.renderCheckItems);b.bind("change:name",this.renderName);this.getCard().checkItemStateList.bind("change:state",this.renderCheckItems).onAddRemove(this.renderCheckItems);
return this.nextPos=0};c.prototype.getCard=function(){return this.options.card};c.prototype.commitEdits=function(b){if(P.prototype.commitEdits.apply(this,arguments))return _.defer(h(function(){if(!this.model.checkItemList.length)return this.newTaskInput.focus()},this)),!0};c.prototype.render=function(){var b,c;J("render","rendering checklist state "+this.model.get("name"));b=$(this.el).html(s.fill("checklist",this.model.toJSON(),{editable:this.model.editable()})).find(".task-list");null!=(c=this.getCard())&&
c.editable()&&b.sortable({axis:"y",containment:".window-main-col",delay:"75",distance:"7",tolerance:"pointer",placeholder:"task placeholder",items:".task",start:function(b,c){var e;e=$(c.helper).height();return $(c.placeholder).height(e)}});this.newTaskInput=$(this.el).find("input.new-task-text");this.newTaskInput.fixPlaceholder();return this.renderName().renderCheckItems()};c.prototype.renderName=function(){$(this.el).find("div.checklist-title[attr=name] .current").text(this.model.get("name"));return this};
c.prototype.renderCheckItems=function(){var b,c,d,f;f=$(this.el).find(".task-list");f.empty();b=this.getCard();this.model.checkItemList.each(h(function(c){c=c.getView(de,"card_"+b.cid+"_"+this.model.cid,{card:b});return f.append(c.render().el)},this));c=this.model.getCompletedCount(this.getCard());d=this.model.checkItemList.length;c=0<d?Math.round(100*c/d):0;$(this.el).find(".progress-current").width(c+"%");$(this.el).find(".progress-percentage").text(c+"%");return this};c.prototype.cancelItemEditing=
function(b){$(b.target).closest(".new-task").find(".new-task-text").val("");R.cancelEdits();return!1};c.prototype.addTask=function(b){var c,d;c=this.model;d=0<c.checkItemList.length?c.checkItemList.at(c.checkItemList.length-1).get("pos")+16384:16384;this.nextPos>d&&(d=this.nextPos);d+=Math.floor(1024*Math.random());this.nextPos=d+16384;c.withIdParents(h(function(f){var g,f={name:b,type:"check",pos:d,idParents:f};g=c.checkItemList.addPlaceholder(f);return c.api.addTask(f,h(function(b){g();if(b.checkItems)return this.model.set({checkItems:b.checkItems})},
this),g)},this))};c.prototype.inputTask=function(){R.cancelEdits(this.newTaskInput);$(this.el).find(".new-task").addClass("focus");return!1};c.prototype.focusTaskInput=function(){$(this.newTaskInput).focus()};c.prototype.submitTask=function(b){var c;if("keypress"!==b.type||n.isSubmitKey(b))if(n.stopPropagation(b),c=jQuery.trim(this.newTaskInput.val()),""!==c)return this.addTask(c),this.newTaskInput.val(""),"keypress"===b.type?this.newTaskInput.focus():R.cancelEdits(),!1};c.prototype.sortStop=function(b,
c){n.stopPropagation(b);c.item.trigger("movecheckitem",[c])};c.prototype.openChecklistMenu=function(b){var c;n.stop(b);c=this.getCard();q("Checklist","Open Checklist Menu");return t.toggle({elem:$(b.target).closest(".js-open-checklist-menu")[0],top:25,view:this.model.getView(fe,c.id,{card:c})})};return c}();fe=function(){function c(){this.deleteChecklist=h(this.deleteChecklist,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return this.model.get("name")};
c.prototype.initialize=function(){return this.card=this.options.card};c.prototype.events={"click .js-delete-checklist":"deleteChecklist"};c.prototype.render=function(){$(this.el).html(s.fill("popover_checklist_menu",{}));return this};c.prototype.deleteChecklist=function(b){n.stop(b);q("Checklist","Delete Checklist");this.card.removeChecklist(this.model.id);t.hide()};return c}()}if(B("checkitemstate")){var ge,Td,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,
d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};ge=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="CheckItemState";c.prototype.postInitialize=function(){return this.setReady()};c.prototype.withIdParents=function(b){var c;c=this.getCard();return c.onId(function(d){return c.withIdParents(function(c){return b([d].concat(c))})})};c.prototype.getCard=function(){return this.collection.options.model};return c}();
Td=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Ea);c.prototype.model=ge;c.prototype.initialize=function(b,c){this.options=c};return c}()}if(B("datePicker")){var qb,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};qb=function(){function c(){this.render=h(this.render,
this);this.updateDate=h(this.updateDate,this);this.dateKeyDown=h(this.dateKeyDown,this);this.removeDueDate=h(this.removeDueDate,this);this.submitDueDate=h(this.submitDueDate,this);this.cancelDueDate=h(this.cancelDueDate,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Change Due Date"};c.prototype.initialize=function(){};c.prototype.events={"click .js-cancel-edit":"cancelDueDate","click .js-save-edit":"submitDueDate","click .js-remove-date":"removeDueDate",
"keydown .js-dpicker-date-input":"dateKeyDown","blur .js-dpicker-date-input":"updateDate"};c.prototype._closeDialog=function(b){n.stop(b);return t.hide()};c.prototype._getDate=function(){var b,c;b=$(this.el).find(".js-dpicker-date-input").val();c=$(this.el).find(".js-dpicker-time-input").val();return V.parse(""+b+" "+c)};c.prototype.cancelDueDate=function(b){return this._closeDialog(b)};c.prototype.submitDueDate=function(b){var c;if(c=this._getDate())return this._closeDialog(b),T.set("dueDate",c.getTime()),
this.model.api.setDueDate({dueDate:c});n.stop(b)};c.prototype.removeDueDate=function(b){this._closeDialog(b);return this.model.api.setDueDate({dueDate:null})};c.prototype.dateKeyDown=function(b){if(n.isSubmitKey(b))return this.updateDate(b)};c.prototype.updateDate=function(){var b;b=$(this.el).find(".js-dpicker-date-input");return $(this.el).find(".js-dpicker-cal").datepicker("setDate",b.val())};c.prototype.render=function(){var b,c,d,f,g,i,j,m,l,n,q,t,w;f=null!=(d=this.model.get("badges"))?d.due:
void 0;d=this.model.toJSON();d.hasDueDate=null!=f;$(this.el).html(s.fill("date_picker",d,{editable:y.isMe(this.model)}));m=$(this.el).find(".js-dpicker-time-input");l=$(this.el).find(".js-dpicker-time-select");d=$(this.el).find(".js-dpicker-date-input");b=$(this.el).find(".js-dpicker-cal");f?f=V.parse(f):null!=T.get("dueDate")&&(c=new Date(T.get("dueDate")),c>new Date&&(f=c));_.isDate(f)||(f=null!=c?Date.today().add({days:1,hours:c.getHours()}):Date.today().add({days:1,hours:12}));_.delay(h(function(){return b.datepicker({altField:".js-dpicker-date-input",
defaultDate:f,showOtherMonths:!0,selectOtherMonths:!0,dateFormat:V.isUS?"mm/dd/yy":"dd/mm/yy"})},this),20);d.val(f.toString("MM/dd/yyyy"));m.val(f.toString("h:mm tt"));i=["AM","PM"];c=[12,1,2,3,4,5,6,7,8,9,10,11];for(n=0,t=i.length;n<t;n++){d=i[n];for(q=0,w=c.length;q<w;q++)g=c[q],j='<option value="'+g+":00 "+d+'">'+g+":00 "+d+"</option>",g='<option value="'+g+":30 "+d+'">'+g+":30 "+d+"</option>",l.append(j,g)}c=f.toString("h:00 tt");l.find('option[value="'+c+'"]').attr("selected",!0);l.change(function(){var b;
b=l.find("option:selected").val();return m.val(b)});if(WindowSize.fSmall||WindowSize.fExtraSmall)m.hide(),l.addClass("show");return this};return c}()}if(B("attachment")){var he,Ud,Wd,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},h=function(c,b){return function(){return c.apply(b,arguments)}};he=function(){function c(){c.__super__.constructor.apply(this,
arguments)}u(c,ja);c.prototype.typeName="Attachment";c.prototype.initialize=function(){};c.prototype.postInitialize=function(){return this.setReady()};c.prototype.withIdParents=function(b){var c;c=this.getCard();return c.onId(function(d){return c.withIdParents(function(c){return b([d].concat(c))})})};c.prototype.getCard=function(){return this.collection.options.model};c.prototype.editable=function(){return this.getCard().editable()};return c}();Ud=function(){function c(){c.__super__.constructor.apply(this,
arguments)}u(c,Ea);c.prototype.model=he;c.prototype.comparator=function(b){return-V.parse(b.get("date"))||0};c.prototype.initialize=function(b,c){this.options=c};return c}();Wd=function(){function c(){this.deleteAttachment=h(this.deleteAttachment,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.className="attachment";c.prototype.events={"click .js-delete-attachment":"deleteAttachment"};c.prototype.render=function(){var b;b=this.model.toJSON();
b.size=na.bytes(b.bytes);$(this.el).addClass("clearfix").html(s.fill("attachment",b,{editable:this.model.editable()}));V.update(this.el);return this};c.prototype.deleteAttachment=function(){q("Card Detail Sidebar","Attachment","Delete");return this.model.getCard().api.deleteAttachment(this.model.id)};return c}()}if(B("organization")){var ie,je,gb,ke,le,me,ud,ne,td,oe,pc,pe,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=
c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};gb=function(){function c(){this.invited=h(this.invited,this);this.owned=h(this.owned,this);this.ownedByMember=h(this.ownedByMember,this);c.__super__.constructor.apply(this,arguments)}u(c,Fa);c.prototype.typeName="Organization";c.prototype.nameAttr="displayName";c.prototype.initialize=function(){Api.init(this)};c.prototype.postInitialize=function(){var b,c;this.invitationList=new dd(this.get("invitations")||
[],{model:this});this.boardList=new kb;this.memberList=new Sa;b=h(function(){this.memberList.refresh(Models.Member.getList(_.pluck(this.get("memberships"),"idMember")||[]),{model:this})},this);this.bind("change:memberships",b);b();b=h(function(){this.boardList.refresh(Models.Board.getList(this.get("idBoards")))},this);c=h(function(){this.invitationList.refresh(this.get("invitations"))},this);this.bind("change:idBoards",b);this.bind("change:invitations",c);b();this.setReady()};c.prototype.prefNames=
["permissionLevel"];c.prototype.editable=function(){var b,c;b=y.me();c=_.detect(this.get("memberships"),h(function(c){return c.idMember===b.id},this));return b&&"admin"===(null!=c?c.memberType:void 0)};c.prototype.getMemberType=function(b){return MemberOwner.getMemberType.call(this,b)};c.prototype.isMember=function(b){var c;return"normal"===(c=this.getMemberType(b))||"admin"===c};c.prototype.ownedByMember=function(b){return"admin"===this.getMemberType(b)};c.prototype.owned=function(){return"admin"===
this.getMemberType(y.me())};c.prototype.invited=function(){return"invited"===this.getMemberType(y.me())};c.prototype.responseToInvite=function(b,c){var d;d=y.me();return d.api.respondToInvitation({accepted:b,idModel:this.id,token:$.cookie("invite-token-"+this.id),modelType:"Board"},function(f){b&&(d.set({idBoards:f.idBoards,idBoardsInvited:f.idBoardsInvited}),d.save());"function"===typeof c&&c()})};c.prototype.responseToInvite=function(b,c){y.me().api.respondToInvitation({accepted:b,idModel:this.id,
token:$.cookie("invite-token-"+this.id),modelType:"Organization"},c)};c.prototype.acceptInvite=function(b){return this.responseToInvite(!0,b)};c.prototype.rejectInvite=function(b){return this.responseToInvite(!1,b)};c.prototype.toJSON=function(b){var e;null==b&&(b={});e=c.__super__.toJSON.apply(this,arguments);b.url&&(e.url=Controller.getOrganizationUrl(this.get("name")));return e};return c}();x.OrganizationList=Backbone.Collection.extend({model:gb,initialize:function(){_.bindAll(this,"sync");this.bind("change:name",
this.sort)},comparator:function(c){var b;return(null!=(b=c.get("name"))?b.toUpperCase():void 0)||""},sync:function(c,b,e){e(Models.Organization.all())}});pc=function(){function c(){this.openManageMembers=h(this.openManageMembers,this);this.signupAndJoinPopover=h(this.signupAndJoinPopover,this);this.rejectInvite=h(this.rejectInvite,this);this.acceptInvite=h(this.acceptInvite,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.initialize=function(){this.model.bindEvents(this.render,
"change:name","change:displayName")};c.prototype.events={"click .js-accept-invite":"acceptInvite","click .js-reject-invite":"rejectInvite","click .js-signup-and-join":"signupAndJoinPopover","click .js-manage-members":"openManageMembers"};c.prototype.render=function(){var b;b=this.model.toJSON({prefs:!0,url:!0});$(this.el).html(s.fill("org_detail",b,{editable:this.model.editable(),invited:this.model.invited()}));setTimeout(h(function(){this.renderMainContent()},this),0);return this};c.prototype.setActiveView=
function(b){$(b).addClass("active")};c.prototype.acceptInvite=function(b){n.preventDefault(b);$(this.el).find(".js-accept-invite").attr("disabled","disabled");this.model.acceptInvite(function(){return x.location.reload()});return!1};c.prototype.rejectInvite=function(b){n.preventDefault(b);this.model.rejectInvite(function(){return x.location.reload()});return!1};c.prototype.signupAndJoinPopover=function(b){n.stop(b);t.toggle({elem:b.target,top:40,view:this.model.getView(pe)})};c.prototype.openManageMembers=
function(b){n.stop(b);return t.toggle({elem:$(this.el).find(".js-manage-members")[0],top:35,view:this.model.getView(ie)})};return c}();pe=function(){function c(){this.setAutoAccept=h(this.setAutoAccept,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Create New Account"};c.prototype.events={"click .js-google-confirm-account":"setAutoAccept","click .js-confirm-email-account":"setAutoAccept"};c.prototype.render=function(){var b;
b={email:$.cookie("email"),returnUrl:Controller.getOrganizationUrl(this.model.get("name"))};$(this.el).html(s.fill("popover_signup",b));return this};c.prototype.setAutoAccept=function(){return $.cookie("accept-organization-invite-"+this.model.id,"1",{expires:1,path:"/"})};return c}();td=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Backbone.View);c.prototype.tagName="ul";c.prototype.initialize=function(){_.bindAll(this,"render");this.model.organizationList.bind("change:closed",
this.render).bind("refresh",this.render).bind("add",this.render).bind("remove",this.render)};c.prototype.render=function(){var b,c,d,f;b=this.model;$(this.el).html("");f=b.organizationList.models;for(b=0,d=f.length;b<d;b++)c=f[b],c=new ne({model:c}),$(this.el).append(c.render().el);return this};return c}();ne=function(){function c(){c.__super__.constructor.apply(this,arguments)}u(c,Backbone.View);c.prototype.tagName="li";c.prototype.initialize=function(){_.bindAll(this,"render")};c.prototype.render=
function(){var b;b=this.model.toJSON({prefs:!0,url:!0});$(this.el).html(s.fill("member_organization",b));return this};return c}();oe=function(){function c(){this.renderMembers=h(this.renderMembers,this);this.renderBoards=h(this.renderBoards,this);this.renderMainContent=h(this.renderMainContent,this);c.__super__.constructor.apply(this,arguments)}u(c,pc);c.prototype.initialize=function(){c.__super__.initialize.apply(this,arguments);this.model.memberList.bind("change:status",this.renderMembers).onAddRemove(this.renderMembers);
this.model.boardList.onAddRemove(this.renderMainContent)};c.prototype.renderMainContent=function(){var b,c;b=this.model.toJSON();b.websiteHref=n.sanitizeWebAddress(b.website);b.empty=0===this.model.boardList.length;b.descriptionHtml=na.textAsHtml(b.desc,{convertNewlines:!0});c=this.model.get("memberships")?c=_.detect(this.model.get("memberships"),function(b){return y.isMe(b.idMember)}):void 0;b.isOrgMember=y.isMe(this.model)||c?!0:!1;$(this.el).find(".window-main-col").html(s.fill("org_profile",b,
{editable:this.model.editable(),invited:this.model.invited()}));this.renderMembers().renderBoards();this.setActiveView(".js-org-profile");return this};c.prototype.renderBoards=function(){var b;b=this.model.getView(Cd,this.model.id);$(this.el).find(".js-boards-list").html(b.render().el);return this};c.prototype.renderMembers=function(){MemberOwner.renderMembers.call(this,".list-org-members",pd);return this};return c}();ke=function(){function c(){this.orgDeleteConfirm=h(this.orgDeleteConfirm,this);
this.renderMainContent=h(this.renderMainContent,this);this.setValue=h(this.setValue,this);this.getValue=h(this.getValue,this);c.__super__.constructor.apply(this,arguments)}u(c,pc);c.prototype.events={"click .js-save-changes":"saveChanges","click .js-confirm-delete-org":"orgDeleteConfirm"};c.prototype.getValue=function(b){return $(this.el).find("[name="+b+"]").val()};c.prototype.setValue=function(b,c){return $(this.el).find("[name="+b+"]").val(c)};c.prototype.renderMainContent=function(){var b;b=this.model.toJSON({prefs:!0});
$(this.el).find(".window-main-col").html(s.fill("org_account",b,{editable:this.model.editable()}));this.setActiveView(".js-org-account");return this};c.prototype.saveChanges=function(b){var c,d,f,g,h,j;f=this;n.preventDefault(b);b={};j=["displayName","name","website","desc"];for(g=0,h=j.length;g<h;g++)c=j[g],b[c]=this.getValue(c);b.prefs={};j=this.model.prefNames;for(g=0,h=j.length;g<h;g++)c=j[g],b.prefs[c]=this.getValue(c);b.name=b.name.toLowerCase();this.setValue("name",b.name);d=b.name;return this.model.save(b,
{waitForServer:!0,success:function(){Controller.organizationProfileView(d)},error:function(b,c){$(f.el).find(".error").text(null!=c?c:"error").show();n.scrollToTop()}})};c.prototype.orgDeleteConfirm=function(b){n.stop(b);t.toggle({elem:b.target,top:35,view:this.model.getView(je)})};return c}();je=function(){function c(){this.cancelDeleteOrg=h(this.cancelDeleteOrg,this);this.deleteOrg=h(this.deleteOrg,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=
function(){return"Delete Organization?"};c.prototype.events={"click .js-delete-org":"deleteOrg","click .js-cancel-delete":"cancelDeleteOrg"};c.prototype.render=function(){$(this.el).html(s.fill("popover_confirm_org_delete"));return this};c.prototype.deleteOrg=function(b){n.stop(b);$(this.el).find(".js-delete-org").attr("disabled","disabled");this.model.destroy({success:function(){t.hide();return x.navigate("/")}})};c.prototype.cancelDeleteOrg=function(b){n.stop(b);t.hide()};return c}();ie=function(){function c(){this.canRemoveInvitation=
h(this.canRemoveInvitation,this);this.removeInvitation=h(this.removeInvitation,this);this.clearSearchResults=h(this.clearSearchResults,this);this.sendMemberInvitation=h(this.sendMemberInvitation,this);this.sendEmailInvitation=h(this.sendEmailInvitation,this);this.hoverMember=h(this.hoverMember,this);this.keydownEvent=h(this.keydownEvent,this);this.search=h(this.search,this);this.searchPaste=h(this.searchPaste,this);this.renderSearchResults=h(this.renderSearchResults,this);this.renderInvitations=h(this.renderInvitations,
this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.getViewTitle=function(){return"Members"};c.prototype.initialize=function(){this.invitationList=this.model.invitationList;this.invitationList.onAddRemove(this.renderInvitations).bind("change",this.renderInvitations)};c.prototype.events={"click .js-search-results .js-select-member":"sendMemberInvitation","click .js-search-results .email-invite":"sendEmailInvitation","paste .js-search-input":"searchPaste",
"click .js-remove-invitation":"removeInvitation","hover .js-select-member":"hoverMember"};c.prototype.render=function(){$(this.el).html(s.fill("manage_members",{canInvite:!0,placeholder:"Search or add email address"},{editable:this.model.editable()}));_.delay(h(function(){this.renderInvitations();this.input=$(this.el).find(".js-search-input");return this.input.click(function(b){return n.stop(b)}).keyup(_.debounce(this.search,500)).keydown(this.keydownEvent).focus()},this),10);this.loadingEl=$(this.el).find(".js-loading");
t.calcTop();return this};c.prototype.renderInvitations=function(){var b,c,d;c=$(this.el).find(".js-pending-invites");b=c.find(".js-list").empty();d=this.invitationList;c.toggle(0<d.length);d.each(h(function(c){var d,e,h;h=Models.Member.get(c.get("idMemberInviter"));d={MemberInviter:null!=h?h.toJSON():void 0,idMemberInvited:c.get("idMemberInvited"),dateExpires:c.get("dateExpires"),email:c.get("email"),canRemove:this.canRemoveInvitation(c)};d.idMemberInvited&&(e=Models.Member.get(d.idMemberInvited),
null!=e&&(d.MemberInvited=e.toJSON()));d=$(s.fill("invitation",d,{},{member:s.member,member_inline:s.member_inline}));d.find(".inviter .inline-member-container").data("member",h);null!=e&&d.find(".invitee .inline-member-container").data("member",e);d.data("id",c.get("id"));b.append(d)},this));c.toggle(0<d.length);V.update(this.el);t.calcTop();return this};c.prototype.renderSearchResults=function(b,c){var d,f,g,h,j,m,l,o,q,u,w;m=c.members;h=c.invitedEmails;q=c.uninvitedEmails;d=$(this.el);g=d.find(".js-search-results");
f=g.find(".js-list").empty();o=_.all([h,q,m],_.isEmpty);j=3<=b.trim().length;d.find(".js-no-results").toggle(o&&j);g.toggle(!o);d=_.map(this.invitationList.models,function(b){return b.get("idMemberInvited")});g={invited:"invited",joined:"joined",uninvitedExact:"will-invite",uninvitedFuzzy:""};l={invited:2,joined:3,uninvitedExact:1,uninvitedFuzzy:1};for(o=0,u=q.length;o<u;o++)j=q[o],$(s.fill("member_search_result_email",{email:j,isInvitable:!0,className:"will-invite"})).data({email:j}).appendTo(f);
for(q=0,o=h.length;q<o;q++)j=h[q],$(s.fill("member_search_result_email",{email:j,isInvitable:!1,className:"invited",extraText:"already invited"})).appendTo(f);u=_.sortBy(m,function(b){return 1E4*l[b.type]-b.similarity});for(j=0,o=u.length;j<o;j++)m=u[j],q=m.type,delete m.type,delete m.similarity,null==Models.Member.get(m._id)&&Models.Member.add(new ra(m)),h=_.extend({className:g[q],isInvitable:"uninvitedFuzzy"===q||"uninvitedExact"===q},m),null!=(w=h.id)?w:h.id=m._id,_.include(d,m._id)&&(h.extraText=
"invited"),"joined"===g[q]&&(h.extraText="already joined"),f.append(s.fill("select_member",h,{},{member:s.member}));f=$(this.el).find(".js-search-results .js-list li:first");n.selectMenuItem($(this.el).find(".js-org-members .js-list"),"li",f);this.loadingEl.hide();t.calcTop()};c.prototype.searchPaste=function(){this.loadingEl.show();return this.input.keyup()};c.prototype.search=function(b){var c,d;if(!((d=b.keyCode)===ia||d===la||d===sa||d===Z||d===ha||d===Y||d===ma||d===ta))this.loadingEl.show(),
c=this.input.val().toLowerCase().trim(),rpc.invoke("searchOrganizationMembers",[c,this.model.id],h(function(b){return this.renderSearchResults(c,b)},this))};c.prototype.keydownEvent=function(b){var c,d;if(!((c=b.keyCode)===ia||c===la||c===sa||c===ha||c===ma||c===ta))if(b.keyCode===da)0<$(this.el).find(".js-search-results .js-list .selected .js-select-member").length?(n.stop(b),$(this.el).find(".js-search-results .js-list .selected:first .js-select-member").click()):0<$(this.el).find(".js-search-results .js-list .email-invite").length&&
(n.stop(b),$(this.el).find(".email-invite:first").click());else if((d=b.keyCode)===Z||d===Y)n.stop(b),n.navMenuList($(this.el).find(".js-search-results .js-list"),"li",b.keyCode)};c.prototype.hoverMember=function(b){b=$(b.target).closest(".item");return n.selectMenuItem($(this.el).find(".pop-over-member-list"),".item",b)};c.prototype.sendEmailInvitation=function(b){var c;n.stop(b);q("Invitations","Send","Email Address");b=$(b.target).closest(".email-invite").find(".email").text();c=_.map(this.invitationList.models,
function(b){return b.get("email")});_.include(c,b)||(this.clearSearchResults(),this.invitationList.create({email:b,idMemberInviter:y.myId()},{error:h(function(b){return this.invitationList.remove(b)},this)}))};c.prototype.sendMemberInvitation=function(b){var c,d;n.stop(b);q("Invitations","Send","Member");b=$(b.target).closest(".js-select-member").attr("idMember");c=_.map(this.invitationList.models,function(b){return b.get("idMemberInvited")});d=_.map(this.model.memberList.models,function(b){return b.id});
c=c.concat(d);_.include(c,b)||(this.clearSearchResults(),this.invitationList.create({idMemberInvited:b,idMemberInviter:y.myId()},{error:h(function(b){return this.invitationList.remove(b)},this)}))};c.prototype.clearSearchResults=function(){this.input.val("").focus().select();return $(".js-search-results").hide()};c.prototype.removeInvitation=function(b){var c;null!=(c=this.invitationList.get($(b.currentTarget).closest(".invitation").data("id")))&&c.destroy({success:this.search});n.setCaretAtEnd(this.input[0])};
c.prototype.canRemoveInvitation=function(b){return b.get("idMemberInviter")===y.myId()||this.model.owned()};return c}();le=function(){function c(){this.autoName=h(this.autoName,this);this.lockName=h(this.lockName,this);this._set=h(this._set,this);this._get=h(this._get,this);this._findInput=h(this._findInput,this);c.__super__.constructor.apply(this,arguments)}u(c,P);c.prototype.events={"click .js-create-org":"createOrg","submit form":"createOrg","keydown input[name='displayName']":"autoName","input input[name='displayName']":"autoName",
"keydown input[name='orgname']":"lockName"};c.prototype.initialize=function(){_.bindAll(this,"render");this.autoName=_.throttle(this.autoName,10)};c.prototype.render=function(){$(this.el).html(s.fill("org_create",{},{editable:!0}));return this};c.prototype.createOrg=function(b){var c,d,f,g,h,j;n.stop(b);d=this._get("displayName");f=this._get("orgname");j=this._get("website");b=$(this.el).find("textarea[name=desc]")[0].value;g=$(this.el).find("select[name='permissionLevel']").val();h=this;c=$(h.el).find(".js-create-org");
c.attr("disabled","disabled");this.model.organizationList.create({displayName:d,name:f,website:j,desc:b,prefs:{permissionLevel:g}},{success:function(){Controller.organizationProfileView(f)},error:function(b,d){c.removeAttr("disabled");$(h.el).find(".error").text(null!=d?d:"error").show();n.scrollToTop()}})};c.prototype._findInput=function(b){return $(this.el).find("input[name='"+b+"']")};c.prototype._get=function(b){return this._findInput(b).val()};c.prototype._set=function(b,c){this._findInput(b).val(c)};
c.prototype.lockName=function(){if(this._get("orgname")!==this.autoName)return this.nameLocked=!0};c.prototype.autoName=function(){var b;this.nameLocked||(this.autoName=b=n.removeAccents(this._get("displayName").toLowerCase()).replace(/[^a-z0-9]/ig,""),this._set("orgname",b))};return c}();ud=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.tagName="ul";c.prototype.initialize=function(b){this.idMember=b.idMember;c.__super__.initialize.apply(this,
arguments);this.model.boardInvitedList.bind("change",this.render).bind("refresh",this.render).bind("add",this.render).bind("remove",this.render)};c.prototype.render=function(){$(this.el).html(s.fill("member_invitation_list",{model:"Organization"}));$(this.el).find(".js-list-invitations").html("");this.model.organizationInvitedList.forEach(h(function(b){b=new me({model:b});return $(this.el).find(".js-list-invitations").append(b.render().el)},this));return this};return c}();me=function(){function c(){this.rejectInvitation=
h(this.rejectInvitation,this);this.acceptInvitation=h(this.acceptInvitation,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.tagName="li";c.prototype.events={"click .js-accept-invitation":"acceptInvitation","click .js-reject-invitation":"rejectInvitation"};c.prototype.render=function(){var b;b=this.model.toJSON({url:!0});$(this.el).html(s.fill("member_invitation",b));return this};c.prototype.acceptInvitation=function(){$(this.el).find(".js-accept-invitation").attr("disabled",
"disabled");return this.model.acceptInvite()};c.prototype.rejectInvitation=function(){return this.model.rejectInvite()};return c}()}if(B("upgrade")){var qc,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};qc=function(){function c(){this.render=h(this.render,this);c.__super__.constructor.apply(this,
arguments)}u(c,Backbone.View);c.prototype.render=function(b){var c,d;c=null!=(d=null!=b?b.timeInSeconds:void 0)?d:60;c=Math.floor(c/60);return $(this.el).html(s.fill("upgrade",{stopped:null!=b?b.stopped:void 0,timeInMinutes:c,plural:1<c}))};c.prototype.events={"click .js-upgrade":"upgrade","click .js-stop-upgrade":"stopUpgrade"};c.prototype.upgrade=function(){Controller.upgradeNow();return!1};c.prototype.stopUpgrade=function(){Controller.stopUpgrade();return!1};return c}()}if(B("announcements")){var Ba,
qe,re,ea,rc,sc,G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c},h=function(c,b){return function(){return c.apply(b,arguments)}};qe=function(){function c(b){c.__super__.constructor.apply(this,arguments)}u(c,ja);c.prototype.typeName="Announcement";c.prototype._key=function(){return"announcement-"+this.id+"-read"};c.prototype.isUnread=function(){return!T.get(this._key())};
c.prototype.markRead=function(){$.post("/announcements/dismiss",{id:this.id});T.set(this._key(),!0);return this.trigger("change:unread")};return c}();re=function(){function c(){this.next=h(this.next,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.events={"click .js-dismiss":"next","click .js-all":"openAnnouncements"};c.prototype.render=function(){var b;b=this.model.toJSON();b.dismissText="Dismiss";1<ea.unreadCount()&&(b.dismissText="Next");$(this.el).html(s.fill("announcement",
b));return this};c.prototype.next=function(){return this.model.markRead()};c.prototype.openAnnouncements=function(){q("Info","Announcements - View All Announcements");I.show({view:y.me().getView(sc),displayType:"slim"})};return c}();sc=function(){function c(){this.clickFacebook=h(this.clickFacebook,this);this.clickTwitter=h(this.clickTwitter,this);this.clickBlog=h(this.clickBlog,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.initialize=function(){return ea.onAddRemove(this.render)};
c.prototype.events={"click .js-blog":"clickBlog","click .js-t":"clickTwitter","click .js-fb":"clickFacebook"};c.prototype.render=function(){var b,c,d,f;c={announcement:s.announcement};b={announcements:Ba.toJSON()};$(this.el).html(s.fill("announcements_list",b,{},c));f=ea.getUnread();for(c=0,d=f.length;c<d;c++)b=f[c],b.markRead();return this};c.prototype.clickBlog=function(){q("Info","Announcements List - Trello Blog")};c.prototype.clickTwitter=function(){q("Info","Announcements List - Twitter Link")};
c.prototype.clickFacebook=function(){q("Info","Announcements List - Facebook Link")};return c}();rc=function(){function c(b,e){this.requiresLogin=e.requiresLogin;this.dataUrl=e.dataUrl;this.sync=h(this.sync,this);c.__super__.constructor.apply(this,arguments)}u(c,va);c.prototype.model=qe;c.prototype.sync=function(b,c,d){if(!this.requiresLogin||y.isLoggedIn())return $.get(this.dataUrl,d)};c.prototype.getUnread=function(){return this.filter(function(b){return b.isUnread()})};c.prototype.unreadCount=
function(){return this.filter(function(b){return b.isUnread()}).length};c.prototype.top=function(){return this.detect(function(b){return b.isUnread()})};return c}();ea=new rc([],{requiresLogin:!0,dataUrl:"/announcements"});Ba=new rc([],{requiresLogin:!1,dataUrl:"/announcements/all"});ea.fetch();setInterval(function(){return ea.fetch()},6E4*(10+5*Math.random()))}B("window_size")&&(h=function(c,b){return function(){return c.apply(b,arguments)}},x.WindowSize=new (function(){function c(){this.calc=h(this.calc,
this)}c.prototype.calc=function(){var b;b=$(x).width();this.fExtraLarge=this.fLarge=this.fMedium=this.fSmall=this.fExtraSmall=!1;1280<b?this.fExtraLarge=!0:850<b?this.fLarge=!0:700<b?this.fMedium=!0:500<b?this.fSmall=!0:this.fExtraSmall=!0;return $("body").toggleClass("extra-large-window",this.fExtraLarge).toggleClass("large-window",this.fLarge).toggleClass("medium-window",this.fMedium).toggleClass("small-window",this.fSmall).toggleClass("extra-small-window",this.fExtraSmall)};return c}()));B("window_resize_watcher",
!0)&&$(function(){var c;WindowSize.calc();c=null;return $(x).resize(function(){clearTimeout(c);c=setTimeout(WindowSize.calc,200)})});B("list_guide")&&(h=function(c,b){return function(){return c.apply(b,arguments)}},x.ListGuide=new (function(){function c(){this.scroll=h(this.scroll,this);this.posListGuide=h(this.posListGuide,this);this.calcVisLists=h(this.calcVisLists,this);this.debounced_calcVisLists=h(this.debounced_calcVisLists,this);this.build_and_calc=h(this.build_and_calc,this);this.calc_num_cards=
h(this.calc_num_cards,this);this.calc=h(this.calc,this);this.build=h(this.build,this);this.reset=h(this.reset,this)}c.prototype.reset=function(){$(".list-guide").height("").css({position:"",top:"","max-height":""});$(".list-guide-wrapper").height("").css({"max-height":""});return $(".list-link").removeClass("visible first-visible-link last-visible-link")};c.prototype.build=function(){var b,c,d;if((b=$("#board"))&&b.position())if(d=$(x).height(),c=$(x).scrollTop(),(WindowSize.fLarge||WindowSize.fExtraLarge)&&
$(".list-guide-wrapper").height(d-98),WindowSize.fMedium||WindowSize.fSmall){b=_.debounce(ListGuide.posListGuide,150);$(document).scroll(b);if(100>c)return $(".list-guide").css({"max-height":d-90}),$(".list-guide-wrapper").css({"max-height":d-98});$(".list-guide").css({"max-height":d-20});return $(".list-guide-wrapper").css({"max-height":d-28})}};c.prototype.calc=function(){var b,c,d,f,g;if((b=$("#board"))&&b.position())if(g=$(".list"),c=$(".list-guide"),d=c.find(".list-guide-wrapper"),f=$(".list:first").outerWidth(),
d.empty(),g.each(function(){var b,c;b=$(this);c=[];c.listName=b.find(".list-title .current").text();b=b.find(".list-card:not(.placeholder)").length;c.countStr=""+b+" cards";1===b&&(c.countStr=c.countStr.slice(0,-1));return d.append(s.fill("list_guide_link",c))}),$(".list-link").each(function(b){var d,h,l,o,s;o=$(this);d=$(g[b]);h=0;d=d.position();l=b*(f+8);WindowSize.fExtraSmall&&(h=c.height());s=d.top+100+h;return o.click(function(b){n.stopPropagation(b);q("Board","List Guide","Clicked List Link");
return WindowSize.fLarge||WindowSize.fExtraLarge?$(".list-area-wrapper").animate({scrollLeft:l},150):WindowSize.fExtraSmall?$(x).scrollTop(s+10):$(x).scrollTop(s-29)})}),WindowSize.fLarge||WindowSize.fExtraLarge)return ListGuide.debounced_calcVisLists()};c.prototype.calc_num_cards=function(){var b;b=$(".list");return $(".list-link").each(function(c){var d,c=$(b[c]).find(".list-card:not(.placeholder)").length;d=""+c+" cards";1===c&&(d=d.slice(0,-1));return $(this).find(".list-link-sub").html(d)})};
c.prototype.build_and_calc=function(){this.build();return this.calc()};c.prototype.debounced_calcVisLists=function(){return _.debounce(ListGuide.calcVisLists,300)};c.prototype.calcVisLists=function(){var b,c,d,f,g,h;if(!WindowSize.fExtraSmall&&!WindowSize.fSmall&&!WindowSize.fMedium&&(b=$("#board"))&&b.position()&&!$(".list-guide").hasClass("disabled"))return g=$(".list"),d=$(".list-link"),f=$(".list-guide"),f.find(".list-guide-wrapper"),d.removeClass("visible first-visible-link last-visible-link"),
c=b.position().left,h=b.width()+c,g.each(function(b){var f,g,n;f=$(this);if(WindowSize.fLarge||WindowSize.fExtraLarge)if(n=f.position(),g=n.left,f=n.left+f.width(),g>=c&&f<=h)return $(d[b]).addClass("visible")}),$(".list-link.visible").first().addClass("first-visible-link"),$(".list-link.visible").last().addClass("last-visible-link")};c.prototype.posListGuide=function(){var b;if(!$(".list-guide").hasClass("disabled")||!WindowSize.fLarge&&!WindowSize.fExtraLarge)return $(x).height(),b=$(x).scrollTop(),
b=100>b?38:b-30,$(".list-guide").css({position:"absolute"}).animate({top:b},150)};c.prototype.scroll=function(){return ListGuide.posListGuide()};return c}()));if(B("layout")){var R,h=function(c,b){return function(){return c.apply(b,arguments)}};R=new (function(){function c(){this.isEditing=h(this.isEditing,this);this.calc_surface=h(this.calc_surface,this);this.cancelEdits=h(this.cancelEdits,this);this.removeBoardHelpers=h(this.removeBoardHelpers,this);this.removeListHelpers=h(this.removeListHelpers,
this)}c.prototype.removeListHelpers=function(){$("body").removeClass("layout-horiz-scroll");$(".list-area-wrapper").width("");return $(".list").width("")};c.prototype.removeBoardHelpers=function(){N.calcState="";$("#board").height("");$(".list-area-wrapper").height("");$(".list-area").width("").height("");$(".list-cards").css({"max-height":""});return $(".board-actions-list").css({"max-height":""})};c.prototype.cancelEdits=function(b){$(".edit-controls").remove();$(".editing").removeClass("editing");
$(".new-task").removeClass("focus");$("input").not(b||"none").blur();$("textarea").not(b||"none").blur();b=$(".editable");if(0<b.length)return b.each(function(b){var c,f,g;c=$(".editable")[b];g=$(c).find(".edits-warning:first");b=$(c).find(".current:first");f=$(c).find(".field:first");c=f.data("draftKey");if(f.val()!==b.text()&&""!==f.val()&&null!=c)return T.set(c,f.val()),g.show()})};c.prototype.calc_surface=function(){var b,c;$("#surface").height("");b=$(x).height();c=$(document).height();$(document).width();
c>b&&(c+=80);I.isVisible&&(b=$(".window-wrapper").height()+80,b>c&&(c=b));$("#surface").height(c);return $("#footer").show()};c.prototype.isEditing=function(){return 0<$(".editing").length+$(".new-task.focus").length};return c}())}B("drag_sort")&&(h=function(c,b){return function(){return c.apply(b,arguments)}},x.DragSort=new (function(){function c(){this.scrollWhileSorting=h(this.scrollWhileSorting,this);this.scrollListFromUI=h(this.scrollListFromUI,this);this.refresh=h(this.refresh,this);this.refreshDraggable=
h(this.refreshDraggable,this);this.refreshCardSortable=h(this.refreshCardSortable,this);this.refreshListSortable=h(this.refreshListSortable,this);$(document).mousemove(h(function(b){this.mouseX=b.pageX;return this.mouseY=b.pageY},this))}c.prototype.refreshListSortable=function(){if(!Browser.isTouch())return $(".js-list-sortable").sortable({containment:"#board",handle:".list-header",tolerance:"pointer",revert:"100",placeholder:"list placeholder",scroll:!1,delay:"75",distance:"7",start:function(b,c){var d,
f;d=boardView.model.getView(fa);boardView.cardComposerState.vis&&$(c.helper).hasClass("js-composer")?($(c.placeholder).hide(),$(c.helper).hide(),d.hide()):boardView.cardComposerState.vis&&d.hide();N.fMouseSelect=!1;DragSort.sorting=!0;DragSort.scrollWhileSorting();f=$(c.helper).width();d=$(c.helper).height();return $(c.placeholder).width(f).height(d)},stop:function(b){n.stopPropagation(b);return _.defer(function(){return DragSort.sorting=!1})}})};c.prototype.refreshCardSortable=function(){if(!Browser.isTouch())return $(".js-sortable").sortable({connectWith:".js-sortable",
revert:"100",containment:"#surface",placeholder:"list-card placeholder",scroll:!1,delay:"75",distance:"7",items:".list-card",start:function(b,c){var d;d=boardView.model.getView(fa);boardView.cardComposerState.vis&&$(c.helper).hasClass("js-composer")?($(c.placeholder).hide(),$(c.helper).hide(),d.hide()):boardView.cardComposerState.vis&&d.hide();d=$(c.helper).height()+2;$(c.placeholder).height(d);DragSort.scrollListFromUI(c);N.fMouseSelect=!1;DragSort.sorting=!0;return DragSort.scrollWhileSorting()},
stop:function(b){n.stopPropagation(b);setTimeout(function(){return DragSort.sorting=!1},50);return DragSort.scrollList=null},over:function(b,c){return DragSort.scrollListFromUI(c)},custom:{refreshContainers:function(){var b,c,d,f,g;g=[];for(c=f=this.containers.length-1;0>=f?0>=c:0<=c;0>=f?c++:c--)b=this.containers[c].element,d=$(b).closest(".list"),d.length&&(b=d),d=b.offset(),this.containers[c].containerCache.left=d.left,this.containers[c].containerCache.top=d.top,this.containers[c].containerCache.width=
b.outerWidth(),g.push(this.containers[c].containerCache.height=b.outerHeight());return g}}})};c.prototype.refreshDraggable=function(){if(!Browser.isTouch())return $(".assignable-members .member").draggable({revert:"invalid",revertDuration:150,zIndex:100,helper:"clone",delay:"75",distance:"7",start:function(){return q("Board Sidebar","Drag Member")},stop:function(b){return n.stopPropagation(b)}})};c.prototype.refresh=function(){this.refreshListSortable();this.refreshCardSortable();return this.refreshDraggable()};
c.prototype.scrollListFromUI=function(b){var c;return DragSort.scrollList=null!=b?null!=(c=b.placeholder)?c.parents(".list-cards")[0]:void 0:void 0};c.prototype.scrollWhileSorting=function(){var b,c,d,f,g,h;if(this.sorting){if(WindowSize.fSmall||WindowSize.fExtraSmall)f=$(x).scrollTop(),c=f+$(x).height()-30,this.mouseY<f?x.scrollBy(0,-15):this.mouseY>c&&x.scrollBy(0,15);else if(b=$("#board"),d=b.offset(),c=d.left+30,f=d.left+b.width()-30,g=d.top+30,b=d.top+b.height()-30,this.mouseX<c)$(".list-area-wrapper")[0].scrollLeft-=
15;else if(this.mouseX>f)$(".list-area-wrapper")[0].scrollLeft+=15;else if(null!=(null!=(h=this.scrollList)?h.scrollTop:void 0))this.mouseY<g?this.scrollList.scrollTop-=15:this.mouseY>b&&(this.scrollList.scrollTop+=15);return setTimeout(this.scrollWhileSorting,20)}};return c}()));if(B("popover")){var t,h=function(c,b){return function(){return c.apply(b,arguments)}};t=new (function(){function c(){this.init=h(this.init,this)}var b,e,d,f,g,i;e=b=g=d=f=i=null;c.prototype.init=function(){this.poViewArray=
[];this.el_width=1;this.el_top=this.el_left="";this.view=null;i=$(".pop-over");f=$(".pop-over .header");d=$(".pop-over .content");g=i.find(".js-back-view");$(g).click(h(function(){return this.popView()},this));return $(i).find(".js-close-popover").click(h(function(b){n.stop(b);return this.hide()},this))};c.prototype.calcPos=function(c){var d,e,f,g,h,n,q;f=$(x).width();e=$(x).height();n=i.width()+16;c.elem?(b=c.elem,b.el&&(b=b.el),this.el_width=$(b).outerWidth(),this.el_left=$(b).offset().left,this.el_top=
$(b).offset().top+(_.isNumber(c.top)?c.top:28)):c.clientx&&c.clienty&&(this.el_left=c.clientx,this.el_top=c.clienty);d=this.el_left+n+16;e=WindowSize.fLarge||WindowSize.fExtraLarge?e-30:"";c.animate||i.css({left:-1E4,top:-1E4,maxHeight:e}).show();h=i.height()+16;e=this.el_top;g=e+h;if(WindowSize.fLarge||WindowSize.fExtraLarge)q=$(x).height()+$(x).scrollTop(),g>q&&(e=q-h-8);d>f?(d=this.el_left-n+this.el_width,0>d&&(d=f-n-5)):d=this.el_left;c.animate?i.animate({left:d,top:e},85):i.css({left:d,top:e})};
c.prototype.calcTop=function(){var b,c,d,e;$(x).height();$(x).scrollTop();c=i.outerHeight();d=i.position().top;b=d+c;if(WindowSize.fLarge||WindowSize.fExtraLarge)e=$(x).height()+$(x).scrollTop(),b>e&&(d=e-c-8);return i.css({top:d})};c.prototype.load=function(b){this.view=b;f.find(".header-title").html(b.getViewTitle());d.html(b.render().el);return b.delegateEvents()};c.prototype.show=function(b){R.cancelEdits(b.elActive);b.preloaded||(this.hide(),this.load(b.view));this.poViewArray.push(b.view);this.calcPos(b);
if(0<i.find(".js-autofocus").length){if(Browser.isTouch()&&i.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;_.delay(function(){return i.find(".js-autofocus:first").focus().select()},10)}"function"===typeof b.shown&&b.shown(i);e=b.hidden};c.prototype.pushView=function(b){this.load(b.view);this.poViewArray.push(b.view);g.show();if(0<i.find(".js-autofocus").length){if(Browser.isTouch()&&i.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;_.delay(function(){return i.find(".js-autofocus:first").focus().select()},
10)}return this.calcTop()};c.prototype.popView=function(){var b;this.poViewArray.pop();if(b=_.last(this.poViewArray)){this.load(b);1===this.poViewArray.length&&g.hide();if(0<i.find(".js-autofocus").length){if(Browser.isTouch()&&i.find(".js-autofocus:first").hasClass("js-no-touch-autofocus"))return;_.delay(function(){return i.find(".js-autofocus:first").focus().select()},10)}return this.calcTop()}t.hide()};c.prototype.toggle=function(c){return b===c.elem?this.hide():this.show(c)};c.prototype.hide=
function(){b=null;i.hide();i.find(".content").empty();g.hide();this.poViewArray=[];this.view=null;$(".js-remove-on-po-hide").remove();"function"===typeof e&&e(i);return e=null};c.prototype.isVisible=function(){return i.is(":visible")};return c}());$(t.init)}if(B("dialog")){var I,h=function(c,b){return function(){return c.apply(b,arguments)}};I=new (function(){function c(){this.init=h(this.init,this)}var b,e,d,f;f=d=e=b=null;c.prototype.init=function(){b=$(".window");e=b.find(".window-wrapper");this.scrolltop=
0;this.isVisible=!1};c.prototype.calcPos=function(){var c,d;if(!I.isVisible&&(b.css({left:-2E4,top:-2E4}),d=50,WindowSize.fSmall||WindowSize.fExtraSmall||WindowSize.fMedium))d=$(x).scrollTop()+8;e.width("1");WindowSize.fSmall||WindowSize.fExtraSmall?(c=$(document).width(),e.width(c-16)):e.width("");c=($(x).width()-b.width())/2;I.isVisible?b.css({left:c}):b.css({left:c,top:d}).show()};c.prototype.getViewName=function(){return f};c.prototype.show=function(c){var h;t.hide();this.clear();d=c.hide;this.scrolltop=
$(x).scrollTop();$("body").addClass("window-up");null!=c.displayType&&b.addClass(c.displayType);f=null!=(h=c.view)?h.className:void 0;c.view?(this.view=c.view,e.html(this.view.render().el),this.view.delegateEvents()):c.html&&(this.view=null,e.html(c.html));this.calcPos();$(".window-overlay").scrollTop(0);this.isVisible=!0;R.calc_surface();b.find(".js-autofocus:first").focus().select();b.find(".js-submit-okay").click(function(){var d,e,f,h,i;e=b.find("form:first");i=e.find(".non-empty");for(f=0,h=
i.length;f<h;f++)if(d=i[f],/^\s*$/.test($(d).val()))return;I.hide();"function"===typeof c.okay&&c.okay({form:e})});b.find(".js-submit-cancel").click(function(){I.hide();"function"===typeof c.cancel&&c.cancel()});b.find("input[type=submit]").click(function(b){n.preventDefault(b)})};c.prototype.hide=function(c){this.isVisible&&("function"===typeof d&&d(c),this.view=d=null,b.hide(),$("body").removeClass("window-up"),_.defer(h(function(){$(x).scrollTop(this.scrolltop);return this.scrolltop=0},this)),
this.isVisible=!1,b.removeClass("slim archive"),t.hide())};c.prototype.clear=function(){e.width("");e.empty()};return c}());$(I.init)}if(B("ref")){var Vc,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Vc=function(){function c(){this.renderAnnouncement=h(this.renderAnnouncement,this);this.render=
h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.events={"click .js-info-menu-about":"clickAbout","click .js-info-menu-help":"clickHelp","click .js-info-menu-guide":"clickGuide","click .js-info-menu-privacy":"clickPrivacy","click .js-info-menu-shortcuts":"clickShortcuts","click .js-info-menu-trello-dev":"clickDev","click .js-info-menu-api":"clickAPI","click .js-info-menu-tos":"clickTOS","click .js-announcements":"openAnnouncements","click .js-info-menu-blog":"clickBlog",
"click .js-info-menu-twitter":"clickTwitter","click .js-info-menu-facebook":"clickFacebook"};c.prototype.initialize=function(){ea.onAddRemove(this.renderAnnouncement);return ea.bind("change:unread",this.renderAnnouncement)};c.prototype.getViewTitle=function(){return"Information"};c.prototype.render=function(){var b;b={};b.showAnnouncements=!_.isEmpty(Ba.models);$(this.el).html(s.fill("ref_menu",b));this.renderAnnouncement();return this};c.prototype.renderAnnouncement=function(){var b,c;c=ea.top();
b=$(this.el).find(".js-announce");null!=c?(c=c.getView(re),b.html(c.render().el)):b.empty()};c.prototype.openAnnouncements=function(){q("Info","Menu - View All Announcements");I.show({view:y.me().getView(sc),displayType:"slim"})};c.prototype.clickAbout=function(){return q("Info","Menu - About")};c.prototype.clickHelp=function(){return q("Info","Menu - Help")};c.prototype.clickGuide=function(){return q("Info","Menu - Guide")};c.prototype.clickPrivacy=function(){return q("Info","Menu - Privacy, Security, Data")};
c.prototype.clickShortcuts=function(){return q("Info","Menu - Shortcuts")};c.prototype.clickDev=function(){return q("Info","Menu - Trello Dev Board")};c.prototype.clickAPI=function(){return q("Info","Menu - API")};c.prototype.clickTOS=function(){return q("Info","Menu - Terms of Service")};c.prototype.clickBlog=function(){return q("Info","Menu - Trello Blog")};c.prototype.clickTwitter=function(){return q("Info","Menu - Twitter Link")};c.prototype.clickFacebook=function(){return q("Info","Menu - Facebook Link")};
c.prototype.clickFogCreek=function(){return q("Info","Menu - Fog Creek Link")};return c}()}if(B("board_layout")){var N,h=function(c,b){return function(){return c.apply(b,arguments)}};N=new (function(){function c(){this.refreshLayout=h(this.refreshLayout,this);this.refreshLayoutImmediately=h(this.refreshLayoutImmediately,this);this.calc=h(this.calc,this);this.restoreScrolls=h(this.restoreScrolls,this);this.saveScrolls=h(this.saveScrolls,this);this.getBoard=h(this.getBoard,this);this.calc_board=h(this.calc_board,
this);this.calcLists=h(this.calcLists,this);this.selectCard=h(this.selectCard,this);this.calcWidgetsHeight=h(this.calcWidgetsHeight,this);this.fHorizScroll=!1;this.fMouseSelect=!0;this.newCards=[];this.cardToSelect=null;this.listScrollLeft=0;this.savingScroll=!1}c.prototype.calcWidgetsHeight=function(){var b,c,d;if(WindowSize.fLarge||WindowSize.fExtraLarge)return b=$(x).height(),$("#board"),c=$(".board-widget"),d=0,c.each(function(){var b;if(!$(this).hasClass("board-widget-actions"))return b=$(this).height(),
d=d+b+16}),b=b-110-d,$(".board-actions-list").css({"max-height":b})};c.prototype.selectCard=function(b){$(".list-card.active-card").removeClass("active-card");$(".list.active-list").removeClass("active-list");$(b).addClass("active-card");return $(b).closest(".list").addClass("active-list")};c.prototype.calcLists=function(){var b,c,d,f,g,i,j,m;R.removeListHelpers();$(".list-area-wrapper").unbind("scroll");if(WindowSize.fLarge||WindowSize.fExtraLarge){m=$(x).height();f=$(".list");b=$("#board");c=b.width();
i=f.length;g=Math.floor(222*i);try{this.fHorizScroll&&(j=this.fHorizScroll)}catch(l){}this.fHorizScroll=g>c;!0===j&&!1===this.fHorizScroll&&($(".list-area-wrapper").css({overflow:"scroll"}),$(".list-area-wrapper").scrollLeft(0),$(".list-area-wrapper").css({overflow:""}));c=Math.floor(c/i-12);320<c&&(c=320);this.fHorizScroll&&(c=210,$("body").addClass("layout-horiz-scroll"));$(".list").width(c);$(".list-area").width((c+12)*i);this.fHorizScroll&&_.defer(function(){ListGuide.debounced_calcVisLists();
return $(".list-area-wrapper").scroll(ListGuide.debounced_calcVisLists())});b=$(b).hasClass("permission-public");d=42;N.fHorizScroll&&(d+=23);b&&(d-=36);f.each(h(function(b){var c,b=$(f[b]);c=b.find(".list-header").height();return b.find(".list-cards").css({"max-height":m-102-c-d})},this))}ListGuide.build_and_calc()};c.prototype.calc_board=function(){var b;R.removeBoardHelpers();if(WindowSize.fLarge||WindowSize.fExtraLarge)return b=$(x).height(),$(".list-area-wrapper").height(b-102),_.defer(h(function(){return this.calcWidgetsHeight()},
this))};c.prototype.getBoard=function(){if(x.boardView&&boardView.model)return boardView.model};c.prototype.saveScrolls=function(){var b;if(!this.savingScroll&&(this.savingScroll=!0,(b=this.getBoard())&&(WindowSize.fLarge||WindowSize.fExtraLarge)))return b.listList.each(function(b){return b.getView(Ga).saveScroll()}),this.listScrollLeft=$(".list-area-wrapper").scrollLeft()};c.prototype.restoreScrolls=function(){var b;if(b=this.getBoard()){if(WindowSize.fLarge||WindowSize.fExtraLarge)b.listList.each(function(b){return b.getView(Ga).restoreScroll()}),
$(".list-area-wrapper").scrollLeft(this.listScrollLeft);return this.savingScroll=!1}};c.prototype.calc=function(){var b,c,d;d=$(x).width();c=$(x).height();b=$("#board").find(".list-area .list").length;b=[d,c,b].join();return b!==N.calcState?(N.calcState=b,J("layout","calc"),$("body").hasClass("window-up")&&$(".window-wrapper").width("1"),$(document).unbind("scroll"),ListGuide.reset(),N.calc_board(),N.calcLists(),I.isVisible&&I.calcPos(),_.defer(function(){ListGuide.calcVisLists();return R.calc_surface()})):
J("layout","calc (ignored)")};c.prototype.refreshLayoutImmediately=function(){J("render","refreshing layout");N.refreshTimeout&&(clearTimeout(N.refreshTimeout),N.refreshTimeout=null);N.calc();return DragSort.refresh()};c.prototype.refreshLayout=function(){if(!N.refreshTimeout)return BaordLayout.refreshTimeout=setTimeout(N.refreshLayoutImmediately,100)};return c}())}if(B("clientVersion")){var se,h=function(c,b){return function(){return c.apply(b,arguments)}};se=function(){function c(){this.advertiseUpgrade=
h(this.advertiseUpgrade,this);this.upgradeAvailable=h(this.upgradeAvailable,this);this.versionCompatible=h(this.versionCompatible,this);this.setServerVersion=h(this.setServerVersion,this);this.lessThanClient=h(this.lessThanClient,this);this.greaterThanClient=h(this.greaterThanClient,this);this.compareWithClient=h(this.compareWithClient,this);var b,c,d,f;this.version="undefined"!==typeof TrelloVersion&&null!==TrelloVersion?TrelloVersion:"vDev";this.server={};f=["version","versionMin","versionMax",
"versionAdvertiseMin","versionAdvertiseMax"];for(c=0,d=f.length;c<d;c++)b=f[c],this.server[b]=null;this.server.version=this.version}c.prototype.compareWithClient=function(b){return za.compareStringVersions(b,this.version)};c.prototype.greaterThanClient=function(b){return 0<this.compareWithClient(b)};c.prototype.lessThanClient=function(b){return 0>this.compareWithClient(b)};c.prototype.setServerVersion=function(b){var c,d;b.trellisVersion&&(b.version=b.trellisVersion);c=!1;for(d in this.server)this.server[d]!==
b[d]&&(c=!0,this.server[d]=b[d]);return c};c.prototype.versionCompatible=function(){var b,c,d;if(this.version===this.server.version)return!0;d=za.differInMostMinorOnly(this.compareWithClient(this.server.version));b=!this.server.versionMin||!this.greaterThanClient(this.server.versionMin);c=!this.server.versionMax||!this.lessThanClient(this.server.versionMax);return d&&b&&c};c.prototype.upgradeAvailable=function(){return this.version!==this.server.version};c.prototype.advertiseUpgrade=function(){var b,
c;if(this.version===this.server.version)return!1;b=!this.server.versionAdvertiseMin||!this.greaterThanClient(this.server.versionAdvertiseMin);c=!this.server.versionAdvertiseMax||!this.lessThanClient(this.server.versionAdvertiseMax);return this.versionCompatible()&&!(b&&c)};return c}()}if(B("controller")){var te,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=
b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};te=function(){function c(){this.syncError=h(this.syncError,this);this.stopUpgrade=h(this.stopUpgrade,this);this.upgradeNow=h(this.upgradeNow,this);this.upgradeClient=h(this.upgradeClient,this);this.advertiseUpgrade=h(this.advertiseUpgrade,this);this.upgradeAvailable=h(this.upgradeAvailable,this);this.setServerVersion=h(this.setServerVersion,this);this.defaultView=h(this.defaultView,this);c.__super__.constructor.apply(this,arguments)}
u(c,Backbone.Controller);c.prototype.initialize=function(){return $(rpc).bind("reconnect",h(function(){return this.refreshSubscribedModels()},this))};c.prototype.routes={"":"defaultView",landing:"landingView",search:"searchView","api/generateToken":"generateTokenView","board/*path":"boardView",help:"manualView",about:"manualView",guide:"manualView",shortcuts:"manualView",questions:"manualView",privacy:"manualView",data:"manualView",yourdata:"manualView",security:"manualView",blank:"blankView","org/create":"organizationCreateView",
"org/:id":"organizationById","card/board/:idBoard/:idCard":"cardBoardContextView","card/board/:slug/:idBoard/:idCard":"cardSlugBoardContextView","card/:idBoard/:idCard":"cardBoardContextView","card/:slug/:idBoard/:idCard":"cardSlugBoardContextView","card/:username/:idBoard/:idCard":"cardMemberContextView","card/:username/:slug/:idBoard/:idCard":"cardSlugMemberContextView",":username/boards":"memberBoardsView",":username/notifications":"memberNotificationsView",":name/account":"userOrOrgAccountView",
":name/?":"userOrOrgProfileView","*splat":"displayErrorPage"};c.prototype.viewType="none";c.prototype.idBoardCurrent=null;c.prototype.setLocation=function(b){var c,d;d=b.title;c=b.location;b=b.unreadCount;d&&(this.title=d);null!=b&&(this.unreadCount=b);this.title&&(d=this.unreadCount?"("+this.unreadCount+") ":"",document.title=""+d+this.title+" | Trello");c&&(/^#/.test(c)&&(c=c.substr(1)),this.saveLocation(c),this.location=c)};c.prototype.load=function(b){return this.setLocation({location:b})};c.prototype.getPermanentOrganizationUrl=
function(b){return"/org/"+b};c.prototype.getOrganizationUrl=function(b){return"/"+b};c.prototype.getOrganizationAccountUrl=function(b){return"/"+b+"/account"};c.prototype.getOrganizationMembersUrl=function(b){return"/"+b+"/members"};c.prototype.getBoardUrl=function(b,c){var d,f;if(null!=(null!=b?b.id:void 0))b=b.id;d=(d=null!=(f=Models.Board.get(b))?f.get("name"):void 0)?"/board/"+n.makeSlug(d)+"/"+b:"/board/"+b;c&&(d+="/"+c);return d};c.prototype.getMemberBoardProfileUrl=function(b,c){return""+this.getBoardUrl(c)+
"/member/"+b};c.prototype.saveBoardLocation=function(b,c){this.setLocation({title:Models.Board.get(b).get("name"),location:this.getBoardUrl(b,c)})};c.prototype.getMemberProfileUrl=function(b){null==b&&(b=y.myUsername());return"/"+b};c.prototype.getMemberNotificationsUrl=function(b){null==b&&(b=y.myUsername());return"/"+b+"/notifications"};c.prototype.getMemberBoardsUrl=function(b){null==b&&(b=y.myUsername());return b===y.myUsername()?"/":"/"+b+"/boards"};c.prototype.getMemberAccountUrl=function(b){null==
b&&(b=y.myUsername());return"/"+b+"/account"};c.prototype.getMemberProfileCardUrl=function(b,c,d){return"card/board/"+c+"/"+d};c.prototype.getPermanentCardUrl=function(b,c,d){return d?"/card/"+d.get("username")+"/"+b+"/"+c:"/card/board/"+b+"/"+c};c.prototype.getCardUrl=function(b,c){var d,f;d=b.get("name");return this.getCardUrlWithoutModels(b.get("idBoard"),null!=(f=b.get("idShort"))?f:b.id,d,c)};c.prototype.getCardUrlWithoutModels=function(b,c,d,f){return f?"/card/"+f.get("username")+"/"+n.makeSlug(d)+
"/"+b+"/"+c:n.isShortId(c)?"/card/"+n.makeSlug(d)+"/"+b+"/"+c:"/card/board/"+n.makeSlug(d)+"/"+b+"/"+c};c.prototype.saveCardLocation=function(b,c){var d;b.getBoard();d=b.getBoard().get("name");return this.setLocation({title:""+b.get("name")+" on "+d,location:this.getCardUrl(b,c)})};c.prototype.saveMemberBoardProfileLocation=function(b,c){return this.setLocation({title:""+b.get("fullName"),location:this.getMemberBoardProfileUrl(b.get("username"),c)})};c.prototype.saveBrowseLocation=function(){this.setLocation({title:"Public Boards",
location:"browse"})};c.prototype.saveSearchLocation=function(){this.setLocation({title:"Search",location:"search"})};c.prototype.saveOrganizationCreateLocation=function(){this.setLocation({title:"Create Organization",location:"org/create"})};c.prototype.onMemberView=function(){return"member"===this.viewType};c.prototype.onAnyOrganizationView=function(){return"organization"===this.viewType};c.prototype.onOrganizationView=function(b){return this.onAnyOrganizationView()&&this.idOrganizationCurrent===
b};c.prototype.onAnyBoardView=function(){return"board"===this.viewType};c.prototype.onBoardView=function(b){return this.onAnyBoardView()&&this.idBoardCurrent===b};c.prototype.onBrowseView=function(){return"browse"===this.viewType};c.prototype.onErrorView=function(){return"error"===this.viewType};c.prototype.defaultView=function(){return y.isLoggedIn()?this.memberBoardsView():this.landingView()};c.prototype.startNewView=function(b,c){this.viewType=b;this.onAnyBoardView()?this.onBoardView(c)||(rpc.subscribeTo("Board",
c),this.idBoardCurrent=c):(rpc.subscribeTo("Board",null),this.idBoardCurrent=null);this.onAnyOrganizationView()?this.onOrganizationView(c)||(rpc.subscribeTo("Organization",c),this.idOrganizationCurrent=c):(rpc.subscribeTo("Organization",null),this.idOrganizationCurrent=null);R.calcState="";this.showSpinner()};c.prototype.refreshSubscribedModels=function(){rpc.resync(this.idBoardCurrent,this.idOrganizationCurrent,y.myId());rpc.invoke("subscribeToBoard",[this.idBoardCurrent]);return rpc.invoke("subscribeToOrganization",
[this.idOrganizationCurrent])};c.prototype.clearPreviousView=function(){t.hide();S.clearAllCardFilters();I.isVisible&&I.hide();$("#content").html("");$("#surface").height("");$("body").scrollTop("0").removeClass("fixed-content").removeClass("adaptive-content").removeClass("full-content")};c.prototype.boardView=function(b,c){var d,f;f={};d=b.split("/");f.idBoard=1===d.length?d[0]:d[1];3===d.length?f.section=d[2]:4===d.length&&(f.usernameBoardProfile=d[3]);this.displayBoard(f,c)};c.prototype.displayBoard=
function(b,c){var d,f,g,i,j,m,l;J("controller",["boardView",b.idBoard]);j=h(function(){return this.displayErrorPage({errorType:"boardNotFound"})},this);if((i=b.idBoard||(null!=(f=b.board)?f.id:void 0))&&!b.board)f=Models.Board.get(i),null!=f&&f.isPartiallyLoaded()||(b.board=f);if(!i)return j();d=b.board&&this.onBoardView(i);g=this.attachSpinnerCallback(c);this.startNewView("board",i);m=h(function(c){var e,f,i,j;x.boardView=e=c.getView(yd);d||(this.clearPreviousView(),this.showHeader(),$("body").addClass("full-content"),
$("#content").html(e.render().el));b.idCard?(i=h(function(b){return b?(b.getView(Ua).showDetail(h(function(b){b||this.saveBoardLocation(c.id)},this)),this.saveCardLocation(b)):this.saveBoardLocation(c.id)},this),(f=c.getCard(b.idCard))?i(f):Models.loadCardData(b.idBoard,b.idCard,h(function(d){if(null!=d)this.saveBoardLocation(c.id);else return f=c.getCard(b.idCard),f.get("idBoard")===c.id?i(f):x.navigate(Controller.getCardUrl(f))},this))):b.usernameBoardProfile?null!=(j=Models.Member.find("username",
b.usernameBoardProfile)[0])&&j.viewBoardProfile(c.id):(I.isVisible&&I.hide(),c.onId(h(function(){this.saveBoardLocation(c.id)},this)));"function"===typeof g&&g(x.boardView)},this);b.board&&!b.forceReload?(null!=(l=y.me())&&l.clearCache(),m(b.board)):null!=i?Models.loadCurrentBoardData(i,h(function(b){if(null!=b)return j();this.clearPreviousView();b=Models.Board.get(i);if(!b)return j();m(b)},this)):j()};c.prototype.landingView=function(){return this.staticView({title:"Organize anything, together.",
location:y.isLoggedIn()?"/landing":"/",template:"landing",bodyClass:"adaptive-content",data:{typekit:!0}})};c.prototype.searchView=function(b){var c,d;J("controller",["searchView"]);d=this;c=this.attachSpinnerCallback(b);d.startNewView("search");Models.loadHeaderData(function(){var b,g;d.clearPreviousView();b=n.pushSupport()?/[&?]q=([^&]+)/.exec(location.search):/[&?]q=([^&]+)/.exec(location.hash);g="";b&&(g=unescape(b[1]));b=new ue({},g);d.showHeader();$("body").addClass("fixed-content");$("#content").html(b.render().el);
d.saveSearchLocation();"function"===typeof c&&c(b);return R.calc_surface()})};c.prototype.organizationById=function(b,c){Models.loadOrgNameById(b,h(function(d){return this.organizationProfileView(d,b,c)},this),h(function(){return this.displayErrorPage()},this))};c.prototype.organizationCreateView=function(b){var c;J("controller",["organizationCreateView"]);c=this;b=this.attachSpinnerCallback(b);c.startNewView("createOrganization");Models.loadMemberBoardsData("me",function(){var d;c.clearPreviousView();
$("body").addClass("fixed-content");d=Models.Organization.all();d=new le({model:{organizationList:new OrganizationList(d)}});$("#content").html(d.render().el);c.showHeader();c.saveOrganizationCreateLocation();"function"===typeof b&&b(d)},function(){c.displayErrorPage()});R.calc_surface()};c.prototype.organizationProfileView=function(b,c,d){this.displayOrganizationPage({orgname:b,loadFn:"loadOrganizationData",viewClass:oe,getLocation:this.getOrganizationUrl,idOrganization:c,callback:d})};c.prototype.organizationAccountView=
function(b,c,d){this.displayOrganizationPage({orgname:b,loadFn:"loadOrganizationData",viewClass:ke,getLocation:this.getOrganizationAccountUrl,idOrganization:c,callback:d,adminOnly:!0})};c.prototype.userOrOrgProfileView=function(b,c){null==b&&(b="me");this.userOrOrgView(b,this.memberProfileView,this.organizationProfileView,c)};c.prototype.userOrOrgAccountView=function(b,c){null==b&&(b="me");this.userOrOrgView(b,this.memberAccountView,this.organizationAccountView,c)};c.prototype.userOrOrgView=function(b,
c,d,f){var g,i;i=x.sessionStorage;g="userOrOrg_"+b;return async.waterfall([function(b){var c,d,e;c=null!=i?i.getItem(g):void 0;return null!=c?(e=c.split("|"),d=e[0],c=e[1],b(null,{type:d,id:c})):b(null,{})},function(c,d){return null==(null!=c?c.type:void 0)?$.get("/1/types/"+b).done(function(b){return d(null,b)}).fail(function(){return d("notFound")}):d(null,c)}],h(function(h,m){null!=(null!=m?m.type:void 0)&&null!=(null!=m?m.id:void 0)&&null!=i&&i.setItem(g,""+m.type+"|"+m.id);switch(null!=m?m.type:
void 0){case "member":return c.call(this,b,f);case "organization":return d.call(this,b,m.id,f);default:return this.displayErrorPage({callback:f})}},this))};c.prototype.displayOrganizationPage=function(b){var c,d,f;f=b.orgname;J("controller",["organization"]);d=this;c=this.attachSpinnerCallback(b.callback);d.startNewView("organization",b.idOrganization);Models[b.loadFn](f,function(g){var h;d.clearPreviousView();g=Models.Organization.get(null!=(h=g.id)?h:g.idOrganization);!g.owned()&&b.adminOnly?d.organizationProfileView(f,
b.idOrganization):(h=g.getView(b.viewClass),d.showHeader(),$("body").addClass("fixed-content"),$("#content").html(h.render().el),h=""+g.get("displayName")+" ("+g.get("name")+")",d.setLocation({title:h,location:b.getLocation(g.get("name"))}),"function"===typeof c&&c(g))},function(){d.displayErrorPage()});R.calc_surface()};c.prototype.memberProfileView=function(b,c){null==b&&(b="me");this.displayMemberPage({username:b,loadFn:"loadMemberProfileData",viewClass:ac,getLocation:h(function(b){return this.getMemberProfileUrl(b)},
this),callback:c})};c.prototype.memberNotificationsView=function(b,c){null==b&&(b="me");this.displayMemberPage({username:b,loadFn:"loadNotificationData",viewClass:nd,getLocation:h(function(b){return this.getMemberNotificationsUrl(b)},this),callback:c})};c.prototype.memberBoardsView=function(b,c,d){null==b&&(b="me");this.displayMemberPage(_.extend({username:b,loadFn:"loadMemberBoardsData",viewClass:ld,getLocation:h(function(b){return this.getMemberBoardsUrl(b)},this),callback:d},c))};c.prototype.memberAccountView=
function(b,c){this.displayMemberPage({username:"me",loadFn:"loadMemberAccountData",viewClass:hd,getLocation:h(function(b){return this.getMemberAccountUrl(b)},this),callback:c})};c.prototype.displayMemberPage=function(b){var c,d,f,g,i,j;i=b.username;f=b.loadFn;j=b.viewClass;d=b.getLocation;c=b.callback;g=b.message;null!=i?i:i=y.myUsername();J("controller",["memberBoardsView"]);c=this.attachSpinnerCallback(c);this.startNewView("memberBoardsView");Models[f](i,h(function(f,h){var i,n,q;this.clearPreviousView();
n=!f&&null!=h?Models.Member.get(null!=(i=h.id)?i:h.idMember):null;f||!n?this.displayErrorPage():(i=n.getView(j,void 0,{isMore:h.isMore,data:h}),this.showHeader(),$("body").addClass("fixed-content"),$("#content").html(i.render().el),q=""+n.get("fullName")+" ("+n.get("username")+")",b.idCard&&b.idBoard?(i=Models.Board.get(b.idBoard),i=i.getCard(b.idCard),i.getView(Ua).showDetail(function(){this.setLocation({title:q,location:d(n.get("username"))})}),this.saveCardLocation(i,n)):this.setLocation({title:q,
location:d(n.get("username"))}),"function"===typeof c&&c(n),null!=g&&aa.flash(g.text,"confirm","member"))},this));R.calc_surface()};c.prototype.cardSlugBoardContextView=function(b,c,d,f){this.cardBoardContextView(c,d,f)};c.prototype.cardBoardContextView=function(b,c,d){this.displayBoard({idBoard:b,idCard:c},d)};c.prototype.cardSlugMemberContextView=function(b,c,d,f,g){this.cardMemberContextView(b,d,f,g)};c.prototype.cardMemberContextView=function(b,c,d,f){this.displayMemberPage({idBoard:c,idCard:d,
loadFn:"loadMemberData",username:b,viewClass:ac,getLocation:h(function(b){return this.getMemberProfileCardUrl(b,c,d)},this)},f)};c.prototype.blankView=function(b){var c,d;d=this;c=this.attachSpinnerCallback(b);d.startNewView("blank");return Models.loadHeaderData(function(){d.clearPreviousView();d.showHeader();"function"===typeof c&&c();return R.calc_surface()})};c.prototype.manualView=function(b){var c,d,f,g;f=document.location.hash?document.location.hash.substr(1):document.location.pathname.substr(1);
g=n.capitalize(f);if("data"===f||"yourdata"===f||"security"===f)f="privacy";c=function(b,c){var d;d={is_static:"static"===b,is_board:"board"===b,manual_content:s["manual_"+f]};d[f]=!0;d.title=g;d=s.fill("manual_base",d);return c(d)};d=f;this.onAnyBoardView()?(c("board",h(function(b){return I.show({html:b,hide:h(function(){return Controller.saveBoardLocation(this.idBoardCurrent)},this)})},this)),this.setLocation({title:g,location:d})):this.staticView({title:g,location:d,template:function(b){return c("static",
b)},bodyClass:"fixed-content"},b)};c.prototype.staticView=function(b,c){var d,f,g,h,j,m,l,n;l=b.title;h=b.location;j=b.template;m=b.templateData;d=b.bodyClass;n=b.viewType;if(_.isFunction(m)||!m)c=m,m={};J("controller",[h+"View"]);g=this;f=this.attachSpinnerCallback(c);g.startNewView(null!=n?n:h);Models.loadHeaderData(function(){var b;g.clearPreviousView();g.showHeader();b=function(b){$("body").addClass(d);$("#content").html(b);g.setLocation(l,{location:h});"function"===typeof f&&f();return R.calc_surface()};
_.isFunction(j)?j(b):b(s.fill(j,m))})};c.prototype.showHeader=function(){var b;$("#header .header-user").remove();$("#header .header-about").remove();b=y.me();$("#header").append(b.getView(Rc).render().el);$("#header").append(b.getView(Pc).render().el);b.checkColorBlindMode()};c.prototype.displayErrorPage=function(b){var c;c=b=_.extend({errorType:"notFound"},b);null!=b&&b.errorType&&(c[b.errorType]=!0,c.url=location.pathname);this.staticView({title:"Error",template:"error",templateData:b,viewType:"error"},
b.callback)};c.prototype.showSpinner=function(){return aa.showHtml("<div class='spinner right'></div>","","loading")};c.prototype.hideSpinner=function(){return aa.hide("loading")};c.prototype.attachSpinnerCallback=function(b){var c;c=this;return function(d){c.hideSpinner();return"function"===typeof b?b(d):void 0}};c.prototype.goBack=function(){Backbone.history.ignoreNext();x.history.back()};c.prototype.clientVersion=new se;c.prototype.setServerVersion=function(b){this.clientVersion.setServerVersion(b)&&
$(this).triggerHandler("change:serverVersion");if(!this.clientVersion.versionCompatible())return this.upgradeClient()};c.prototype.upgradeAvailable=function(){return this.clientVersion.upgradeAvailable()};c.prototype.advertiseUpgrade=function(){return this.clientVersion.advertiseUpgrade()};c.prototype.upgradeClient=function(){var b;if(!this.upgrading)return this.upgrading=!0,b=n.randomWait(360,1800),"active"===Monitor.getStatus()&&(b=n.randomWait(60,300)),aa.showHtml((new qc).render({timeInSeconds:b}),
"confirm","upgrade"),setTimeout(h(function(){if(this.upgrading)return this.upgradeNow()},this),1E3*b)};c.prototype.upgradeNow=function(){aa.hideAll();return x.location.reload()};c.prototype.stopUpgrade=function(){this.upgrading=!1;return aa.showHtml((new qc).render({stopped:!0}),"confirm","upgrade")};c.prototype.syncError=function(){return aa.showHtml(s.fill("sync_error"),"error","modelSync")};return c}();(function(){var c,b,e,d;b=x.location;c=/^#*/;d=/^\/*/;e=/\?.*$/;_.extend(Backbone.History.prototype,
{loadUrl:_.wrap(Backbone.History.prototype.loadUrl,function(b){if(this.shouldIgnoreNext)this.shouldIgnoreNext=!1,this.fragment=this.getFragment();else return b.apply(this)}),ignoreNext:function(){return this.shouldIgnoreNext=!0},getFragment:function(b){b=b||x.location;return n.pushSupport()?b.pathname.replace(d,""):b.hash.replace(c,"").replace(e,"")},start:function(){var c,d;if(n.pushSupport())$(x).bind("popstate",h(function(){I.hide(!0);return this.checkUrl()},this));else if("onhashchange"in x)if("/"===
b.pathname)$(x).bind("hashchange",this.checkUrl);else{d="/#"+b.pathname;b.replace(d);return}c=this;$(function(){$("body").delegate('a[href^="/"]',"click",function(b){var d;!b.ctrlKey&&!b.metaKey&&!b.shiftKey&&(d=$(this).attr("href"),t.hide(),/\/(about|guide|shortcuts|help|privacy|questions)/.test(d)||I.hide(!0),!$(this).hasClass("js-real-link")&&!/\/(logout|login|signup|forgot)/i.test(d)&&(n.preventDefault(b),c.saveLocation(d,!0),c.checkUrl()))})});x.navigate=function(b,d){var e;null!=d?d:d={};e=
b||location.pathname;b||(y.check(),y.isLoggedIn()&&/^\/landing$/.test(e)&&(e="/"));c.saveLocation(e,!0);return d.forceReload?location.reload():c.loadUrl()};$(x).bind("navigate",function(b,c,d){x.navigate(c,d)});this.loadUrl()},saveLocation:function(e,g){e=(e||"").replace(c,"").replace(d,"");this.fragment!==e&&(g||(this.fragment=e),n.pushSupport()?history.pushState({ts:new Date},document.title,""+b.protocol+"//"+b.host+"/"+e):x.location.hash=e,this.trackPageview(e))},trackPageview:function(b){""===
b&&(b=y.isLoggedIn()?"boards":"landing");"undefined"!==typeof _gaq&&null!==_gaq&&(_gaq.push(["_setAccount","UA-225715-29"]),_gaq.push(["_trackPageview","/"+b]))}})})()}if(B("alert")){var aa,h=function(c,b){return function(){return c.apply(b,arguments)}};aa=new (function(){function c(){this.hideAll=h(this.hideAll,this);this.hide=h(this.hide,this);this.showHtml=h(this.showHtml,this);this.show=h(this.show,this);this._showHideContainer=h(this._showHideContainer,this);this._show=h(this._show,this);this._hide=
h(this._hide,this);var b,c,d;d=null;b=h(function(){clearTimeout(d);this.hide("connection");return this.showHtml(s.fill("connect_failed",{msg:"Could not connect to Trello."}),"error","connectionDead")},this);$(rpc).bind("connect_failed",b);$(rpc).bind("reconnect_failed",b);c=h(function(){clearTimeout(d);return this.hide("connection")},this);b=h(function(){clearTimeout(d);return d=setTimeout(h(function(){d=null;return this.show("Attempting to restore connection.  Changes made now may not be saved.",
"error","connection")},this),500)},this);$(x.Api).bind("reconnect",c);$(x.Api).bind("connecting",b);$(rpc).bind("reconnect",c);$(rpc).bind("connecting",b)}c.prototype._alerts={};c.prototype._hide=function(b){var c;c=this._alerts[b];null!=c&&c.timeout&&clearTimeout(c.timeout);delete this._alerts[b];$("#notification_"+b).remove();return this._showHideContainer()};c.prototype._show=function(b,c,d,f,g){var i;J("alerts","show",b,c,d,f,g);this._hide(f);g&&(i=setTimeout(h(function(){return this.hide(f)},
this),g));this._alerts[f]={timeout:i};d=$("<div>").attr("id","notification_"+f).addClass(d).appendTo("#notification");c?d.html(b):d.text(b);return this._showHideContainer()};c.prototype._showHideContainer=function(){return $("#notification").toggle(!_.isEmpty(this._alerts))};c.prototype.show=function(b,c,d,f){return this._show(b,!1,c,d,f)};c.prototype.showHtml=function(b,c,d,f){return this._show(b,!0,c,d,f)};c.prototype.flash=function(b,c,d){return this._show(b,!1,c,d,2E3)};c.prototype.hide=function(b){J("alerts",
"hide",b);return this._hide(b)};c.prototype.hideAll=function(){var b,c;c=[];for(b in this._alerts)c.push(this.hide(b));return c};return c}())}B("desktop_notification")&&(x.DesktopNotifications=function(){var c,b;c=x.webkitNotifications;return b={exists:function(){return null!=c},permission:function(){return b.exists()?c.checkPermission():2},enabled:function(){return 0===b.permission()},denied:function(){return 2===b.permission()},notEnabled:function(){return 1===b.permission()},requestPermission:function(e){if(b.notEnabled())return c.requestPermission(e)},
notify:function(e,d){var f,g;null==d&&(d=e,e=null);f=d.html;b.enabled()&&f&&(g=null!=e?e:Math.floor(1E5*Math.random()),null==T.get("notification_lock_"+g)&&(T.set("notification_lock_"+g,"locked"),null==T.get("notification_"+g)&&(T.set("notification_"+g,f),f=c.createHTMLNotification("/notify.html#"+g),f.onclose=function(){var b;b=T.get("notification_response_"+g);T.unset("notification_response_"+g);"function"===typeof d.close&&d.close(b)},f.onclick=function(){x.focus();this.cancel();"function"===typeof d.click&&
d.click(this)},f.show(),f=_.once(function(){return T.unset("notification_lock_"+g)}),_.delay(f,5E3),$(x).bind("unload",f))))}}}());B("keyboard")&&$(function(){var c,b,e,d,f,g,h;c=null;g="";h=function(){c=null;return g=""};b=function(b,d){g=b;return c=d};$(document).mousemove(function(){if(!t.isVisible()&&!DragSort.sorting)return N.fMouseSelect=!0});f=function(b){var d,e;return I.isVisible&&"Card"!==(null!=(d=I.view)?null!=(e=d.model)?e.typeName:void 0:void 0)||Browser.isTouch()||t.isVisible()&&!c||
n.jqGetActiveElement().is("input:visible,textarea:visible")||b.ctrlKey||b.altKey||b.metaKey};$(document).keydown(function(b){var c,g;return f(b)||b.shiftKey&&!((c=b.which)===Nb||c===Pb||c===db)?void 0:(g=b.keyCode)===Z||g===ha||g===Y||g===ma||g===db||g===Mb||g===da?e(b):d(b)});$(document).keypress(function(b){if(0===b.keyCode&&b.charCode===Qb&&b.shiftKey&&!f(b))return e(b)});e=_.throttle(function(b){var d,e,f,g,h,i,s,u,x,B,H,G;switch(b.which){case Mb:if(I.isVisible||t.isVisible()||R.isEditing())break;
q("Keyboard Shortcuts","Header Boards Menu");n.stop(b);return $(".js-open-header-boards-menu").click();case db:case Qb:return q("Keyboard Shortcuts","Shortcuts page"),Controller.saveLocation("shortcuts"),Controller.manualView();case da:b=$(".list-card.active-card").first();if(!b)break;b=I.isVisible?null!=(G=I.view)?G.model:void 0:c||b.data("card");if(!b)break;if(I.isVisible){if(0<$(I.view.el).find(".card-detail-title").length&&!t.isVisible()&&!R.isEditing()&&b.getBoard().editableByMember(y.me()))return q("Keyboard Shortcuts",
"Enter - Open Card"),_.delay(function(){return $(I.view.el).find(".window-title-text.current").click()},30)}else return q("Keyboard Shortcuts","Enter - Edit Card Title"),$(b.view.el).click();break;case Z:case ha:case Y:case ma:if(I.isVisible||t.isVisible()||R.isEditing()||"undefined"!==typeof boardView&&null!==boardView&&boardView.cardComposerState.vis)break;N.fMouseSelect=!1;N.cardToSelect=null;H=$(".list-card.active-card").first();G=$(".list.active-list").first();g=[];$(".list").each(function(b){b=
$(".list")[b];if(0<$(b).find(".list-card:visible").length)return g.push(b)});f=g.length;i=x="";$(g).each(function(b){if($(g[b]).hasClass("active-list"))return i=g[b+1],x=g[b-1]});e=$(".list").index(g[0]);f=$(".list").index(g[f-1]);e*=179;f*=179;s=0;i&&(s=$(".list").index(i),s*=179);B=0;x&&(B=$(".list").index(x),B*=179);h=u="";d=$(".list-card:visible");d.each(function(b){var c,e;c=d[b];e=b-1;b+=1;if($(c).hasClass("active-card"))return h=d[b],u=d[e]});$(".list-card.active-card").removeClass("active-card");
$(".list.active-list").removeClass("active-list");b.which===Z?(q("Keyboard Shortcuts","Keyboard Nav","Up"),0===H.length?$(g).last().find(".list-card:visible:last").addClass("active-card"):($(u).addClass("active-card"),b=$(H).height()+6,$(G).find(".list-cards").animate({scrollTop:"-="+b},75))):b.which===ha?(q("Keyboard Shortcuts","Keyboard Nav","Right"),0===H.length?($(g).first().find(".list-card:visible:first").addClass("active-card"),$(g).first().find(".list-cards").animate({scrollTop:0},75),$(".list-area-wrapper").animate({scrollLeft:e},
75)):($(i).find(".list-cards").animate({scrollTop:0},75),$(i).find(".list-card:visible:first").addClass("active-card"),$(".list-area-wrapper").animate({scrollLeft:s},75))):b.which===Y?(q("Keyboard Shortcuts","Keyboard Nav","Down"),0===H.length?$(g).first().find(".list-card:visible:first").addClass("active-card"):($(h).addClass("active-card"),b=$(H).height()+6,$(G).find(".list-cards").animate({scrollTop:"+="+b},75))):b.which===ma&&(q("Keyboard Shortcuts","Keyboard Nav","Left"),0===H.length?($(g).last().find(".list-card:visible:first").addClass("active-card"),
$(g).last().find(".list-cards").animate({scrollTop:0},75),$(".list-area-wrapper").animate({scrollLeft:f},75)):($(x).find(".list-cards").animate({scrollTop:0},75),$(x).find(".list-card:visible:first").addClass("active-card"),$(".list-area-wrapper").animate({scrollLeft:B},75)));return $(".list-card.active-card").first().closest(".list").addClass("active-list")}},25);return d=_.throttle(function(d){var e,f,o,s,u;if(!I.isVisible&&!t.isVisible()&&!R.isEditing()&&(WindowSize.fLarge||WindowSize.fExtraLarge))switch(d.which){case Kc:q("Keyboard Shortcuts",
"Q - My cards");y.me()&&y.isLoggedIn()&&($("#board"),S.fQActive?(S.clearAllCardFilters(),S.fQActive=!1):(S.filterMyCards(),S.fQActive=!0));break;case Hc:q("Keyboard Shortcuts","F - Search and Filter Cards");n.stop(d);$(".js-filter-cards").click();return;case Oc:q("Keyboard Shortcuts","X - Clear All Filters"),S.clearAllCardFilters()}if(f=$(".list-card.active-card").first())if(o=I.isVisible?null!=(u=I.view)?u.model:void 0:c||f.data("card"))if(u=!o.getBoard().editableByMember(y.me()),n.stop(d),c){if(!u){if("labels"===
g)switch(d.which){case Na:case Hb:case Ib:case Jb:case Kb:case Lb:f=d.which-Na,f<o.labels.length&&o.toggleLabel(o.labels[f])}t.hide();g=c=null}}else{if(!u)switch(d.which){case Gc:case Dc:q("Keyboard Shortcuts","C / Delete - Archive Card");f=$(o.view.el).next(".list-card:visible");$(o.view.el).remove();N.selectCard(f);N.cardToSelect=f;o.close();break;case Pb:q("Keyboard Shortcuts","> - Move to Next List");o.moveToNextList();break;case Nb:q("Keyboard Shortcuts","< - Move to Previous List");o.moveToPrevList();
break;case Mc:q("Keyboard Shortcuts","Space - Toggle Assigning Self");o.toggleMember(y.myId());break;case ka:I.isVisible?t.isVisible()?t.hide():(q("Keyboard Shortcuts","A - Assign Members","Card Detail"),b("members",o),$(I.view.el).find(".js-change-card-members").click()):(q("Keyboard Shortcuts","A - Assign Members","Board View"),b("members",o),N.fMouseSelect=!1,t.toggle({elem:f.find(".js-card-menu")[0],pointer:"right",location:"center",view:o.getView(pb,"keyboard",{hideOnEnter:!0}),shown:function(b){return b.find(".filter-members").select().focus()}}));
break;case Jc:if(I.isVisible)return;q("Keyboard Shortcuts","N - Insert Card");q("Card Composer","Open","Via 'n' Keyboard Shortcut");e=$(".list-card.active-card");f=$(".list.active-list").first();s=f.find(".list-card");u=$(".list");e=_.indexOf(s,e[0])+1;f=_.indexOf(u,f[0]);f=boardView.model.listList.filter(function(b){return!b.get("closed")})[f].id;boardView.cardComposerState.pos.idList=f;boardView.cardComposerState.pos.cardPos=e;boardView.model.getView(fa).updatePositionOnBoard();break;case Lc:o.get("subscribed")?
(q("Keyboard Shortcuts","S - Subscribe","Subscribe"),o.subscribe(!1)):(q("Keyboard Shortcuts","S - Subscribe","Unsubscribe"),o.subscribe(!0));return;case Ic:I.isVisible?(q("Keyboard Shortcuts","L - Edit Labels","On Card Detail"),t.isVisible()?t.hide():(b("labels",o),$(I.view.el).find(".js-edit-labels").click())):(q("Keyboard Shortcuts","L - Edit Labels","On Board View"),b("labels",o),N.fMouseSelect=!1,t.toggle({elem:$(f).find(".js-card-menu"),view:o.getView(Ia,"keyboard",{showShortcuts:!0,hideOnSelect:!0}),
pointer:"right",location:"center",hidden:h}));break;case Fc:I.isVisible?t.isVisible()?t.hide():(q("Keyboard Shortcuts","D - Due Dates","On Card Detail"),$(I.view.el).find(".js-add-due-date").is(":visible")?(b("date",o),$(I.view.el).find(".js-add-due-date").click()):$(I.view.el).find(".js-change-due-date").is(":visible")&&(b("date",o),$(I.view.el).find(".js-change-due-date").click())):(q("Keyboard Shortcuts","D - Due Dates","On Board View"),b("date",o),N.fMouseSelect=!1,t.toggle({elem:$(f).find(".js-card-menu"),
view:o.getView(qb,"keyboard"),pointer:"right",location:"center",hidden:h}));break;case Na:case Hb:case Ib:case Jb:case Kb:case Lb:q("Keyboard Shortcuts","1-6 - Toggle Specific Label");f=d.which-Na;f<o.labels.length&&o.toggleLabel(o.labels[f]);break;default:J("keyboard",d.which)}switch(d.which){case Nc:q("Keyboard Shortcuts","V - Vote"),o.toggleVote()}}},250)});if(B("trellis-client")){if(x.unsupported)return;$(function(){x.Controller=new te;Backbone.history.start()});(function(){var c;c=y.updateToken();
return setInterval(function(){var b;b=y.updateToken();b!==c&&x.location.reload();return c=b},3E3)})()}B("doc_init")&&($(document).ready(function(){var c;Browser.init();WindowSize.calc();c=_.debounce(function(){WindowSize.calc();N.saveScrolls();N.calc();return N.restoreScrolls()},300);$(x).resize(c);x.orientationchange=I.calcPos;"placeholder"in document.createElement("input")||$('input[placeholder]:not(".js-no-ie-placeholder"), textarea[placeholder]:not(".js-no-ie-placeholder")').live({focus:function(){var b;
b=$(this);if(b.hasClass("placeholder"))return b.removeClass("placeholder").val("")},blur:function(){var b;b=$(this);if(""===b.val().trim())return b.addClass("placeholder").val(b.attr("placeholder"))}});$(".header-signup").live("click",function(){return q("Header","Sign Up")});$(".js-show-search").click(function(){return $(this).closest("#header").toggleClass("show-search")});$(".header-logo").live("click",function(){return q("Header","Logo","Home")});$(".js-info-about").live("click",function(){return q("Info",
"Page - About")});$(".js-info-help").live("click",function(){return q("Info","Page - Help")});$(".js-info-guide").live("click",function(){return q("Info","Page - Guide")});$(".js-info-privacy").live("click",function(){return q("Info","Page - Privacy, Security, Data")});$(".js-info-shortcuts").live("click",function(){return q("Info","Page - Shortcuts")});$(".js-info-trello-dev").live("click",function(){return q("Info","Page - Trello Dev Board")});$(".js-info-api").live("click",function(){return q("Info",
"Page - API")});$(".js-info-tos").live("click",function(){return q("Info","Page - Terms of Service")});$(".js-info-blog").live("click",function(){return q("Info","Page - Trello Blog")});$(".js-info-twitter").live("click",function(){return q("Info","Page - Twitter Link")});$(".js-info-facebook").live("click",function(){return q("Info","Page - Facebook Link")});$(".js-info-fogcreek").live("click",function(){return q("Info","Page - Fog Creek Link")});$(".window-overlay").click(function(b){if(!($(b.target).is("a[href^='/']")||
0<$(b.target).closest(".window-wrapper").length)){n.stopPropagation(b);if(R.isEditing())return R.cancelEdits();if($(".new-comment").hasClass("focus"))$(".new-comment").removeClass("focus");else return t.isVisible()?t.hide():I.hide()}});$(".window-wrapper").click(function(b){if(!$(b.target).is("a[href^='/']")&&!($(b.target).closest("a").hasClass("js-real-link")||0<b.button))$(b.target).is("a")&&"#"!==$(b.target).attr("href")?n.stopPropagation(b):$(b.target).is("a")&&$(b.target).hasClass("js-close-window")?
(n.stop(b),I.hide()):$(".new-comment").hasClass("focus")?$(".new-comment").removeClass("focus"):$(b.target).is("input")?n.stopPropagation(b):(t.isVisible()&&t.hide(),R.cancelEdits(),n.stop(b))});$("#surface").click(function(b){if($(b.target).is("input")||$(b.target).is("textarea"))n.stopPropagation(b);else if($(".new-comment").hasClass("focus"))$(".new-comment").removeClass("focus");else{if(t.isVisible())return t.hide();if(R.isEditing())return R.cancelEdits();if("undefined"!==typeof boardView&&null!==
boardView&&boardView.cardComposerState.vis&&0<!$(b.target).closest(".card-composer").length)return"undefined"!==typeof boardView&&null!==boardView?boardView.model.getView(fa).hide():void 0}});$("a[href=#]").live("click",function(b){return n.preventDefault(b)});return $(document).keyup(function(b){if(27===b.keyCode){if(R.isEditing())return R.cancelEdits();if(t.isVisible())return t.hide();if("undefined"!==typeof boardView&&null!==boardView&&boardView.cardComposerState.vis)return"undefined"!==typeof boardView&&
null!==boardView?boardView.model.getView(fa).hide():void 0;I.hide();$("input").blur();return $("textarea").blur()}})}),$.fn.fixPlaceholder=function(){if("placeholder"in document.createElement("input"))return this;this.filter('input[placeholder]:not(".js-no-ie-placeholder"), textarea[placeholder]:not(".js-no-ie-placeholder")').each(function(){var c;c=$(this);return c.addClass("placeholder").val(c.attr("placeholder"))});return this});if(B("time")){var wb;wb=new (function(){function c(){}c.prototype.delta=
T.get("serverTimeDelta");c.prototype.updateServerTime=function(b){this.delta=new Date(b)-new Date;T.set("serverTimeDelta",this.delta);return J("time","delta",this.delta)};c.prototype.serverToClient=function(b){return new Date(new Date(b)-this.delta)};return c}())}if(B("dates")){var V;x.Dates=V=new (function(){function c(){}var b,e;e="";b=function(){var b,c,g;b=V.parse($(this).attr("dt"));b=wb.serverToClient(b);g=Math.abs((e-b.getTime())/1E3);c=b>e;$(this).text(function(){var e,h;if(10>g)return c?
"now":"just now";if(120>g)return c?"in a minute":"a minute ago";h=Math.floor(g/60);if(60>h)return c?"in "+h+" minutes":""+h+" minutes ago";if(120>h)return c?"in an hour":"an hour ago";e=Math.floor(h/60);h=" at "+b.toString("h:mmtt").toLowerCase();if(24>e)return c?"in "+e+" hours":""+e+" hours ago";if(48>e)return(c?"tomorrow":"yesterday")+h;e=Math.floor(e/24);return 3>e?(c?"in "+e+" days":""+e+" days ago")+h:90>e?b.toString("MMM d")+h:b.toString("MMM d, yyyy")+h});$(this).is("[title]")||$(this).attr("title",
""+b.toLocaleDateString()+" "+b.toLocaleTimeString())};c.prototype.isUS=/en-us/i.test(navigator.language||navigator.browserLanguage);c.prototype.update=function(c){e=(new Date).getTime();$(c).find(".date[dt]").each(b)};c.prototype.parse=function(b){var c;null==b&&(b="");this.isUS||(b=b.replace(/(?:^|\s)(\d{1,2})[\/-](\d{1,2})(?:[\/-](\d\d{2,4}))?(?:$|\s)/g,function(b,c,d,e){return 12>=d?null!=e?""+d+"/"+c+"/"+e+" ":""+d+"/"+c+" ":b}));c=new Date(b);return isNaN(c)?new Date(b.replace(/-/g,"/").replace(/T|Z|\.\d+/g,
" ")+" GMT"):c};c.prototype.toLongString=function(b){var c;c=Date.today();return c.getYear()===b.getYear()?c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()?"Today at "+b.toString("h:mm tt"):""+b.toString("MMM d")+" at "+b.toString("h:mm tt"):""+b.toString("MMM d, yyyy")+" at "+b.toString("h:mm tt")};return c}());$(function(){return setInterval(function(){V.update("body")},1E4)})}if(B("adminAlert")){var ve;ve=new (function(){function c(){}c.prototype.show=function(b){var c,d,f,g;c=b.alertType;
d=b.data;f=b.date;b=b.dateExpires;V.parse(f);b=V.parse(b);switch(c){case "text":return 0<(null!=d?null!=(g=d.text)?g.length:void 0:void 0)?(c=wb.serverToClient(b)-new Date,aa.show(d.text,"info","admin",c)):aa.hide("admin")}};c.prototype.process=function(b){if(b.length)return this.show(b[0])};return c}());$(rpc).bind("adminAlert",function(c,b){return ve.show(b.deltas.msg)})}if(B("search")){var Da,we,tc,ue,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,
u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};Da=new (function(){function c(){}c.prototype.getResults=function(b,c,d){var f;f=c.limit;c=c.partial;null!=f?f:f=5;null!=c?c:c=!0;b={query:b,limit:f,partial:c};Controller.onAnyBoardView()&&(b.idBoard=Controller.idBoardCurrent);return $.post("/api/app/search",{token:y.myToken(),data:b},d)};c.prototype.navigateToSearch=function(b){return $(x).triggerHandler("navigate",
"/search?q="+escape(b))};c.prototype.init=function(){var b;b=new we;return $("#header-search").html(b.render().el)};return c}());we=function(){function c(){this.doSearch=h(this.doSearch,this);this.updateSearch=h(this.updateSearch,this);this.submitSearch=h(this.submitSearch,this);this.doSearchDebounced=_.debounce(this.doSearch,500);this.submitted=!1;c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.tagName="form";c.prototype.events={"input #search-text":"updateSearch","keydown #search-text":"updateSearch",
"click #search-submit":"submitSearch","click .js-search-submit":"submitSearch"};c.prototype.render=function(){$(this.el).html(s.fill("search_input"));return this};c.prototype.submitSearch=function(b){var c;c=$("#search-text").val();n.stop(b);this.submitted=!0;t.hide();n.stop(b);return Controller.onAnyBoardView&&n.isShortId(c)?(b=Models.Card.find("idShort",parseInt(c,10))[0],c=null!=b?Controller.getCardUrl(b):Controller.getCardUrlWithoutModels(Controller.idBoardCurrent,c,""),x.navigate(c)):Da.navigateToSearch(c)};
c.prototype.updateSearch=function(b){var c;if(n.isSubmitKey(b.keyCode))return this.submitSearch(b);if(!((c=b.keyCode)===ia||c===sa||c===la||c===ma||c===ha||c===Z||c===Y||c===ta))return this.submitted=!1,this.doSearchDebounced()};c.prototype.doSearch=function(){var b,c;if(!this.submitted){b=$(this.el).find("#search-text");c=b.val();if(n.isValidSearch(c))return Da.getResults(c,{limit:5,partial:!0},h(function(d){this.searchResultsView||(this.searchResultsView=new tc({truncated:!0}));this.searchResultsView.setResults(d);
this.searchResultsView.setQuery(c);return t.show({elem:b,top:b.outerHeight()+8,view:this.searchResultsView,elActive:b})},this));t.hide()}};return c}();tc=function(){function c(){this.showAllResults=h(this.showAllResults,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Search Results"};c.prototype.setResults=function(b){this.results=b};c.prototype.setQuery=function(b){this.query=b};c.prototype.events={"click .js-all-search-results":"showAllResults"};
c.prototype.getHighlights=function(b,c,d){var f,g,h,j;g=RegExp("(.*?)("+c.join("|")+")","ig");h=[];f=0;b=b.replace(/\s+/g," ");for(j=function(b,c,e){if(!d||40>b.length)return b;if(e)return(e=/^.{30}\w*/.exec(b))&&e[0].length<b.length?e[0]+"...":b;if(c)return(c=/\w*?.{30}$/.exec(b))&&c[0].length<b.length?"..."+c[0]:b;e=/^.{20}\w*/.exec(b);c=/\w*?.{20}$/.exec(b);return e&&c&&e[0].length+c[0].length<b.length?e[0]+"..."+c[0]:b};c=g.exec(b);)f=c[1],f.length&&h.push({isHit:!1,text:j(c[1],0===h.length,!1)}),
h.push({isHit:!0,text:c[2]}),f=g.lastIndex;f<b.length&&h.push({isHit:!1,text:j(b.substr(f),0===h.length,!0)});return s.fill("search_highlights",{results:h})};c.prototype.render=function(){var b,c,d,f,g,h,j,m,l,o,q,t;d=[];if(null!=this.results){m=["card","board","org","member"];for(f=0,h=m.length;f<h;f++)if(b=m[f],null!=(l=this.results[b])&&l.length){d.push({isCategoryLabel:!0,categoryClass:b,category:null!=(o=this.results[b])?null!=(q=o[0])?q.category:void 0:void 0});t=this.results[b];for(g=0,j=t.length;g<
j;g++)c=t[g],c.categoryClass=b,c["is"+n.capitalize(b)]=!0,null!=c.label&&(c.labelHTML=this.getHighlights(c.label,this.results.terms,!1)),null!=c.matchText&&(c.matchTextHTML=this.getHighlights(c.matchText,this.results.terms,!0)),d.push(c)}}b={list:d,empty:0===d.length,loading:!this.results,truncated:this.options.truncated};$(this.el).html(s.fill("search_results",b,{},{member:s.member}));return this};c.prototype.showAllResults=function(){t.hide();return Da.navigateToSearch(this.query)};return c}();
ue=function(){function c(b,e){this.searchResultsView=new tc({truncated:!1});this.searchResultsView.setQuery(e);Da.getResults(e,{limit:100,partial:!1},h(function(b){this.searchResultsView.setResults(b);return this.searchResultsView.render()},this));c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.className="search-results-page-contents";c.prototype.render=function(){$(this.el).empty().append(this.searchResultsView.render().el);return this};return c}();$(function(){return Da.init()})}if(B("track")){var q;
q=function(c,b,e,d){var f;return null!=(f=x._gaq)?f.push(["_trackEvent",c,b,e,d]):void 0}}if(B("autocomplete")){var nc,h=function(c,b){return function(){return c.apply(b,arguments)}},G=Object.prototype.hasOwnProperty,u=function(c,b){function e(){this.constructor=c}for(var d in b)G.call(b,d)&&(c[d]=b[d]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};nc=function(){function c(){this.selectAllCommenters=h(this.selectAllCommenters,this);this.selectAllBoardMembers=h(this.selectAllBoardMembers,
this);this.selectAllCardMembers=h(this.selectAllCardMembers,this);this.insertMember=h(this.insertMember,this);this.fillMembers=h(this.fillMembers,this);this.deselectMember=h(this.deselectMember,this);this.hoverItem=h(this.hoverItem,this);this.filterMentionables=h(this.filterMentionables,this);this.keyupEvent=h(this.keyupEvent,this);this.getMembers=h(this.getMembers,this);this.render=h(this.render,this);c.__super__.constructor.apply(this,arguments)}u(c,L);c.prototype.getViewTitle=function(){return"Mention..."};
c.prototype.events={"hover .js-select-member":"hoverItem","click .js-select-member":"insertMember","click .js-select-all-card-members":"selectAllCardMembers","hover .js-select-all-card-members":"deselectMember","click .js-select-all-board-members":"selectAllBoardMembers","hover .js-select-all-board-members":"deselectMember","click .js-select-all-commenters":"selectAllCommenters","hover .js-select-all-commenters":"deselectMember",keydown:"keydownEvent"};c.prototype.render=function(){var b;b={};this.options.input&&
(b.input=!0);this.options.button&&(b.button=!0);$(this.el).html(s.fill("popover_auto_mentioner",b));this.memsEl=$(this.el).find(".js-available-members");this.getMembers();0<this.idCardMems.length&&($(this.el).find(".js-select-all-card-members").css({display:"block"}),$(this.el).find(".js-select-all-card-members .mem-count").html("("+this.idCardMems.length+")"));0<this.idBoardMems.length&&($(this.el).find(".js-select-all-board-members").css({display:"block"}),$(this.el).find(".js-select-all-board-members .mem-count").html("("+
this.idBoardMems.length+")"));0<this.idCommenters.length&&($(this.el).find(".js-select-all-commenters").css({display:"block"}),$(this.el).find(".js-select-all-commenters .mem-count").html("("+this.idCommenters.length+")"));(0<this.idBoardMems.length||0<this.idCardMems.length||0<this.idCommenters.length)&&$(this.el).find(".js-select-multiple-options").css({display:"block"});this.options.button?this.fillMembers(this.idAllMembers):this.options.input&&this.filterMentionables();_.delay(h(function(){return $(this.el).find(".js-filter-mentionables").keyup(this.keyupEvent)},
this),20);return this};c.prototype.getMembers=function(){var b,c,d;d=y.myId();c=this.model;b=c.board;this.idCardMems=_.without(c.getIdCardMems(),d);this.idBoardMems=_.without(b.getIdBoardMems(),d);this.idCommenters=_.without(c.getIdCommenters(),d);return this.idAllMembers=_.uniq(this.idCardMems.concat(this.idBoardMems).concat(this.idCommenters))};c.prototype.clearMemberList=function(){return this.memsEl.empty()};c.prototype.keydownEvent=function(b){var c;if((c=b.keyCode)===ua||c===da)n.stop(b),this.memsEl.find(".item.selected:first .js-select-member").click()};
c.prototype.keyupEvent=function(b){var c,d;if(!((c=b.keyCode)===ua||c===da))if((d=b.keyCode)===Z||d===ha||d===Y||d===ma)n.navMenuList(this.memsEl,".item",b.keyCode);else return this.filterMentionables()};c.prototype.filterMentionables=function(){var b,c,d,f,g,h,j;this.clearMemberList();this.options.button?f=$(".js-filter-mentionables").val().trim().toLowerCase():this.options.input&&(b=$(".new-comment-input")[0],b=n.getWordFromCaret(b),f=b.str.substring(1).toLowerCase());g=RegExp("^"+f);b=this.idAllMembers;
this.idMatchMems=[];for(h=0,j=b.length;h<j;h++)c=b[h],d=n.getMemNameArray(c),_.detect(d,function(b){return g.test(b)})&&this.idMatchMems.push(c);if(this.options.input&&(1===this.idMatchMems.length&&f===Models.Member.get(this.idMatchMems[0]).get("username")||0===this.idMatchMems.length))_.delay(function(){return t.hide()},5);else return this.fillMembers(this.idMatchMems),n.selectMenuItem(this.memsEl,".item",this.memsEl.find(".item").first())};c.prototype.hoverItem=function(b){b=$(b.target).closest(".item");
return n.selectMenuItem(this.memsEl,".item",b)};c.prototype.deselectMember=function(){return this.memsEl.find(".item").removeClass("selected")};c.prototype._membersFromIds=function(b){return _.compact(_.map(b,function(b){return Models.Member.get(b)}))};c.prototype.fillMembers=function(b){var c,d,f;c=this._membersFromIds(b).slice(0,5);for(d=0,f=c.length;d<f;d++)b=c[d],this.memsEl.append(s.fill("select_member",b.toJSON(),{},{member:s.member}));0===c.length&&this.memsEl.html("<p class='quiet' style='padding: 8px 8px 4px;'>No matching members</p>")};
c.prototype.insertMember=function(b){var c,d;n.stop(b);q("Card Detail","Mention Member Autocomplete","Insert");c=$(b.target).closest(".js-select-member").find(".username").text();b=$(".new-comment-input")[0];this.options.button?n.insertSelection(b,"@"+c+" "):this.options.input&&(d=n.getWordFromCaret(b),n.insertSelection(b,"@"+c+" ",d.start,d.end));t.hide()};c.prototype.selectAllCardMembers=function(b){var c,d,f,g,h;n.stop(b);q("Card Detail","Mention Member Autocomplete","Insert - All Card Members");
b=$(".new-comment-input").focus();c="";h=this.idCardMems;for(f=0,g=h.length;f<g;f++)d=h[f],d=Models.Member.get(d).get("username"),c+="@"+d+" ";n.insertSelection(b,c);t.hide()};c.prototype.selectAllBoardMembers=function(b){var c,d,f,g,h;n.stop(b);q("Card Detail","Mention Member Autocomplete","Insert - All Board Members");b=$(".new-comment-input").focus();c="";h=this.idBoardMems;for(f=0,g=h.length;f<g;f++)d=h[f],d=Models.Member.get(d).get("username"),c+="@"+d+" ";n.insertSelection(b,c);t.hide()};c.prototype.selectAllCommenters=
function(b){var c,d,f,g,h;n.stop(b);q("Card Detail","Mention Member Autocomplete","Insert - All Commenters");b=$(".new-comment-input").focus();c="";h=this._membersFromIds(this.idCommenters);for(f=0,g=h.length;f<g;f++)d=h[f],d=d.get("username"),c+="@"+d+" ";n.insertSelection(b,c);t.hide()};return c}()}B("desktopNotification",!0)&&$(function(){var c;if(T.enabled()&&(setTimeout(function(){return x.close()},1E4),c=location.hash.substr(1),/^[a-f0-9]+$/.test(c)))return c="notification_"+c,$("#desktop-notification>div").html(T.get(c)),
T.unset(c)})}})(window);
